parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"cPXi":[function(require,module,exports) {
"use strict";var e,a,t,r,o,n,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CorePlayerType=exports.ExternalEventType=exports.ApiErrorCode=exports.P2PType=exports.CodecType=exports.FormatType=exports.ProtocolType=void 0,function(e){e.HTTP_HLS="http_hls",e.HTTP_STREAM="http_stream"}(e=exports.ProtocolType||(exports.ProtocolType={})),function(e){e.FLV="flv",e.TS="ts",e.FMP4="fmp4"}(a=exports.FormatType||(exports.FormatType={})),function(e){e.AVC="avc",e.HEVC="hevc"}(t=exports.CodecType||(exports.CodecType={})),function(e){e[e.HLS_NOT_P2P=-1]="HLS_NOT_P2P",e[e.NONE=0]="NONE",e[e.HLS_BILI=1]="HLS_BILI",e[e.FLV_QVB=8]="FLV_QVB"}(r=exports.P2PType||(exports.P2PType={})),function(e){e[e.AreaBlock=6005]="AreaBlock"}(o=exports.ApiErrorCode||(exports.ApiErrorCode={})),function(e){e.Initialized="initialized",e.PlayerStateChange="playerStateChange",e.LiveStateChange="liveStateChange",e.StartPlayRound="startPlayRound",e.VideoStateChange="videoStateChange",e.FullscreenChange="fullscreenChange",e.Playing="playing",e.Paused="paused",e.SwitchLine="switchLine",e.SwitchQuality="switchQuality",e.WebFullscreen="webFullscreen",e.FeedBackClick="feedBackClick",e.BlockSettingClick="blockSettingClick",e.Set="set",e.Reload="reload",e.GuidChange="guidChange",e.InitDanmaku="initDanmaku",e.AddDanmaku="addDanmaku",e.SendDanmaku="sendDanmaku",e.ReceiveOnlineCount="receiveOnlineCount",e.ReceiveMessage="receiveMessage",e.UserLogin="userLogin",e.SendGift="sendGift",e.FirstLoadedAPIPlayer="firstLoadedAPIPlayer",e.FirstLoadedAPIPlayurl="firstLoadedAPIPlayurl",e.FirstLoadStart="firstLoadStart",e.FirstLoadedMetaData="firstLoadedMetaData",e.FirstPlaying="firstPlaying",e.EnterTheRoom="enterTheRoom",e.OperableElementsChange="operableElementsChange",e.AutoPlay="autoPlay",e.SwitchQualityNotLogin="switchQualityNotLogin",e.Recommend="recommend",e.DanmakuMaskChange="danmakuMaskChange",e.DanmakuMaskStatusChange="danmakuMaskStatusChange",e.CtrlVisibleChange="ctrlVisibleChange",e.WebPlayerCreated="webPlayerCreated",e.FirstFrame="FirstFrame",e.SEIData="SEIData",e.VolumeChange="VolumeChange"}(n=exports.ExternalEventType||(exports.ExternalEventType={})),function(e){e.fMp4Player="fMp4Player",e.Hls7Player="Hls7Player",e.NativePlayer="NativePlayer"}(i=exports.CorePlayerType||(exports.CorePlayerType={}));
},{}],"MFFc":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function u(e){try{c(n.next(e))}catch(t){i(t)}}function a(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,a)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(a){i=[6,a],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function n(t){return t instanceof Error?String(t):"object"===e(t)?JSON.stringify(t,function(e,t){return t instanceof Error?String(t):t}):String(t)}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function i(e){var t=e.buffered;return null==t||0===t.length?0:t.end(t.length-1)-e.currentTime}function u(e){var t,r,n=document.cookie;return null==n?"":null!==(r=null===(t=n.split(";").filter(function(e){return e.trim().length>0}).map(function(e){return e.split("=")}).map(function(e){var t=e[0],r=e[1];return[t.trim(),r.trim()]}).find(function(t){return t[0]===e}))||void 0===t?void 0:t[1])&&void 0!==r?r:""}function a(e,t){var r;if(null!=e){var n=t.querySelector(".web-player-video-cover-img");if(null==n){var o=document.createElement("div");o.classList.add("web-player-video-cover-img-wrap"),o.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  ";var i=document.createElement("img");i.classList.add("web-player-video-cover-img"),i.style.cssText="\n    max-width: 100%;\n    max-height: 100%;\n  ",i.src=e,o.appendChild(i),t.appendChild(o)}else n.src=e}else null===(r=t.querySelector(".web-player-video-cover-img-wrap"))||void 0===r||r.remove()}function c(e,t){var r=new Set;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r.has(e)||(r.add(e),t.apply(void 0,n))}}function l(e,t){return"number"!=typeof e?0:Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function s(e,t){var r;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(null==r||Date.now()-r>t)return r=Date.now(),e.apply(this,n)}}function f(e,t){var r;return function(){for(var n=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];void 0!==r&&window.clearTimeout(r),r=window.setTimeout(function(){e.apply(n,o)},t)}}function p(e){return t(this,void 0,Promise,function(){return r(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){setTimeout(t,e)})];case 1:return[2,t.sent()]}})})}function x(e,t){if(16!==e.length||16!==t.length)return!1;for(var r=0;r<16;++r)if(e[r]!==t[r])return!1;return!0}function d(e){for(var t=new Uint8Array(16),r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return function(e){if(16!==t.length||16!==e.length)return!1;for(var r=0;r<16;++r)if(t[r]!==e[r])return!1;return!0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWebPSupported=exports.disperseAction=exports.uint8ArrayToString=exports.seiKeyComparator=exports.equalsUuid=exports.sleep=exports.debounce=exports.throttle=exports.roundNumber=exports.runOnlyOnce=exports.coverImg=exports.getCookie=exports.remainBufferLength=exports.uuid=exports.any2Str=void 0,exports.any2Str=n,exports.uuid=o,exports.remainBufferLength=i,exports.getCookie=u,exports.coverImg=a,exports.runOnlyOnce=c,exports.roundNumber=l,exports.throttle=s,exports.debounce=f,exports.sleep=p,exports.equalsUuid=x,exports.seiKeyComparator=d;var h=null;try{h=new TextDecoder}catch(b){console.error("TextDecoder is not supported!")}function y(e){return null==h?"":h.decode(e)}function m(e,t){var r=setTimeout(function(){t()},Math.floor(Math.random()*e));return function(){clearTimeout(r)}}exports.uint8ArrayToString=y,exports.disperseAction=m;var v=function(){var e=!1;try{var t=document.createElement("canvas");t.width=1,t.height=1,e=t.toDataURL("image/webp").startsWith("data:image/webp")}catch(r){}return e};exports.isWebPSupported=v;
},{}],"GlyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=navigator.userAgent,e={chrome:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)/,edg:/Edg\/([0-9._]+)/,safari:/Version\/([0-9._]+).*Safari/},n=i.includes("Windows NT"),r=i.includes("Mac OS X"),t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod","iOS"].includes(navigator.platform)||i.includes("Mac")&&"ontouchend"in document,o=e.safari.test(i),u=e.chrome.test(i),a=e.edg.test(i),s=function(){function n(e){var n;return Number(null===(n=e.exec(i))||void 0===n?void 0:n[1].split(".")[0])}return u?n(e.chrome):a?n(e.edg):o?n(e.safari):0}();exports.default={isWin:function(){return n},isMac:function(){return r},isIOS:function(){return t},isSafari:function(){return o},isChrome:function(){return u},isEdg:function(){return a},version:function(){return s}};
},{}],"fk22":[function(require,module,exports) {
"use strict";function t(t,e){void 0===e&&(e={});var s=document.createElement(t),n=Object.assign({classname:"",attributes:[],text:"",textAsHtml:!1},e);return s.className=n.classname,s[n.textAsHtml?"innerHTML":"textContent"]=n.text,n.attributes.forEach(function(t){s.setAttribute(t[0],t[1])}),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createElement=void 0,exports.createElement=t;
},{}],"Klvu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unloading=exports.loading=void 0;var e='\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgba(0, 0, 0, 0.5); border-radius: 10px; display: block; shape-rendering: auto;" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n<g transform="rotate(0 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.8888888888888888s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(40 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.7777777777777778s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(80 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(120 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5555555555555556s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(160 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.4444444444444444s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(200 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(240 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.2222222222222222s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(280 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.1111111111111111s" repeatCount="indefinite"></animate>\n  </rect>\n</g><g transform="rotate(320 50 50)">\n  <rect x="47" y="19" rx="3" ry="6" width="6" height="12" fill="#ffffff">\n    <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate>\n  </rect>\n</g>\n</svg>\n';function t(t){t.querySelectorAll(".web-player-loading").forEach(function(e){return e.remove()});var n=document.createElement("div");n.classList.add("web-player-loading"),n.innerHTML=e,n.style.cssText="\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 10;\n    display: none;\n    pointer-events: none;\n  ",t.appendChild(n);var i=setTimeout(function(){n.style.display="flex"},500);return function(){clearTimeout(i),n.remove()}}function n(){document.querySelectorAll(".web-player-loading").forEach(function(e){return e.remove()})}exports.loading=t,exports.unloading=n;
},{}],"PFwM":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}u((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ajax=void 0;var n=require("./common-utils"),a="//api.live.bilibili.com",o=new Map,i=new Set;function s(s,u){var c;return t(this,void 0,Promise,function(){var t,l,f,p,h,d,w,b,v,y,m,g,E,x,_,j;return r(this,function(r){switch(r.label){case 0:return t=performance.now(),l=s,/^(https?:)?\/\//.test(s)||(l=a+"/"+s.replace(/^\//,"")),f=new URL(l,location.href),null==(p=o.get(f.host+f.pathname))?[3,2]:p.expiresTime>performance.now()?(h=Math.random()*p.scope,[4,n.sleep(h)]):[3,2];case 1:r.sent(),r.label=2;case 2:""!==(d=n.getCookie("bili_jct"))&&"POST"===(null==u?void 0:u.method)&&null!=(null==u?void 0:u.data)&&(w=new FormData,b=e(e({},null!==(c=u.data)&&void 0!==c?c:{}),{csrf:d,csrf_token:d}),Object.keys(b).forEach(function(e){w.append(e,b[e])}),u.body=w),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,fetch(l,e({credentials:"include"},null!=u?u:{}))];case 4:return v=r.sent(),[3,6];case 5:throw y=r.sent(),m=String(y),i.forEach(function(e){return e("requestErr",{errMsg:m,apiUrl:f.pathname})}),new Error(m);case 6:if(!v.ok)throw g="url: "+s+", status: "+v.status,i.forEach(function(e){return e("responseErr",{errMsg:"status: "+v.status,apiUrl:f.pathname})}),new Error(g);return[4,v.json()];case 7:if(E=r.sent(),i.forEach(function(e){return e("perf",{duration:performance.now()-t,apiUrl:f.pathname})}),"function"==typeof(null==u?void 0:u.handleRes))return u.handleRes(E),[2,E.data];if(x=E.code,_=E.data,j=E.message,0!==x)throw i.forEach(function(e){return e("apiBizErr",{errMsg:j,apiUrl:f.pathname})}),new Error(j);return[2,_]}})})}exports.ajax=s,s.watch=function(e){return i.add(e),function(){i.delete(e)}},s.disperse=function(e,t){var r=/^(https?:)?\/\//.test(e)?e:a+"/"+e.replace(/^\//,"");o.set(r.replace(/^(https?:)?\/\//,""),t)};
},{"./common-utils":"MFFc"}],"JKnM":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var n,o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var n,o=1,e=arguments.length;o<e;o++)for(var r in n=arguments[o])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Level=void 0,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(n=exports.Level||(exports.Level={}));var e={printToConsole:!1,debug:c,info:f,warn:s,error:a,dump:p,history:l,watch:g,stringify:b,clear:y},r=[],i=new Set;function u(u,c){var f={content:"object"===t(u)?JSON.stringify(u,function(t,n){return n instanceof Error?n.toString():n}):u,level:c,ts:Date.now()};if(r.push(f),e.printToConsole){var s=n[c].toLowerCase();console[s](u)}setTimeout(function(){i.forEach(function(t){return t(o({},f))})},1)}function c(t){u(t,n.Debug)}function f(t){u(t,n.Info)}function s(t){u(t,n.Warn)}function a(t){console.error(t),u(t,n.Error)}function l(){return r.slice(0)}function p(){return r.map(function(t){return b(t)}).join("\n")}function y(){r=[]}function g(t){return i.add(t),function(){i.delete(t)}}function b(t,o){var e=Object.assign({tag:!0,time:!0},o),r=new Date(t.ts),i=n[t.level]+" ",u=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds();return""+(e.tag?i:"")+(e.time?u:"")+"> "+t.content}exports.default=e;
},{}],"JkDX":[function(require,module,exports) {
"use strict";var t,e=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},n=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventBus=void 0;var o=function(){function o(){var n=this;t.set(this,new Map),this.on=function(r,o){var i,a=null!==(i=e(n,t).get(r))&&void 0!==i?i:new Set;return a.add(o),e(n,t).has(r)||e(n,t).set(r,a),function(){a.delete(o),0===a.size&&e(n,t).delete(r)}},this.emit=function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=e(n,t).get(r);null!=a&&a.forEach(function(t){return t.apply(void 0,o)})}}return o.forwardEvent=function(t,e,n){var o=n.map(function(n){var o=Array.isArray(n)?n:[n,n],i=o[0],a=o[1];return t.on(i,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.emit.apply(e,r([a],t))})});return function(){o.forEach(function(t){return t()})}},o.prototype.getHandlers=function(n){var r;return null!==(r=e(this,t).get(n))&&void 0!==r?r:new Set},o.prototype.once=function(t,e){var n=this.on(t,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n(),e.apply(void 0,t)});return n},o.prototype.destroy=function(){n(this,t,new Map)},o}();exports.EventBus=o,t=new WeakMap;
},{}],"BEmL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugUrlParamKeys=void 0;var e,o=new URL(location.href).searchParams;!function(e){e.P2PType="wpdP2PType",e.SupportHEVC="wpdSupportHEVC",e.Log2Console="wpdLog2Console",e.SocketMsg2Console="wpdSocketMsg2Console",e.DMRenderType="wpdDMRenderType"}(e=exports.DebugUrlParamKeys||(exports.DebugUrlParamKeys={}));var r=o.get(e.P2PType),p=o.get(e.Log2Console),l=o.get(e.SupportHEVC),s=o.get(e.SocketMsg2Console);exports.default={P2PType:null==r?null:Number(r),Log2Console:null!=p&&"0"!==p,SupportHEVC:null!=l&&"0"!==l,SocketMsg2Console:null!=s&&"0"!==s,DMRenderType:o.get(e.DMRenderType)};
},{}],"wHWR":[function(require,module,exports) {
"use strict";function e(e,t){document.querySelectorAll(".web-player-toast").forEach(function(e){return e.remove()});var n=document.createElement("div");n.classList.add("web-player-toast"),n.textContent=e,n.style.cssText="\n    font-size: 14px;\n    color: #fff;\n    background-color: rgba(0, 0, 0, 0.6);\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 11;\n    padding: 6px 12px;\n    border-radius: 6px;\n    transition: opacity 1s;\n  ",t.appendChild(n),setTimeout(function(){n.style.opacity="0"},1500),setTimeout(function(){n.remove()},2500)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"U3yD":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("./logger")),a="web-player-ui-config",n=0;function u(){var e,t=localStorage.getItem(a+":"+n),u={volume:{value:90,disabled:!1},danmaku:{display:!0,opacity:100,fontScale:100,density:100,area:4,showMaskOption:!1,enableMask:!0}};if(null===t)return u;try{e=JSON.parse(t)}catch(o){return r.default.error(o),u}return e=Object.assign({},u,e)}function o(e){n=e}function i(){return u().danmaku}function l(){return u().volume}function s(t){var r=u();localStorage.setItem(a+":"+n,JSON.stringify(e(e({},r),{volume:t})))}function c(t){var r=u();localStorage.setItem(a+":"+n,JSON.stringify(e(e({},r),{danmaku:t})))}exports.default={getDanmaku:i,getVolume:l,init:o,setDanmaku:c,setVolume:s};
},{"./logger":"JKnM"}],"f80x":[function(require,module,exports) {
"use strict";var t,e,n,r,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function u(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,u)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},s=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},u=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DBCore=void 0;var a=require("./event-bus"),h=c(require("./ua")),f=null!==(n=null!==(e=null!==(t=window.indexedDB)&&void 0!==t?t:window.mozIndexedDB)&&void 0!==e?e:window.webkitIndexedDB)&&void 0!==n?n:window.msIndexedDB,l=new a.EventBus;function d(t){return console.error(t),l.emit("error",t),!1}function v(t){return"[object Object]"===Object.prototype.toString.call(t)}function p(t,e){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))if(e[n]!==t[n])return!1}return!0}function w(t){var e=(null!=t?t:"++id").split(",").map(function(t){return t.trim()}),n=e[0],r=e.slice(1),i=n.includes("++");return{keyPath:n.replace("++",""),autoIncrement:i,indexKeys:r}}function b(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",o)},i=function(){e(t.result),r()},o=function(){n(t.error),d(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)})];case 1:return[2,e.sent()]}})})}function y(){return i(this,void 0,Promise,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return t=f.databases,h.default.isSafari()&&void 0!==t?[4,new Promise(function(n){var r=function(){t().then(n).catch(n)};e=window.setInterval(r,100),r()}).finally(function(){return clearInterval(e)})]:[2];case 1:return[2,n.sent()]}})})}function m(t,e,n){return void 0===n&&(n={}),i(this,void 0,Promise,function(){return o(this,function(r){switch(r.label){case 0:return[4,new Promise(function(r,i){y().then(function(){var o=f.open(t,e);o.onupgradeneeded=function(t){var e=o.result;"function"==typeof n.upgrade&&n.upgrade(e)},o.onsuccess=function(t){var e=o.result;r(e)},o.onerror=function(t){d(o.error),i(o.error)},o.onblocked=function(t){var e,s;if(t instanceof IDBVersionChangeEvent){var u=t,c=function(t){var e=o.result;"function"==typeof n.upgrade&&n.upgrade(e),h()},a=function(){var t=o.result;r(t),h()},h=function(){var t,e;null===(t=u.target)||void 0===t||t.removeEventListener("upgradeneeded",c),null===(e=u.target)||void 0===e||e.removeEventListener("success",a)};return null===(e=u.target)||void 0===e||e.addEventListener("upgradeneeded",c),void(null===(s=u.target)||void 0===s||s.addEventListener("success",a))}i(o.error)}}).catch(i)})];case 1:return[2,r.sent()]}})})}function g(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,b(f.deleteDatabase(t))];case 1:return[2,e.sent()]}})})}function P(t,e){var n={};if(!v(e))return n;var r=function(r){if(!t.objectStoreNames.contains(r)){var i=w(e[r]),o=i.keyPath,s=i.autoIncrement,u=i.indexKeys,c=t.createObjectStore(r,{keyPath:o,autoIncrement:s});u.forEach(function(t){c.createIndex(t,t,{unique:!1})}),n[r]=c}};for(var i in e)r(i);return n}var S=function(){function t(t){e.set(this,void 0),n.set(this,{}),r.set(this,{}),c.set(this,void 0),a.set(this,void 0),h.set(this,{status:"close"}),this.on=l.on,this.emit=l.emit,this.once=l.once,s(this,c,t)}var e,n,r,c,a,h;return t.prototype.getDatabase=function(){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return void 0!==u(this,e)?[2,u(this,e)]:[4,m(u(this,c))];case 1:return[2,t.sent()]}})})},t.prototype.version=function(t){if(isNaN(t)||t<.1)throw Error("Given version is not a positive number");return s(this,a,t),this},t.prototype.getVersion=function(){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return"number"==typeof u(this,a)?[2,u(this,a)]:[4,this.getDatabase()];case 1:return[2,t.sent().version]}})})},t.prototype.stores=function(t){return i(this,void 0,Promise,function(){var r,i,f=this;return o(this,function(o){switch(o.label){case 0:if(void 0===u(this,a))throw Error("Please use version() brefore stores()");r=u(this,c)+"-"+u(this,a),void 0===u(this,n)[r]&&(u(this,n)[r]=t),void 0!==u(this,e)&&(u(this,h).status="closeing",u(this,e).close()),o.label=1;case 1:return o.trys.push([1,3,,4]),i=[this,e],[4,m(u(this,c),u(this,a),{upgrade:function(e){P(e,t),u(f,h).status="opened"}})];case 2:return s.apply(void 0,i.concat([o.sent()])),u(this,h).status="opened",[3,4];case 3:return o.sent(),[3,4];case 4:return[2,this]}})})},t.prototype.getStoreOption=function(){var t,e=u(this,c)+"-"+(null!==(t=u(this,a))&&void 0!==t?t:"");return u(this,n)[""+e]},t.prototype.getStore=function(t){var i;if(void 0===u(this,n)[u(this,c)+"-"+(null!==(i=u(this,a))&&void 0!==i?i:"")])throw Error("Please use stores() brefore getStore()");if(void 0===u(this,e))throw Error("DB is not ready, Please await stores()");return void 0!==u(this,r)[t]?u(this,r)[t]:(u(this,r)[t]=new x(u(this,e),t),u(this,r)[t])},t.prototype.getStoreNames=function(){return i(this,void 0,Promise,function(){var t;return o(this,function(e){switch(e.label){case 0:return[4,this.getDatabase()];case 1:return t=e.sent(),[2,Array.from(t.objectStoreNames)]}})})},e=new WeakMap,n=new WeakMap,r=new WeakMap,c=new WeakMap,a=new WeakMap,h=new WeakMap,t.delete=g,t}();exports.default=S;var x=function(){function t(t,e){r.set(this,10),this.db=t,this.storeName=e}return t.prototype.transaction=function(t){return this.db.transaction(t,"readwrite")},t.prototype.getStore=function(){return i(this,void 0,Promise,function(){var t=this;return o(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e,n){if(u(t,r)<=0)n(Error("异常"));else try{e(t.transaction([t.storeName]).objectStore(t.storeName))}catch(i){"function"==typeof i.toString&&i.toString().indexOf("closing")>-1?s(t,r,0):s(t,r,u(t,r)-1),d(i),n(i)}})];case 1:return[2,e.sent()]}})})},t.prototype.clear=function(){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.getStore()];case 1:return[4,b(t.sent().clear())];case 2:return[2,t.sent()]}})})},t.prototype.add=function(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.getStore()];case 1:return[4,b(e.sent().add(t))];case 2:return[2,e.sent()]}})})},t.prototype.put=function(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.getStore()];case 1:return[4,b(e.sent().put(t))];case 2:return[2,e.sent()]}})})},t.prototype.delete=function(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.getStore()];case 1:return[4,b(e.sent().delete(t))];case 2:return[2,e.sent()]}})})},t.prototype.count=function(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.getStore()];case 1:return[4,b(e.sent().count(t))];case 2:return[2,e.sent()]}})})},t.prototype.get=function(t){return i(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.getStore()];case 1:return[4,b(e.sent().get(t))];case 2:return[2,e.sent()]}})})},t.prototype.getAll=function(){return i(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.getStore()];case 1:return[4,b(t.sent().getAll())];case 2:return[2,t.sent()]}})})},t.prototype.queryWithIndex=function(t,e){return i(this,void 0,Promise,function(){var n;return o(this,function(r){switch(r.label){case 0:return[4,this.getStore()];case 1:return n=r.sent(),[4,new Promise(function(r,i){var o=[],s=n.index(t).openCursor(e);s.onsuccess=function(t){var e=s.result;null!==e?(o.push(e.value),e.continue()):r(o)},s.onerror=function(){d(s.error),i(s.error)}})];case 2:return[2,r.sent()]}})})},t.prototype.each=function(t,e){return i(this,void 0,Promise,function(){var n;return o(this,function(r){switch(r.label){case 0:return[4,this.getStore()];case 1:return n=r.sent(),[4,new Promise(function(r,i){var o=0,s=n.openCursor(t);s.onsuccess=function(t){var n=s.result;null!==n?(e(n.value,o++),n.continue()):r()},s.onerror=function(){d(s.error),i(s.error)}})];case 2:return[2,r.sent()]}})})},t.prototype.query=function(t){return i(this,void 0,Promise,function(){var e;return o(this,function(n){switch(n.label){case 0:return e=[],[4,this.each(null,function(n){p(n,t)&&e.push(n)}).then(function(){return e})];case 1:return[2,n.sent()]}})})},t}();exports.DBCore=x,r=new WeakMap;
},{"./event-bus":"JkDX","./ua":"GlyE"}],"Qw13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./event-bus"),n=new e.EventBus;function t(e,t){return n.on(e,t)}function i(){n.destroy(),n=new e.EventBus}null!=navigator.mediaSession&&(navigator.mediaSession.setActionHandler("pause",function(){n.emit("pause")}),navigator.mediaSession.setActionHandler("play",function(){n.emit("play")})),exports.default={on:t,destroy:i};
},{"./event-bus":"JkDX"}],"KGHo":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,o){void 0===o&&(o=t),e[o]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var o in r)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||e(t,r,o)},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.mediaAction=exports.IDB=exports.userSetting=exports.toast=exports.wpd=exports.LogLevel=exports.LogItem=exports.logger=exports.ua=void 0,r(require("./interface"),exports),r(require("./common-utils"),exports);var o=require("./ua");Object.defineProperty(exports,"ua",{enumerable:!0,get:function(){return t(o).default}}),r(require("./create-element"),exports),r(require("./loading"),exports),r(require("./ajax"),exports);var n=require("./logger");Object.defineProperty(exports,"logger",{enumerable:!0,get:function(){return t(n).default}}),Object.defineProperty(exports,"LogItem",{enumerable:!0,get:function(){return n.LogItem}}),Object.defineProperty(exports,"LogLevel",{enumerable:!0,get:function(){return n.Level}}),r(require("./event-bus"),exports);var u=require("./player-debug");Object.defineProperty(exports,"wpd",{enumerable:!0,get:function(){return t(u).default}});var i=require("./toast");Object.defineProperty(exports,"toast",{enumerable:!0,get:function(){return t(i).default}});var a=require("./user-setting");Object.defineProperty(exports,"userSetting",{enumerable:!0,get:function(){return t(a).default}});var s=require("./idb");Object.defineProperty(exports,"IDB",{enumerable:!0,get:function(){return t(s).default}});var p=require("./media-action");Object.defineProperty(exports,"mediaAction",{enumerable:!0,get:function(){return t(p).default}});
},{"./interface":"cPXi","./common-utils":"MFFc","./ua":"GlyE","./create-element":"fk22","./loading":"Klvu","./ajax":"PFwM","./logger":"JKnM","./event-bus":"JkDX","./player-debug":"BEmL","./toast":"wHWR","./user-setting":"U3yD","./idb":"f80x","./media-action":"Qw13"}],"lV3a":[function(require,module,exports) {
var define;
var e;!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof e&&e.amd?e([],r):"object"==typeof exports?exports.fmp4=r():t.fmp4=r()}(window,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports={SomeError:function(e,t){this.name=e,this.message=t,this.stack=(new Error).stack},errorAudioInfo:10001,errorVideoInfo:10002,errorAudioTrack:10003,errorVideoTrack:10004,errorUnknownCodec:10005,errorFlvPacket:10006,errorFlvDts:10007,errorNetworkTimeout:11e3,errorNetworkFetch:11001,errorNetworkRead:11002,errorMseOpen:11003,errorMseAppend:11004,errorM3u8Data:11010,errorMp4Data:11011,errorMp4Dts:11012,errorM3u8NotUpdate:11013}},function(e,t){var r=[[0,200,0,128,35,128],[33,0,73,144,2,25,0,35,128],[0,200,0,128,32,132,1,38,64,8,100,0,142],[0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56],[0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56],[0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]],i=[[1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90],[1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10],[1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10]],n=[90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94];function a(e,t,r){for(;t<r;)if(3!==e[t]&&0!==e[t])t+=3;else{if(0===e[t-2]&&0===e[t-1]&&3===e[t])return t-2;t+=1}return null}e.exports={getSilentFrame:function(e,t){switch(e){case 2:if(t>=1&&t<=6)return new Uint8Array(r[t-1]);break;default:if(t>=1&&t<=3)return new Uint8Array(i[t-1].concat(n))}return null},ebsp2rbsp:function(e){for(var t=e,r=t.byteLength,i=new Uint8Array(r),n=0,o=0;;){var s=a(t,o,r);if(null===s)break;i.set(t.subarray(o,s+2),n),n+=s-o+2,o=s+3}return i.set(t.subarray(o,t.length),n),n+=t.length-o,i.subarray(0,n)},to02uString:function(e){var t=e.toString(10);return t.length<2&&(t="0"+t),t},to02xString:function(e){var t=e.toString(16);return t.length<2&&(t="0"+t),t}}},function(e,t,r){var i=r(3).checkChromeVer,n=r(10).BufferDetector,a=r(11).fMp4Player,o=r(19).Hls7Player,s=r(22).NativePlayer;e.exports={checkChromeVer:i,BufferDetector:n,fMp4Player:a,Hls7Player:o,NativePlayer:s}},function(e,t){var r=void 0;e.exports.checkChromeVer=function(){if(void 0!==r)return r;try{var e=navigator.userAgent,t=e.indexOf("Chrome/");if(t>0){t+=7;var i=e.indexOf(".",t);return-1===i&&(i=e.length),r=parseInt(e.substring(t,i)),console.log("Chrome verion: ".concat(r)),r}}catch(e){console.warn("parse Chrome version failed",e)}return r=0}},function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=r(12).MseController,a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mediaSource=t,this._player=r,this._url=null,this._isOpened=!1,this._isDestroied=!1,this._mimeType=null,this._mseController=null,this._keepUsedBuffer=10,this._timeout=0,this._lastRemovedPos=0,this._firstResponseNotified=!1,this._firstPacketNotified=!1,this._receivedBytes=0,this.startTime=0,this.onFirstResponse=null,this.onFirstPacket=null,this.onMetaData=null,this.onSeiData=null,this.onEndOfStream=null,this.onFileFetched=null,this.onNetworkError=null,this.onParserError=null}var t,r;return t=e,(r=[{key:"destroy",value:function(){this._isDestroied||(this._isDestroied=!0,this._player.src&&URL.revokeObjectURL(this._player.src)),this._mseController&&(this._mseController.destroy(),this._mseController=null),this._isOpened=!1,this._lastRemovedPos=0,this._mimeType=null,this._firstResponseNotified=!1,this._firstPacketNotified=!1,this._receivedBytes=0}},{key:"_notifyNetworkError",value:function(e,t){this.onNetworkError&&!this._isDestroied&&this.onNetworkError(e,t)}},{key:"_notifyParserError",value:function(e,t){this.onParserError&&!this._isDestroied&&this.onParserError(e,t)}},{key:"_onMseError",value:function(e,t){this._notifyParserError(e,{url:this._url,info:t})}},{key:"_setup",value:function(e){this._mseController&&this._mseController.destroy(),this._mseController=new n(this._mediaSource,this.onEndOfStream,this._onMseError.bind(this)),this._lastRemovedPos=0,this._receivedBytes=0,this._isDestroied=!1,this._url=e,this._mediaSource&&(this._mediaSource.createObjectURL?this._player.src=this._mediaSource.createObjectURL(this._player):this._player.src=URL.createObjectURL(this._mediaSource))}},{key:"_ensureMse",value:function(e){this._mimeType=e,e&&!this._isOpened&&this._mseController&&(this._isOpened=this._mseController.addSource(e))}},{key:"_pushBuffer",value:function(e){this._mseController&&this._mseController.pushBuffer(e)}},{key:"_pushEnd",value:function(){this._mseController&&this._mseController.pushEnd()}},{key:"_removeOutdated",value:function(){var e=this._player.currentTime;if(e>this._lastRemovedPos+this._keepUsedBuffer+10){var t=this._lastRemovedPos>10?this._lastRemovedPos-10:0,r=Math.floor(e-this._keepUsedBuffer);this._mseController&&this._mseController.removeBuffer(t,r)&&(this._lastRemovedPos=r)}}},{key:"version",get:function(){}},{key:"buffered",get:function(){var e=this._player.buffered;return e&&e.length>0?e.end(e.length-1)-this._player.currentTime:0}},{key:"mimeType",get:function(){return this._mimeType}},{key:"receivedBytes",get:function(){return this._receivedBytes}},{key:"keepUsedBuffer",set:function(e){this._keepUsedBuffer=e}},{key:"timeout",set:function(e){this._timeout=e}}])&&i(t.prototype,r),e}();e.exports.LivePlayer=a},function(e,t,r){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(14),a=r(15),o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=[44100,48e3,32e3,-1],u=function(e,t){return 1===t&&(t=2),"mp4a."+e.toString(16)+(t?"."+t.toString():"")},h=function e(t,r,n,a,o){i(this,e),this.profile=r,this.rate=n,this.channel=a,this.frame=o,this.codecs=u(t,r)},f=function e(t,r,n,a){i(this,e),this.width=t,this.height=r,this.nalu=n,this.codecs=a};e.exports={audioTypeAAC:64,audioTypeMP3:107,getAacCodec:u,parseAudioInfo:function(e,t){if(64===t){if(e.length<2)return null;var r=e[0]>>>3&31,i=(7&e[0])<<1|e[1]>>>7&1,n=e[1]>>3&15;return new h(t,r,o[i],n,1024)}if(107===t){if(e.length<4)return null;var a=e[1]>>>3&3,u=e[1]>>>1&3;if(u<1||u>3)return null;var f,l,c=e[2]>>>2&3,d=3==(e[3]>>>6&3)?1:2;switch(a){case 3:f=s[c];break;case 2:f=s[c]>>>1;break;default:f=s[c]>>>2}switch(u){case 3:l=3===a?1152:576;break;case 2:l=1152;break;default:l=384}return new h(t,0,f,d,l)}return null},parseVideoInfo:function(e,t){var r;if(-7===t)r=new n.AvcParser;else{if(-12!==t)return null;r=new a.HevcParser}if(0!==r.parse(e))return null;var i=r.displaySize;return new f(i.width,i.height,r.nalu,r.codecs)}}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=[0,16,1,2,4,8,32,3,5,10,12,15,47,7,11,13,14,6,9,31,35,37,42,44,33,34,36,40,39,43,45,46,17,18,20,24,19,21,26,28,23,27,29,30,22,25,38,41],n=[47,31,15,0,23,27,29,30,7,11,13,14,39,43,45,46,16,3,5,10,12,19,21,26,28,35,37,42,44,1,2,4,8,17,18,20,24,6,9,22,25,32,33,34,36,40,38,41],a=[15,0,7,11,13,14,3,5,10,12,1,2,4,8,6,9],o=[0,1,2,4,8,3,5,10,12,15,7,11,13,14,6,9],s=function(e){!1===e&&console.error(e)},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._bytes=t.length,this._offsetBits=0,this._offsetBytes=0}var t,u;return t=e,(u=[{key:"moveNextBit",value:function(){++this._offsetBits,this._offsetBits>=8&&(this._offsetBits%=8,this._offsetBytes+1<=this._bytes&&(++this._offsetBytes,this._offsetBytes<this._bytes&&3===this._data[this._offsetBytes]&&this._offsetBytes>1&&0===this._data[this._offsetBytes-1]&&0===this._data[this._offsetBytes-2]&&++this._offsetBytes))}},{key:"getOffset",value:function(){return{bytes:this._offsetBytes,bits:this._offsetBits}}},{key:"setOffset",value:function(e,t){return e>this._bytes||t>8?-1:(this._offsetBits=t,this._offsetBytes=e,0)}},{key:"nextBit",value:function(){return s(this._data&&this._bytes>0),this._offsetBytes>=this._bytes?-1:this._data[this._offsetBytes]>>>7-this._offsetBits&1}},{key:"nextBits",value:function(t){var r=new e(this._data);return r._offsetBits=this._offsetBits,r._offsetBytes=this._offsetBytes,r.readBits(t)}},{key:"readBit",value:function(){if(s(this._data&&this._bytes>0),this._offsetBytes>=this._bytes)return-1;var e=this._data[this._offsetBytes]>>>7-this._offsetBits&1;return this.moveNextBit(),s(0===e||1===e),e}},{key:"readBits",value:function(e){s(e>0&&e<=32);for(var t=0,r=0,i=0;r<e&&-1!==i;r++)i=this.readBit(),s(0===i||1===i),t=t<<1|i;return t}},{key:"readBool",value:function(){return 1===this.readBit()}},{key:"readUe",value:function(){var e,t=-1;for(e=0;!e&&-1!==e;++t)e=this.readBit(),s(0===e||1===e);return e=0,t>0&&(s(t<32),e=this.readBits(t)),(1<<t)-1+e}},{key:"readSe",value:function(){var e=this.readUe();return(e+1)/2*(0==e%2?-1:1)}},{key:"readMe",value:function(e,t){var r=this.readUe();return e?(s(r>=0&&r<48),0!==t?i[r]:n[r]):(s(r>=0&&r<16),0!==t?a[r]:o[r])}},{key:"readTe",value:function(){var e=this.readUe();return 1!==e?e:0!==this.readBit()?0:1}}])&&r(t.prototype,u),e}();e.exports.BitStream=u},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function e(t,r,n,a){i(this,e),this.name=t,this.value=r,this.offset=n,this.end=a},a=function(){function e(){i(this,e);try{this._textDecoder=new TextDecoder}catch(e){this._textDecoder=null,this._fromChar=String.fromCodePoint?String.fromCodePoint:String.fromCharCode}}var t,a;return t=e,(a=[{key:"decodeUtf8",value:function(e){if(this._textDecoder){var t=e.indexOf(0);return-1!==t&&(e=e.subarray(0,t)),this._textDecoder.decode(e)}for(var r=e.length,i="",n=0;n<r;){var a=e[n++];if(0===a)break;var o=0;switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o=a;break;case 12:case 13:o=(31&a)<<6|63&e[n++];break;case 14:o=(15&a)<<12|(63&e[n++])<<6|(63&e[n++])<<0;break;case 15:o=(7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}0!==o&&(i+=this._fromChar(o))}return i}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(r||(r=e.byteLength-1);t<r;)try{var i=this._parseValue(e,null,t),n=this._parseValue(e,i,i.offset);if(t=n.offset,"onMetaData"===i.value)return n.value}catch(e){console.warn("parse failed",e);break}return null}},{key:"_parseValue",value:function(e,t,r){var i,a=!1;switch(e.getUint8(r++)){case 0:i=e.getFloat64(r),r+=8;break;case 1:i=!!e.getUint8(r),r+=1;break;case 2:case 12:var o=this._parseArray(e,r);r+=2+o.length,i=this.decodeUtf8(o);break;case 3:i={},r=this._parseObjects(e,r,65535,i);break;case 8:var s=e.getUint32(r);r+=4,i={},r=this._parseObjects(e,r,s,i);break;case 9:i=null,a=!0;break;case 10:var u=e.byteLength-1,h=e.getUint32(r);for(r+=4,i=[];h-- >0&&r<u;){var f=this._parseValue(e,null,r);r=f.offset,i.push(f.value)}break;case 11:i=this._parseDate(e,r),r+=10}return new n(t,i,r,a)}},{key:"_parseArray",value:function(e,t){var r=e.getUint16(t);return new Uint8Array(e.buffer,e.byteOffset+t+2,r)}},{key:"_parseDate",value:function(e,t){var r=e.getFloat64(t),i=e.getInt16(t+8);return new Date(r+=60*i*1e3)}},{key:"_parseObject",value:function(e,t){var r=this._parseArray(e,t);t+=2+r.length;var i=this.decodeUtf8(r);return this._parseValue(e,i,t)}},{key:"_parseObjects",value:function(e,t,r,i){for(var n=e.byteLength-1;r-- >0&&t<n;){var a=this._parseObject(e,t);if(t=a.offset,a.end)break;i[a.name]=a.value}return t}}])&&r(t.prototype,a),e}();e.exports.AmfParser=a},function(e,t,r){function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=r(1),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"_readSeiNumber",value:function(e,t){for(var r=0;t.offset<e.byteLength;){var i=e[t.offset];if(t.offset+=1,255!==i)return r+i;r+=255}return null}},{key:"_isEndOfSei",value:function(e,t){return t.offset>=e.byteLength||128===e[t.offset]&&(t.offset+=1,!0)}},{key:"_readSeiMessage",value:function(e,t){var r=this._readSeiNumber(e,t),i=this._readSeiNumber(e,t);if(null!==r&&null!==r){var n=t.offset+i;if(n<e.byteLength){var a={payloadType:r,payloadData:e.subarray(t.offset,n)};return t.offset+=i,a}}return null}},{key:"readSeiMessages",value:function(e){for(var t=[],r={offset:0};!this._isEndOfSei(e,r);){var i=this._readSeiMessage(e,r);if(null===i)break;t.push(i)}return t}},{key:"parse",value:function(t,r,n,a,s,u,h,f){for(var l=r+n,c=r;c+u<l;){for(var d=0,_=0;_<u;_++)d=d<<8|t[c++];var v=c+d;if(v>l||v<=c)break;if((h?t[c++]>>1:31&t[c])==(h?39:6)){var p,y=o.ebsp2rbsp(t.subarray(c+1,v)),m=i(e.readSeiMessages(y));try{for(m.s();!(p=m.n()).done;){var g=p.value;5===g.payloadType&&g.payloadData.length>=16&&f(a,s,g.payloadData.slice(0,16),g.payloadData.slice(16))}}catch(e){m.e(e)}finally{m.f()}}c=v}}}],null&&a(t.prototype,null),r&&a(t,r),e}();e.exports.SeiParser=s},function(e,t,r){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(0),s=!!window.fetch,u=!!window.ReadableStream,h=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this._callbackMap=new Map,this._onResponse=t,this._onResult=r,this._onError=n}return a(e,[{key:"fetchAsBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._setTimeout(e,r);s?this._doFetch(e,t,"arrayBuffer",i):this._doRequest(e,"arraybuffer",i)}},{key:"fetchAsJson",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._setTimeout(e,r);s?this._doFetch(e,t,"json",i):this._doRequest(e,"json",i)}},{key:"fetchAsText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._setTimeout(e,r);s?this._doFetch(e,t,"text",i):this._doRequest(e,"text",i)}},{key:"fetchAsStream",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(u){var n=this._setTimeout(e,i);fetch(e,r?{}:{cache:"no-store"}).then(function(r){if(void 0===n||t._clearTimeout(n))if(t._onResponse(e,r)&&r.ok){var i=r.body.getReader(),a=[],s=function(r){!r.done&&a[0]?a[0]():a[0]=null,t._onResult(e,r.value,r.done)};a[0]=function(){i.read().then(s).catch(function(r){t._onError(e,o.errorNetworkRead,r)})},a[0]()}else r.body.getReader().cancel()}).catch(function(r){(void 0===n||t._clearTimeout(n))&&t._onError(e,o.errorNetworkFetch,r)})}else this.fetchAsBuffer(e,r,i)}},{key:"_doFetch",value:function(e,t,r,i){var n=this;fetch(e,t?{}:{cache:"no-store"}).then(function(t){(void 0===i||n._clearTimeout(i))&&(n._onResponse(e,t)&&t.ok?t[r]().then(function(t){n._onResult(e,t,!0)}).catch(function(t){n._onError(e,o.errorNetworkRead,t)}):t.body.getReader().cancel())}).catch(function(t){(void 0===i||n._clearTimeout(i))&&n._onError(e,o.errorNetworkFetch,t)})}},{key:"_doRequest",value:function(e,t,r){var i=this,n=new XMLHttpRequest;n.onreadystatechange=function(t){(void 0===r||i._clearTimeout(r))&&2===n.readyState&&(n.ok=n.status>=200&&n.status<=299,i._onResponse(e,n))},n.onload=function(t){n.status>=200&&n.status<=299&&i._onResult(e,n.response,!0)},n.onerror=function(t){(void 0===r||i._clearTimeout(r))&&i._onError(e,n.readyState>2?o.errorNetworkRead:o.errorNetworkFetch,t)},n.open("GET",e),n.responseType=t,n.send()}},{key:"_clearTimeout",value:function(e){return void 0!==e&&(window.clearTimeout(e),this._callbackMap.delete(e))}},{key:"_setTimeout",value:function(e,t){var r=this;if(t>0){var i=[];return i[0]=window.setTimeout(function(){r._callbackMap.delete(i[0]),r._onError(e,o.errorNetworkTimeout,t)},t),this._callbackMap.set(i[0],1),i[0]}}}]),e}(),f=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,e),this._readDone=!1,this._reader=null,this._onResponse=t,this._onData=r,this._onError=n,this._onDataFetchedBinder=this._onDataFetched.bind(this),this._onReadErrorBinder=this._onReadError.bind(this)}return a(e,[{key:"destroy",value:function(){this._readDone=!0,this._onData=null}},{key:"fetchAsStream",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s={};if(0!=i){var u={};u.Range="bytes=".concat(i,"-")+(n>0?(n-1).toString():""),s.headers=u}r||(s.cache="no-store");var h=a>0?window.setTimeout(function(){t._onError(o.errorNetworkTimeout,a)},a):void 0;fetch(e,s).then(function(e){t._clearTimeout(h),t._reader&&(t._reader.cancel(),t._reader=null),t._onResponse(e)&&e.ok?(t._readDone=!1,t._reader=e.body.getReader(),t._reader.read().then(t._onDataFetchedBinder).catch(t._onReadErrorBinder)):e.body.getReader().cancel()}).catch(function(e){t._clearTimeout(h),t._onError(o.errorNetworkFetch,e)})}},{key:"_onDataFetched",value:function(e){e.done&&(this._reader=null,this._readDone=!0),this._reader&&(this._readDone?(this._reader.cancel(),this._reader=null):this._reader.read().then(this._onDataFetchedBinder).catch(this._onReadErrorBinder)),this._onData&&!this._onData(e.value)&&(this._readDone=!0,this._reader&&(this._reader.cancel(),this._reader=null))}},{key:"_onReadError",value:function(e){this._onError(o.errorNetworkRead,e)}},{key:"_clearTimeout",value:function(e){void 0!==e&&window.clearTimeout(e)}}]),e}();e.exports={Fetcher:h,StreamFetcher:f}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._player=t,this._minBufferMs=r,this._loaded=!1,this._waitCount=0,this._waitDuration=0,this._waiting=!1,this._beginWaitTime=0,this._savedPaused=void 0,this._timer=void 0,this.minWaitMs=100,this._onLoadedDataBinder=this._onLoadedData.bind(this),this._onPlayingBinder=this._onPlaying.bind(this),this._onWaitingBinder=this._onWaiting.bind(this),t.addEventListener("loadeddata",this._onLoadedDataBinder),t.addEventListener("playing",this._onPlayingBinder),t.addEventListener("waiting",this._onWaitingBinder)}var t,i;return t=e,(i=[{key:"destroy",value:function(){this._clearTimer(),this._player.removeEventListener("waiting",this._onWaitingBinder),this._player.removeEventListener("playing",this._onPlayingBinder),this._player.removeEventListener("loadeddata",this._onLoadedDataBinder),this._waitCount=0,this._waitDuration=0}},{key:"_onLoadedData",value:function(e){this._loaded=!0}},{key:"_onPlaying",value:function(e){if(this._waiting){var t=performance.now()-this._beginWaitTime;t>this.minWaitMs&&(this._waitCount++,this._waitDuration+=t),this._waiting=!1}}},{key:"_onWaiting",value:function(e){var t=this;if(this._loaded&&!this._player.seeking){var r=this._player.readyState;if(!(r===HTMLMediaElement.HAVE_ENOUGH_DATA||r===HTMLMediaElement.HAVE_CURRENT_DATA&&this.buffered>=2)&&(this._waiting=!0,this._beginWaitTime=performance.now(),this._savedPaused=void 0,this._clearTimer(),this._minBufferMs>this.minWaitMs)){var i=this._minBufferMs/1e3,n=this._beginWaitTime+this._minBufferMs+1e3;this._timer=window.setInterval(function(){!t._waiting||t.buffered>=i||performance.now()>=n?(t._clearTimer(),!t._savedPaused&&t._player.paused&&t._player.play().then(function(){}).catch(function(e){})):void 0===t._savedPaused&&(t._savedPaused=!!t._player.paused,t._player.pause())},2*this.minWaitMs)}}}},{key:"_clearTimer",value:function(){void 0!==this._timer&&(window.clearInterval(this._timer),this._timer=void 0)}},{key:"buffered",get:function(){var e=this._player.buffered;return e&&e.length>0?e.end(e.length-1)-this._player.currentTime:0}},{key:"waitedCount",get:function(){return this._waitCount}},{key:"waitedDuration",get:function(){return Math.round(this._waitDuration)}}])&&r(t.prototype,i),e}();e.exports.BufferDetector=i},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var n=f(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),c=r(4),d=r(13),_=r(18).lowerBound,v=r(9).StreamFetcher,p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,r,i=s(u);function u(e,t){var r;return function(e,t){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),r=i.call(this,e,t),console.log("fMp4Player ".concat(r.version)),r.maxDuration=30,r.minDuration=10,r.startTime=0,r._contentLength=void 0,r._loader=null,r._readDone=!1,r._readPaused=!1,r._readPosition=0,r._fmp4Muxer=null,r._checkBufferInterval=void 0,r._onCheckBufferBinder=r._onCheckBuffer.bind(h(r)),r._onResponseBinder=r._onResponse.bind(h(r)),r._onDataFetchedBinder=r._onDataFetched.bind(h(r)),r._onDataConvertedBinder=r._onDataConverted.bind(h(r)),r._onMetaDataBinder=r._onMetaDataParsed.bind(h(r)),r._onConvertErrorBinder=r._onConvertError.bind(h(r)),r._onReadErrorBinder=r._onReadError.bind(h(r)),r}return t=u,(r=[{key:"destroy",value:function(){a(f(u.prototype),"destroy",this).call(this),void 0!==this._checkBufferInterval&&(window.clearInterval(this._checkBufferInterval),this._checkBufferInterval=void 0),this._firstPacketNotified=!1,this._readPaused=!1,this._readDone=!0,this._loader&&(this._loader.destroy(),this._loader=null),this._fmp4Muxer&&(this._fmp4Muxer.destroy(),this._fmp4Muxer=null),this._contentLength=void 0}},{key:"createFetcher",value:function(e,t,r){return new v(e,t,r)}},{key:"_fetchUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._contentLength=void 0,this._receivedBytes=0,this._readDone=!1,this._readPaused=!1,this._readPosition=e,this._loader=this.createFetcher(this._onResponseBinder,this._onDataFetchedBinder,this._onReadErrorBinder),this._loader.fetchAsStream(this._url,!1,e,-1,this._timeout)}},{key:"_onDataConverted",value:function(e){this._ensureMse(this._mimeType),this._pushBuffer(e)}},{key:"_onMetaDataParsed",value:function(e){var t=this;if(this._mimeType=this._fmp4Muxer.mimeType,this.onMetaData&&this.onMetaData(e),this._contentLength&&this.startTime>0){var r=e.keyframes;if(r&&r.times&&r.filepositions){var i=_(r.times,this.startTime);if(i>=0&&i<r.filepositions.length){var n=r.filepositions[i];r.times[i]>this.startTime&&i>0&&(n=r.filepositions[--i]),this._fmp4Muxer&&this._fmp4Muxer.reset(),console.log("seek to: ".concat(r.times[i],"/").concat(e.duration,"s, pos=").concat(n));var a=function(){t._seekToPosition(n)};window.Promise?Promise.resolve().then(a):window.setTimeout(a,0)}else console.warn("seek failed: ".concat(this.startTime,"/").concat(e.duration,"s"))}this.startTime=0}}},{key:"_onConvertError",value:function(e,t){this._notifyParserError(e,{url:this._url,info:t})}},{key:"_onReadError",value:function(e,t){this._notifyNetworkError(e,{url:this._url,info:t})}},{key:"_processFetchedData",value:function(e){this._fmp4Muxer?this._fmp4Muxer.input(e):this._onDataConverted(e)}},{key:"_seekToPosition",value:function(e){this._fmp4Muxer&&this._fmp4Muxer.reset(),this._loader&&(this._loader.destroy(),this._loader=null),this._fetchUrl(e)}},{key:"_onDataFetched",value:function(e){return!(this._isDestroied||(!this._firstPacketNotified&&this.onFirstPacket&&(this._firstPacketNotified=!0,this.onFirstPacket()),e?(this._removeOutdated(),this._processFetchedData(e),this._receivedBytes+=e.length,this._readPosition+=e.length):e||(this._readDone=void 0===this._contentLength||this._receivedBytes>=this._contentLength,this._readDone&&this._pushEnd()),this._readDone||this._readPaused))}},{key:"_onResponse",value:function(e){if(this._isDestroied)return!1;if(!e.ok)return this._notifyNetworkError(l.errorNetworkFetch,{url:this._url,status:e.status}),!1;!this._firstResponseNotified&&this.onFirstResponse&&(this._firstResponseNotified=!0,this.onFirstResponse(e));var t=e.headers.get("Content-Length"),r=t?parseInt(t):void 0;void 0===this._contentLength&&(this._contentLength=r),this._contentLength&&void 0===this._checkBufferInterval&&(this._checkBufferInterval=window.setInterval(this._onCheckBufferBinder,500));var i=e.headers.get("Content-Type");return i&&-1!==i.indexOf("video/mp4")?(this._mimeType=i,this._fmp4Muxer=null):null===this._fmp4Muxer&&(this._mimeType=null,this._fmp4Muxer=new d.fMp4Muxer(250,this._onDataConvertedBinder,this._onMetaDataBinder,this.onSeiData,this._onConvertErrorBinder)),!0}},{key:"_onCheckBuffer",value:function(){var e=this.buffered;e<=this.minDuration&&this._readPaused&&this._receivedBytes<this._contentLength?(this._readPaused=!1,this._loader.fetchAsStream(this._url,!1,this._readPosition,-1,this._timeout)):e>=this.maxDuration&&!this._readPaused&&(this._readPaused=!0)}},{key:"version",get:function(){return"v1.37"}},{key:"src",set:function(e){this.destroy(),this._setup(e),this._fetchUrl()}}])&&n(t.prototype,r),u}(c.LivePlayer);e.exports.fMp4Player=p},function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=r(0),a=function(){function e(t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mediaSource=t,this._onEnded=r,this._onError=i,this._dataList=[],this._mimeType=null,this._sourceOpened=!1,this._sourceBuffer=null,this._eosBuffer=new Uint8Array,this._onSourceOpenBinder=this._onSourceOpen.bind(this),this._onUpdateEndBinder=this._onUpdateEnd.bind(this),t&&t.addEventListener("sourceopen",this._onSourceOpenBinder)}var t,r;return t=e,(r=[{key:"destroy",value:function(){this.removeSource(),this._dataList.length=0,this._mediaSource=null,this._mimeType=null,this._sourceOpened=!1}},{key:"addSource",value:function(e){if(this._mimeType=e,e&&this._sourceOpened&&!this._sourceBuffer)try{this._sourceBuffer=this._mediaSource.addSourceBuffer(e),this._sourceBuffer&&this._sourceBuffer.addEventListener("updateend",this._onUpdateEndBinder)}catch(e){this._onError&&this._onError(n.errorMseOpen,e)}return null!==this._sourceBuffer}},{key:"removeSource",value:function(){this._sourceBuffer&&(this._sourceBuffer.removeEventListener("updateend",this._onUpdateEndBinder,!1),this._mediaSource.removeSourceBuffer(this._sourceBuffer),this._sourceBuffer=null)}},{key:"pushBuffer",value:function(e){this._dataList.push(e),this._onUpdateEnd()}},{key:"pushEnd",value:function(){0!==this._dataList.length||this._sourceBuffer?(this._dataList.push(this._eosBuffer),this._onUpdateEnd()):this._onEnded&&this._onEnded()}},{key:"removeBuffer",value:function(e,t){try{if(!this._sourceBuffer.updating)return this._sourceBuffer.remove(e,t),!0}catch(r){console.warn("remove buffer failed: ".concat(e," -> ").concat(t),r)}return!1}},{key:"_onSourceOpen",value:function(){this._mediaSource&&(this._mediaSource.duration=1/0,this._mediaSource.removeEventListener("sourceopen",this._onSourceOpenBinder),this._sourceOpened=!0,this._mimeType&&this.addSource(this._mimeType))}},{key:"_onUpdateEnd",value:function(){var e=this._sourceBuffer;if(e&&!e.updating){var t=this._dataList;if(t.length){var r=t.shift();try{r===this._eosBuffer?("open"===this._mediaSource.readyState&&this._mediaSource.endOfStream(),this._onEnded&&this._onEnded()):null!==r&&e.appendBuffer(r),r=null}catch(e){"QuotaExceededError"===e.name?r&&t.unshift(r):this._onError&&this._onError(n.errorMseAppend,e)}}}}}])&&i(t.prototype,r),e}();e.exports.MseController=a},function(e,t,r){function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var u=r(5),h=r(0),f=r(16),l=r(17),c=r(3),d=r(1),_=r(8).SeiParser,v=function(){function e(t,r,i){a(this,e),this.type=t,this.id=r,this.tag=i,this.baseMediaDecodeTime=0,this.extraData=null,this.dataOffset=0,this.duration=0,this.samples=[],this.sequenceDts=null,this.timestampOffset=0,this.totalDuration=0,this.totalSampleCount=0,this.audioInfo=null,this.objectType=0,this.defaultDuration=0,this.maxGapDuration=0,this.videoInfo=null,this.averageDuration=0}return s(e,[{key:"timeScale",get:function(){return null!==this.audioInfo?this.audioInfo.rate:9e4}},{key:"channelCount",get:function(){return null!==this.audioInfo?this.audioInfo.channel:null}},{key:"sampleRate",get:function(){return null!==this.audioInfo?this.audioInfo.rate:null}},{key:"sampleBits",get:function(){return 16}},{key:"width",get:function(){return null!==this.videoInfo?this.videoInfo.width:null}},{key:"height",get:function(){return null!==this.videoInfo?this.videoInfo.height:null}}]),e}(),p=function(){function e(t,r,i,n,o){a(this,e);var s=c.checkChromeVer();this._chrome4x=s>0&&s<=49,this._audioTrackIndex=-1,this._videoTrackIndex=-1,this._lastSegmentDts=0,this._mdatSize=0,this._metaChanged=0,this._metaData={},this._nextTrackId=1,this._onMetaData=i,this._onSegment=r,this._onSeiData=n,this._onError=o,this._parser=new f.FlvParser(this._onSampleReceived.bind(this),this._onMetaDataReceived.bind(this)),this._segmentIsGop=!0,this._segmentDuration=t,this._sequenceNumber=1,this._tracks=[],this._unknownTypes=new Set}return s(e,[{key:"destroy",value:function(){}},{key:"reset",value:function(){this._parser.clear(),this._lastSegmentDts=0,this._mdatSize=0,this._segmentIsGop=!0;var e,t=i(this._tracks);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.samples.length=0,r.dataOffset=0,r.sequenceDts=null,r.timestampOffset=0,r.totalDuration=0,r.totalSampleCount=0}}catch(e){t.e(e)}finally{t.f()}}},{key:"input",value:function(e){try{this._parser.input(e)}catch(e){if(this._onError){var t="DtsError"===e.name?h.errorFlvDts:h.errorFlvPacket;this._onError(t,e.message)}}}},{key:"_addSample",value:function(e,t){e.samples.push(t),e.totalSampleCount++,this._mdatSize+=t.size}},{key:"_onAudioSample",value:function(t){var r=t.dts;if(-1===this._videoTrackIndex&&this._timeToOutput(!1,r)&&this._outputDataSegment(r),this._audioTrackIndex>=0&&this._audioTrackIndex<this._tracks.length){var i=this._tracks[this._audioTrackIndex];if(null===i.sequenceDts&&(i.sequenceDts=r),i.objectType===u.audioTypeAAC){var n=i.audioInfo.rate,a=e._millisecToAudioTs(r,i)-i.totalDuration;if(a>=i.maxGapDuration){var o=a/n;if(o>=30)throw new h.SomeError("DtsError","too large ".concat(o," underflow"));var s=Math.floor(a/i.defaultDuration);for(console.log("insert ".concat(s," frames due to ").concat(o," underflow"));s--;){var f=e._getSilentAacFrame(i,t.data);f.duration=i.defaultDuration,i.totalDuration+=f.duration,this._addSample(i,f)}}else if(a<=-i.maxGapDuration)return void console.log("skip 1 frame due to ".concat(-a/n," overflow"))}t.dts=i.totalDuration,t.duration=i.defaultDuration,i.totalDuration+=t.duration,this._addSample(i,t)}else console.warn("invalid audio track: ".concat(this._audioTrackIndex))}},{key:"_onVideoSample",value:function(t){var r=t.dts,i=1===t.flags;if(this._timeToOutput(i,r)&&(this._outputDataSegment(r),this._segmentIsGop=i),this._videoTrackIndex>=0&&this._videoTrackIndex<this._tracks.length){var n=this._tracks[this._videoTrackIndex];if(null===n.sequenceDts&&(n.sequenceDts=r,0===n.totalSampleCount&&(t.cts=0),t.flags=1),t.cts=Math.floor(90*t.cts),t.dts=e._millisecToVideoTs(r,n),n.samples.length>0){var a=n.samples[n.samples.length-1];a.duration=t.dts>a.dts?t.dts-a.dts:0}n.totalDuration=t.dts,n.totalSampleCount>0&&(n.averageDuration=Math.floor(n.totalDuration/n.totalSampleCount)),t.type!==f.typeVideoH264&&t.type!==f.typeVideoH265||this._parseSeiData(t.data,t.size,t.dts/9e4,t.cts/9e4,n.videoInfo.nalu,t.type===f.typeVideoH265),this._addSample(n,t)}else console.warn("invalid video track: ".concat(this._videoTrackIndex))}},{key:"_onAudioTrack",value:function(t){var r=t.type===f.trackAudioAAC,i=r?u.audioTypeAAC:u.audioTypeMP3,n=u.parseAudioInfo(t.data,i);if(n){if(this._audioTrackIndex>=0&&this._audioTrackIndex<this._tracks.length){this._outputNow();var a=this._tracks[this._audioTrackIndex];a.extraData=t.data,a.audioInfo=n,a.objectType=i,a.defaultDuration=n.frame,a.maxGapDuration=2*a.defaultDuration,e._resetTrackTimestamps(a)}else{var o=l.types.mp4a,s=new v("audio",this._nextTrackId++,o);s.extraData=r?t.data:null,s.audioInfo=n,s.objectType=i,s.defaultDuration=n.frame,s.maxGapDuration=2*s.defaultDuration,this._audioTrackIndex=this._tracks.length,this._tracks.push(s),this._outputNow()}this._metaData.audiosamplerate=n.rate,this._metaData.audiochannel=n.channel,this._metaChanged|=1}else this._onError&&this._onError(h.errorAudioInfo,"parse audio track failed")}},{key:"_onVideoTrack",value:function(t){var r=u.parseVideoInfo(t.data,t.type);if(r){if(this._videoTrackIndex>=0&&this._videoTrackIndex<this._tracks.length){this._outputNow();var i=this._tracks[this._videoTrackIndex];i.extraData=t.data,i.videoInfo=r,e._fixLastVideoDuration(i,0),e._resetTrackTimestamps(i)}else{var n=void 0;switch(t.type){case f.trackVideoH264:n=l.types.avc1;break;case f.trackVideoH265:n=l.types.hvc1}var a=new v("video",this._nextTrackId++,n);a.extraData=t.data,a.videoInfo=r,this._videoTrackIndex=this._tracks.length,this._tracks.push(a),this._outputNow()}this._metaData.width=r.width,this._metaData.height=r.height,this._metaData.fps||(this._metaData.fps=this._metaData.framerate),this._metaChanged|=2}else this._onError&&this._onError(h.errorVideoInfo,"parse video track failed")}},{key:"_onMetaDataReceived",value:function(e){if(e)for(var t in e)this._metaData[t]=e[t]}},{key:"_onSampleReceived",value:function(e){switch(e.type){case f.typeAudioAAC:this._onAudioSample(e);break;case f.typeVideoH264:case f.typeVideoH265:this._onVideoSample(e);break;case f.trackAudioAAC:case f.trackAudioMP3:this._onAudioTrack(e);break;case f.trackVideoH264:case f.trackVideoH265:this._onVideoTrack(e);break;default:this._unknownTypes.has(e.type)||(this._unknownTypes.add(e.type),this._onError&&this._onError(h.errorUnknownCodec,"unknown codec: ".concat(e.type)))}return!0}},{key:"_outputDataSegment",value:function(t){if(this._mdatSize&&this._metaChanged){this._onMetaData&&this._onMetaData(this._metaData),this._metaChanged=0;var r=l.initSegment(this._tracks);this._onSegment(r)}var n=this._tracks;if(this._mdatSize){var a=l.moofSize(n),o=8+this._mdatSize,s=new Uint8Array(a+o);s[a+0]=o>>>24&255,s[a+1]=o>>>16&255,s[a+2]=o>>>8&255,s[a+3]=255&o,s.set(l.types.mdat,a+4);var u,h=a+8,f=i(n);try{for(f.s();!(u=f.n()).done;){var c=u.value;c.samples.length>0&&("video"===c.type&&e._fixLastVideoDuration(c,t),this._chrome4x&&(c.samples[0].flags=1),c.baseMediaDecodeTime=c.samples[0].dts),c.dataOffset=h,h=e._concatenateSamplesData(c,s,h)}}catch(e){f.e(e)}finally{f.f()}var d=l.moof(this._sequenceNumber++,n);s.set(d),this._onSegment(s)}this._lastSegmentDts=t,this._mdatSize=0;var _,v=i(n);try{for(v.s();!(_=v.n()).done;){var p=_.value;p.samples.length=0,p.dataOffset=0}}catch(e){v.e(e)}finally{v.f()}}},{key:"_outputNow",value:function(){this._mdatSize>0&&this._outputDataSegment(this._lastSegmentDts)}},{key:"_parseSeiData",value:function(e,t,r,i,n,a){this._onSeiData&&_.parse(e,0,t,r,r+i,n,a,this._onSeiData)}},{key:"_timeToOutput",value:function(e,t){return!(!e||this._segmentIsGop)||t<this._lastSegmentDts||t>=this._lastSegmentDts+this._segmentDuration}},{key:"mimeType",get:function(){var e,t="",r=i(this._tracks);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!==n.audioInfo?t+=n.audioInfo.codecs+",":null!==n.videoInfo&&(t+=n.videoInfo.codecs+",")}}catch(e){r.e(e)}finally{r.f()}for(;t.length>1&&","===t[t.length-1];)t=t.substring(0,t.length-1);return'video/mp4; codecs="'+t+'"'}}],[{key:"_concatenateSamplesData",value:function(e,t,r){var n,a=i(e.samples);try{for(a.s();!(n=a.n()).done;){var o=n.value;t.set(o.data,r),r+=o.size}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"_fixLastVideoDuration",value:function(t,r){if(t.samples.length>0){var i=t.samples[t.samples.length-1];0===i.duration&&(r=e._millisecToVideoTs(r,t),i.duration=r>i.dts?r-i.dts:t.averageDuration>0?t.averageDuration:1500,t.totalDuration+=i.duration)}}},{key:"_getSilentAacFrame",value:function(e,t){var r=d.getSilentFrame(e.audioInfo.profile,e.audioInfo.channel),i=e.totalDuration;return new f.Sample(f.typeAudioAAC,r||t,0,i,0)}},{key:"_millisecToAudioTs",value:function(e,t){return Math.floor((e-t.sequenceDts)*t.audioInfo.rate/1e3)+t.timestampOffset}},{key:"_millisecToVideoTs",value:function(e,t){return 90*(e-t.sequenceDts)+t.timestampOffset}},{key:"_resetTrackTimestamps",value:function(e){e.timestampOffset=e.totalDuration,e.sequenceDts=null}}]),e}();e.exports={fMp4Muxer:p}},function(e,t,r){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(6).BitStream,s=r(1),u=function(){function e(){i(this,e),this.width=0,this.height=0}return a(e,[{key:"parse",value:function(e){var t=new o(e),r=1,i=this.profile_idc=t.readBits(8),n=t.readBits(8),a=(this.compatibility=n,this.level_idc=t.readBits(8),t.readUe(),0);if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||139===i||134===i||135===i)&&(3===(r=t.readUe())&&(a=t.readBit()),t.readUe(),t.readUe(),t.readBit(),0!==t.readBit()))for(var s=0;s<(3!==r?8:12);s++)t.readBit();t.readUe();var u=t.readUe();if(0===u)t.readUe();else if(1===u){t.readBit(),t.readSe(),t.readSe();var h=t.readUe();for(s=0;s<h;s++)t.readSe()}t.readUe(),t.readBit();var f=t.readUe(),l=t.readUe(),c=t.readBit();0===c&&t.readBit(),t.readBit();var d=t.readBit(),_=0,v=0,p=0,y=0;0!==d&&(_=t.readUe(),v=t.readUe(),p=t.readUe(),y=t.readUe()),t.readBit();var m,g=f+1,b=(l+1)*(2-(0!==c?1:0)),k=0!==c?1:0,w=0!==a?0:r;m=w>3?null:0===w?{dx:1,dy:2-k}:{dx:[0,2,2,1][w],dy:[0,2,1,1][w]*(2-k)};var S=0!==d,B=S?_*m.dx:0,D=S?p*m.dy:0,T=S?v*m.dx:0,M=S?y*m.dy:0;this.width=16*g-T-B,this.height=16*b-M-D}},{key:"displaySize",get:function(){return{width:this.width,height:this.height}}}]),e}(),h=function(){function e(){i(this,e),this.verison=0,this.profile=0,this.compatibility=0,this.level=0,this.nalu=4,this.sps=[]}return a(e,[{key:"parse",value:function(e){var t=e.length;if(t<7)return-1;this.version=e[0],this.profile=e[1],this.compatibility=e[2],this.level=e[3],this.nalu=1+(3&e[4]);var r=31&e[5];if(0===r)return-1;for(var i=6,n=0;n<r&&i+2<t;++n){var a=e[i]<<8|e[i+1];if(a+i+2+1>=t)return-1;try{var o=e.subarray(i+2+1,i+2+a-1),s=new u;s.parse(o),this.sps.push(s),0===n&&(this.profile=s.profile_idc,this.compatibility=-4&s.compatibility,this.level=s.level_idc)}catch(e){console.warn("parse avc-sps error")}i+=a+2}return 0}},{key:"codecs",get:function(){return"avc1."+s.to02xString(this.profile)+s.to02xString(this.compatibility)+s.to02xString(this.level)}},{key:"displaySize",get:function(){var e=this.sps.length?this.sps[0].displaySize:null;return e||(e={width:1280,height:720}),e}}]),e}();e.exports.AvcParser=h},function(e,t,r){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(6).BitStream,s=function(){function e(){i(this,e),this.pic_width_in_luma_samples=0,this.pic_height_in_luma_samples=0}return a(e,[{key:"parse",value:function(e){var t=new o(e);t.readBits(16),t.readBits(4);var r=t.readBits(3);t.readBool(),this.general_profile_space=t.readBits(2),this.general_tier_flag=t.readBool(),this.general_profile_idc=t.readBits(5),this.general_profile_compatibility_flags=t.readBits(32),t.readBool(),t.readBool(),t.readBool(),t.readBool(),t.readBits(32),t.readBits(12),this.general_level_idc=t.readBits(8);for(var i=[],n=[],a=0;a<r;++a)i.push(t.readBool()),n.push(t.readBool());if(r>0)for(a=r;a<8;++a)t.readBits(2);for(a=0;a<r;++a)i[a]&&t.readBits(88),n[a]&&t.readBits(8);t.readUe(),3===t.readUe()&&t.readBool(),this.pic_width_in_luma_samples=t.readUe(),this.pic_height_in_luma_samples=t.readUe()}},{key:"displaySize",get:function(){return{width:this.pic_width_in_luma_samples,height:this.pic_height_in_luma_samples}}}]),e}(),u=function(){function e(){i(this,e),this.general_profile_space=0,this.general_profile_idc=0,this.general_level_idc=0,this.general_tier_flag=0,this.general_profile_compatibility_flags=0,this.nalu=4,this.sps=[]}return a(e,[{key:"parse",value:function(e){var t=e.length;if(t<23)return-1;if(1!==e[0])return-1;this.general_profile_space=e[1]>>6&3,this.general_tier_flag=e[1]>>5&1,this.general_profile_idc=31&e[1],this.general_profile_compatibility_flags=e[2]<<24|e[3]<<16|e[4]<<8|e[5];var r=e[6]<<24|e[7]<<16|e[8]<<8|e[9];r=r<<16|e[10]<<8|e[11],this.general_level_idc=e[12],this.nalu=1+(3&e[21]);for(var i=e[22],n=23,a=0;a<i;a++){if(n+3>e+t)return-1;var o=e[n],u=e[n+1]<<8|e[n+2];n+=3;for(var h=0;h<u;h++){if(n+2>t)return-1;var f=e[n]<<8|e[n+1];if(n+2+f>t)return-1;if(33==(63&o))try{var l=e.subarray(n+2,n+2+f),c=new s;c.parse(l),this.sps.push(c),0==h&&(this.general_profile_compatibility_flags=c.general_profile_compatibility_flags,this.general_profile_space=c.general_profile_space,this.general_profile_idc=c.general_profile_idc,this.general_tier_flag=c.general_tier_flag?1:0,this.general_level_idc=c.general_level_idc)}catch(e){console.warn("parse hevc-sps error")}n+=2+f}}return 0}},{key:"codecs",get:function(){var e=this.general_profile_compatibility_flags;return e=(e=(e=(e=(e=e>>1&1431655765|(1431655765&e)<<1)>>2&858993459|(858993459&e)<<2)>>4&252645135|(252645135&e)<<4)>>8&16711935|(16711935&e)<<8)>>16|e<<16,"hvc1."+["","A","B","C"][this.general_profile_space%4]+this.general_profile_idc.toString()+"."+e.toString(16).toLowerCase()+"."+["L","H"][this.general_tier_flag%2]+this.general_level_idc.toString()}},{key:"displaySize",get:function(){var e=this.sps.length?this.sps[0].displaySize:null;return e||(e={width:1280,height:720}),e}}]),e}();e.exports.HevcParser=u},function(e,t,r){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=r(7).AmfParser,o=function e(t,r,i,a,o){n(this,e),this.type=t,this.data=r,this.cts=i,this.dts=a,this.duration=0,this.size=r.length,this.flags=o},s=function(){function e(t,r){n(this,e),this._buffer=new Uint8Array(2097152),this._readPos=0,this._writePos=0,this._onSampleParsed=t,this._onMetaDataParsed=r}var t,r,s;return t=e,s=[{key:"_readUint32",value:function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}}],(r=[{key:"clear",value:function(){this._readPos=0,this._writePos=0}},{key:"input",value:function(e){for(this._writeToBuffer(e);this._parsePacket(););}},{key:"_parseHeader",value:function(){var t=this._writePos-this._readPos;if(t<9)return!1;var r=e._readUint32(this._buffer,this._readPos+5)+4;return!(t<r||(this._readPos+=r,0))}},{key:"_parsePacket",value:function(){var e=this._readPos,t=this._writePos-e;if(t<11)return!1;var r=this._buffer,i=r[e],n=r[e+1]<<16|r[e+2]<<8|r[e+3];if(5002753===n&&70===i)return this._parseHeader();if(n<=0||n>=12582912)throw new RangeError("invalid data size: ".concat(n));var a=11+n+4;if(t<a)return!1;this._readPos+=a;var o=r[e+4]<<16|r[e+5]<<8|r[e+6]|r[e+7]<<24,s=e+11,u=!0;switch(31&i){case 8:u=this._parseAudio(s,n,o);break;case 9:u=this._parseVideo(s,n,o);break;case 18:u=this._parseScript(s,n)}return u}},{key:"_parseAudio",value:function(e,t,r){var i=this._buffer,n=(240&i[e])>>>4;if(10===n){var a=0===i[e+1]?-n:n,s=new o(a,i.subarray(e+2,e+t),0,r,0);return this._onSampleParsed(s)}var u=new o(n,i.subarray(e+1,e+t),0,r,0);return this._onSampleParsed(u)}},{key:"_parseVideo",value:function(e,t,r){var i=this._buffer,n=(240&i[e])>>>4,a=15&i[e];if(7===a||12===a){var s=0===i[e+1]?-a:a,u=i[e+2]<<16|i[e+3]<<8|i[e+4];u=u<<8>>8;var h=new o(s,i.subarray(e+5,e+t),u,r,n);return this._onSampleParsed(h)}var f=new o(a,i.subarray(e+1,e+t),0,r,n);return this._onSampleParsed(f)}},{key:"_parseScript",value:function(e,t){var r=new DataView(this._buffer.buffer,e,t),i=(new a).parse(r);return this._onMetaDataParsed(i),!0}},{key:"_writeToBuffer",value:function(e){var t=e.length;if(this._writePos+t>this._buffer.length){var r=this._writePos-this._readPos,i=Math.max(this._buffer.length,r+2*t),n=new Uint8Array(i);n.set(this._buffer.subarray(this._readPos,this._writePos)),this._buffer=n,this._readPos=0,this._writePos=r}this._buffer.set(e,this._writePos),this._writePos+=t}}])&&i(t.prototype,r),s&&i(t,s),e}();e.exports={typeAudioAAC:10,typeAudioMP3:2,typeVideoH264:7,typeVideoH265:12,trackAudioAAC:-10,trackAudioMP3:-2,trackVideoH264:-7,trackVideoH265:-12},e.exports.Sample=o,e.exports.FlvParser=s},function(e,t){function r(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var n,a,o,s,u,h,f,l,c,d,_,v,p,y,m,g,b,k,w,S,B,D,T,M,P,x,U,E,A,C,O,I,R,F,L,j,N,q,V,H,z,X=Math.pow(2,32)-1;!function(){for(var e in B={avc1:[97,118,99,49],avcC:[97,118,99,67],btrt:[98,116,114,116],dinf:[100,105,110,102],dref:[100,114,101,102],esds:[101,115,100,115],ftyp:[102,116,121,112],hdlr:[104,100,108,114],hvc1:[104,118,99,49],hvcC:[104,118,99,67],mdat:[109,100,97,116],mdhd:[109,100,104,100],mdia:[109,100,105,97],mfhd:[109,102,104,100],minf:[109,105,110,102],moof:[109,111,111,102],moov:[109,111,111,118],mp4a:[109,112,52,97],mvex:[109,118,101,120],mvhd:[109,118,104,100],pasp:[112,97,115,112],sdtp:[115,100,116,112],smhd:[115,109,104,100],stbl:[115,116,98,108],stco:[115,116,99,111],stsc:[115,116,115,99],stsd:[115,116,115,100],stss:[115,116,115,115],stsz:[115,116,115,122],stts:[115,116,116,115],styp:[115,116,121,112],tfdt:[116,102,100,116],tfhd:[116,102,104,100],traf:[116,114,97,102],trak:[116,114,97,107],trun:[116,114,117,110],trex:[116,114,101,120],tkhd:[116,107,104,100],vmhd:[118,109,104,100]})B[e]=new Uint8Array(B[e]);D=new Uint8Array([105,115,111,109]),M=new Uint8Array([97,118,99,49]),P=new Uint8Array([109,112,52,50]),x=new Uint8Array([100,97,115,104]),T=new Uint8Array([0,0,0,1]),U=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:U,audio:E},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),F=R,L=R,j=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=R,C=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}(),n=function(e){var t,r,i=Array.prototype.slice.call(arguments,1),n=0;for(t=0;t<i.length;t++)n+=i[t].byteLength;for((r=new Uint8Array(n+8))[0]=r.byteLength>>>24&255,r[1]=r.byteLength>>>16&255,r[2]=r.byteLength>>>8&255,r[3]=255&r.byteLength,r.set(e,4),t=0,n=8;t<i.length;t++)r.set(i[t],n),n+=i[t].byteLength;return r},a=function(){return n(B.dinf,n(B.dref,I))},o=function(e){var t=e.extraData?e.extraData.length:0,r=13+(t>0?t+5:0),i=8+r+5+1,a=new Uint8Array([0,0,0,0,3,128|i>>>21,128|i>>>14,128|i>>>7,127&i,0,1,0,4,128|r>>>21,128|r>>>14,128|r>>>7,127&r,e.objectType,21,0,0,0,0,1,89,40,0,1,89,40]),o=0===t?null:new Uint8Array([5,128|t>>>21,128|t>>>14,128|t>>>7,127&t]),s=new Uint8Array([6,128,128,128,1,2]);return t>0?n(B.esds,a,o,e.extraData,s):n(B.esds,a,s)},s=function(){return n(B.ftyp,D,T,D,P,M,x)},m=function(e){return n(B.hdlr,A[e])},y=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.sampleRate&&(t[12]=e.sampleRate>>>24&255,t[13]=e.sampleRate>>>16&255,t[14]=e.sampleRate>>>8&255,t[15]=255&e.sampleRate),n(B.mdhd,t)},p=function(e){return n(B.mdia,y(e),m(e.type),h(e))},u=function(e){return n(B.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},h=function(e){return n(B.minf,"video"===e.type?n(B.vmhd,C):n(B.smhd,O),a(),g(e))},V=function(e){var t=8;t+=16;var i,n=r(e);try{for(n.s();!(i=n.n()).done;){var a=i.value,o=a.samples.length;o>0&&(t+=8,t+=8+(a.defaultDuration?4:0)+16,t+=20,t+=24+o*(a.defaultDuration?4:12))}}catch(e){n.e(e)}finally{n.f()}return t},f=function(e,t){var i=[B.moof];i.push(u(e));var a,o=r(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.samples.length>0&&i.push(k(s,0))}}catch(e){o.e(e)}finally{o.f()}return n.apply(null,i)},l=function(e){var t=[B.moov];t.push(d(e.length+1,0));var i,a=r(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push(_(o))}}catch(e){a.e(e)}finally{a.f()}return t.push(c(e)),n.apply(null,t)},c=function(e){var t,i=[B.mvex],a=r(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;i.push(w(o))}}catch(e){a.e(e)}finally{a.f()}return n.apply(null,i)},d=function(e,t){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]);return n(B.mvhd,r)},g=function(e){return"video"===e.type?n(B.stbl,b(e),n(B.stts,N),n(B.stss,L),n(B.stsc,F),n(B.stsz,j),n(B.stco,R)):n(B.stbl,b(e),n(B.stts,N),n(B.stsc,F),n(B.stsz,j),n(B.stco,R))},b=function(e){return n(B.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?H(e):z(e))},H=function(e){var t=B.avcC;switch(e.tag){case B.avc1:t=B.avcC;break;case B.hvc1:t=B.hvcC}var r=[e.tag,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),n(t,e.extraData)];if(e.sarRatio){var i=e.sarRatio[0],a=e.sarRatio[1];r.push(n(B.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a])))}return n.apply(null,r)},z=function(e){return n(e.tag,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelCount)>>8,255&e.channelCount,(65280&e.sampleBits)>>8,255&e.sampleBits,0,0,0,0,(65280&e.sampleRate)>>8,255&e.sampleRate,0,0]),o(e))},v=function(e){var t=new Uint8Array([0,0,0,3,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,"audio"===e.type?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(B.tkhd,t)},k=function(e,t){var r,i,a,o,s,u=e.defaultDuration,h=u?131114:131106,f="audio"===e.type?33554432:16842752;return r=n(B.tfhd,new Uint8Array(u?[0,(16711680&h)>>16,(65280&h)>>8,255&h,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,f>>>24&255,f>>>16&255,f>>>8&255,255&f]:[0,(16711680&h)>>16,(65280&h)>>8,255&h,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,f>>>24&255,f>>>16&255,f>>>8&255,255&f])),o=Math.floor(e.baseMediaDecodeTime/(X+1)),s=Math.floor(e.baseMediaDecodeTime%(X+1)),i=n(B.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),a=S(e,t),n(B.traf,r,i,a)},_=function(e){return n(B.trak,v(e),p(e))},w=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]);return n(B.trex,t)},S=function(e,t){var r=t+e.dataOffset,i=e.samples,a=i.length,o=e.defaultDuration,s=a>0&&1===i[0].flags,u=new Uint8Array(16+a*(o?4:12)),h=517;o||(h|=2304),u.set([1,(16711680&h)>>16,(65280&h)>>8,255&h,(4278190080&a)>>>24,(16711680&a)>>>16,(65280&a)>>>8,255&a,(4278190080&r)>>>24,(16711680&r)>>>16,(65280&r)>>>8,255&r],0);var f=12;if(u.set(s?[2,0,0,0]:[1,1,0,0],f),f+=4,o)for(var l=0;l<a;l++){var c=i[l].size;u.set([(4278190080&c)>>>24,(16711680&c)>>>16,(65280&c)>>>8,255&c],f),f+=4}else for(l=0;l<a;l++){var d=i[l],_=d.duration,v=d.size,p=d.cts;u.set([(4278190080&_)>>>24,(16711680&_)>>>16,(65280&_)>>>8,255&_,(4278190080&v)>>>24,(16711680&v)>>>16,(65280&v)>>>8,255&v,(4278190080&p)>>>24,(16711680&p)>>>16,(65280&p)>>>8,255&p],f),f+=12}return n(B.trun,u)},q=function(e){var t,r=s(),i=l(e);return(t=new Uint8Array(r.byteLength+i.byteLength)).set(r),t.set(i,r.byteLength),t},e.exports={moof:f,moov:l,types:B,initSegment:q,moofSize:V}},function(e,t){e.exports.lowerBound=function(e,t){for(var r=0,i=e.length;0!=i;){var n=i>>1,a=r+n;e[a]<t?(r=++a,i-=n+1):i=n}return r}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var n=f(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),c=r(4),d=r(9).Fetcher,_=r(20).fMp4Parser,v=r(21),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,r,i=s(u);function u(e,t){var r;return function(e,t){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),r=i.call(this,e,t),console.log("Hls7Player ".concat(r.version)),r._playlist=null,r._fetchM3u8Timer=void 0,r._fetchM3u8Binder=r._fetchM3u8.bind(h(r)),r._onM3u8ResponsedBinder=r._onM3u8Responsed.bind(h(r)),r._onM3u8FetchedBinder=r._onM3u8Fetched.bind(h(r)),r._onM3u8FetchErrorBinder=r._onM3u8FetchError.bind(h(r)),r._fetchedM4sCount=0,r._fetchingBegin=0,r._lastFetchM3u8=0,r._lastM3u8Sequence=0,r._lastM3u8Updated=0,r._initDone=!1,r._lastDuration=0,r._totalDuration=0,r._tryM3u8Times=0,r._pendingBuffers=[],r._onM4sResponsedBinder=r._onM4sResponsed.bind(h(r)),r._onM4sFetchedBinder=r._onM4sFetched.bind(h(r)),r._onM4sFetchErrorBinder=r._onM4sFetchError.bind(h(r)),r._mp4Parser=null,r._onM4sParsedBinder=r._onM4sParsed.bind(h(r)),r._m3u8Fetcher=new d(r._onM3u8ResponsedBinder,r._onM3u8FetchedBinder,r._onM3u8FetchErrorBinder),r._m4sFetcher=new d(r._onM4sResponsedBinder,r._onM4sFetchedBinder,r._onM4sFetchErrorBinder),r._savedFetchAsStream=r._m4sFetcher.fetchAsStream,r._minBufferLength=0,r._onPlaylistUpdate=function(e,t){},r}return t=u,(r=[{key:"destroy",value:function(){a(f(u.prototype),"destroy",this).call(this),void 0!==this._fetchM3u8Timer&&(window.clearTimeout(this._fetchM3u8Timer),this._fetchM3u8Timer=void 0),this._fetchedM4sCount=0,this._mp4Parser=null,this._playlist=null,this._initDone=!1,this._lastDuration=0,this._lastM3u8Sequence=0,this._totalDuration=0,this._tryM3u8Times=0,this._pendingBuffers=[]}},{key:"setP2PContext",value:function(e){this._isDestroied||(e?(null!=e.P2PBufferLength&&(this._minBufferLength=e.P2PBufferLength),null!=e.P2PFetchAsStream&&(this._m4sFetcher.fetchAsStream=e.P2PFetchAsStream),null!=e.onPlaylistUpdate&&(this._onPlaylistUpdate=e.onPlaylistUpdate)):(this._minBufferLength=0,this._m4sFetcher.fetchAsStream=this._savedFetchAsStream,this._onPlaylistUpdate=function(e,t){}),this._playlist&&(this._playlist.onPlaylistUpdate=this._onPlaylistUpdate))}},{key:"_doNextFetch",value:function(){var e=this._playlist,t=e.count,r=e.endOfStream;if(0===t&&r)this._pushEnd();else if(t>0&&(r||this._totalDuration<4e3||e.remainDuration>this._minBufferLength))this._fetchNextM4s();else{void 0!==this._fetchM3u8Timer&&(window.clearTimeout(this._fetchM3u8Timer),this._fetchM3u8Timer=void 0);var i=performance.now()-this._lastFetchM3u8,n=Math.round(this._lastDuration-i);this._tryM3u8Times=0,n>=100?this._fetchM3u8Timer=window.setTimeout(this._fetchM3u8Binder,n):this._fetchM3u8()}}},{key:"_fetchM3u8",value:function(){try{this._fetchingBegin=this._lastFetchM3u8=performance.now(),this._m3u8Fetcher.fetchAsText(this._url,!1,2e3)}catch(e){this._notifyNetworkError(l.errorNetworkFetch,{url:this._url,info:e})}}},{key:"_fetchNextM4s",value:function(){var e=null;try{var t=this._playlist.shift();t&&(e=t.uri,this._lastDuration=Math.floor(1e3*t.duration),this._fetchingBegin=performance.now(),this._m4sFetcher.fetchAsStream(e,!1,this._timeout))}catch(t){this._notifyNetworkError(l.errorNetworkFetch,{url:e,info:t})}this._removeOutdated()}},{key:"_onM3u8Responsed",value:function(e,t){return!(this._isDestroied||(304===t.status?(this._isDestroied||this._doNextFetch(),1):t.ok?(!this._firstResponseNotified&&this.onFirstResponse&&(this._firstResponseNotified=!0,this.onFirstResponse(t)),0):(this._playlist&&(this._playlist.endOfStream=!0),this._notifyNetworkError(l.errorNetworkFetch,{url:e,status:t.status}),1)))}},{key:"_onM3u8Fetched",value:function(e,t,r){var i=performance.now(),n=i-this._fetchingBegin,a=this._playlist;if(t&&a){var o=a.parse(t);if(o==v.parsedAsMaster)return this._url=a.streamUrls[0],console.log("stream url: ".concat(this._url)),a.setUrl(this._url),void this._fetchM3u8();if(o<0&&0===a.count)return void this._notifyParserError(l.errorM3u8Data,{url:e,info:o});if(this._lastM3u8Sequence!==a.lastSequence)this._lastM3u8Sequence=a.lastSequence,this._lastM3u8Updated=i;else if(i>=this._lastM3u8Updated+this._timeout)return void this._notifyParserError(l.errorM3u8NotUpdate,{url:e,info:Math.round(i-this._lastM3u8Updated)})}if(a&&a.count>0&&!this._initDone){var s=a.shift();try{new d(this._onM4sResponsedBinder,this._onInitM4sFetched.bind(this),this._onM4sFetchErrorBinder).fetchAsBuffer(s.uri)}catch(e){this._notifyNetworkError(l.errorNetworkFetch,{url:s?s.uri:null,info:e})}}this._isDestroied||(this._doNextFetch(),this._onUrlFetchDone(e,n))}},{key:"_onM3u8FetchError",value:function(e,t,r){t===l.errorNetworkTimeout&&!this._isDestroied&&++this._tryM3u8Times<3?(console.warn("fetch ".concat(this._tryM3u8Times,": ").concat(e," after 1s timeout")),this._fetchM3u8()):this._notifyNetworkError(t,{url:e,info:r})}},{key:"_onM4sResponsed",value:function(e,t){return!(this._isDestroied||!t.ok&&(this._notifyNetworkError(l.errorNetworkFetch,{url:e,status:t.status}),1))}},{key:"_onInitM4sFetched",value:function(e,t,r){var i=performance.now()-this._fetchingBegin;t&&(this._parseM4s(e,t,r),this._receivedBytes+=t.byteLength),r&&(this._initDone=!0,this._fetchedM4sCount++,this._onUrlFetchDone(e,i))}},{key:"_onM4sFetched",value:function(e,t,r){if(!this._isDestroied){!this._firstPacketNotified&&this.onFirstPacket&&(this._firstPacketNotified=!0,this.onFirstPacket());var i=performance.now()-this._fetchingBegin;if(r&&(this._totalDuration+=this._lastDuration,this._doNextFetch()),t){var n=this._pendingBuffers;if(this._initDone){for(;n.length>0;){var a=n.shift();this._parseM4s(a.url,a.buffer,a.done)}this._parseM4s(e,t,r)}else n.push({url:e,buffer:t,done:r});this._receivedBytes+=t.byteLength}r&&(this._fetchedM4sCount++,this._onUrlFetchDone(e,i,this._lastDuration))}}},{key:"_onM4sFetchError",value:function(e,t,r){this._notifyNetworkError(t,{url:e,info:r})}},{key:"_onM4sParsed",value:function(e,t){var r=this._mp4Parser;1836019574===t&&r&&r.metaData&&(this._mimeType=r.mimeType,this.onMetaData&&this.onMetaData(r.metaData)),r&&this._ensureMse(r.mimeType),this._pushBuffer(e)}},{key:"_onUrlFetchDone",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.onFileFetched&&this.onFileFetched(e,{used:Math.round(t),duration:r})}},{key:"_parseM4s",value:function(e,t,r){try{this._mp4Parser&&this._mp4Parser.parse(t,r)}catch(t){var i="DtsError"===t.name?l.errorMp4Dts:l.errorMp4Data;this._notifyParserError(i,{url:e,info:t.message})}}},{key:"version",get:function(){return"v1.74"}},{key:"fetchedM4sCount",get:function(){return this._fetchedM4sCount}},{key:"minBufferLength",set:function(e){this._minBufferLength=e}},{key:"src",set:function(e){this.destroy(),this._setup(e),this._playlist=new v.M3u8Parser,this._playlist.setUrl(this._url),this._playlist.onPlaylistUpdate=this._onPlaylistUpdate,this._mp4Parser=new _(this._onM4sParsedBinder,this.onSeiData),this._fetchM3u8()}}])&&n(t.prototype,r),u}(c.LivePlayer);e.exports.Hls7Player=p},function(e,t,r){function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=r(7).AmfParser,s=r(5),u=r(0),h=r(3),f=r(1),l=r(8).SeiParser,c=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=h.checkChromeVer();this._chrome4x=i>0&&i<=49,this.uint32_max=Math.pow(2,32),this.mimeType=null,this.metaData={},this._audioChannel=void 0,this._audioRate=void 0,this._audioCodec=null,this._videoWidth=void 0,this._videoHeight=void 0,this._videoCodec=null,this._videoTag=0,this._videoBaseDts=0,this._videoCtsFixed=!1,this._videoTimeScale=1/9e4,this._videoTrackId=void 0,this._videoFrames=[],this._lastMoofSize=void 0,this._lastTrackId=void 0,this._firstDtsMap=new Map,this._buffer=null,this._bytesInBuffer=0,this._onParsed=t,this._onSeiParsed=r,this._parseMoofBoxsBinder=this._parseMoofBoxs.bind(this),this._parseMoovBoxsBinder=this._parseMoovBoxs.bind(this)}var t,r,n;return t=e,n=[{key:"parseEncoder",value:function(e,t){var r=t,i=t+32;e.getUint8(t)<32&&(r++,i--);var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength).subarray(r,i);return(new o).decodeUtf8(n)}},{key:"parseH264Codec",value:function(e,t){t+=8;var r=e.getUint8(t+1),i=e.getUint8(t+2),n=e.getUint8(t+3);return"avc1."+f.to02xString(r)+f.to02xString(i)+f.to02xString(n)}},{key:"parseH265Codec",value:function(e,t){t+=8;var r=e.getUint8(t+1),i=r>>6&3,n=r>>5&1,a=31&r,o=e.getUint32(t+2),s=e.getUint8(t+12),u=o;return u=(u=(u=(u=(u=u>>>1&1431655765|(1431655765&u)<<1)>>>2&858993459|(858993459&u)<<2)>>>4&252645135|(252645135&u)<<4)>>>8&16711935|(16711935&u)<<8)>>>16|u<<16,"hvc1."+["","A","B","C"][i%4]+a.toString()+"."+u.toString(16).toLowerCase()+"."+["L","H"][n%2]+s.toString()}}],(r=[{key:"clear",value:function(){this._buffer=null,this._bytesInBuffer=0}},{key:"parse",value:function(e,t){var r=0!==this._bytesInBuffer;r&&(this._appendBuffer(new Uint8Array(e)),e=this._buffer.subarray(0,this._bytesInBuffer));for(var i=new Uint8Array(e),n=new DataView(i.buffer),a=i.byteLength,o=0;o+8<=a;){var s=n.getUint32(o),u=o+s;if(u>a)break;var h=n.getUint32(o+4),f=i.subarray(o,u);switch(h){case 1836019558:if(this._lastMoofSize=s,this._lastTrackId=void 0,this._videoFrames.length=0,r)this._parseBox(n,o,u,this._parseMoofBoxsBinder);else{var l=new Uint8Array(f);this._parseBox(new DataView(l.buffer),0,s,this._parseMoofBoxsBinder),f=l}break;case 1836019574:this._lastTrackId=void 0,this._parseBox(n,o,u,this._parseMoovBoxsBinder)&&(this._updateMediaInfo(),this._updateMimeType());break;case 1835295092:this._videoFrames.length&&(this._parseMdatBox(f,s),this._videoFrames.length=0)}this._onParsed(f,h),o=u}r&&0===o||(o>=a?this._bytesInBuffer=0:(this._bytesInBuffer=0,!t&&o<a&&this._appendBuffer(i.subarray(o))))}},{key:"_appendBuffer",value:function(e){var t=this._bytesInBuffer+e.length,r=new Uint8Array(t);this._buffer&&this._bytesInBuffer&&r.set(this._buffer.subarray(0,this._bytesInBuffer),0),this._buffer=r,this._buffer.set(e,this._bytesInBuffer),this._bytesInBuffer=t}},{key:"_parseMoovBoxs",value:function(e,t,r,i){switch(r){case 1836019574:case 1953653099:case 1835297121:case 1835626086:case 1937007212:return this._parseBox(e,t+8,t+i,this._parseMoovBoxsBinder);case 1937011556:this._parseStsdBox(e,t,i);break;case 1835296868:this._parseMdhdBox(e,t,i);break;case 1953196132:this._lastTrackId=e.getUint32(t+8+4+8)}return!0}},{key:"_parseMoofBoxs",value:function(e,t,r,i){switch(r){case 1836019558:case 1953653094:return this._parseBox(e,t+8,t+i,this._parseMoofBoxsBinder);case 1952868452:this._lastTrackId=e.getUint32(t+8+4);break;case 1952867444:this._parseTfdtBox(e,t,i);break;case 1953658222:this._parseTrunBox(e,t,i)}return!0}},{key:"_parseMdhdBox",value:function(e,t,r){t+=12,t+=8,this._lastTrackId===this._videoTrackId&&(this._videoTimeScale=1/e.getUint32(t))}},{key:"_parseStsdBox",value:function(t,r,i){r+=12;var n=t.getUint32(r);if(r+=4,0!==n){t.getUint32(r),r+=4;var a=t.getUint32(r);r+=4;var o=0;switch(a){case 1635148593:case 1752589105:this.metaData.fps=t.getUint32(r+16)/100,this.metaData.videodatarate=t.getUint32(r+20)/1e3,this._videoWidth=t.getUint16(r+24),this._videoHeight=t.getUint16(r+26),this.metaData.encoder=e.parseEncoder(t,r+42),r+=78,(o=t.getUint32(r))>=12?1635148593===a?this._videoCodec=e.parseH264Codec(t,r):1752589105===a&&(this._videoCodec=e.parseH265Codec(t,r)):1635148593===a?this._videoCodec="avc1.64002a":1752589105===a&&(this._videoCodec="hvc1.1.6.L93.90"),this._videoTag=a,this._videoTrackId=this._lastTrackId;break;case 1836069985:this._audioChannel=t.getUint16(r+16),this._audioRate=t.getUint32(r+24)>>>16,r+=28,o=t.getUint32(r),this._audioCodec=o>=10?this._parseAudioCodec(t,r):"mp4a.40.2";break;case 1700998451:this._audioChannel=t.getUint16(r+16),this._audioRate=t.getUint32(r+24)>>>16,this._audioCodec="ec-3"}}}},{key:"_parseTfdtBox",value:function(e,t,r){t+=8;var i=e.getUint8(t);t+=4;var n=1===i?this.getUint64(e,t):e.getUint32(t);if(void 0!==this._lastTrackId){var a=this._firstDtsMap[this._lastTrackId];void 0===a&&(this._firstDtsMap[this._lastTrackId]=a=n);var o=n-a;if(o<0)throw new u.SomeError("DtsError","wrong dts: ".concat(n,"<").concat(a));1===i?this.setUint64(e,t,o):e.setUint32(t,o),this._lastTrackId===this._videoTrackId&&(this._videoBaseDts=o)}}},{key:"_parseTrunBox",value:function(e,t,r){if(this._lastTrackId===this._videoTrackId){t+=8;var i=16777215&e.getUint32(t);this._chrome4x&&4&i&&e.setUint32(t+12,33554432),t+=4;var n=e.getUint32(t);if(t+=4,0!==n){if(!this._videoCtsFixed&&2048&i){var a=t;1&i&&(t+=4),4&i&&(t+=4),256&i&&(t+=4),512&i&&(t+=4),0!==e.getInt32(t)&&e.setInt32(t,0),this._videoCtsFixed=!0,t=a}if(this._onSeiParsed){var o=0;1&i&&(o=e.getUint32(t)-this._lastMoofSize,t+=4),4&i&&(t+=4);for(var s=this._videoBaseDts,u=0;u<n;u++){var h=e.getUint32(t);t+=4;var f=e.getUint32(t);t+=4;var l=e.getInt32(t);t+=4,this._videoFrames.push({dts:s,cts:l,offset:o,size:f}),s+=h,o+=f}}}}}},{key:"_parseMdatBox",value:function(e,t){var r,n=i(this._videoFrames);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(!this._onSeiParsed||a.offset+a.size>t)break;var o=a.dts*this._videoTimeScale,s=o+a.cts*this._videoTimeScale;l.parse(e,a.offset,a.size,o,s,4,1752589105===this._videoTag,this._onSeiParsed)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_parseAudioCodec",value:function(e,t){t+=8,t+=4,t+=8,t+=5;var r=e.getUint8(t);if(107==r||105==r)return"mp3";t+=9,this.metaData.audiodatarate=e.getUint32(t)/1e3,t+=4,t+=5;var i=e.getUint8(t)>>>3&31;return s.getAacCodec(r,i)}},{key:"_parseBox",value:function(e,t,r,i){for(;t+8<=r;){var n=e.getUint32(t),a=e.getUint32(t+4);if(t+n>r||!i(e,t,a,n))return!1;t+=n}return t<=r}},{key:"_updateMediaInfo",value:function(){void 0!==this._audioRate&&(this.metaData.audiosamplerate=this._audioRate),void 0!==this._audioChannel&&(this.metaData.audiochannel=this._audioChannel),void 0!==this._videoWidth&&(this.metaData.width=this._videoWidth),void 0!==this._videoHeight&&(this.metaData.height=this._videoHeight)}},{key:"_updateMimeType",value:function(){var e='video/mp4; codecs="';if(this._audioCodec&&this._videoCodec)e+=this._videoCodec+","+this._audioCodec;else if(this._audioCodec)e+=this._audioCodec;else{if(!this._videoCodec)return;e+=this._videoCodec}this.mimeType=e+'"'}},{key:"getUint64",value:function(e,t){var r=e.getUint32(t),i=e.getUint32(t+4);return r*this.uint32_max+i}},{key:"setUint64",value:function(e,t,r){e.setUint32(t,r>=this.uint32_max?Math.floor(r/this.uint32_max):0),e.setUint32(t+4,4294967295&r)}}])&&a(t.prototype,r),n&&a(t,n),e}();e.exports.fMp4Parser=c},function(e,t){function r(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=["trid"],o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onPlaylistUpdate=function(e,t){},this.endOfStream=!1,this.mimeType=null,this.streamUrls=[],this._initUris=new Set,this._lastSeq=0,this._lastUri=null,this._nextSequence=void 0,this._remainDuration=0,this._totalCount=0,this._totalDuration=0,this._dataUrls=[],this._url=null}var t,i,o;return t=e,o=[{key:"copyQueryParams",value:function(e){var t=e.split("&"),r="";for(var i in t){var n=t[i].split("=");n&&2===n.length&&-1!==a.indexOf(n[0])&&(r+="&"+n[0]+"="+n[1])}return r.length>1&&(r="?"+r.substring(1)),r}}],(i=[{key:"setUrl",value:function(t){var r=t.lastIndexOf("/"),i=t.lastIndexOf("?");if(this._relativePath=t.substring(0,r+1),this._queryParams=null,a.length&&i>0){var n=t.substring(i+1);this._queryParams=e.copyQueryParams(n)}this._url=t,this._initUris.clear(),this._lastSeq=0,this._lastUri=null,this._nextSequence=void 0}},{key:"parse",value:function(e){for(var t=void 0,i=void 0,n=void 0,a=void 0,o=null,s=null,u=0,h=0,f=[],l=[],c=e.length,d=0;d<c;){var _=e.indexOf("\n",d);-1===_&&(_=c);var v=e.substring(d,_);if(d=_+1,0!==v.length)if("#"===v[0]){var p=v.indexOf(":");if(p>0){var y=v.substring(0,p),m=v.substring(p+1);if("#EXTINF"===y){var g=m.lastIndexOf(",");o=-1!==g?m.substring(0,g):m.substring(0),s=-1!==g?m.substring(g+1,m.length):null,u=1}else if("#EXT-X-VERSION"===y)t=parseInt(m.trim());else if("#EXT-X-MEDIA-SEQUENCE"===y)n=i=parseInt(m.trim());else if("#EXT-X-MAP"===y){var b=m.trim();if(b.length<=5||'URI="'!==b.substring(0,5))return console.error("wrong #EXT-X-MAP: ".concat(m)),-2;var k=(b=b.substring(5)).lastIndexOf('"');b=-1!==k?b.substring(0,k):b.substring(0);var w;w=0===h?void 0:n++,this._initUris.has(b)||(f.push({uri:b,duration:this.averageDuration,title:"",seq:w}),this._initUris.add(b)),h++}else"#EXT-X-STREAM-INF"===y&&(u=2)}else"#EXT-X-ENDLIST"===v&&(a=!0)}else 1===u?(this._lastSeq=n++,this._lastUri=v.trim(),f.push({uri:this._lastUri,duration:o.trim(),title:s,seq:this._lastSeq}),o=null,s=null,u=0):2===u&&(l.push(v),u=0)}if(this.streamUrls=l,l.length>0)return 1;if(void 0===t||t<6)return console.error("wrong #EXT-X-VERSION: ".concat(t)),-1;if(void 0!==a&&(this.endOfStream=a),0===this._initUris.size&&!this.endOfStream)return console.error("missing #EXT-X-MAP URI"),-2;if(this._nextSequence!==n){if(void 0===this._nextSequence&&(this._nextSequence=i),this._nextSequence<i&&this._nextSequence+30>=i&&this._lastUri){console.warn("lost sequence: ".concat(this._nextSequence," -> ").concat(i));for(var S=this.averageDuration,B=this._lastSeq.toString(),D=i-1;D>=this._nextSequence;D--){var T=this._lastUri.replace(B,D.toString());f.unshift({uri:T,duration:S})}}var M,P=r(f);try{for(P.s();!(M=P.n()).done;){var x=M.value;(x.seq>=this._nextSequence||void 0===x.seq)&&(x.duration=parseFloat(x.duration),isNaN(x.duration)&&(x.duration=this.averageDuration),this._appendEntry(x))}}catch(e){P.e(e)}finally{P.f()}this._nextSequence<n&&(this._nextSequence=n)}return 0}},{key:"shift",value:function(){var e=this._dataUrls.length>0?this._dataUrls.shift():null;return e&&(this._remainDuration-=e.duration),e}},{key:"_appendEntry",value:function(e){e.uri=this._buildM4sUrl(e.uri),this._dataUrls.push(e),this.onPlaylistUpdate(!1,e),this._remainDuration+=e.duration,this._totalCount++,this._totalDuration+=e.duration}},{key:"_buildM4sUrl",value:function(e){var t=-1!==e.indexOf("://")?e:this._relativePath+e;return null!==this._queryParams&&(-1!==e.indexOf("?")?t+="&"+this._queryParams.substring(1):t+=this._queryParams),t}},{key:"count",get:function(){return this._dataUrls.length}},{key:"averageDuration",get:function(){return this._totalCount>0?this._totalDuration/this._totalCount:0}},{key:"lastSequence",get:function(){return this._nextSequence>0?this._nextSequence-1:0}},{key:"remainDuration",get:function(){return this._remainDuration}}])&&n(t.prototype,i),o&&n(t,o),e}();e.exports={M3u8Parser:o,parsedOk:0,parsedAsMaster:1,parsedErrorVer:-1,parsedErrorInit:-2}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=h(e);if(t){var n=h(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,r,i=s(u);function u(e,t){var r;return function(e,t){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}(this),r=i.call(this,e,t),console.log("NativePlayer ".concat(r.version)),r}return t=u,(r=[{key:"destroy",value:function(){a(h(u.prototype),"destroy",this).call(this)}},{key:"version",get:function(){return"v1.0"}},{key:"src",set:function(e){this.destroy(),this._player.src=e,0!==this.startTime&&(this._player.currentTime=this.startTime)}}])&&n(t.prototype,r),u}(r(4).LivePlayer);e.exports.NativePlayer=f}])});
},{}],"kyLC":[function(require,module,exports) {
"use strict";function e(e){var i,o;return null!==(o=null===(i=RegExp(`[;\\s]*${e}=([^;\\s]+)`).exec(document.cookie))||void 0===i?void 0:i[1])&&void 0!==o?o:""}function i(){const e=navigator.userAgent.toLowerCase(),i=e.includes("ipad"),o=e.includes("iphone os"),n=e.includes("midp"),s=e.includes("rv:1.2.3.4"),d=e.includes("ucweb"),u=e.includes("android"),c=e.includes("windows ce"),t=e.includes("windows mobile");return!!(i||o||n||s||d||u||c||t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCookie=e,exports.isMobile=i;
},{}],"wPfs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Formatter=void 0;var e=require("./utils");const t=e=>{var t;return[`${location.href}`,`${null==e.spmId?"":e.spmId+"."}${e.evtId}`,"",Date.now(),"","",`${screen.width}x${screen.height}`,"",JSON.stringify({event:e.evtId,value:null!==(t=e.data)&&void 0!==t?t:""})]},r={"011778":t,"000527":t,"000358":t=>{var r,n;return[`${location.href}`,`${null!==(r=document.referrer)&&void 0!==r?r:""}`,`${null==t.spmId?"":t.spmId+"."}${t.evtId}`,Date.now(),null!==(n=(0,e.getCookie)("fts"))&&void 0!==n?n:"",`${screen.width}x${screen.height}`,(0,e.isMobile)()?2:1,null==t.data?"":JSON.stringify(t.data),"",0]}};exports.Formatter=r;
},{"./utils":"kyLC"}],"BuDO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tracker=void 0;var t,e,i,r,s,a,n,o,h,f,c,l=require("./formatter"),d=require("./utils"),u=function(t,e,i,r){return new(i||(i=Promise))(function(s,a){function n(t){try{h(r.next(t))}catch(e){a(e)}}function o(t){try{h(r.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(n,o)}h((r=r.apply(t,e||[])).next())})},w=function(t,e,i,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,i):s?s.value=i:e.set(t,i),i},v=function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};let p=Promise.resolve();function m(t,e=!1,i=0){var r;return u(this,void 0,void 0,function*(){if(0===t.length)return;const s="string"==typeof t?t:t.join(""),a="//data.bilibili.com/gol/postweb";e?null===(r=navigator.sendBeacon)||void 0===r||r.call(navigator,a,s):(yield p,fetch(a,{method:"POST",body:s,credentials:"include"}).then(e=>{if(429===e.status){const e=[1e4,2e4,4e4][i];if(null==e)return;window.setTimeout(()=>{m(t,!1,i+=1).catch(()=>{})},e)}}).catch(t=>{console.error(t)}))})}""===(0,d.getCookie)("buvid3")&&(p=window.fetch("//data.bilibili.com/v/").catch(()=>{p=Promise.resolve()}));class y{constructor(d,u={}){var p;if(t.set(this,[]),e.set(this,void 0),i.set(this,void 0),r.set(this,()=>{}),s.set(this,void 0),a.set(this,[]),n.set(this,!1),o.set(this,(()=>{let t=!1;return()=>{if(t)return;t=!0;const e=window.setTimeout(()=>{t=!1,v(this,f,"f").call(this)},6e4);w(this,r,()=>{t=!1,clearTimeout(e)},"f")}})()),h.set(this,(t,e)=>{const i=window.setTimeout(()=>{w(this,a,v(this,a,"f").filter(({timer:t})=>t!==i),"f"),m(t,!1,0).catch(()=>{})},Math.random()*e),r={timer:i,data:t};v(this,a,"f").push(r)}),f.set(this,(e=!1)=>{v(this,r,"f").call(this),m(v(this,t,"f"),e).catch(()=>{}),w(this,t,[],"f")}),c.set(this,()=>{w(this,n,!0,"f"),v(this,a,"f").forEach(({timer:t})=>clearTimeout(t)),m(v(this,a,"f").map(t=>t.data),!0).catch(()=>{}),w(this,a,[],"f"),v(this,f,"f").call(this,!0)}),w(this,e,d,"f"),w(this,s,null!==(p=u.formatter)&&void 0!==p?p:l.Formatter[d],"f"),null==v(this,s,"f"))throw new Error(`Undefined Formatter for logId: ${d}`);w(this,i,u,"f"),window.addEventListener("beforeunload",v(this,c,"f"))}event(r,a,c={}){var l,d;if("string"!=typeof r||""===r)throw Error(`evtId: ${JSON.stringify(r)} not a string`);const u=null!==(d=null!==(l=c.sample)&&void 0!==l?l:v(this,i,"f").sample)&&void 0!==d?d:100,w=100*Math.random()>=u;if(!0===v(this,i,"f").debug&&console.log(`live-web-track: evtId: ${r}, 采样率 ${u}%, 本次是否上报 ${JSON.stringify(!w)}`),w)return;const p=`${v(this,e,"f")}${Date.now()}${v(this,s,"f").call(this,Object.assign({evtId:r,data:a},v(this,i,"f"))).join("|")}`;if(v(this,n,"f"))m(p,!0).catch(()=>{});else{if("number"==typeof c.randDelay)return void v(this,h,"f").call(this,p,c.randDelay);v(this,t,"f").push(p)}v(this,t,"f").length>=10?v(this,f,"f").call(this):v(this,o,"f").call(this)}set(t){w(this,i,Object.assign({},v(this,i,"f"),t),"f")}destroy(){v(this,f,"f").call(this),window.removeEventListener("beforeunload",v(this,c,"f"))}}exports.Tracker=y,t=new WeakMap,e=new WeakMap,i=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,f=new WeakMap,c=new WeakMap;
},{"./formatter":"wPfs","./utils":"kyLC"}],"ESUf":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var r,o=1,t=arguments.length;o<t;o++)for(var a in r=arguments[o])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomCode=exports.OperationCode=exports.ErrorCode=exports.EventCode=exports.PerfCode=exports.Category=void 0;var r,o,t,a,n,i,l=require("@bilibili-live/live-web-track");!function(e){e[e.Perf=1]="Perf",e[e.Event=2]="Event",e[e.Error=3]="Error",e[e.Operation=4]="Operation",e[e.Custom=5]="Custom"}(r=exports.Category||(exports.Category={})),function(e){e[e.PlayerResLoad=1]="PlayerResLoad",e[e.FirstPacket=2]="FirstPacket",e[e.VideoMeta=3]="VideoMeta",e[e.FirstFrame=4]="FirstFrame",e[e.Api=5]="Api"}(o=exports.PerfCode||(exports.PerfCode={})),function(e){e[e.RoomPlayerInit=1]="RoomPlayerInit",e[e.CreateVideo=2]="CreateVideo",e[e.HomePlayerInit=100]="HomePlayerInit",e[e.ActivityPlayerInit=200]="ActivityPlayerInit"}(t=exports.EventCode||(exports.EventCode={})),function(e){e[e.UnsupportedPlayer=90001]="UnsupportedPlayer",e[e.NativeVideoError=90002]="NativeVideoError",e[e.ApiRequest=91001]="ApiRequest",e[e.ApiResponse=91002]="ApiResponse",e[e.ApiBiz=91003]="ApiBiz",e[e.FirstFrameNotEmit=92001]="FirstFrameNotEmit",e[e.RetryMaxTime=92002]="RetryMaxTime",e[e.SocketConnect=93001]="SocketConnect",e[e.PlayUrlNull=94001]="PlayUrlNull",e[e.RoomP0ApiFetchError=21001]="RoomP0ApiFetchError",e[e.RoomEnterLiveError=21003]="RoomEnterLiveError",e[e.RoomRoundUnknow=22e3]="RoomRoundUnknow",e[e.RoomUnSettingRound=22001]="RoomUnSettingRound",e[e.RoomCantRound=22002]="RoomCantRound",e[e.RoomEnterRoundError=22003]="RoomEnterRoundError"}(a=exports.ErrorCode||(exports.ErrorCode={})),function(e){e[e.Play=1]="Play",e[e.Pause=2]="Pause",e[e.Refresh=3]="Refresh",e[e.Mute=4]="Mute",e[e.Volume=5]="Volume",e[e.SwitchQuality=6]="SwitchQuality",e[e.SwitchLine=7]="SwitchLine",e[e.Feedback=8]="Feedback",e[e.TimeShift=9]="TimeShift",e[e.Danmaku=10]="Danmaku",e[e.FullScreen=11]="FullScreen",e[e.WebFullScreen=12]="WebFullScreen",e[e.PictureInPicture=13]="PictureInPicture"}(n=exports.OperationCode||(exports.OperationCode={})),function(e){e[e.Waiting=1]="Waiting",e[e.P2PData=2]="P2PData",e[e.UserFeedBack=3]="UserFeedBack",e[e.StreamErrWhenEnded=100]="StreamErrWhenEnded",e[e.SwitchLine=104]="SwitchLine",e[e.HangUp=105]="HangUp",e[e.NetSpeed=106]="NetSpeed",e[e.AutoDiscardFrame=107]="AutoDiscardFrame",e[e.MutedPlay=108]="MutedPlay",e[e.NotAutoPlay=109]="NotAutoPlay"}(i=exports.CustomCode||(exports.CustomCode={}));var d,s=function(e){if(null==e.data)return[];var r=e.data,o=r.ctime,t=r.category,a=r.val,n=r.params;return[r.staticInfo,o,t,r.code,a,n]},u=new l.Tracker("009658",{formatter:s}),c=function(){var e=-1;return function(){return"v"+(e+=1)}}(),p={},m=c();function v(e){d=e.uvid+"|"+e.uid+"|"+e.version+"|"+e.roomId}function y(r,o){if(!0===o)return m=c(),void(p[m]=e({},r));null==p[m]&&(p[m]={}),p[m]=Object.assign({},p[m],r)}function f(e,o,t){var a=void 0===t?{}:t,n=a.extFields,i=a.params,l=a.sampleRate,d=void 0===l?1:l,s=a.randDelay;P({val:Math.round(o),category:r.Perf,code:e,params:null!=i?i:{}},{sample:100*d,randDelay:s,extFields:null!=n?n:["sHost","sProtocol","p2pType","sQuery","x-service-module"]})}function P(r,o){var t,a=Date.now(),n=r.category,i=r.val,l=r.params,s=r.code,c=o.sample,v=o.randDelay,y=o.dynamicFieldsVer,f=o.extFields,P=null!==(t=p[null!=y?y:m])&&void 0!==t?t:{};"all"===f?l=e(e({},l),P):Array.isArray(f)&&(l=f.reduce(function(r,o){var t;return o in P?e(e({},r),((t={})[o]=P[o],t)):r},e({},l)));var C="string"==typeof i?i:null==i?"":JSON.stringify(i),R=0===Object.keys(null!=l?l:{}).length?"":JSON.stringify(l);u.event("playerEvt",{code:s,val:C,ctime:a,category:n,params:R,staticInfo:d},{sample:c,randDelay:v})}function C(e,o,t){var a,n;P({val:o,category:r.Event,code:e},{sample:100*(null!==(a=null==t?void 0:t.sampleRate)&&void 0!==a?a:1),randDelay:null==t?void 0:t.randDelay,extFields:null!==(n=null==t?void 0:t.extFields)&&void 0!==n?n:["sProtocol","sHost","p2pType","sCodec"]})}function R(o,t,a){var n,i,l;void 0===a&&(a={}),P({val:t,category:r.Error,code:o,params:e({},null!=a.apiUrl?{apiUrl:a.apiUrl}:{})},{sample:100*(null!==(n=null==a?void 0:a.sampleRate)&&void 0!==n?n:1),randDelay:null!==(i=null==a?void 0:a.randDelay)&&void 0!==i?i:5e3,extFields:null!==(l=a.extFields)&&void 0!==l?l:"all"})}function F(e,o,t){var a;P({val:o,code:e,category:r.Operation},{sample:100*(null!==(a=null==t?void 0:t.sampleRate)&&void 0!==a?a:.1),randDelay:null==t?void 0:t.randDelay,extFields:null==t?void 0:t.extFields})}function x(e,o,t){var a;P({val:o,category:r.Custom,code:e},{sample:100*(null!==(a=null==t?void 0:t.sampleRate)&&void 0!==a?a:1),randDelay:null==t?void 0:t.randDelay,extFields:null==t?void 0:t.extFields})}function E(){var e=m;return{custom:function(r,o,t){x(r,o,Object.assign({},t,{dynamicFieldsVer:e}))}}}exports.default={perf:f,event:C,error:R,custom:x,operation:F,PerfCode:o,EventCode:t,ErrorCode:a,OperationCode:n,CustomCode:i,fixedDynamicFieldsVerIns:E,initStaticInfo:v,updateDynamicInfo:y,formatter:s};
},{"@bilibili-live/live-web-track":"BuDO"}],"MwY8":[function(require,module,exports) {
"use strict";function e(e){var r;switch(e){case 8:r="7.1Ch";break;case 6:r="5.1Ch";break;case 2:r="Stereo";break;case 1:r="Mono";break;default:r=e+"Ch"}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseAudioChannel=void 0,exports.parseAudioChannel=e;
},{}],"ao58":[function(require,module,exports) {
"use strict";var e,t,n,i,r,o,a,s,d,u,l,c,f,h,v=this&&this.__assign||function(){return(v=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},p=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{d(i.next(e))}catch(t){o(t)}}function s(e){try{d(i.throw(e))}catch(t){o(t)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}d((i=i.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},y=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},w=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},g=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},E=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoStatus=exports.EventType=void 0;var b,P,L=E(require("@bilibili-live/fmp4.js")),k=require("@bilibili-live/web-player-common"),M=E(require("@bilibili-live/web-player-track")),S=require("./video-utils");!function(e){e.VideoInfo="VideoInfo",e.MetaData="MetaData",e.CorePlayerCreated="CorePlayerCreated",e.Error="Error",e.LoadStart="LoadStart",e.Ended="Ended",e.NetworkResponse="NetworkResponse",e.FirstPacket="FirstPacket",e.FirstFrame="FirstFrame",e.SEIData="SEIData",e.Destroyed="Destroyed",e.WaitStart="WaitStart",e.WaitEnd="WaitEnd",e.WaitReport="WaitReport",e.Play="Play",e.Pause="Pause",e.WASMDecoderDegrade="WASMDecoderDegrade"}(b=exports.EventType||(exports.EventType={})),function(e){e.Initialize="Initialize",e.Loading="Loading",e.Playing="Playing",e.Pause="Pause",e.Destroyed="Destroyed"}(P=exports.VideoStatus||(exports.VideoStatus={}));var I=0,D={droppedFrames:0,decodedFrames:0,videoBufferLength:0,videoNetworkActivity:0,audioNetworkActivity:0,audioBufferLength:0},T={corePlayerType:k.CorePlayerType.NativePlayer,width:0,height:0,mimeType:"",volume:0,fps:0,encoder:"",videoDataRate:0,audioDataRate:0,audioSampleRate:0,audioChannel:"",videoSrc:""},W=function(){function E(p,m){var E,L=this;void 0===m&&(m={}),e.set(this,void 0),t.set(this,void 0),n.set(this,null),i.set(this,void 0),r.set(this,void 0),o.set(this,{mediaInfo:v({},T),realtimeInfo:v({},D)}),a.set(this,null),s.set(this,P.Initialize),d.set(this,function(){}),u.set(this,void 0),l.set(this,void 0),c.set(this,null),f.set(this,new k.EventBus),this.on=w(this,f).on,this.once=w(this,f).once,this.emit=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];[b.VideoInfo,b.SEIData].includes(e)||w(L,r).debug("video emit: "+e+", handlers count: "+w(L,f).getHandlers(e).size),(t=w(L,f)).emit.apply(t,g([e],n))},h.set(this,function(e){var i,a;w(L,r).info("metadata fired"),w(L,o).mediaInfo=Object.assign({},w(L,o).mediaInfo,{videoSrc:w(L,t),width:e.width,height:e.height,mimeType:null===(i=w(L,n))||void 0===i?void 0:i.mimeType,fps:k.roundNumber(e.fps,0),encoder:null!==(a=e.encoder)&&void 0!==a?a:e.creator,videoDataRate:e.videodatarate,audioDataRate:e.audiodatarate,audioSampleRate:e.audiosamplerate,audioChannel:S.parseAudioChannel(e.audiochannel)}),L.emit(b.VideoInfo,L.getVideoInfo()),L.updateStatisticsInfo()}),y(this,i,I),I+=1,y(this,r,new Proxy(k.logger,{get:function(e,t){return["debug","info","warn","error"].includes(t)?function(n){e[t]("id "+w(L,i)+": "+n)}:e[t]}})),y(this,t,p),y(this,u,m),y(this,e,C(null!==(E=m.wasmDecode)&&void 0!==E&&E)),y(this,l,window.setTimeout(function(){L.load()},1))}return Object.defineProperty(E.prototype,"status",{get:function(){return w(this,s)},set:function(e){w(this,r).info("Video status changed to "+e),y(this,s,e)},enumerable:!1,configurable:!0}),E.prototype.delyLoad=function(){clearTimeout(w(this,l))},E.prototype.load=function(){var n;this.status!==P.Destroyed&&(w(this,r).info("load src: "+w(this,t)+", opts: "+JSON.stringify(w(this,u))),this.status=P.Loading,this.createCorePlayer(w(this,e),null===(n=w(this,u))||void 0===n?void 0:n.startTime),this.play().catch(function(e){console.error(e)}))},E.prototype.play=function(){return p(this,void 0,Promise,function(){return m(this,function(t){switch(t.label){case 0:if(w(this,r).info("video play"),null==w(this,e))return[2];if(this.status===P.Playing)return[2];t.label=1;case 1:return t.trys.push([1,3,,8]),[4,w(this,e).play()];case 2:return t.sent(),this.status=P.Playing,[3,8];case 3:if("NotAllowedError"!==t.sent().name)return[2];M.default.custom(M.default.CustomCode.MutedPlay),w(this,r).warn("try mute play"),w(this,e).muted=!0,t.label=4;case 4:return t.trys.push([4,6,,7]),[4,w(this,e).play()];case 5:return t.sent(),this.status=P.Playing,[3,7];case 6:return t.sent(),M.default.custom(M.default.CustomCode.NotAutoPlay),w(this,r).warn("can't auto play"),this.status=P.Pause,[3,7];case 7:return[3,8];case 8:return[2]}})})},E.prototype.pause=function(){w(this,r).info("video pause"),null!=w(this,e)&&this.status===P.Playing&&(w(this,e).pause(),this.status=P.Pause)},E.prototype.seek=function(t){var n=t.forward,i=t.keepBuffer;if(w(this,r).info("video seek, forward: "+(null!=n?n:"null")+", keepBuffer: "+(null!=i?i:"null")),null!=w(this,e)){var o=k.remainBufferLength(w(this,e));if(!(o<=0))if(null!=i&&i>0){if(o<i)return;w(this,e).currentTime+=o-i}else if(null!=n&&n>0){if(n>o)return;w(this,e).currentTime+=n}}},E.prototype.getSrc=function(){return w(this,t)},E.prototype.volume=function(t){w(this,r).info("video setVolume("+t+")"),null!=w(this,e)&&(w(this,e).volume=k.roundNumber(t,2))},E.prototype.mute=function(t){null!=w(this,e)&&(w(this,e).muted=t)},E.prototype.getVideoEl=function(){return w(this,e)},E.prototype.removeVideoEl=function(){var t,n;w(this,e).remove(),null===(n=(t=w(this,e)).destroy)||void 0===n||n.call(t)},E.prototype.getVideoInfo=function(){return w(this,o).mediaInfo.volume=w(this,e).volume,w(this,o)},E.prototype.capturePic=function(t,n){var i,r,o=null===(r=(i=w(this,e)).toDataURL)||void 0===r?void 0:r.call(i,t,n);return null!=o?o:x(w(this,e),t,n)},E.prototype.destroy=function(t){var i,s,u;void 0===t&&(t=!1),t||this.removeVideoEl(),this.status!==P.Destroyed&&(this.status=P.Destroyed,w(this,r).info("video destroyed, holdLastFrame: "+t.toString()),clearTimeout(w(this,l)),clearInterval(null!==(i=w(this,a))&&void 0!==i?i:0),y(this,o,{mediaInfo:v({},T),realtimeInfo:v({},D)}),null===(s=w(this,c))||void 0===s||s.remove(),w(this,e).pause(),null===(u=w(this,n))||void 0===u||u.destroy(),w(this,d).call(this),this.emit(b.Destroyed),w(this,f).destroy())},E.prototype.createCorePlayer=function(e,i){if(null!=w(this,t)){var r,a,s=!0===w(this,u).wasmDecode?new window.BwpMediaSource:"MediaSource"in window?new window.MediaSource:{},l=new URL(w(this,t));if(l.pathname.endsWith(".flv"))r=new L.default.fMp4Player(s,e),a=k.CorePlayerType.fMp4Player;else if(l.pathname.endsWith(".m3u8"))"MediaSource"in window?(r=new L.default.Hls7Player(s,e),a=k.CorePlayerType.Hls7Player):(r=new L.default.NativePlayer(s,e),a=k.CorePlayerType.NativePlayer);else{if(!l.pathname.endsWith(".mp4"))throw new Error("Unsupported stream url: "+l.pathname);r=new L.default.NativePlayer(s,e),a=k.CorePlayerType.NativePlayer}w(this,o).mediaInfo=Object.assign({},w(this,o).mediaInfo,{corePlayerType:a}),this.emit(b.LoadStart,{corePlayer:r,videoEl:e,src:w(this,t)}),r.keepUsedBuffer=10,r.timeout=7e3,y(this,d,this.bindEvents(r,e)),null!=i&&i>0&&r instanceof L.default.fMp4Player&&(r.startTime=i),r.src=w(this,t),y(this,n,r),this.emit(b.CorePlayerCreated,{corePlayer:r,videoEl:e,src:w(this,t)})}},E.prototype.updateStatisticsInfo=function(){var t=this,i=0;null!=w(this,a)&&clearInterval(w(this,a)),y(this,a,window.setInterval(function(){var r,a,s,d=null!==(s=null===(a=null===(r=w(t,e))||void 0===r?void 0:r.getVideoPlaybackQuality)||void 0===a?void 0:a.call(r))&&void 0!==s?s:{},u=d.droppedVideoFrames,l=void 0===u?0:u,c=d.totalVideoFrames,f=void 0===c?0:c,h=0;null!=w(t,n)&&(h=w(t,n).receivedBytes-i,Number.isNaN(h)&&(h=0),i=w(t,n).receivedBytes),w(t,o).realtimeInfo=Object.assign({},w(t,o).realtimeInfo,{droppedFrames:l,decodedFrames:f,videoBufferLength:null==w(t,e)?0:k.roundNumber(k.remainBufferLength(w(t,e)),3),videoNetworkActivity:h}),t.emit(b.VideoInfo,t.getVideoInfo())},1e3))},E.prototype.bindEvents=function(t,n){var i=this,a=performance.now(),s=!1;t.onMetaData=function(e){w(i,h).call(i,e),i.emit(b.MetaData,performance.now()-a),w(i,r).info("after onMetaData mediaInfo: "+JSON.stringify(w(i,o).mediaInfo))},t.onSeiData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.emit.apply(i,g([b.SEIData],e))},t.onFileFetched=function(e,t){var n=t.used,o=t.duration,a=2e3;0===o?a=2e3:o<=500&&(a=500),n>a&&w(i,r).warn("fetch slowly: "+e+", cost "+n+"ms, duration: "+o+"ms")},t.onFirstResponse=function(e){i.emit(b.NetworkResponse,e)},t.onEndOfStream=function(){var e=Math.ceil(k.remainBufferLength(n));(e<0||isNaN(e))&&(e=0),w(i,r).warn("video onEndOfStream, bufLen: "+e),setTimeout(function(){n.dispatchEvent(new Event("ended"))},1e3*e)},t.onFirstPacket=function(){var e=performance.now()-a;w(i,r).info("video first packet cost: "+Math.round(e)),i.emit(b.FirstPacket,performance.now()-a)};var d=function(e,t,n){if(!s){s=!0;var o=k.any2Str({code:t,errInfo:n});w(i,r).error("player core "+e+", "+o),i.emit(b.Error,{code:t,errInfo:n}),i.destroy()}};t.onNetworkError=d.bind(this,"NetworkError"),t.onParserError=d.bind(this,"ParserError");var l=function(){var t=performance.now()-a;w(i,r).info("video first frame cost: "+Math.round(t)),i.emit(b.FirstFrame,t),y(i,c,F(w(i,e)))};n.addEventListener("loadeddata",l);var f=function(){s||(s=!0,i.emit(b.Ended),i.destroy())};n.addEventListener("ended",f);var v=function(){if(!s){s=!0;var e=n.error,t={code:M.default.ErrorCode.NativeVideoError,errInfo:{code:null==e?void 0:e.code,msg:null==e?void 0:e.message}};w(i,r).error("video native error: "+k.any2Str(t)),i.emit(b.Error,t),i.destroy()}};n.addEventListener("error",v);var p=N(n,t,{startCb:function(){w(i,r).warn("video waiting"),i.emit(b.WaitStart)},endCb:function(){w(i,r).info("video playing"),i.emit(b.WaitEnd)},reportCb:function(e){i.emit(b.WaitReport,e)}}),m=function(){i.emit(b.Play)};n.addEventListener("play",m);var E=function(){i.emit(b.Pause)};n.addEventListener("pause",E);var P=function(){};!0===w(this,u).wasmDecode&&(P=function(){i.emit(b.WASMDecoderDegrade)},n.addEventListener("performance",P));var L=k.mediaAction.on("pause",function(){n.pause()}),S=k.mediaAction.on("play",function(){n.play().catch(function(e){console.warn(e)})});return function(){n.removeEventListener("loadeddata",l),n.removeEventListener("ended",f),n.removeEventListener("error",v),n.removeEventListener("play",m),n.removeEventListener("pause",E),n.removeEventListener("performance",P),p(),L(),S()}},E}();function C(e){var t=document.createElement(e?"bwp-video":"video");return t.id="video-"+Math.random().toString().slice(2),t.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 100%;\n    height: 100%;\n  ",t.volume=.9,t.autoplay=!0,t}function N(e,t,n){var i=n.startCb,r=n.endCb,o=n.reportCb,a=!1,s=function t(){a=!0,e.removeEventListener("loadeddata",t)};e.addEventListener("loadeddata",s);var d=!1,u=function t(){e.removeEventListener("progress",t),d&&(d=!1,r())},l=function(){a&&(d=!0,i(),e.addEventListener("progress",u))},c=function(){e.removeEventListener("progress",u),d&&(d=!1,r())};e.addEventListener("waiting",l),e.addEventListener("playing",c);var f=new L.default.BufferDetector(e,1e3),h=0,v=0,p=0,m=0,y=performance.now(),w=function(){var n=performance.now(),i=t.receivedBytes-m;m=t.receivedBytes,o({count:f.waitedCount-h,duration:Math.round(f.waitedDuration-v),windowSize:Math.round(n-y),playTime:Math.round(e.currentTime-p),playedTime:Math.round(e.currentTime),receivedBytes:i}),h=f.waitedCount,v=f.waitedDuration,p=e.currentTime,y=n},g=window.setInterval(w,6e4),E=function(){w()};return window.addEventListener("beforeunload",E),function(){clearInterval(g),w(),window.removeEventListener("beforeunload",E),e.removeEventListener("playing",c),e.removeEventListener("waiting",l),e.removeEventListener("loadeddata",s),f.destroy()}}function F(e){if(e.videoHeight>e.videoWidth){var t=V(e);return e.insertAdjacentElement("afterend",t),t}return null}function V(e){var t=x(e),n=null;return(n=document.createElement("div")).style.cssText="\n    background-image: url("+t+");\n    background-size: cover;\n    background-position: center;\n    width: 100%;\n    height: 100%;\n    filter: blur(35px) brightness(0.5);\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  ",n}function x(e,t,n){var i;void 0===t&&(t="image/jpeg"),void 0===n&&(n=.8);var r=document.createElement("canvas");return r.width=e.videoWidth,r.height=e.videoHeight,null===(i=r.getContext("2d"))||void 0===i||i.drawImage(e,0,0,r.width,r.height),r.toDataURL(t,n)}e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,d=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,h=new WeakMap,exports.default=W;
},{"@bilibili-live/fmp4.js":"lV3a","@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-track":"ESUf","./video-utils":"MwY8"}],"uCDP":[function(require,module,exports) {
"use strict";var t,e,n,o,r,i,a,s,l,p,u,c,h,d,f,y,P,v,T,_,C,w,m=this&&this.__assign||function(){return(m=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},S=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},g=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};Object.defineProperty(exports,"__esModule",{value:!0});var H=require("@bilibili-live/web-player-common"),M=1800,L=function(){function L(L){var E=this;this.source=L,t.set(this,{report_interval_sec:30}),e.set(this,H.P2PType.NONE),n.set(this,void 0),o.set(this,"0"),r.set(this,[]),i.set(this,H.CodecType.AVC),a.set(this,""),s.set(this,[]),l.set(this,void 0),p.set(this,null),u.set(this,0),c.set(this,0),h.set(this,performance.now()),d.set(this,M),f.set(this,new H.EventBus),this.on=g(this,f).on,this.once=g(this,f).once,y.set(this,g(this,f).emit),P.set(this,function(t){if(0!==g(E,c))return g(E,e);var n=null!=t?t:E.source.playurl.p2p_data.p2p_type;return null!=H.wpd.P2PType&&(n=H.wpd.P2PType),H.ua.isIOS()&&(n=H.P2PType.NONE),n!==H.P2PType.HLS_BILI&&n!==H.P2PType.HLS_NOT_P2P||E.hasHLSPlayerSupportStream()||(n=H.P2PType.NONE),n in H.P2PType||(n=H.P2PType.NONE),n}),v.set(this,function(t){return t===H.ProtocolType.HTTP_STREAM?[H.FormatType.FLV]:[H.FormatType.FMP4,H.FormatType.TS]}),T.set(this,function(t){for(var e=g(E,v).call(E,t),n=null,o=0,r=e;o<r.length;o++){var i=r[o];if(null!=(n=g(E,C).call(E,{protocol:t,format:i,codec:H.CodecType.AVC})))break}for(var a=null,s=0,l=e;s<l.length;s++){i=l[s];if(null!=(a=g(E,C).call(E,{protocol:t,format:i,codec:H.CodecType.HEVC})))break}return{avcCodec:n,hevcCodec:a}}),_.set(this,function(t,n){if(t===H.ProtocolType.HTTP_HLS){if(![H.P2PType.HLS_BILI,H.P2PType.HLS_NOT_P2P,H.P2PType.NONE].includes(g(E,e)))return!0}else if(t===H.ProtocolType.HTTP_STREAM&&[H.P2PType.HLS_BILI,H.P2PType.HLS_NOT_P2P].includes(g(E,e)))return!0;return!1}),C.set(this,function(t){var e,n,o,r=t.protocol,i=t.format,a=t.codec,s=null===(o=null===(n=null===(e=E.source.playurl.stream.find(function(t){return t.protocol_name===r}))||void 0===e?void 0:e.format)||void 0===n?void 0:n.find(function(t){return t.format_name===i}))||void 0===o?void 0:o.codec.find(function(t){var e=t.codec_name;return a===e});return null!=s?m(m({},s),{protocol:r,format:i}):null}),w.set(this,function(t,e){void 0===e&&(e=[]);var o=t.map(function(t){var e;return{code:t,value:String(t),label:null===(e=g(E,n).find(function(e){return e.qn===t}))||void 0===e?void 0:e.desc,codec:H.CodecType.AVC}}).filter(function(t){var e=t.label;return Boolean(e)}),r=(null!=e?e:[]).map(function(t){var e;return{code:t,value:String(t),label:null===(e=g(E,n).find(function(e){return e.qn===t}))||void 0===e?void 0:e.desc}}).filter(function(t){var e=t.label;return Boolean(e)}).map(function(t){var e=t.code,n=t.value,o=t.label;return{code:e,value:n+"_hevc",label:(null!=o?o:"")+"HEVC",codec:H.CodecType.HEVC}});return o.concat(r).sort(function(t,e){return e.code+(e.codec===H.CodecType.HEVC?1:0)-(t.code+(t.codec===H.CodecType.HEVC?1:0))})});try{S(this,t,JSON.parse(L.conf_json))}catch(k){console.error(k)}if(S(this,n,L.playurl.g_qn_desc),L.playurl.p2p_data.p2p_type===H.P2PType.NONE&&(L.playurl.p2p_data.p2p_type=H.P2PType.HLS_BILI),S(this,e,g(this,P).call(this)),"MediaSource"in window)S(this,l,[H.P2PType.HLS_BILI,H.P2PType.HLS_NOT_P2P].includes(g(this,e))?H.ProtocolType.HTTP_HLS:H.ProtocolType.HTTP_STREAM);else{if(!H.ua.isIOS())throw new Error("Browser unsupported MSE and HLS");S(this,l,H.ProtocolType.HTTP_HLS)}this.useStream()}return L.prototype.getCurPlayUrl=function(){if(performance.now()>g(this,h)+1e3*g(this,d))throw new Error("source data is expired");return g(this,a)},L.prototype.getCurStreamInfo=function(){var t,n,r=new URL(g(this,a)),s=null!==(n=null===(t=/\/live-bvc\/\d+\/(live_.+?)[\/.]/.exec(g(this,a)))||void 0===t?void 0:t[1])&&void 0!==n?n:"";return{host:r.host,query:r.search,name:s,protocol:g(this,l),format:g(this,p),codec:g(this,i),p2pType:g(this,e),quality:g(this,o),timeshift:g(this,c)}},L.prototype.getCurQuality=function(){return g(this,o)},L.prototype.getQualityDesc=function(t){var e,n=null!=t?t:g(this,o);return null!==(e=g(this,r).find(function(t){return t.value===n}))&&void 0!==e?e:null},L.prototype.getCurLine=function(){return g(this,u)},L.prototype.getCurLineDesc=function(){var t=this;return this.getLineCandidates().find(function(e){return e.value===g(t,u)})},L.prototype.setTimeShift=function(t){S(this,c,t)},L.prototype.setCurLine=function(t){if(0===g(this,s).length)throw new Error("play url candidates is empty");S(this,u,t%this.getLineCandidates().length);var e=g(this,s)[g(this,u)%g(this,s).length];S(this,a,e.url),S(this,d,e.ttl>1?e.ttl:M)},L.prototype.getPlayUrlCandates=function(){return g(this,s)},L.prototype.getCurCodecType=function(){return g(this,i)},L.prototype.getCurP2PType=function(){return g(this,e)},L.prototype.getDynamicConfig=function(){return g(this,t)},L.prototype.getQnCandidates=function(){return g(this,r)},L.prototype.getAVCQnCandidates=function(){return this.getQnCandidates().filter(function(t){return t.codec===H.CodecType.AVC})},L.prototype.getLineCandidates=function(){return[{value:0,label:"主线"},{value:1,label:"备线1"},{value:2,label:"备线2"},{value:3,label:"备线3"}]},L.prototype.setCurP2PType=function(t){S(this,e,t)},L.prototype.hasHLSPlayerSupportStream=function(){return Boolean(g(this,C).call(this,{protocol:H.ProtocolType.HTTP_HLS,format:H.FormatType.FMP4,codec:H.CodecType.AVC}))},L.prototype.useStream=function(t){var n,h,f;void 0===t&&(t={});var y,v,C=null!==(n=t.protocol)&&void 0!==n?n:g(this,l),m=null!==(h=t.codec)&&void 0!==h?h:g(this,i),L=g(this,T).call(this,C),E=L.avcCodec,k=L.hevcCodec;if(null==E||0===(null!==(f=E.url_info)&&void 0!==f?f:[]).length)throw new Error("can't find stream by protocol: "+C+", codec: "+(null!=m?m:""));null!=(null==k?void 0:k.url_info)&&m===H.CodecType.HEVC?(y=k,v=H.CodecType.HEVC):(y=E,v=H.CodecType.AVC);var W=y.url_info.map(function(t){var e=t.host,n=t.extra,o=t.stream_ttl;return{url:""+e+y.base_url+n,ttl:o}});if(0===W.length)throw new Error("play url codec.hosts is empty");var b=g(this,u)%W.length;S(this,a,W[b].url),S(this,d,W[b].ttl>1?W[b].ttl:M),0!==g(this,c)&&S(this,a,g(this,a)+"&tmshift="+g(this,c)),S(this,p,y.format),S(this,i,v),S(this,l,C),S(this,e,g(this,P).call(this,t.expectP2PType)),S(this,r,g(this,w).call(this,E.accept_qn,null==k?void 0:k.accept_qn)),S(this,o,y.current_qn+(v===H.CodecType.HEVC?"_"+H.CodecType.HEVC:"")),S(this,s,W),g(this,_).call(this,C,g(this,e))&&S(this,e,H.P2PType.NONE)},L}();exports.default=L,t=new WeakMap,e=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,p=new WeakMap,u=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,y=new WeakMap,P=new WeakMap,v=new WeakMap,T=new WeakMap,_=new WeakMap,C=new WeakMap,w=new WeakMap;
},{"@bilibili-live/web-player-common":"KGHo"}],"MW6F":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?s(t):e}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var l,a=t[Symbol.iterator]();!(i=(l=a.next()).done)&&(n.push(l.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var h=function(t){return t};function g(t){return t()}function x(){return Object.create(null)}function b(t){t.forEach(g)}function y(t){return"function"==typeof t}function w(t,n){return t!=t?n==n:t!==n||t&&"object"===e(t)||"function"==typeof t}function $(t,e,n,i){return t[1]&&i?function(t,e){for(var n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function k(t,n,i,r,o,l,a){var s=function(t,n,i,r){if(t[2]&&r){var o=t[2](r(i));if(void 0===n.dirty)return o;if("object"===e(o)){for(var l=[],a=Math.max(n.dirty.length,o.length),s=0;s<a;s+=1)l[s]=n.dirty[s]|o[s];return l}return n.dirty|o}return n.dirty}(n,r,o,l);if(s){var u=$(n,i,r,a);t.p(u,s)}}var C="undefined"!=typeof window,L=C?function(){return window.performance.now()}:function(){return Date.now()},S=C?function(t){return requestAnimationFrame(t)}:m,z=new Set;function M(t){z.forEach(function(e){e.c(t)||(z.delete(e),e.f())}),0!==z.size&&S(M)}function _(t,e){t.appendChild(e)}function q(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function T(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function j(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function P(){return H(" ")}function Z(){return H("")}function B(t,e,n,i){return t.addEventListener(e,n,i),function(){return t.removeEventListener(e,n,i)}}function I(t){return function(e){return e.preventDefault(),t.call(this,e)}}function V(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t){return Array.from(t.childNodes)}function F(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function R(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function G(t,e,n){t.classList[n?"add":"remove"](e)}var Y,X=new Set,U=0;function D(t){for(var e=5381,n=t.length;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function N(t,e,n,i,r,o,l){for(var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=16.666/i,u="{\n",c=0;c<=1;c+=s){var d=e+(n-e)*o(c);u+=100*c+"%{".concat(l(d,1-d),"}\n")}var f=u+"100% {".concat(l(n,1-n),"}\n}"),p="__svelte_".concat(D(f),"_").concat(a),v=t.ownerDocument;X.add(v);var m=v.__svelte_stylesheet||(v.__svelte_stylesheet=v.head.appendChild(j("style")).sheet),h=v.__svelte_rules||(v.__svelte_rules={});h[p]||(h[p]=!0,m.insertRule("@keyframes ".concat(p," ").concat(f),m.cssRules.length));var g=t.style.animation||"";return t.style.animation="".concat(g?"".concat(g,", "):"").concat(p," ").concat(i,"ms linear ").concat(r,"ms 1 both"),U+=1,p}function W(t,e){var n=(t.style.animation||"").split(", "),i=n.filter(e?function(t){return t.indexOf(e)<0}:function(t){return-1===t.indexOf("__svelte")}),r=n.length-i.length;r&&(t.style.animation=i.join(", "),(U-=r)||S(function(){U||(X.forEach(function(t){for(var e=t.__svelte_stylesheet,n=e.cssRules.length;n--;)e.deleteRule(n);t.__svelte_rules={}}),X.clear())}))}function J(t){Y=t}var K=[],Q=[],tt=[],et=[],nt=Promise.resolve(),it=!1;function rt(t){tt.push(t)}var ot,lt=!1,at=new Set;function st(){if(!lt){lt=!0;do{for(var t=0;t<K.length;t+=1){var e=K[t];J(e),ut(e.$$)}for(J(null),K.length=0;Q.length;)Q.pop()();for(var n=0;n<tt.length;n+=1){var i=tt[n];at.has(i)||(at.add(i),i())}tt.length=0}while(K.length);for(;et.length;)et.pop()();it=!1,lt=!1,at.clear()}}function ut(t){if(null!==t.fragment){t.update(),b(t.before_update);var e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}function ct(t,e,n){var i,r;t.dispatchEvent((i="".concat(e?"intro":"outro").concat(n),(r=document.createEvent("CustomEvent")).initCustomEvent(i,!1,!1,void 0),r))}var dt,ft=new Set;function pt(){dt={r:0,c:[],p:dt}}function vt(){dt.r||b(dt.c),dt=dt.p}function mt(t,e){t&&t.i&&(ft.delete(t),t.i(e))}function ht(t,e,n,i){if(t&&t.o){if(ft.has(t))return;ft.add(t),dt.c.push(function(){ft.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}var gt={duration:0};function xt(t,e,n,i){var r=e(t,n),o=i?0:1,l=null,a=null,s=null;function u(){s&&W(t,s)}function c(t,e){var n=t.b-o;return e*=Math.abs(n),{a:o,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function d(e){var n,i=r||gt,d=i.delay,f=void 0===d?0:d,p=i.duration,v=void 0===p?300:p,g=i.easing,x=void 0===g?h:g,y=i.tick,w=void 0===y?m:y,$=i.css,k={start:L()+f,b:e};e||(k.group=dt,dt.r+=1),l||a?a=k:($&&(u(),s=N(t,o,e,v,f,x,$)),e&&w(0,1),l=c(k,v),rt(function(){return ct(t,e,"start")}),n=function(e){if(a&&e>a.start&&(l=c(a,v),a=null,ct(t,l.b,"start"),$&&(u(),s=N(t,o,l.b,l.duration,0,x,r.css))),l)if(e>=l.end)w(o=l.b,1-o),ct(t,l.b,"end"),a||(l.b?u():--l.group.r||b(l.group.c)),l=null;else if(e>=l.start){var n=e-l.start;o=l.a+l.d*x(n/l.duration),w(o,1-o)}return!(!l&&!a)},0===z.size&&S(M),new Promise(function(t){z.add({c:n,f:t})}))}return{run:function(t){y(r)?(ot||(ot=Promise.resolve()).then(function(){ot=null}),ot).then(function(){r=r(),d(t)}):d(t)},end:function(){u(),l=a=null}}}var bt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:t;function yt(t){t&&t.c()}function wt(t,e,n){var i=t.$$,r=i.fragment,o=i.on_mount,l=i.on_destroy,a=i.after_update;r&&r.m(e,n),rt(function(){var e=o.map(g).filter(y);l?l.push.apply(l,f(e)):b(e),t.$$.on_mount=[]}),a.forEach(rt)}function $t(t,e){var n=t.$$;null!==n.fragment&&(b(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(t,e){-1===t.$$.dirty[0]&&(K.push(t),it||(it=!0,nt.then(st)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ct(t,e,n,i,r,o){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],a=Y;J(t);var s=e.props||{},u=t.$$={fragment:null,ctx:null,props:o,update:m,not_equal:r,bound:x(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:x(),dirty:l,skip_bound:!1},c=!1;if(u.ctx=n?n(t,s,function(e,n){var i=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return u.ctx&&r(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),c&&kt(t,e)),n}):[],u.update(),c=!0,b(u.before_update),u.fragment=!!i&&i(u.ctx),e.target){if(e.hydrate){var d=O(e.target);u.fragment&&u.fragment.l(d),d.forEach(E)}else u.fragment&&u.fragment.c();e.intro&&mt(t.$$.fragment),wt(t,e.target,e.anchor),st()}J(a)}var Lt=function(){function t(){n(this,t)}return r(t,[{key:"$destroy",value:function(){$t(this,1),this.$destroy=m}},{key:"$on",value:function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}]),t}();function St(t){var e=t-1;return e*e*e+1}function zt(t,e){var n=e.delay,i=void 0===n?0:n,r=e.duration,o=void 0===r?400:r,l=e.easing,a=void 0===l?h:l,s=+getComputedStyle(t).opacity;return{delay:i,duration:o,easing:a,css:function(t){return"opacity: ".concat(t*s)}}}function Mt(t,e){var n=e.delay,i=void 0===n?0:n,r=e.duration,o=void 0===r?400:r,l=e.easing,a=void 0===l?St:l,s=e.x,u=void 0===s?0:s,c=e.y,d=void 0===c?0:c,f=e.opacity,p=void 0===f?0:f,v=getComputedStyle(t),m=+v.opacity,h="none"===v.transform?"":v.transform,g=m*(1-p);return{delay:i,duration:o,easing:a,css:function(t,e){return"\n\t\t\ttransform: ".concat(h," translate(").concat((1-t)*u,"px, ").concat((1-t)*d,"px);\n\t\t\topacity: ").concat(m-g*e)}}}var _t='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">    \x3c!-- Generator: Sketch 63.1 (92452) - https://sketch.com --\x3e            <g id="终稿" stroke="none" stroke-width="1" fill-rule="evenodd" opacity="0.9">        <g id="图标切图" transform="translate(-439.000000, -74.000000)">            <g id="编组-3" transform="translate(421.000000, 56.000000)">                <g id="编组-11" transform="translate(18.000000, 18.000000)">                    <g id="icon_暂停" transform="translate(12.000000, 10.000000)">                        <path                            d="M2,0 C3.104,0 4,0.896 4,2 L4,2 L4,14 C4,15.104 3.104,16 2,16 C0.896,16 0,15.104 0,14 L0,14 L0,2 C0,0.896 0.896,0 2,0 Z M10,0 L10.1502192,0.00546944456 C11.1911389,0.0815918399 12,0.942829791 12,1.99406028 L12,1.99406028 L12,14.0059397 C12,15.1054862 11.1045695,16 10,16 L10,16 L9.84978083,15.9945306 C8.8088611,15.9184082 8,15.0571702 8,14.0059397 L8,14.0059397 L8,1.99406028 C8,0.894513756 8.8954305,0 10,0 L10,0 Z"                            id="暂停"></path>                    </g>                </g>            </g>        </g>    </g></svg>',qt='<svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">    <path id="Play"    d="M25,19.72l-9.94,6A2,2,0,0,1,12,24V12a2,2,0,0,1,2-2,2.1,2.1,0,0,1,1,.28l9.94,6A2,2,0,0,1,25.66,19,1.93,1.93,0,0,1,25,19.72Z"    style="fill-rule:evenodd" /></svg>',Et='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">    \x3c!-- Generator: Sketch 63.1 (92452) - https://sketch.com --\x3e            <g id="终稿" stroke="none" stroke-width="1" fill-rule="evenodd" opacity="0.9">        <g id="图标切图" transform="translate(-511.000000, -120.000000)">            <g id="编组-3" transform="translate(421.000000, 56.000000)">                <g id="编组-9" transform="translate(90.000000, 64.000000)">                    <g id="icon_网页全屏" transform="translate(7.000000, 7.000000)">                        <g id="player_fullpage">                            <path                                d="M16,14 L16,12.5 C16,12.2238576 16.2238576,12 16.5,12 L17.5,12 C17.7761424,12 18,12.2238576 18,12.5 L18,15.5 C18,15.7761424 17.7761424,16 17.5,16 L14.5,16 C14.2238576,16 14,15.7761424 14,15.5 L14,14.5 C14,14.2238576 14.2238576,14 14.5,14 L16,14 L16,14 Z M6,14 L7.5,14 C7.77614237,14 8,14.2238576 8,14.5 L8,15.5 C8,15.7761424 7.77614237,16 7.5,16 L4.5,16 C4.22385763,16 4,15.7761424 4,15.5 L4,12.5 C4,12.2238576 4.22385763,12 4.5,12 L5.5,12 C5.77614237,12 6,12.2238576 6,12.5 L6,14 L6,14 Z M18,6.5 L18,9.5 C18,9.77614237 17.7761424,10 17.5,10 L16.5,10 C16.2238576,10 16,9.77614237 16,9.5 L16,8 L16,8 L14.5,8 C14.2238576,8 14,7.77614237 14,7.5 L14,6.5 C14,6.22385763 14.2238576,6 14.5,6 L17.5,6 C17.7761424,6 18,6.22385763 18,6.5 Z M4.5,6 L7.5,6 C7.77614237,6 8,6.22385763 8,6.5 L8,7.5 C8,7.77614237 7.77614237,8 7.5,8 L6,8 L6,8 L6,9.5 C6,9.77614237 5.77614237,10 5.5,10 L4.5,10 C4.22385763,10 4,9.77614237 4,9.5 L4,6.5 C4,6.22385763 4.22385763,6 4.5,6 Z M4,4 L18,4 C19.1045695,4 20,4.8954305 20,6 L20,16 C20,17.1045695 19.1045695,18 18,18 L4,18 C2.8954305,18 2,17.1045695 2,16 L2,6 C2,4.8954305 2.8954305,4 4,4 Z"                                id="Combined-Shape"></path>                        </g>                    </g>                </g>            </g>        </g>    </g></svg>',Tt='<svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">    <path id="Combined-Shape"    d="M23,21v1.5a.47.47,0,0,1-.5.5h-1a.47.47,0,0,1-.5-.5v-3a.47.47,0,0,1,.5-.5h3a.47.47,0,0,1,.5.5v1a.47.47,0,0,1-.5.5ZM13,21H11.5a.47.47,0,0,1-.5-.5v-1a.47.47,0,0,1,.5-.5h3a.47.47,0,0,1,.5.5v3a.47.47,0,0,1-.5.5h-1a.47.47,0,0,1-.5-.5Zm8-4.5v-3a.47.47,0,0,1,.5-.5h1a.47.47,0,0,1,.5.5V15h1.5a.47.47,0,0,1,.5.5v1a.47.47,0,0,1-.5.5h-3A.47.47,0,0,1,21,16.5Zm-6.5.5h-3a.47.47,0,0,1-.5-.5v-1a.47.47,0,0,1,.5-.5H13V13.5a.47.47,0,0,1,.5-.5h1a.47.47,0,0,1,.5.5v3A.47.47,0,0,1,14.5,17ZM11,11H25a2,2,0,0,1,2,2V23a2,2,0,0,1-2,2H11a2,2,0,0,1-2-2V13A2,2,0,0,1,11,11Z"    style="fill-rule:evenodd" /></svg>',jt='<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 36 36" style="enable-background:new 0 0 36 36;" xml:space="preserve"><g id="页面-2">\t<g id="画中画icon-复原">\t\t<path id="路径" d="M12.9,25.7c-1.6,0-2.9-1.2-3-2.7l0-0.2v-2.4c0-0.5,0.4-1,1-1c0.5,0,0.9,0.4,0.9,0.8l0,0.1v2.4\t\t\tc0,0.5,0.4,0.9,0.9,0.9l0.1,0h10.3c0.6,0,1-0.4,1.1-0.9l0-0.1v-9.5c0-0.5-0.4-0.9-0.9-0.9l-0.1,0h-3.1c-0.5,0-1-0.4-1-1\t\t\tc0-0.5,0.4-0.9,0.8-0.9l0.1,0h3.1c1.6,0,2.9,1.2,3,2.7l0,0.2v9.5c0,1.5-1.2,2.8-2.8,2.9l-0.2,0H12.9z"/>\t\t<path id="矩形-2" d="M17.4,19.2C17.3,19.2,17.3,19.2,17.4,19.2l-5.8-5.8l0,3.2c0,0.4-0.4,0.8-0.8,0.8h-0.1\t\t\tc-0.4,0-0.8-0.4-0.8-0.8v-5.3c0-0.3,0.1-0.5,0.3-0.6l-0.1,0c0.1-0.2,0.3-0.2,0.5-0.3c0.1,0,0.2,0,0.3,0h5.2c0.4,0,0.8,0.4,0.8,0.8\t\t\tv0.1c0,0.4-0.4,0.8-0.8,0.8l-3.4,0l5.8,5.8c0.4,0.4,0.4,0.9,0,1.3C18.2,19.5,17.7,19.5,17.4,19.2z"/>\t</g></g></svg>',Ht='<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 36 36" style="enable-background:new 0 0 36 36;" xml:space="preserve"><g id="页面-2" class="st0">\t<g id="画中画icon">\t\t<path id="路径" d="M25,9.9c1.6,0,2.9,1.2,3,2.7l0,0.2V18c0,0.5-0.4,1-1,1c-0.5,0-0.9-0.4-0.9-0.8l0-0.1v-5.2\t\t\tc0-0.5-0.4-0.9-0.9-0.9l-0.1,0H11c-0.6,0-1,0.4-1.1,0.9l0,0.1v9.5c0,0.5,0.4,0.9,0.9,0.9l0.1,0h5.8c0.5,0,1,0.4,1,1\t\t\tc0,0.5-0.4,0.9-0.8,0.9l-0.1,0H11c-1.6,0-2.9-1.2-3-2.7l0-0.2v-9.5c0-1.5,1.2-2.8,2.8-2.9l0.2,0H25z"/>\t\t<path id="矩形" d="M20.4,20.4H27c0.5,0,1,0.4,1,1v3.8c0,0.5-0.4,1-1,1h-6.7c-0.5,0-1-0.4-1-1v-3.8\t\t\tC19.4,20.8,19.9,20.4,20.4,20.4z"/>\t\t<path id="矩形-2" d="M17.5,13.3c0.4,0,0.7,0.3,0.7,0.7v4.6c0,0.2-0.1,0.4-0.2,0.5c0,0-0.1,0.1-0.1,0.1c-0.2,0.2-0.4,0.2-0.7,0.2\t\t\tc0,0-0.1,0-0.1,0h-4.6c-0.4,0-0.7-0.3-0.7-0.7s0.3-0.7,0.7-0.7l3.1,0l-3.2-3.2c-0.3-0.3-0.3-0.7,0-1s0.7-0.3,1,0l3.2,3.2l0-3\t\t\tC16.8,13.7,17.1,13.3,17.5,13.3z"/>\t</g></g></svg>',Pt='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">        <g id="镜像备份-VER2备份-2">        <path d="M10.6409374,9.273203 L10.6547337,9.28700042 L10.6547337,9.28700042 L25.9811827,24.9326454 C26.0247624,24.9538216 26.0696068,24.9714846 26.1152949,24.9856387 C26.0987291,24.996065 26.0819817,25.0067498 26.0650813,25.0171782 L26.368872,25.3264603 C26.7441619,25.7095196 26.7441765,26.3223786 26.3689047,26.7054558 L26.3614896,26.7130252 C25.9920126,27.090187 25.3867423,27.0964169 25.0095804,26.72694 C25.0049053,26.7223601 25.0002774,26.7177324 24.9956973,26.7130575 L23.11,24.789 L20.6356386,23.9855094 C19.8743642,23.738264 19.3435461,23.0577799 19.2801675,22.2701928 L19.2737946,22.1113439 L19.273,20.872 L17.342,18.901 L17.3422432,22.1016015 C17.3422432,22.960156 16.7979043,23.7200014 15.996361,23.9803253 L12.1332583,25.2349772 C11.1167119,25.5651294 10.0304252,24.9916374 9.70696907,23.9540469 C9.6467092,23.7607438 9.61603779,23.5591061 9.61603779,23.3562534 L9.61603779,12.085326 C9.61603779,11.7735988 9.68691742,11.478769 9.81312403,11.2167115 L9.28147729,10.6735062 C8.9061528,10.2904113 8.906178,9.67748365 9.28153401,9.29441968 L9.28885886,9.28694442 C9.65843044,8.90978366 10.2637766,8.90363142 10.6409374,9.273203 Z M11.064,12.493 L11.0647013,23.3562534 C11.0647013,23.4069666 11.0723692,23.457376 11.0874341,23.5057018 C11.1593133,23.7362774 11.381875,23.8751793 11.608934,23.8452307 L11.6940064,23.8259344 L15.5571091,22.5712824 C15.7288684,22.5154988 15.8533861,22.3679662 15.8854573,22.1917865 L15.8935797,22.1016015 L15.893,17.422 L11.064,12.493 Z M25.0294677,10.1327135 C26.1177626,10.1327135 27,11.0149509 27,12.1032458 L27,12.1032458 L26.999,23.262 L19.273,15.377 L19.2737946,13.473172 C19.2737946,12.6987707 19.7265395,12.0018007 20.4212289,11.6827376 L20.5737173,11.6202607 L24.3588582,10.2503345 C24.5738769,10.1725145 24.8007998,10.1327135 25.0294677,10.1327135 Z M15.345,11.368 L16.0562061,11.6252862 C16.8023231,11.8953224 17.3088771,12.6012767 17.3406565,13.4032942 L15.345,11.368 Z" id="矩形"></path>    </g></svg>',Zt='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">        <g id="镜像备份-VER2备份">        <path d="M11,10.5 C11.2277182,10.5 11.453764,10.5377956 11.6683894,10.611757 L15.6683894,11.9901849 C16.4665917,12.2652509 17,12.9990945 17,13.8221657 L17,22.3187792 C17,23.1652278 16.4363713,23.914359 15.6064236,24.1710122 L11.6064236,25.4079729 C10.5538537,25.7334698 9.42907214,25.1680643 9.09415362,24.1451043 C9.03175832,23.9545269 9,23.7557324 9,23.55574 L9,12.4437379 C9,11.3702411 9.8954305,10.5 11,10.5 Z M24.9596712,10.5130738 C26.0865137,10.5130738 27,11.4265601 27,12.5534026 L27,12.5534026 L27,23.4473726 C27,23.6517289 26.9692989,23.8549257 26.9089246,24.0501601 C26.5760143,25.126703 25.4334266,25.7295364 24.3568837,25.396626 L24.3568837,25.396626 L20.4375413,24.1846079 C19.5828274,23.920296 19,23.1300034 19,22.2353545 L19,22.2353545 L19,13.9040352 C19,13.0334032 19.5524531,12.2586879 20.375581,11.9750323 L20.375581,11.9750323 L24.2949233,10.6243997 C24.5088021,10.5506956 24.7334491,10.5130738 24.9596712,10.5130738 Z M11,11.9578034 C10.7545401,11.9578034 10.5503916,12.1297029 10.5080557,12.3563906 L10.5,12.4437379 L10.5,23.55574 C10.5,23.6057381 10.5079396,23.6554367 10.5235384,23.703081 C10.5979647,23.9304055 10.8284134,24.0673488 11.0635188,24.0378225 L11.1516059,24.0187982 L15.1516059,22.7818375 C15.3294518,22.7268404 15.458382,22.5813881 15.4915897,22.4076926 L15.5,22.3187792 L15.5,13.8221657 C15.5,13.6457933 15.402027,13.4858097 15.2483703,13.4003946 L15.1670973,13.3641705 L11.1670973,11.9857427 C11.113441,11.9672524 11.0569296,11.9578034 11,11.9578034 Z" id="矩形"></path>    </g></svg>';function Bt(t){var e,n,i,r;return{c:function(){e=j("div"),n=H(t[0]),A(e,"class","tip panel svelte-1fgqxfc"),A(e,"style",t[1])},m:function(t,i){q(t,e,i),_(e,n),r=!0},p:function(t,i){(!r||1&i)&&F(n,t[0]),(!r||2&i)&&A(e,"style",t[1])},i:function(t){r||(rt(function(){i||(i=xt(e,Mt,{duration:200,y:10},!0)),i.run(1)}),r=!0)},o:function(t){i||(i=xt(e,Mt,{duration:200,y:10},!1)),i.run(0),r=!1},d:function(t){t&&E(e),t&&i&&i.end()}}}function It(t){var e,n,i,r,o,l,a=t[2]&&t[0]&&Bt(t),s=t[4].default,u=function(t,e,n,i){if(t){var r=$(t,e,n,null);return t[0](r)}}(s,t,t[3]);return{c:function(){e=j("div"),a&&a.c(),n=P(),i=j("div"),u&&u.c(),A(e,"class","tip-wrap svelte-1fgqxfc")},m:function(s,c){q(s,e,c),a&&a.m(e,null),_(e,n),_(e,i),u&&u.m(i,null),r=!0,o||(l=[B(e,"mouseenter",t[5]),B(e,"mouseleave",t[6])],o=!0)},p:function(t,i){var r=d(i,1)[0];t[2]&&t[0]?a?(a.p(t,r),5&r&&mt(a,1)):((a=Bt(t)).c(),mt(a,1),a.m(e,n)):a&&(pt(),ht(a,1,1,function(){a=null}),vt()),u&&u.p&&8&r&&k(u,s,t,t[3],r,null,null)},i:function(t){r||(mt(a),mt(u,t),r=!0)},o:function(t){ht(a),ht(u,t),r=!1},d:function(t){t&&E(e),a&&a.d(),u&&u.d(t),o=!1,b(l)}}}function Vt(t,e,n){var i=e.$$slots,r=void 0===i?{}:i,o=e.$$scope,l=e.text,a=void 0===l?"":l,s=e.style,u=void 0===s?"":s,c=!1;return t.$$set=function(t){"text"in t&&n(0,a=t.text),"style"in t&&n(1,u=t.style),"$$scope"in t&&n(3,o=t.$$scope)},[a,u,c,o,r,function(){return n(2,c=!0)},function(){return n(2,c=!1)}]}var At=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),document.getElementById("svelte-1fgqxfc-style")||((o=j("style")).id="svelte-1fgqxfc-style",o.textContent=".tip-wrap.svelte-1fgqxfc.svelte-1fgqxfc{position:relative}.tip-wrap.svelte-1fgqxfc:hover .tip.svelte-1fgqxfc{display:block}.tip.svelte-1fgqxfc.svelte-1fgqxfc{padding:4px 6px;word-break:keep-all;white-space:nowrap;display:none}",_(document.head,o)),Ct(s(r),t,Vt,It,w,{text:0,style:1}),r}return i}(),Ot='<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 24.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"    y="0px" viewBox="0 0 36 36" style="enable-background:new 0 0 36 36;" xml:space="preserve">        <path class="st0" d="M20,14.5c1.9,1.1,2.6,3.6,1.5,5.5c-0.3,0.6-0.9,1.1-1.5,1.5V14.5z" />    <path class="st0" d="M21.4,10.7c4,1.9,5.7,6.7,3.8,10.7c-0.8,1.7-2,3-3.7,3.8c-0.5,0.2-1.1,0-1.3-0.5l0,0c-0.2-0.5,0-1.1,0.5-1.3\tc2.9-1.5,4.1-4.9,2.7-8c-0.6-1.2-1.6-2.3-2.8-2.8c-0.5-0.2-0.7-0.8-0.5-1.3S20.8,10.5,21.4,10.7C21.3,10.7,21.3,10.7,21.4,10.7\tL21.4,10.7z" />    <path class="st0" d="M17.9,11.7c0.1,0.1,0.1,0.1,0.1,0.2l0.1,12c0,0.3-0.2,0.5-0.5,0.5c-0.1,0-0.2,0-0.3-0.1l-4.2-3.4h-1\tc-1.1,0-2-0.9-2-2v-2c0-1.1,0.9-2,2-2h1l4.1-3.3C17.4,11.5,17.7,11.5,17.9,11.7L17.9,11.7z" /></svg>',Ft='<?xml version="1.0" encoding="utf-8"?>\x3c!-- Generator: Adobe Illustrator 24.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e<svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"  y="0px" viewBox="0 0 36 36" style="enable-background:new 0 0 36 36;" xml:space="preserve">    <path class="st0" d="M25.8,25.8c0.4,0.4,0.4,1,0,1.4s-1,0.4-1.4,0l-2.3-2.3c-0.2,0.1-0.4,0.2-0.6,0.3c-0.5,0.2-1.1,0-1.3-0.5\tc-0.2-0.5,0-1.1,0.5-1.3l0,0l-2.6-2.6v3.1c0,0.3-0.2,0.5-0.5,0.5c-0.1,0-0.2,0-0.3-0.1l-4.2-3.4h-1c-1.1,0-2-0.9-2-2v-2\tc0-1.1,0.9-2,2-2h0.2l-3.4-3.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0L25.8,25.8z" />  <path class="st0" d="M21.4,10.8c4,1.9,5.7,6.7,3.8,10.7c-0.1,0.2-0.2,0.4-0.3,0.6l-1.5-1.5c1.4-3,0.2-6.6-2.8-8l0,0\tc-0.5-0.2-0.7-0.8-0.5-1.3l0,0C20.4,10.7,21,10.5,21.4,10.8z" />  <path class="st0" d="M20,14.5c1.2,0.7,2,2,2,3.5c0,0.3,0,0.7-0.1,1L20,17.1V14.5z" />  <path class="st0" d="M17.9,11.7C18,11.8,18,11.9,18,12v3.1l-2.3-2.3l1.5-1.2C17.4,11.5,17.7,11.5,17.9,11.7z" /></svg>',Rt=function(t,e,n){return Math.min(Math.max(Math.round(t),e),n)};function Gt(t){var e;return{onEnter:function(n){clearTimeout(e),e=window.setTimeout(function(){n()},t)},onLeave:function(n){clearTimeout(e),e=window.setTimeout(function(){n()},t)}}}var Yt=bt.document;function Xt(t){var e,n,i,r,o,l,a,s,u,c,f=Math.round(t[0])+"";return{c:function(){e=j("div"),n=j("div"),i=H(f),r=P(),o=j("div"),l=j("div"),a=P(),s=j("div"),A(n,"class","number svelte-126wnuj"),R(l,"top",t[4]+"px"),A(l,"class","slider-handle svelte-126wnuj"),G(l,"top-trans",!t[3]),R(s,"height",t[0]+"%"),A(s,"class","slider-track svelte-126wnuj"),G(s,"height-trans",!t[3]),A(o,"class","slider-rail svelte-126wnuj"),A(e,"class","vertical-slider-wrap svelte-126wnuj")},m:function(d,f){q(d,e,f),_(e,n),_(n,i),_(e,r),_(e,o),_(o,l),t[9](l),_(o,a),_(o,s),t[10](o),u||(c=[B(l,"mousedown",t[7]),B(o,"mousedown",t[6]),B(e,"wheel",V(I(t[11])))],u=!0)},p:function(t,e){var n=d(e,1)[0];1&n&&f!==(f=Math.round(t[0])+"")&&F(i,f),16&n&&R(l,"top",t[4]+"px"),8&n&&G(l,"top-trans",!t[3]),1&n&&R(s,"height",t[0]+"%"),8&n&&G(s,"height-trans",!t[3])},i:m,o:m,d:function(n){n&&E(e),t[9](null),t[10](null),u=!1,b(c)}}}function Ut(t,e,n){var i,r,o,l=e.value,a=void 0===l?100:l,s=e.onChange,u=void 0===s?null:s,c=!1,d=function(t){var e=Rt(t,0,100);u?u(e):n(0,a=e)};return t.$$set=function(t){"value"in t&&n(0,a=t.value),"onChange"in t&&n(8,u=t.onChange)},t.$$.update=function(){3&t.$$.dirty&&n(4,i=(100-a)/100*((null==r?void 0:r.clientHeight)-12))},[a,r,o,c,i,d,function(t){t.target!==o&&d(100-(t.clientY-r.getBoundingClientRect().top)/r.clientHeight*100)},function(t){var e=t.clientY,i=a;n(3,c=!0);var o=function(t){var n=e-t.clientY;d(i+n/r.clientHeight*100)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",function t(){n(3,c=!1),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t)})},u,function(t){Q[t?"unshift":"push"](function(){n(2,o=t)})},function(t){Q[t?"unshift":"push"](function(){n(1,r=t)})},function(t){var e=t.deltaY;d(a-Math.ceil(e/10))}]}var Dt=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),Yt.getElementById("svelte-126wnuj-style")||((o=j("style")).id="svelte-126wnuj-style",o.textContent=".vertical-slider-wrap.svelte-126wnuj.svelte-126wnuj{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 6px;opacity:0.9;background:#212121;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box}.vertical-slider-wrap.svelte-126wnuj .number.svelte-126wnuj{-ms-flex-negative:0;flex-shrink:0;margin-bottom:5px;width:20px;text-align:center;color:#e5e9ef}.vertical-slider-wrap.svelte-126wnuj .slider-rail.svelte-126wnuj{width:2px;-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative;padding:0 4px;background:#e7e7e7;background-clip:content-box;border-radius:2px;cursor:pointer}.vertical-slider-wrap.svelte-126wnuj .slider-handle.svelte-126wnuj{width:12px;height:12px;position:absolute;left:50%;z-index:1;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-radius:50%;background-color:#00a1d6}.vertical-slider-wrap.svelte-126wnuj .slider-handle.top-trans.svelte-126wnuj{-webkit-transition:top 0.2s ease-in-out;transition:top 0.2s ease-in-out}.vertical-slider-wrap.svelte-126wnuj .slider-track.svelte-126wnuj{position:absolute;bottom:0;width:2px;background-color:#00a1d6}.vertical-slider-wrap.svelte-126wnuj .slider-track.height-trans.svelte-126wnuj{-webkit-transition:height 0.2s ease-in-out;transition:height 0.2s ease-in-out}",_(Yt.head,o)),Ct(s(r),t,Ut,Xt,w,{value:0,onChange:8}),r}return i}(),Nt=bt.document;function Wt(t){var e,n,i,r,o;return n=new Dt({props:{value:t[0]?0:t[1],onChange:t[8]}}),{c:function(){e=j("div"),yt(n.$$.fragment),A(e,"class","panel volume-control svelte-16y1m1m")},m:function(l,a){q(l,e,a),wt(n,e,null),i=!0,r||(o=B(e,"mousedown",t[9]),r=!0)},p:function(t,e){var i={};3&e&&(i.value=t[0]?0:t[1]),n.$set(i)},i:function(t){i||(mt(n.$$.fragment,t),i=!0)},o:function(t){ht(n.$$.fragment,t),i=!1},d:function(t){t&&E(e),$t(n),r=!1,o()}}}function Jt(t){var e,n,i,r,o,l,a=(t[0]?Ft:Ot)+"",s=(t[2]||t[3])&&Wt(t);return{c:function(){e=j("div"),s&&s.c(),n=P(),A(i=j("span"),"class","icon"),A(e,"class","volume svelte-16y1m1m")},m:function(u,c){q(u,e,c),s&&s.m(e,null),_(e,n),_(e,i),i.innerHTML=a,r=!0,o||(l=[B(i,"click",t[10]),B(e,"mouseenter",t[11]),B(e,"mouseleave",t[12]),B(e,"wheel",V(I(t[13])))],o=!0)},p:function(t,o){var l=d(o,1)[0];t[2]||t[3]?s?(s.p(t,l),12&l&&mt(s,1)):((s=Wt(t)).c(),mt(s,1),s.m(e,n)):s&&(pt(),ht(s,1,1,function(){s=null}),vt()),(!r||1&l)&&a!==(a=(t[0]?Ft:Ot)+"")&&(i.innerHTML=a)},i:function(t){r||(mt(s),r=!0)},o:function(t){ht(s),r=!1},d:function(t){t&&E(e),s&&s.d(),o=!1,b(l)}}}function Kt(t,e,n){var i=e.onChange,r=void 0===i?null:i,o=e.disabled,l=void 0!==o&&o,a=e.value,s=void 0===a?100:a,u=!1,c=!1,d=function(t,e){if("disabled"===t)r?r({disabled:e,value:s}):n(0,l=e);else if("value"===t&&e!==s){var i=0===e;r?r({disabled:i,value:e}):(n(1,s=e),n(0,l=i))}},f=Gt(100),p=f.onEnter,v=f.onLeave;return t.$$set=function(t){"onChange"in t&&n(7,r=t.onChange),"disabled"in t&&n(0,l=t.disabled),"value"in t&&n(1,s=t.value)},[l,s,u,c,d,p,v,r,function(t){return d("value",t)},function(){n(3,c=!0),document.addEventListener("mouseup",function t(){n(3,c=!1),document.removeEventListener("mouseup",t)})},function(){return d("disabled",!l)},function(){return p(function(){n(2,u=!0)})},function(){return v(function(){n(2,u=!1)})},function(t){var e=t.deltaY;d("value",Rt(s-Math.ceil(e/10),0,100))}]}var Qt=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),Nt.getElementById("svelte-16y1m1m-style")||((o=j("style")).id="svelte-16y1m1m-style",o.textContent=".volume.svelte-16y1m1m.svelte-16y1m1m{position:relative}.volume.svelte-16y1m1m .volume-control.svelte-16y1m1m{height:100px}",_(Nt.head,o)),Ct(s(r),t,Kt,Jt,w,{onChange:7,disabled:0,value:1}),r}return i}();function te(t,e,n){var i=t.slice();return i[21]=e[n],i}function ee(t,e,n){var i=t.slice();return i[24]=e[n],i}function ne(t){for(var e,n,i=null!=t[0]&&ie(t),r=t[3],o=[],l=0;l<r.length;l+=1)o[l]=le(te(t,r,l));return{c:function(){e=j("div"),i&&i.c(),n=P();for(var t=0;t<o.length;t+=1)o[t].c();A(e,"class","panel svelte-73epzt")},m:function(t,r){q(t,e,r),i&&i.m(e,null),_(e,n);for(var l=0;l<o.length;l+=1)o[l].m(e,null)},p:function(t,l){if(null!=t[0]?i?i.p(t,l):((i=ie(t)).c(),i.m(e,n)):i&&(i.d(1),i=null),266&l){var a;for(r=t[3],a=0;a<r.length;a+=1){var s=te(t,r,a);o[a]?o[a].p(s,l):(o[a]=le(s),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},d:function(t){t&&E(e),i&&i.d(),T(o,t)}}}function ie(t){for(var e,n,i,r,o,l,a,s,u,c,d=t[2],f=[],p=0;p<d.length;p+=1)f[p]=oe(ee(t,d,p));return{c:function(){e=j("div"),n=j("div"),i=j("div"),r=H(t[6]),o=P(),l=j("div"),a=P(),s=j("div");for(var u=0;u<f.length;u+=1)f[u].c();A(l,"class","arrow svelte-73epzt"),A(i,"class","line-label svelte-73epzt"),A(s,"class","option-wrap"),A(n,"class","line-selector svelte-73epzt"),R(n,"height",(t[4]?22*t[2].length+2:22)+"px"),A(e,"class","line-wrap svelte-73epzt")},m:function(d,p){q(d,e,p),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(n,a),_(n,s);for(var v=0;v<f.length;v+=1)f[v].m(s,null);u||(c=[B(n,"mouseenter",t[16]),B(n,"mouseleave",t[17])],u=!0)},p:function(t,e){if(64&e&&F(r,t[6]),517&e){var i;for(d=t[2],i=0;i<d.length;i+=1){var o=ee(t,d,i);f[i]?f[i].p(o,e):(f[i]=oe(o),f[i].c(),f[i].m(s,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=d.length}20&e&&R(n,"height",(t[4]?22*t[2].length+2:22)+"px")},d:function(t){t&&E(e),T(f,t),u=!1,b(c)}}}function re(t){var e,n,i,r,o,l=t[24].label+"";function a(){return t[15](t[24])}return{c:function(){e=j("div"),n=H(l),i=P(),A(e,"class","option svelte-73epzt"),G(e,"selected",t[24].value==t[0])},m:function(t,l){q(t,e,l),_(e,n),_(e,i),r||(o=B(e,"click",a),r=!0)},p:function(i,r){t=i,4&r&&l!==(l=t[24].label+"")&&F(n,l),5&r&&G(e,"selected",t[24].value==t[0])},d:function(t){t&&E(e),r=!1,o()}}}function oe(t){var e,n=t[24].value!==t[0]&&re(t);return{c:function(){n&&n.c(),e=Z()},m:function(t,i){n&&n.m(t,i),q(t,e,i)},p:function(t,i){t[24].value!==t[0]?n?n.p(t,i):((n=re(t)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d:function(t){n&&n.d(t),t&&E(e)}}}function le(t){var e,n,i,r,o,l=t[21].label+"";function a(){return t[18](t[21])}return{c:function(){e=j("div"),n=H(l),i=P(),A(e,"class","quality-it svelte-73epzt"),G(e,"selected",t[21].value==t[1])},m:function(t,l){q(t,e,l),_(e,n),_(e,i),r||(o=B(e,"click",a),r=!0)},p:function(i,r){t=i,8&r&&l!==(l=t[21].label+"")&&F(n,l),10&r&&G(e,"selected",t[21].value==t[1])},d:function(t){t&&E(e),r=!1,o()}}}function ae(t){var e,n,i,r,o,l,a=t[5]&&ne(t);return{c:function(){e=j("div"),a&&a.c(),n=P(),i=j("span"),r=H(t[7]),A(i,"class","text"),A(e,"class","quality-wrap svelte-73epzt")},m:function(s,u){q(s,e,u),a&&a.m(e,null),_(e,n),_(e,i),_(i,r),o||(l=[B(e,"mouseenter",t[19]),B(e,"mouseleave",t[20])],o=!0)},p:function(t,i){var o=d(i,1)[0];t[5]?a?a.p(t,o):((a=ne(t)).c(),a.m(e,n)):a&&(a.d(1),a=null),128&o&&F(r,t[7])},i:m,o:m,d:function(t){t&&E(e),a&&a.d(),o=!1,b(l)}}}function se(t,e,n){var i,r,o,l,a=e.lineList,s=void 0===a?[]:a,u=e.qualityList,c=void 0===u?[]:u,d=e.line,f=void 0===d?"":d,p=e.quality,v=void 0===p?"":p,m=e.onChange,h=void 0===m?null:m,g=!1,x=!1,b=function(t){t!==v&&(h?h("quality",t):n(1,v=t))},y=function(t){t!==f&&(h?h("line",t):n(0,f=t))},w=Gt(100),$=w.onEnter,k=w.onLeave;return t.$$set=function(t){"lineList"in t&&n(2,s=t.lineList),"qualityList"in t&&n(3,c=t.qualityList),"line"in t&&n(0,f=t.line),"quality"in t&&n(1,v=t.quality),"onChange"in t&&n(12,h=t.onChange)},t.$$.update=function(){8197&t.$$.dirty&&n(6,i=null===n(13,o=s.find(function(t){var e=t.value;return f===e}))||void 0===o?void 0:o.label),16394&t.$$.dirty&&n(7,r=null===n(14,l=c.find(function(t){var e=t.value;return v===e}))||void 0===l?void 0:l.label)},[f,v,s,c,g,x,i,r,b,y,$,k,h,o,l,function(t){return y(t.value)},function(){return n(4,g=!0)},function(){return n(4,g=!1)},function(t){return b(t.value)},function(){return $(function(){n(5,x=!0)})},function(){return k(function(){n(5,x=!1)})}]}var ue=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),document.getElementById("svelte-73epzt-style")||((o=j("style")).id="svelte-73epzt-style",o.textContent=".quality-wrap.svelte-73epzt.svelte-73epzt{position:relative}.quality-wrap.svelte-73epzt .panel.svelte-73epzt{padding:9px 0;min-height:94px}.quality-wrap.svelte-73epzt .line-wrap.svelte-73epzt{width:66px;margin-bottom:28px;padding:3px 20px 0 20px;position:relative}.quality-wrap.svelte-73epzt .line-wrap .line-selector.svelte-73epzt{width:66px;border:1px solid rgba(255, 255, 255, 0.4);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:2px;position:absolute;background:#212121;-webkit-transition:height 0.1s ease-in-out;transition:height 0.1s ease-in-out;overflow:hidden}.quality-wrap.svelte-73epzt .line-wrap .line-label.svelte-73epzt,.quality-wrap.svelte-73epzt .line-wrap .option.svelte-73epzt{height:22px;padding-left:9px;line-height:22px}.quality-wrap.svelte-73epzt .line-wrap .line-label.svelte-73epzt{position:relative}.quality-wrap.svelte-73epzt .line-wrap .arrow.svelte-73epzt{width:0;height:0;top:8px;right:8px;border:4px solid transparent;border-top:6px solid #797979;position:absolute}.quality-wrap.svelte-73epzt .quality-it.svelte-73epzt,.quality-wrap.svelte-73epzt .option.svelte-73epzt{cursor:pointer;line-height:22px}.quality-wrap.svelte-73epzt .quality-it.svelte-73epzt:hover,.quality-wrap.svelte-73epzt .option.svelte-73epzt:hover{background-color:rgba(255, 255, 255, 0.1)}.quality-wrap.svelte-73epzt .quality-it.svelte-73epzt{padding:0 20px}.quality-wrap.svelte-73epzt .quality-it.selected.svelte-73epzt{color:#23ade5}.quality-wrap.svelte-73epzt .quality-it.svelte-73epzt,.quality-wrap.svelte-73epzt .line-label.svelte-73epzt{white-space:nowrap;word-break:keep-all}",_(document.head,o)),Ct(s(r),t,se,ae,w,{lineList:2,qualityList:3,line:0,quality:1,onChange:12}),r}return i}();function ce(t){var e,n,i,r,o,l,a,s,u;return{c:function(){e=j("div"),n=j("div"),(i=j("div")).textContent="播放器",r=P(),o=j("input"),l=P(),(a=j("label")).textContent="HTML5",A(i,"class","label svelte-1c429zu"),A(o,"type","radio"),A(o,"name","player-type"),A(o,"id","html5"),o.__value="html5",o.value=o.__value,t[7][0].push(o),A(a,"for","html5"),A(a,"class","svelte-1c429zu"),A(n,"class","player-type svelte-1c429zu"),A(e,"class","panel setting-panel svelte-1c429zu")},m:function(c,d){q(c,e,d),_(e,n),_(n,i),_(n,r),_(n,o),o.checked=o.__value===t[0],_(n,l),_(n,a),s||(u=[B(o,"click",t[5]),B(o,"change",t[6])],s=!0)},p:function(t,e){1&e&&(o.checked=o.__value===t[0])},d:function(n){n&&E(e),t[7][0].splice(t[7][0].indexOf(o),1),s=!1,b(u)}}}function de(t){var e,n,i,r,o,l=t[2]&&ce(t);return{c:function(){e=j("div"),l&&l.c(),n=P(),A(i=j("span"),"class","icon"),A(e,"class","setting svelte-1c429zu")},m:function(a,s){q(a,e,s),l&&l.m(e,null),_(e,n),_(e,i),i.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">    \x3c!-- Generator: Sketch 63.1 (92452) - https://sketch.com --\x3e            <g id="终稿" stroke="none" stroke-width="1" fill-rule="evenodd" opacity="0.9">        <g id="图标切图" transform="translate(-439.000000, -120.000000)">            <g id="编组-3" transform="translate(421.000000, 56.000000)">                <g id="编组-7" transform="translate(18.000000, 64.000000)">                    <g id="icon_设置" transform="translate(7.000000, 7.000000)">                        <g id="Group-2-Copy-6">                            <g id="player_setting">                                <path                                    d="M12.1355728,17.8458478 C11.7659721,17.9061404 11.3866469,17.9374882 11,17.9374882 C10.6133531,17.9374882 10.2340279,17.9061404 9.86442721,17.8458478 L8.82459672,19.1089545 C8.51390489,19.4863592 7.97590114,19.5838288 7.55255402,19.3394092 L5.55571956,18.1865363 C5.13237243,17.9421167 4.94778172,17.427457 5.11927787,16.9696876 L5.67630577,15.4828303 L5.67630577,15.4828303 C5.15507014,14.8729186 4.73681236,14.1723594 4.44845574,13.408076 L2.83560101,13.1392668 C2.35341304,13.0589022 2,12.6417121 2,12.1528729 L2,9.84712709 C2,9.35828794 2.35341304,8.94109783 2.83560101,8.86073316 L4.39976975,8.60003837 L4.39976975,8.60003837 C4.67272638,7.82931533 5.07685543,7.12062603 5.58532098,6.50080638 L5.01100429,4.9678006 C4.83950815,4.51003124 5.02409886,3.99537151 5.44744598,3.75095193 L7.44428044,2.59807902 C7.86762757,2.35365945 8.40563132,2.45112906 8.71632314,2.82853376 L9.72466395,4.05338917 L9.72466395,4.05338917 C10.1381953,3.9772668 10.5644523,3.93748822 11,3.93748822 C11.4355477,3.93748822 11.8618047,3.9772668 12.2753361,4.05338917 L13.2836769,2.82853376 C13.5943687,2.45112906 14.1323724,2.35365945 14.5557196,2.59807902 L16.552554,3.75095193 C16.9759011,3.99537151 17.1604919,4.51003124 16.9889957,4.9678006 L16.414679,6.50080638 L16.414679,6.50080638 C16.9231446,7.12062603 17.3272736,7.82931533 17.6002302,8.60003837 L19.164399,8.86073316 C19.646587,8.94109783 20,9.35828794 20,9.84712709 L20,12.1528729 C20,12.6417121 19.646587,13.0589022 19.164399,13.1392668 L17.5515443,13.408076 L17.5515443,13.408076 C17.2631876,14.1723594 16.8449299,14.8729186 16.3236942,15.4828303 L16.8807221,16.9696876 C17.0522183,17.427457 16.8676276,17.9421167 16.4442804,18.1865363 L14.447446,19.3394092 C14.0240989,19.5838288 13.4860951,19.4863592 13.1754033,19.1089545 L12.1355728,17.8458478 L12.1355728,17.8458478 Z M11,15 C13.209139,15 15,13.209139 15,11 C15,8.790861 13.209139,7 11,7 C8.790861,7 7,8.790861 7,11 C7,13.209139 8.790861,15 11,15 Z M11,13 C9.8954305,13 9,12.1045695 9,11 C9,9.8954305 9.8954305,9 11,9 C12.1045695,9 13,9.8954305 13,11 C13,12.1045695 12.1045695,13 11,13 Z"                                    id="Combined-Shape"></path>                            </g>                        </g>                    </g>                </g>            </g>        </g>    </g></svg>',r||(o=[B(e,"mouseenter",t[8]),B(e,"mouseleave",t[9])],r=!0)},p:function(t,i){var r=d(i,1)[0];t[2]?l?l.p(t,r):((l=ce(t)).c(),l.m(e,n)):l&&(l.d(1),l=null)},i:m,o:m,d:function(t){t&&E(e),l&&l.d(),r=!1,b(o)}}}function fe(t,e,n){var i=e.playerType,r=void 0===i?"html5":i,o=e.onChange,l=!1,a=Gt(100),s=a.onEnter,u=a.onLeave;return t.$$set=function(t){"playerType"in t&&n(0,r=t.playerType),"onChange"in t&&n(1,o=t.onChange)},[r,o,l,s,u,function(){return"html5"!==r&&o("playerType","html5")},function(){r=this.__value,n(0,r)},[[]],function(){return s(function(){n(2,l=!0)})},function(){return u(function(){n(2,l=!1)})}]}var pe=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),document.getElementById("svelte-1c429zu-style")||((o=j("style")).id="svelte-1c429zu-style",o.textContent=".setting.svelte-1c429zu.svelte-1c429zu{position:relative}.setting-panel.svelte-1c429zu.svelte-1c429zu{width:63px;padding:12px 20px}.player-type.svelte-1c429zu .label.svelte-1c429zu{margin-bottom:4px}.player-type.svelte-1c429zu label.svelte-1c429zu{white-space:nowrap;word-break:keep-all}",_(document.head,o)),Ct(s(r),t,fe,de,w,{playerType:0,onChange:1}),r}return i}(),ve='<svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">    <path id="Combined-Shape"    d="M11,10.9,25,11a1.92,1.92,0,0,1,2,1.9V23a2,2,0,0,1-2,2H11a2,2,0,0,1-2-2V13A2.09,2.09,0,0,1,11,10.9ZM13,14a.94.94,0,0,0,1,1h8a1,1,0,0,0,1-1,.94.94,0,0,0-1-1H14A.94.94,0,0,0,13,14Zm-2,4.1a.94.94,0,0,0,1,1h4a1,1,0,0,0,1-1,.94.94,0,0,0-1-1H12C11.4,17,11,17.5,11,18.1ZM12,22a.94.94,0,0,0,1,1h5a1,1,0,0,0,1-1,.94.94,0,0,0-1-1H13A1,1,0,0,0,12,22Zm6-4a.94.94,0,0,0,1,1h1a1,1,0,0,0,0-2H19A.94.94,0,0,0,18,18Z"    style="fill-rule:evenodd;isolation:isolate" /></svg>',me='<svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">    <path id="Combined-Shape"    d="M25.8,25.85a1,1,0,0,1-1.2,1.6,1.26,1.26,0,0,1-.2-.2l-2.2-2.2H11a2,2,0,0,1-2-2v-10a2.51,2.51,0,0,1,.2-.9l-.4-.4a1,1,0,0,1,.2-1.4,1,1,0,0,1,1.2,0ZM25,11.05a2,2,0,0,1,2,2v10a2.56,2.56,0,0,1-.2.9L21,18.15V18a.94.94,0,0,0-.88-1H19.8l-2-2H22a1.07,1.07,0,0,0,1-.9V14a.94.94,0,0,0-.88-1H15.8l-2-2Zm-7,10H13a1,1,0,1,0,0,2h5a1,1,0,0,0,0-2Zm-3.8-4H12a1,1,0,0,0,0,2h4.2Z"    style="fill-rule:evenodd" /></svg>',he=bt.document;function ge(t){var e,n,i,r,o,l,a,s,u,c,f=t[3](t[0])+"";return{c:function(){e=j("div"),n=j("div"),i=j("div"),r=P(),o=j("div"),l=P(),a=j("div"),s=H(f),R(i,"left",t[7]+"px"),A(i,"class","slider-handle svelte-19p8uhx"),G(i,"left-trans",!t[6]),R(o,"width",(t[0]-t[2])/(t[1]-t[2])*100+"%"),A(o,"class","slider-track svelte-19p8uhx"),G(o,"width-trans",!t[6]),A(n,"class","slider-rail svelte-19p8uhx"),A(a,"class","number svelte-19p8uhx"),A(e,"class","horizontal-slider-wrap svelte-19p8uhx")},m:function(d,f){q(d,e,f),_(e,n),_(n,i),t[13](i),_(n,r),_(n,o),t[14](n),_(e,l),_(e,a),_(a,s),u||(c=[B(i,"mousedown",t[10]),B(n,"mousedown",t[9]),B(e,"wheel",V(I(t[15])))],u=!0)},p:function(t,e){var n=d(e,1)[0];128&n&&R(i,"left",t[7]+"px"),64&n&&G(i,"left-trans",!t[6]),7&n&&R(o,"width",(t[0]-t[2])/(t[1]-t[2])*100+"%"),64&n&&G(o,"width-trans",!t[6]),9&n&&f!==(f=t[3](t[0])+"")&&F(s,f)},i:m,o:m,d:function(n){n&&E(e),t[13](null),t[14](null),u=!1,b(c)}}}function xe(t,e,n){var i,r,o,l,a=e.max,s=void 0===a?100:a,u=e.min,c=void 0===u?0:u,d=e.value,f=void 0===d?s:d,p=e.onChange,v=void 0===p?null:p,m=e.valueFormater,h=void 0===m?function(t){return t}:m,g=!1,x=function(t){var e=Rt(t,c,s);v?v(e):n(0,f=e)};return t.$$set=function(t){"max"in t&&n(1,s=t.max),"min"in t&&n(2,c=t.min),"value"in t&&n(0,f=t.value),"onChange"in t&&n(11,v=t.onChange),"valueFormater"in t&&n(3,h=t.valueFormater)},t.$$.update=function(){16&t.$$.dirty&&n(12,i=(null==o?void 0:o.clientWidth)-12),4103&t.$$.dirty&&n(7,r=(f-c)/(s-c)*i)},[f,s,c,h,o,l,g,r,x,function(t){t.target!==l&&x((t.clientX-o.getBoundingClientRect().left)/i*(s-c)+c-(s-c)/i*6)},function(t){var e=t.clientX,r=f;n(6,g=!0);var o=function(t){var n=t.clientX-e;x(r+n*((s-c)/i))};document.addEventListener("mousemove",o),document.addEventListener("mouseup",function t(){n(6,g=!1),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t)})},v,i,function(t){Q[t?"unshift":"push"](function(){n(5,l=t)})},function(t){Q[t?"unshift":"push"](function(){n(4,o=t)})},function(t){var e=t.deltaY;x(f+Math.ceil(e/10))}]}var be=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),he.getElementById("svelte-19p8uhx-style")||((o=j("style")).id="svelte-19p8uhx-style",o.textContent=".horizontal-slider-wrap.svelte-19p8uhx.svelte-19p8uhx{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.horizontal-slider-wrap.svelte-19p8uhx .number.svelte-19p8uhx{width:31px;-ms-flex-negative:0;flex-shrink:0;margin-left:10px}.horizontal-slider-wrap.svelte-19p8uhx .slider-rail.svelte-19p8uhx{height:2px;-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative;padding:5px 0;background:rgba(255, 255, 255, 0.2);background-clip:content-box;border-radius:10px;cursor:pointer}.horizontal-slider-wrap.svelte-19p8uhx .slider-handle.svelte-19p8uhx{width:12px;height:12px;position:absolute;top:0;z-index:1;border-radius:50%;background-color:#00a1d6}.horizontal-slider-wrap.svelte-19p8uhx .slider-handle.left-trans.svelte-19p8uhx{-webkit-transition:left 0.2s ease-in-out;transition:left 0.2s ease-in-out}.horizontal-slider-wrap.svelte-19p8uhx .slider-track.svelte-19p8uhx{position:absolute;height:2px;background-color:#00a1d6}.horizontal-slider-wrap.svelte-19p8uhx .slider-track.width-trans.svelte-19p8uhx{-webkit-transition:width 0.2s ease-in-out;transition:width 0.2s ease-in-out}",_(he.head,o)),Ct(s(r),t,xe,ge,w,{max:1,min:2,value:0,onChange:11,valueFormater:3}),r}return i}(),ye=bt.document;function we(t){var e,n,i,r,o,l,a,s,u,c,f,p;return{c:function(){e=j("div"),n=j("div"),i=P(),(r=j("div")).innerHTML='<div class="title svelte-xpny31">1/4屏</div>',o=P(),(l=j("div")).innerHTML='<div class="title svelte-xpny31">半屏</div>',a=P(),(s=j("div")).innerHTML='<div class="title svelte-xpny31">3/4屏</div>',u=P(),(c=j("div")).innerHTML='<div class="title svelte-xpny31">全屏</div>',A(n,"class","handle svelte-xpny31"),R(n,"left",t[1]+"px"),A(r,"class","step1 svelte-xpny31"),A(l,"class","step2 svelte-xpny31"),A(s,"class","step3 svelte-xpny31"),A(c,"class","step4 svelte-xpny31"),A(e,"class","steps svelte-xpny31")},m:function(d,v){q(d,e,v),_(e,n),_(e,i),_(e,r),_(e,o),_(e,l),_(e,a),_(e,s),_(e,u),_(e,c),t[6](e),f||(p=[B(n,"mousedown",t[3]),B(e,"click",t[2])],f=!0)},p:function(t,e){2&d(e,1)[0]&&R(n,"left",t[1]+"px")},i:m,o:m,d:function(n){n&&E(e),t[6](null),f=!1,b(p)}}}function $e(t,e,n){var i,r,o=e.value,l=void 0===o?4:o,a=e.onChange,s=void 0===a?null:a,u=function(t){var e=Rt(Math.round(t)+1,1,4);e!==l&&(s?s(e):n(4,l=e))};return t.$$set=function(t){"value"in t&&n(4,l=t.value),"onChange"in t&&n(5,s=t.onChange)},t.$$.update=function(){17&t.$$.dirty&&n(1,i=((null==r?void 0:r.clientWidth)-12)*(Math.round(l-1)/3))},[r,i,function(t){u(3*(t.clientX-r.getBoundingClientRect().left)/r.clientWidth)},function(){var t=r.getBoundingClientRect().left,e=function(e){u(3*(e.clientX-t)/r.clientWidth)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)})},l,s,function(t){Q[t?"unshift":"push"](function(){n(0,r=t)})}]}var ke=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),ye.getElementById("svelte-xpny31-style")||((o=j("style")).id="svelte-xpny31-style",o.textContent=".steps.svelte-xpny31.svelte-xpny31{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;height:2px;background:rgba(255, 255, 255, 0.2);background-clip:content-box;padding:7px 0;position:relative;cursor:pointer}.step1.svelte-xpny31.svelte-xpny31,.step2.svelte-xpny31.svelte-xpny31,.step3.svelte-xpny31.svelte-xpny31,.step4.svelte-xpny31.svelte-xpny31{-webkit-box-flex:1;-ms-flex:1;flex:1;position:relative}.step1.svelte-xpny31.svelte-xpny31::before,.step2.svelte-xpny31.svelte-xpny31::before,.step3.svelte-xpny31.svelte-xpny31::before,.step4.svelte-xpny31.svelte-xpny31::before{content:'';width:2px;height:4px;background:rgba(255, 255, 255, 0.2);border-radius:2px;position:absolute;-webkit-transform:translateY(-1px);transform:translateY(-1px)}.step2.svelte-xpny31 .title.svelte-xpny31{left:33.333%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.step2.svelte-xpny31.svelte-xpny31::before{left:33.333%}.step3.svelte-xpny31 .title.svelte-xpny31{right:33.333%;-webkit-transform:translateX(50%);transform:translateX(50%)}.step3.svelte-xpny31.svelte-xpny31::before{right:33.333%}.step4.svelte-xpny31 .title.svelte-xpny31{right:0}.step4.step4.svelte-xpny31.svelte-xpny31::before{right:0}.title.svelte-xpny31.svelte-xpny31{position:absolute;top:-21px;color:rgba(255, 255, 255, 0.8)}.handle.svelte-xpny31.svelte-xpny31{position:absolute;top:2px;z-index:1;width:12px;height:12px;border-radius:50%;background:#00a1d6;-webkit-transition:left 0.2s ease-in-out;transition:left 0.2s ease-in-out}",_(ye.head,o)),Ct(s(r),t,$e,we,w,{value:4,onChange:5}),r}return i}();function Ce(t){var e,n,i,r,o,l,a,s,u,c,d,f,p,v,m,h,g,x,b,y,w,$,k;l=new be({props:{value:t[0].opacity,onChange:t[8],min:10,max:100,valueFormater:t[4]}}),d=new be({props:{value:t[0].fontScale,onChange:t[9],min:10,max:200,valueFormater:t[4]}}),h=new be({props:{value:t[0].density,onChange:t[10],min:10,max:100,valueFormater:t[4]}}),w=new ke({props:{value:t[0].area,onChange:t[11]}});var C=t[0].showMaskOption&&Le(t);return{c:function(){e=j("div"),n=j("div"),i=j("div"),(r=j("div")).textContent="不透明度",o=P(),yt(l.$$.fragment),a=P(),s=j("div"),(u=j("div")).textContent="字号缩放",c=P(),yt(d.$$.fragment),f=P(),p=j("div"),(v=j("div")).textContent="同屏密度",m=P(),yt(h.$$.fragment),g=P(),x=j("div"),(b=j("div")).textContent="显示区域",y=P(),yt(w.$$.fragment),$=P(),C&&C.c(),A(r,"class","item-title svelte-15b8sms"),A(i,"class","item svelte-15b8sms"),A(u,"class","item-title svelte-15b8sms"),A(s,"class","item svelte-15b8sms"),A(v,"class","item-title svelte-15b8sms"),A(p,"class","item svelte-15b8sms"),A(n,"class","base-setting svelte-15b8sms"),A(b,"class","item-title svelte-15b8sms"),A(x,"class","area-setting svelte-15b8sms"),A(e,"class","panel danmaku-control svelte-15b8sms")},m:function(t,L){q(t,e,L),_(e,n),_(n,i),_(i,r),_(i,o),wt(l,i,null),_(n,a),_(n,s),_(s,u),_(s,c),wt(d,s,null),_(n,f),_(n,p),_(p,v),_(p,m),wt(h,p,null),_(e,g),_(e,x),_(x,b),_(x,y),wt(w,x,null),_(e,$),C&&C.m(e,null),k=!0},p:function(t,n){var i={};1&n&&(i.value=t[0].opacity),4&n&&(i.onChange=t[8]),l.$set(i);var r={};1&n&&(r.value=t[0].fontScale),4&n&&(r.onChange=t[9]),d.$set(r);var o={};1&n&&(o.value=t[0].density),4&n&&(o.onChange=t[10]),h.$set(o);var a={};1&n&&(a.value=t[0].area),4&n&&(a.onChange=t[11]),w.$set(a),t[0].showMaskOption?C?C.p(t,n):((C=Le(t)).c(),C.m(e,null)):C&&(C.d(1),C=null)},i:function(t){k||(mt(l.$$.fragment,t),mt(d.$$.fragment,t),mt(h.$$.fragment,t),mt(w.$$.fragment,t),k=!0)},o:function(t){ht(l.$$.fragment,t),ht(d.$$.fragment,t),ht(h.$$.fragment,t),ht(w.$$.fragment,t),k=!1},d:function(t){t&&E(e),$t(l),$t(d),$t(h),$t(w),C&&C.d()}}}function Le(t){var e,n,i,r,o,l,a;return{c:function(){e=j("div"),n=j("input"),r=P(),(o=j("label")).textContent="智能防挡弹幕",A(n,"type","checkbox"),A(n,"id","mask"),n.checked=i=t[0].enableMask,A(o,"for","mask"),A(o,"class","svelte-15b8sms"),A(e,"class","other-setting svelte-15b8sms")},m:function(i,s){q(i,e,s),_(e,n),_(e,r),_(e,o),l||(a=B(n,"click",t[12]),l=!0)},p:function(t,e){1&e&&i!==(i=t[0].enableMask)&&(n.checked=i)},d:function(t){t&&E(e),l=!1,a()}}}function Se(t){var e,n,i,r=(t[0].display?ve:me)+"";return{c:function(){A(e=j("span"),"class","icon")},m:function(o,l){q(o,e,l),e.innerHTML=r,n||(i=B(e,"click",t[13]),n=!0)},p:function(t,n){1&n&&r!==(r=(t[0].display?ve:me)+"")&&(e.innerHTML=r)},d:function(t){t&&E(e),n=!1,i()}}}function ze(t){var e,n,i,r,o,l,a=t[3]&&t[0].display&&t[1]&&Ce(t);return i=new At({props:{text:t[0].display?"":"显示弹幕",$$slots:{default:[Se]},$$scope:{ctx:t}}}),{c:function(){e=j("div"),a&&a.c(),n=P(),yt(i.$$.fragment),A(e,"class","danmaku")},m:function(s,u){q(s,e,u),a&&a.m(e,null),_(e,n),wt(i,e,null),r=!0,o||(l=[B(e,"mouseenter",t[14]),B(e,"mouseleave",t[15])],o=!0)},p:function(t,r){var o=d(r,1)[0];t[3]&&t[0].display&&t[1]?a?(a.p(t,o),11&o&&mt(a,1)):((a=Ce(t)).c(),mt(a,1),a.m(e,n)):a&&(pt(),ht(a,1,1,function(){a=null}),vt());var l={};1&o&&(l.text=t[0].display?"":"显示弹幕"),65541&o&&(l.$$scope={dirty:o,ctx:t}),i.$set(l)},i:function(t){r||(mt(a),mt(i.$$.fragment,t),r=!0)},o:function(t){ht(a),ht(i.$$.fragment,t),r=!1},d:function(t){t&&E(e),a&&a.d(),$t(i),o=!1,b(l)}}}function Me(t,e,n){var i=e.options,r=e.danmakuPanel,o=e.onChange,l=!1,a=function(t){o("enableMask",t.target.checked)},s=Gt(100),u=s.onEnter,c=s.onLeave;return t.$$set=function(t){"options"in t&&n(0,i=t.options),"danmakuPanel"in t&&n(1,r=t.danmakuPanel),"onChange"in t&&n(2,o=t.onChange)},[i,r,o,l,function(t){return"".concat(t,"%")},a,u,c,function(t){return o("opacity",t)},function(t){return o("fontScale",t)},function(t){return o("density",t)},function(t){return o("area",t)},function(t){return a(t)},function(){return o("display",!i.display)},function(){return u(function(){n(3,l=!0)})},function(){return c(function(){n(3,l=!1)})}]}var _e=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),document.getElementById("svelte-15b8sms-style")||((o=j("style")).id="svelte-15b8sms-style",o.textContent=".danmaku-control.panel.svelte-15b8sms.svelte-15b8sms{width:298px;padding:20px;-webkit-box-sizing:border-box;box-sizing:border-box;left:auto;right:12px;-webkit-transform:translate(0, -100%);transform:translate(0, -100%)}.base-setting.svelte-15b8sms .item.svelte-15b8sms{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:12px}.item-title.svelte-15b8sms.svelte-15b8sms{margin-right:10px}.area-setting.svelte-15b8sms.svelte-15b8sms{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:26px}.other-setting.svelte-15b8sms.svelte-15b8sms{margin-top:14px}.other-setting.svelte-15b8sms label.svelte-15b8sms{margin-right:20px}",_(document.head,o)),Ct(s(r),t,Me,ze,w,{options:0,danmakuPanel:1,onChange:2}),r}return i}(),qe=bt.document;function Ee(t){var e,n,i,r,o,l,a,s,u,c,d,f,p,v,m,h,g,x,b,y=t[11].playStatus&&Te(t),w=t[11].refresh&&je(t),$=t[11].volume&&He(t),k=t[11].time&&Pe(t),C=t[11].leftSetting&&Be(t),L=t[11].fullScreen&&Ie(t),S=t[11].webFullScreen&&Ae(t),z=t[11].danmaku&&Fe(t),M=t[11].rightSetting&&Re(t),T=t[11].pip&&document.pictureInPictureEnabled&&Ge(t),H=t[11].mirror&&Xe(t),Z=t[11].quality&&null!=t[6].value&&De(t);return{c:function(){e=j("div"),n=j("div"),i=j("div"),y&&y.c(),r=P(),w&&w.c(),o=P(),$&&$.c(),l=P(),k&&k.c(),a=P(),C&&C.c(),s=P(),u=j("div"),L&&L.c(),c=P(),S&&S.c(),d=P(),z&&z.c(),f=P(),M&&M.c(),p=P(),T&&T.c(),v=P(),H&&H.c(),m=P(),Z&&Z.c(),h=P(),g=j("div"),A(i,"class","left-area svelte-1dsiks1"),A(g,"class","ext-nodes svelte-1dsiks1"),A(u,"class","right-area svelte-1dsiks1"),A(n,"class","control-area svelte-1dsiks1"),A(e,"class","live-web-player-controller svelte-1dsiks1"),A(e,"style",t[10])},m:function(x,E){q(x,e,E),_(e,n),_(n,i),y&&y.m(i,null),_(i,r),w&&w.m(i,null),_(i,o),$&&$.m(i,null),_(i,l),k&&k.m(i,null),_(i,a),C&&C.m(i,null),_(n,s),_(n,u),L&&L.m(u,null),_(u,c),S&&S.m(u,null),_(u,d),z&&z.m(u,null),_(u,f),M&&M.m(u,null),_(u,p),T&&T.m(u,null),_(u,v),H&&H.m(u,null),_(u,m),Z&&Z.m(u,null),_(u,h),_(u,g),t[29](g),b=!0},p:function(t,n){t[11].playStatus?y?y.p(t,n):((y=Te(t)).c(),y.m(i,r)):y&&(y.d(1),y=null),t[11].refresh?w?w.p(t,n):((w=je(t)).c(),w.m(i,o)):w&&(w.d(1),w=null),t[11].volume?$?($.p(t,n),2048&n[0]&&mt($,1)):(($=He(t)).c(),mt($,1),$.m(i,l)):$&&(pt(),ht($,1,1,function(){$=null}),vt()),t[11].time?k?(k.p(t,n),2048&n[0]&&mt(k,1)):((k=Pe(t)).c(),mt(k,1),k.m(i,a)):k&&(pt(),ht(k,1,1,function(){k=null}),vt()),t[11].leftSetting?C?(C.p(t,n),2048&n[0]&&mt(C,1)):((C=Be(t)).c(),mt(C,1),C.m(i,null)):C&&(pt(),ht(C,1,1,function(){C=null}),vt()),t[11].fullScreen?L?(L.p(t,n),2048&n[0]&&mt(L,1)):((L=Ie(t)).c(),mt(L,1),L.m(u,c)):L&&(pt(),ht(L,1,1,function(){L=null}),vt()),t[11].webFullScreen?S?(S.p(t,n),2048&n[0]&&mt(S,1)):((S=Ae(t)).c(),mt(S,1),S.m(u,d)):S&&(pt(),ht(S,1,1,function(){S=null}),vt()),t[11].danmaku?z?(z.p(t,n),2048&n[0]&&mt(z,1)):((z=Fe(t)).c(),mt(z,1),z.m(u,f)):z&&(pt(),ht(z,1,1,function(){z=null}),vt()),t[11].rightSetting?M?(M.p(t,n),2048&n[0]&&mt(M,1)):((M=Re(t)).c(),mt(M,1),M.m(u,p)):M&&(pt(),ht(M,1,1,function(){M=null}),vt()),t[11].pip&&document.pictureInPictureEnabled?T?(T.p(t,n),2048&n[0]&&mt(T,1)):((T=Ge(t)).c(),mt(T,1),T.m(u,v)):T&&(pt(),ht(T,1,1,function(){T=null}),vt()),t[11].mirror?H?(H.p(t,n),2048&n[0]&&mt(H,1)):((H=Xe(t)).c(),mt(H,1),H.m(u,m)):H&&(pt(),ht(H,1,1,function(){H=null}),vt()),t[11].quality&&null!=t[6].value?Z?(Z.p(t,n),2112&n[0]&&mt(Z,1)):((Z=De(t)).c(),mt(Z,1),Z.m(u,h)):Z&&(pt(),ht(Z,1,1,function(){Z=null}),vt()),(!b||1024&n[0])&&A(e,"style",t[10])},i:function(t){b||(mt($),mt(k),mt(C),mt(L),mt(S),mt(z),mt(M),mt(T),mt(H),mt(Z),rt(function(){x||(x=xt(e,zt,{duration:200},!0)),x.run(1)}),b=!0)},o:function(t){ht($),ht(k),ht(C),ht(L),ht(S),ht(z),ht(M),ht(T),ht(H),ht(Z),x||(x=xt(e,zt,{duration:200},!1)),x.run(0),b=!1},d:function(n){n&&E(e),y&&y.d(),w&&w.d(),$&&$.d(),k&&k.d(),C&&C.d(),L&&L.d(),S&&S.d(),z&&z.d(),M&&M.d(),T&&T.d(),H&&H.d(),Z&&Z.d(),t[29](null),n&&x&&x.end()}}}function Te(t){var e,n,i,r=(t[0]?_t:qt)+"";return{c:function(){A(e=j("span"),"class","icon")},m:function(o,l){q(o,e,l),e.innerHTML=r,n||(i=B(e,"click",t[20]),n=!0)},p:function(t,n){1&n[0]&&r!==(r=(t[0]?_t:qt)+"")&&(e.innerHTML=r)},d:function(t){t&&E(e),n=!1,i()}}}function je(t){var e,n,i;return{c:function(){A(e=j("span"),"class","icon")},m:function(r,o){q(r,e,o),e.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">    \x3c!-- Generator: Sketch 63.1 (92452) - https://sketch.com --\x3e            <g id="终稿" stroke="none" stroke-width="1" fill-rule="evenodd" opacity="0.9">        <g id="图标切图" transform="translate(-475.000000, -74.000000)" fill-rule="nonzero">            <g id="编组-3" transform="translate(421.000000, 56.000000)">                <g id="编组-12" transform="translate(54.000000, 18.000000)">                    <g id="icon_刷新" transform="translate(11.000000, 9.000000)">                        <path                            d="M1.1040804,5.51795009 L2.56593636,6.98003284 C2.20442812,7.67167421 2,8.45841034 2,9.29289322 C2,12.054317 4.23857625,14.2928932 7,14.2928932 L7,12.5 C7,12.3673918 7.05267842,12.2402148 7.14644661,12.1464466 C7.34170876,11.9511845 7.65829124,11.9511845 7.85355339,12.1464466 L7.85355339,12.1464466 L10.6464466,14.9393398 C10.8417088,15.134602 10.8417088,15.4511845 10.6464466,15.6464466 L10.6464466,15.6464466 L7.85355339,18.4393398 C7.7597852,18.533108 7.63260824,18.5857864 7.5,18.5857864 C7.22385763,18.5857864 7,18.3619288 7,18.0857864 L7,18.0857864 L7,16.2928932 C3.13400675,16.2928932 0,13.1588865 0,9.29289322 C0,7.90269507 0.405257589,6.6071499 1.1040804,5.51795009 Z M6.85355339,0.146446609 C6.94732158,0.240214799 7,0.367391755 7,0.5 L7,2.29289322 C10.8659932,2.29289322 14,5.42689997 14,9.29289322 C14,10.682663 13.5949921,11.977838 12.8965656,13.0668293 L11.4343158,11.6052711 C11.7956669,10.9137463 12,10.127182 12,9.29289322 C12,6.53146947 9.76142375,4.29289322 7,4.29289322 L7,6.08578644 C7,6.36192881 6.77614237,6.58578644 6.5,6.58578644 C6.36739176,6.58578644 6.2402148,6.53310802 6.14644661,6.43933983 L3.35355339,3.64644661 C3.15829124,3.45118446 3.15829124,3.13460197 3.35355339,2.93933983 L6.14644661,0.146446609 C6.34170876,-0.0488155365 6.65829124,-0.0488155365 6.85355339,0.146446609 Z"                            id="Combined-Shape"></path>                    </g>                </g>            </g>        </g>    </g></svg>',n||(i=B(e,"click",t[21]),n=!0)},p:m,d:function(t){t&&E(e),n=!1,i()}}}function He(t){var e,n;return e=new Qt({props:{disabled:t[5].disabled,value:t[5].value,onChange:t[22]}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};32&n[0]&&(i.disabled=t[5].disabled),32&n[0]&&(i.value=t[5].value),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Pe(t){var e,n;return e=new At({props:{text:t[13].tips,$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};8192&n[0]&&(i.text=t[13].tips),8192&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ze(t){var e,n,i=t[13].value+"";return{c:function(){e=j("span"),n=H(i),A(e,"class","text")},m:function(t,i){q(t,e,i),_(e,n)},p:function(t,e){8192&e[0]&&i!==(i=t[13].value+"")&&F(n,i)},d:function(t){t&&E(e)}}}function Be(t){var e,n;return e=new pe({props:{onChange:t[15]}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:m,i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ie(t){var e,n;return e=new At({props:{text:t[1]?"退出全屏":"全屏模式",style:"left: auto; right: -80%;",$$slots:{default:[Ve]},$$scope:{ctx:t}}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};2&n[0]&&(i.text=t[1]?"退出全屏":"全屏模式"),2&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ve(t){var e,n,i;return{c:function(){A(e=j("span"),"class","icon")},m:function(r,o){q(r,e,o),e.innerHTML='<?xml version="1.0" encoding="UTF-8"?><svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg"    xmlns:xlink="http://www.w3.org/1999/xlink">    \x3c!-- Generator: Sketch 63.1 (92452) - https://sketch.com --\x3e            <g id="终稿" stroke="none" stroke-width="1" fill-rule="evenodd" opacity="0.9">        <g id="图标切图" transform="translate(-439.000000, -166.000000)">            <g id="编组-3" transform="translate(421.000000, 56.000000)">                <g id="编组-4" transform="translate(18.000000, 110.000000)">                    <g id="icon_全屏" transform="translate(7.000000, 7.000000)">                        <g id="player_fullscreen">                            <path                                d="M11,14 C11.8082096,14 12.5417733,13.6804031 13.0812046,13.160696 L15.805943,18.6107695 C14.4154537,19.4906588 12.7672084,20 11,20 C9.23279163,20 7.58454627,19.4906588 6.19405697,18.6107695 L8.91879538,13.160696 C9.45822673,13.6804031 10.1917904,14 11,14 Z M11,10 C11.5522847,10 12,10.4477153 12,11 L12,11 L12,11.001 L11.9932723,11.1166211 C11.9355072,11.6139598 11.5128358,12 11,12 C10.4477153,12 10,11.5522847 10,11 C10,10.4477153 10.4477153,10 11,10 Z M20,11 L14,11 L14,11 C14,9.8257911 13.3254017,8.80914308 12.3426283,8.31647923 L15.0261034,2.94854495 C17.9753898,4.42620082 20,7.47666388 20,11 Z M6.97389656,2.94854495 L9.65737173,8.31647923 C8.67459834,8.80914308 8,9.8257911 8,11 L2,11 L2,11 C2,7.47666388 4.02461023,4.42620082 6.97389656,2.94854495 Z"                                id="Combined-Shape" fill-rule="nonzero"></path>                        </g>                    </g>                </g>            </g>        </g>    </g></svg>',n||(i=B(e,"click",t[23]),n=!0)},p:m,d:function(t){t&&E(e),n=!1,i()}}}function Ae(t){var e,n;return e=new At({props:{text:"".concat(t[2]?"退出":"","网页全屏"),$$slots:{default:[Oe]},$$scope:{ctx:t}}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};4&n[0]&&(i.text="".concat(t[2]?"退出":"","网页全屏")),4&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Oe(t){var e,n,i,r=(t[2]?Tt:Et)+"";return{c:function(){A(e=j("span"),"class","icon")},m:function(o,l){q(o,e,l),e.innerHTML=r,n||(i=B(e,"click",t[24]),n=!0)},p:function(t,n){4&n[0]&&r!==(r=(t[2]?Tt:Et)+"")&&(e.innerHTML=r)},d:function(t){t&&E(e),n=!1,i()}}}function Fe(t){var e,n;return e=new _e({props:{options:t[8],danmakuPanel:t[11].danmakuPanel,onChange:t[25]}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};256&n[0]&&(i.options=t[8]),2048&n[0]&&(i.danmakuPanel=t[11].danmakuPanel),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Re(t){var e,n;return e=new pe({props:{onChange:t[15]}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:m,i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ge(t){var e,n;return e=new At({props:{text:t[3]?"退出画中画":"开启画中画",$$slots:{default:[Ye]},$$scope:{ctx:t}}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};8&n[0]&&(i.text=t[3]?"退出画中画":"开启画中画"),8&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ye(t){var e,n,i,r=(t[3]?jt:Ht)+"";return{c:function(){A(e=j("span"),"class","icon")},m:function(o,l){q(o,e,l),e.innerHTML=r,n||(i=B(e,"click",t[26]),n=!0)},p:function(t,n){8&n[0]&&r!==(r=(t[3]?jt:Ht)+"")&&(e.innerHTML=r)},d:function(t){t&&E(e),n=!1,i()}}}function Xe(t){var e,n;return e=new At({props:{text:t[4]?"关闭镜像模式":"开启镜像模式",$$slots:{default:[Ue]},$$scope:{ctx:t}}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};16&n[0]&&(i.text=t[4]?"关闭镜像模式":"开启镜像模式"),16&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ue(t){var e,n,i,r=(t[4]?Pt:Zt)+"";return{c:function(){A(e=j("span"),"class","icon")},m:function(o,l){q(o,e,l),e.innerHTML=r,n||(i=B(e,"click",t[27]),n=!0)},p:function(t,n){16&n[0]&&r!==(r=(t[4]?Pt:Zt)+"")&&(e.innerHTML=r)},d:function(t){t&&E(e),n=!1,i()}}}function De(t){var e,n;return e=new ue({props:{qualityList:t[6].list,quality:t[6].value,lineList:t[7].list,line:t[7].value,onChange:t[28]}}),{c:function(){yt(e.$$.fragment)},m:function(t,i){wt(e,t,i),n=!0},p:function(t,n){var i={};64&n[0]&&(i.qualityList=t[6].list),64&n[0]&&(i.quality=t[6].value),128&n[0]&&(i.lineList=t[7].list),128&n[0]&&(i.line=t[7].value),e.$set(i)},i:function(t){n||(mt(e.$$.fragment,t),n=!0)},o:function(t){ht(e.$$.fragment,t),n=!1},d:function(t){$t(e,t)}}}function Ne(t){var e,n,i=t[9]&&Ee(t);return{c:function(){i&&i.c(),e=Z()},m:function(t,r){i&&i.m(t,r),q(t,e,r),n=!0},p:function(t,n){t[9]?i?(i.p(t,n),512&n[0]&&mt(i,1)):((i=Ee(t)).c(),mt(i,1),i.m(e.parentNode,e)):i&&(pt(),ht(i,1,1,function(){i=null}),vt())},i:function(t){n||(mt(i),n=!0)},o:function(t){ht(i),n=!1},d:function(t){i&&i.d(t),t&&E(e)}}}function We(t,e,n){var i,r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function l(t){try{s(i.next(t))}catch(t){o(t)}}function a(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(l,a)}s((i=i.apply(t,e||[])).next())})},o=e.onChange,l=e.show,a=e.style,s=void 0===a?"":a,u=e.ctrlItemVisibility,c=void 0===u?{playStatus:!0,volume:!0,time:!0,refresh:!0,leftSetting:!1,quality:!0,danmaku:!0,rightSetting:!1,fullScreen:!0,webFullScreen:!0,danmakuPanel:!0,pip:!0,mirror:!1}:u,d=e.playStatus,f=void 0!==d&&d,p=e.fullScreenStatus,v=void 0!==p&&p,m=e.webFullScreenStatus,h=void 0!==m&&m,g=e.pipStatus,x=void 0!==g&&g,b=e.mirrorStatus,y=void 0!==b&&b,w=e.onRefresh,$=e.time,k=void 0===$?{value:"",tips:""}:$,C=e.volume,L=void 0===C?{disabled:!1,value:50}:C,S=e.quality,z=e.line,M=e.danmakuPanel,_=void 0===M||M,q=e.danmaku,E=void 0===q?{display:!0,opacity:100,fontScale:100,density:100,enableMask:!0,showMaskOption:!1,area:4}:q,T=e.playerType,j=void 0===T?"html5":T,H=new Set,P=function(t,e){return r(void 0,void 0,void 0,regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o(t,e);case 2:if(i.t0=i.sent,!1!==i.t0){i.next=5;break}return i.abrupt("return");case 5:i.t1=t,i.next="playStatus"===i.t1?8:"volume"===i.t1?10:"quality"===i.t1?12:"line"===i.t1?14:"playerType"===i.t1?16:"danmaku"===i.t1?18:"fullScreenStatus"===i.t1?20:"webFullScreenStatus"===i.t1?22:"danmakuPanel"===i.t1?24:"pipStatus"===i.t1?26:"mirrorStatus"===i.t1?28:30;break;case 8:return n(0,f=e),i.abrupt("break",30);case 10:return n(5,L=Object.assign({},L,e)),i.abrupt("break",30);case 12:return n(6,S.value=e,S),i.abrupt("break",30);case 14:return n(7,z.value=e,z),i.abrupt("break",30);case 16:return n(17,j=e),i.abrupt("break",30);case 18:return n(8,E=Object.assign({},E,e)),i.abrupt("break",30);case 20:return n(1,v=e),i.abrupt("break",30);case 22:return n(2,h=e),i.abrupt("break",30);case 24:return n(16,_=e),i.abrupt("break",30);case 26:return n(3,x=e),i.abrupt("break",30);case 28:return n(4,y=e),i.abrupt("break",30);case 30:case"end":return i.stop()}},i)}))};return t.$$set=function(t){"onChange"in t&&n(18,o=t.onChange),"show"in t&&n(9,l=t.show),"style"in t&&n(10,s=t.style),"ctrlItemVisibility"in t&&n(11,c=t.ctrlItemVisibility),"playStatus"in t&&n(0,f=t.playStatus),"fullScreenStatus"in t&&n(1,v=t.fullScreenStatus),"webFullScreenStatus"in t&&n(2,h=t.webFullScreenStatus),"pipStatus"in t&&n(3,x=t.pipStatus),"mirrorStatus"in t&&n(4,y=t.mirrorStatus),"onRefresh"in t&&n(12,w=t.onRefresh),"time"in t&&n(13,k=t.time),"volume"in t&&n(5,L=t.volume),"quality"in t&&n(6,S=t.quality),"line"in t&&n(7,z=t.line),"danmakuPanel"in t&&n(16,_=t.danmakuPanel),"danmaku"in t&&n(8,E=t.danmaku),"playerType"in t&&n(17,j=t.playerType)},t.$$.update=function(){16896&t.$$.dirty[0]&&l&&i&&H.forEach(function(t){i.appendChild(t)})},[f,v,h,x,y,L,S,z,E,l,s,c,w,k,i,P,_,j,o,function(t){return H.add(t),i&&i.appendChild(t),function(){H.delete(t),t.remove()}},function(){return P("playStatus",!f)},function(){var t;return null===(t=w)||void 0===t?void 0:t()},function(t){return P("volume",t)},function(){return P("fullScreenStatus",!v)},function(){return P("webFullScreenStatus",!h)},function(t,e){return P("danmaku",(r=e,(i=t)in(n={})?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n));var n,i,r},function(){return P("pipStatus",!document.pictureInPictureElement)},function(){return P("mirrorStatus",!y)},function(t,e){return P(t,e)},function(t){Q[t?"unshift":"push"](function(){n(14,i=t)})}]}var Je=function(t){o(i,Lt);var e=c(i);function i(t){var r,o;return n(this,i),r=e.call(this),qe.getElementById("svelte-1dsiks1-style")||((o=j("style")).id="svelte-1dsiks1-style",o.textContent=".live-web-player-controller.svelte-1dsiks1.svelte-1dsiks1{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.live-web-player-controller.svelte-1dsiks1 .control-area.svelte-1dsiks1{position:absolute;bottom:3px;left:0;right:0;padding:0 12px;color:#fff;height:36px;font-size:12px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.live-web-player-controller.svelte-1dsiks1 .control-area .left-area.svelte-1dsiks1,.live-web-player-controller.svelte-1dsiks1 .control-area .right-area.svelte-1dsiks1{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex}.live-web-player-controller.svelte-1dsiks1 .control-area .right-area.svelte-1dsiks1{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.live-web-player-controller.svelte-1dsiks1 .control-area .ext-nodes.svelte-1dsiks1{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.live-web-player-controller.svelte-1dsiks1 .panel{position:absolute;left:50%;-webkit-transform:translate(-50%, -100%);transform:translate(-50%, -100%);opacity:0.9;background-color:rgba(33, 33, 33, 0.9);color:rgba(255, 255, 255, 0.9);border-radius:4px;z-index:100}.live-web-player-controller.svelte-1dsiks1 .icon{display:inline-block;width:36px;height:36px;cursor:pointer}.live-web-player-controller.svelte-1dsiks1 .icon svg{fill:rgba(255, 255, 255, 0.9)}.live-web-player-controller.svelte-1dsiks1 .icon svg:hover{fill:#fff}.live-web-player-controller.svelte-1dsiks1 .text{line-height:36px;padding:0 6px;color:rgba(255, 255, 255, 0.9);cursor:pointer}.live-web-player-controller.svelte-1dsiks1 .text:hover{color:#fff}.live-web-player-controller.svelte-1dsiks1 input[type='radio']{width:16px;height:16px;visibility:hidden;position:absolute;margin:0}.live-web-player-controller.svelte-1dsiks1 input[type='radio']+label{position:relative;margin:0 20px;line-height:16px;cursor:pointer}.live-web-player-controller.svelte-1dsiks1 input[type='radio']+label::before{display:inline-block;position:absolute;left:-20px;width:16px;height:16px;border-radius:50%;vertical-align:text-bottom;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(227, 232, 236, 0.1);border:1px solid #757575;content:''}.live-web-player-controller.svelte-1dsiks1 input[type='radio']:checked+label::before{border:1px solid #23ade5;background-color:#23ade5}.live-web-player-controller.svelte-1dsiks1 input[type='radio']:checked+label::after{content:'';position:absolute;width:16px;height:16px;border:4px solid #212121;-webkit-box-sizing:border-box;box-sizing:border-box;left:-20px;-webkit-transform:scale(0.8);transform:scale(0.8);border-radius:50%}.live-web-player-controller.svelte-1dsiks1 input[type='checkbox']{width:12px;height:12px;visibility:hidden;position:absolute;margin:0}.live-web-player-controller.svelte-1dsiks1 input[type='checkbox']+label{position:relative;margin-left:18px;cursor:pointer}.live-web-player-controller.svelte-1dsiks1 input[type='checkbox']+label::before{content:'';position:absolute;top:50%;left:-18px;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:12px;width:12px;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:rgba(0, 0, 0, 0);border:1px solid rgba(255, 255, 255, 0.9);border-radius:2px}.live-web-player-controller.svelte-1dsiks1 input[type='checkbox']:checked+label::before{background-color:#23ade5;border:none}.live-web-player-controller.svelte-1dsiks1 input[type='checkbox']:checked+label::after{content:'';position:absolute;left:-17px;top:calc(50% - 2px);width:2px;height:6px;border:solid #2b2b2b;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg) translateY(-50%);transform:rotate(45deg) translateY(-50%);border-radius:2px}",_(qe.head,o)),Ct(s(r),t,We,Ne,w,{onChange:18,show:9,style:10,ctrlItemVisibility:11,playStatus:0,fullScreenStatus:1,webFullScreenStatus:2,pipStatus:3,mirrorStatus:4,onRefresh:12,time:13,volume:5,quality:6,line:7,danmakuPanel:16,danmaku:8,playerType:17,appendCtrlItem:19},[-1,-1]),r}return r(i,[{key:"onChange",get:function(){return this.$$.ctx[18]},set:function(t){this.$set({onChange:t}),st()}},{key:"show",get:function(){return this.$$.ctx[9]},set:function(t){this.$set({show:t}),st()}},{key:"style",get:function(){return this.$$.ctx[10]},set:function(t){this.$set({style:t}),st()}},{key:"ctrlItemVisibility",get:function(){return this.$$.ctx[11]},set:function(t){this.$set({ctrlItemVisibility:t}),st()}},{key:"playStatus",get:function(){return this.$$.ctx[0]},set:function(t){this.$set({playStatus:t}),st()}},{key:"fullScreenStatus",get:function(){return this.$$.ctx[1]},set:function(t){this.$set({fullScreenStatus:t}),st()}},{key:"webFullScreenStatus",get:function(){return this.$$.ctx[2]},set:function(t){this.$set({webFullScreenStatus:t}),st()}},{key:"pipStatus",get:function(){return this.$$.ctx[3]},set:function(t){this.$set({pipStatus:t}),st()}},{key:"mirrorStatus",get:function(){return this.$$.ctx[4]},set:function(t){this.$set({mirrorStatus:t}),st()}},{key:"onRefresh",get:function(){return this.$$.ctx[12]},set:function(t){this.$set({onRefresh:t}),st()}},{key:"time",get:function(){return this.$$.ctx[13]},set:function(t){this.$set({time:t}),st()}},{key:"volume",get:function(){return this.$$.ctx[5]},set:function(t){this.$set({volume:t}),st()}},{key:"quality",get:function(){return this.$$.ctx[6]},set:function(t){this.$set({quality:t}),st()}},{key:"line",get:function(){return this.$$.ctx[7]},set:function(t){this.$set({line:t}),st()}},{key:"danmakuPanel",get:function(){return this.$$.ctx[16]},set:function(t){this.$set({danmakuPanel:t}),st()}},{key:"danmaku",get:function(){return this.$$.ctx[8]},set:function(t){this.$set({danmaku:t}),st()}},{key:"playerType",get:function(){return this.$$.ctx[17]},set:function(t){this.$set({playerType:t}),st()}},{key:"appendCtrlItem",get:function(){return this.$$.ctx[19]}}]),i}(),Ke=Je;exports.default=Ke;
},{}],"as8u":[function(require,module,exports) {
"use strict";var e,t,n,i,r,o,s,a,u,l,c,h,f,d=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},w=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var b=y(require("@bilibili-live/web-player-controller")),m=require("@bilibili-live/web-player-common"),g=function(){function y(y,g){var E=this;this.container=y,this.opts=g,e.set(this,void 0),t.set(this,void 0),n.set(this,void 0),i.set(this,new Set),r.set(this,new Set),o.set(this,void 0),s.set(this,!1),a.set(this,!1),u.set(this,0),l.set(this,0),c.set(this,void 0),h.set(this,function(){if(m.logger.info("Controller onrefresh"),0!==v(E,r).size)for(var e=0,t=Array.from(v(E,r));e<t.length;e++){(0,t[e])()}}),f.set(this,function(e,t){return d(E,void 0,Promise,function(){return p(this,function(n){switch(n.label){case 0:return m.logger.info("Controller onchange: type: "+e+", value: "+JSON.stringify(t)),0===v(this,i).size?[2,!1]:[4,Promise.all(Array.from(v(this,i)).map(function(n){return n(e,t)}))];case 1:return n.sent().includes(!1)?[2,!1]:[2]}})})}),w(this,e,S()),w(this,t,k()),this.container.appendChild(v(this,t)),y.appendChild(v(this,e)),w(this,n,new b.default({target:v(this,e),props:{show:!1,playStatus:!1,quality:{list:[],value:null},line:{list:[],value:null},onRefresh:v(this,h),onChange:v(this,f)}})),w(this,o,M(y,this,v(this,e))),w(this,c,C(this))}return y.prototype.triggerWebFullscreen=function(){var e,t=!(null!==(e=v(this,n).webFullScreenStatus)&&void 0!==e&&e);v(this,n).webFullScreenStatus=t,v(this,i).forEach(function(e){return e("webFullScreenStatus",t)})},y.prototype.onChange=function(e){var t=this;return v(this,i).add(e),function(){v(t,i).delete(e)}},y.prototype.onRefresh=function(e){var t=this;return v(this,r).add(e),function(){v(t,r).delete(e)}},y.prototype.getCtrlUI=function(){return v(this,n)},y.prototype.setMiniMode=function(e){w(this,s,e)},y.prototype.show=function(){clearTimeout(v(this,u)),v(this,s)||v(this,n).show||(v(this,t).style.display="block",v(this,n).show=!0,v(this,i).forEach(function(e){return e("show",!0)}))},y.prototype.delayHide=function(e){var t=this;clearTimeout(v(this,u)),w(this,u,window.setTimeout(function(){v(t,a)||t.hide()},e))},y.prototype.hide=function(){v(this,n).show&&(v(this,t).style.display="none",v(this,n).show=!1,v(this,i).forEach(function(e){return e("show",!1)}))},y.prototype.destroy=function(){w(this,i,new Set),w(this,r,new Set),v(this,o).call(this),v(this,n).$destroy(),v(this,e).remove(),v(this,t).remove(),clearTimeout(v(this,u)),clearTimeout(v(this,l)),v(this,c).call(this)},y.prototype.setDmSendIsFocus=function(e){w(this,a,e)},y.prototype.showCursor=function(){clearTimeout(v(this,l)),"default"!==this.container.style.cursor&&(this.container.style.cursor="default")},y.prototype.delayHideCursor=function(e){var t=this;clearTimeout(v(this,l)),w(this,l,window.setTimeout(function(){t.container.style.cursor="none"},e))},y}();function S(){var e=document.createElement("div");return e.style.cssText="\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    z-index: 13;\n  ",e.classList.add("web-player-controller-wrap"),e}function k(){var e=document.createElement("div");return e.classList.add("web-player-controller-bg"),e.style.cssText="\n    display: none;\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    z-index: 10;\n    height: 56px;\n    background-image: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7));\n  ",e.classList.add("web-player-controller-wrap"),e}function C(e){var t=e.onChange(function(t,n){if("fullScreenStatus"===t||"webFullScreenStatus"===t){if(n)return void e.delayHideCursor(2e3);e.showCursor()}});return function(){t()}}function M(e,t,n){var i=this,r=function(e){if(t.show(),t.showCursor(),!E(n,e)){t.delayHide(2e3);var i=t.getCtrlUI();!0!==i.webFullScreenStatus&&!0!==i.fullScreenStatus||t.delayHideCursor(2e3)}},o=function(){t.hide(),t.showCursor()},s=function(e){if(!E(n,e)){t.delayHide(2e3);var i=t.getCtrlUI();!0!==i.webFullScreenStatus&&!0!==i.fullScreenStatus||(t.showCursor(),t.delayHideCursor(2e3))}};e.addEventListener("mousemove",r),e.addEventListener("mouseleave",o),e.addEventListener("click",s);var a=function(){d(i,void 0,Promise,function(){return p(this,function(e){return t.triggerWebFullscreen(),[2]})}).catch(function(e){m.logger.error(e)})};return e.addEventListener("dblclick",a),function(){e.removeEventListener("click",s),e.removeEventListener("mousemove",r),e.removeEventListener("mouseleave",o),e.removeEventListener("dblclick",a)}}function E(e,t){var n=e.getBoundingClientRect().top-36-14;return t.clientY>n||e.contains(t.target)}exports.default=g,e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,f=new WeakMap;
},{"@bilibili-live/web-player-controller":"MW6F","@bilibili-live/web-player-common":"KGHo"}],"FT5O":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"GTYV":[function(require,module,exports) {
var define;
var process = require("process");
var t,e=require("process"),n="2021-10-13 18:31:21";!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==typeof exports?exports["sisters-player"]=n():e["sisters-player"]=n()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=103)}([function(t,e,n){var r=n(158);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){t.exports=n(255)},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){t.exports=n(259)},function(t,e,n){var r=n(158);function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(t,o.key,o)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}},function(t,e,n){t.exports=n(188)},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return L});var r,o,i,a,s=n(38),c=n.n(s),u=n(32),l=n.n(u),h=n(11),f=n.n(h),p=n(9),d=n.n(p),v=n(20),g=n.n(v),y=n(5),x=n.n(y),C=n(2),m=n.n(C),w=n(4),S=n.n(w),k=n(0),b=n.n(k),P=n(21),E=n(172),A=n(10);!function(t){t[t.SERVER=0]="SERVER",t[t.P2P=1]="P2P",t[t.TYPE_COUNT=2]="TYPE_COUNT"}(r||(r={})),function(t){t[t.SEED=0]="SEED",t[t.EXCHANGE=1]="EXCHANGE",t[t.LACKED=2]="LACKED",t[t.TYPE_COUNT=3]="TYPE_COUNT"}(o||(o={})),function(t){t[t.SUCCESS=0]="SUCCESS",t[t.REPEAT_SETTINGS=1]="REPEAT_SETTINGS",t[t.UNDEFINED=2]="UNDEFINED",t[t.DATALENGTH_ERROR=3]="DATALENGTH_ERROR",t[t.NULL=4]="NULL",t[t.REVERTED_DUE_P2P=5]="REVERTED_DUE_P2P"}(i||(i={})),function(t){t[t.END_SUCCESS=0]="END_SUCCESS",t[t.END_ERROR=1]="END_ERROR",t[t.NULL=2]="NULL"}(a||(a={}));var R=function(){function e(t){m()(this,e),b()(this,"data",void 0),b()(this,"status",void 0),b()(this,"future",void 0),b()(this,"dataSourceType",void 0),b()(this,"dataRoleType",void 0),b()(this,"dataSourcePeerId",void 0),this.data=t,this.status=i.NULL,this.future=new P.b}return S()(e,[{key:"getGhostPeerId",value:function(){return this.dataSourcePeerId}},{key:"onDataResolved",value:function(t){this.future.onResolved(t)}},{key:"setData",value:function(e,n,r,o){return this.status==i.SUCCESS?i.REPEAT_SETTINGS:(void 0!==e&&e.byteLength==this.data.byteLength?(void 0!==o&&(this.dataSourcePeerId=o),this.status==i.REVERTED_DUE_P2P&&t.from(e.buffer).equals(t.from(this.data.buffer))&&(this.dataSourcePeerId=void 0),this.data.set(e),this.dataSourceType=n,this.dataRoleType=r,this.status=i.SUCCESS,this.future.setResult(this.data)):null==e?(this.status=i.UNDEFINED,this.future.setResult(void 0)):void 0!==e&&e.byteLength!==this.data.byteLength&&(this.status=i.DATALENGTH_ERROR),this.status)}},{key:"isSucceed",value:function(){return this.status==i.SUCCESS}},{key:"resetStatus",value:function(){return this.dataSourceType==r.P2P&&(this.status=i.REVERTED_DUE_P2P,!0)}}]),e}(),I=function(){function t(){m()(this,t),b()(this,"startBlockId",void 0),b()(this,"nextFinishedBlockId",void 0),b()(this,"curCount",void 0),b()(this,"maxCount",void 0),b()(this,"sliceSize",void 0),b()(this,"shareSize",void 0),b()(this,"statArray",void 0),b()(this,"roleArray",void 0),this.statArray=new Array;for(var e=0;e<r.TYPE_COUNT;++e)this.statArray[e]=0;for(this.roleArray=new Array,e=0;e<o.TYPE_COUNT;++e)this.roleArray[e]=0}return S()(t,[{key:"addFinishedLargestBlockIdListener",value:function(t){var e=this;t.onBlockFinished(this.nextFinishedBlockId,function n(r){void 0!==r&&(e.nextFinishedBlockId++,e.nextFinishedBlockId<e.startBlockId+e.maxCount&&t.onBlockFinished(e.nextFinishedBlockId,n))})}}]),t}(),D=function(){function t(e,n,i,s){m()(this,t),b()(this,"p2pContext",void 0),b()(this,"blockCount",void 0),b()(this,"fragmentName",void 0),b()(this,"fragmentSize",void 0),b()(this,"buffer",void 0),b()(this,"fragStat",void 0),b()(this,"fragEndErrorMsg",void 0),b()(this,"trustedCrc",void 0),b()(this,"blockSize",void 0),b()(this,"blocks",void 0),b()(this,"sliceProgressArray",void 0),b()(this,"blockFinishCount",void 0),b()(this,"future",void 0),b()(this,"statArray",void 0),b()(this,"roleArray",void 0),b()(this,"shareSize",void 0),b()(this,"shareQuota",void 0),b()(this,"sliceBlockRangeRecord",{}),b()(this,"sliceIdsInCharge",void 0),b()(this,"ghostPeerIds",void 0),b()(this,"queryServerNum",void 0),b()(this,"crcErrorCallback",void 0),b()(this,"isCrcErrorToRefetch",!1),this.p2pContext=e,this.fragmentName=n,this.fragmentSize=i,this.trustedCrc=s,this.fragStat=a.NULL,this.blocks=new Array,this.statArray=new Array;for(var c=0;c<r.TYPE_COUNT;++c)this.statArray[c]=0;for(this.roleArray=new Array,c=0;c<o.TYPE_COUNT;++c)this.roleArray[c]=0;for(this.sliceProgressArray=new Array,c=0;c<this.p2pContext.Config.sliceCount;++c)this.sliceProgressArray[c]=new I;this.blockFinishCount=0,this.future=new P.b,this.shareSize=0,this.sliceIdsInCharge=new g.a,this.ghostPeerIds=new g.a,this.queryServerNum=0,this.initFragmentBySize(i)}return S()(t,[{key:"doOnceQueryServer",value:function(){this.queryServerNum++}},{key:"getQueryServerNum",value:function(){return this.queryServerNum}},{key:"setCrcErrorCallback",value:function(t){this.crcErrorCallback=t}},{key:"setSliceIds",value:function(t){var e=this;x()(t).call(t,function(t){e.sliceIdsInCharge.add(t)})}},{key:"getSliceIds",value:function(){return this.sliceIdsInCharge}},{key:"getStatArray",value:function(){return this.statArray}},{key:"getRoleArray",value:function(){return this.roleArray}},{key:"getBlockCount",value:function(){return this.blockCount}},{key:"getBlockSize",value:function(){return this.blockSize}},{key:"getBlockByteRange",value:function(t){if(t<0||t>=this.blockCount)return new Array;var e=this.blockSize*t,n=Math.min(this.fragmentSize,e+this.blockSize);return new Array(e,n)}},{key:"getSliceBlockRange",value:function(t){var e=this.sliceBlockRangeRecord[t];return t<0||t>=this.p2pContext.Config.sliceCount||null==e?new Array:new Array(e.begin,e.end)}},{key:"getBlockBelongSlice",value:function(t){if(t<0||t>=this.blockCount)return-1;for(var e=0;e<this.p2pContext.Config.sliceCount;++e){var n=this.sliceBlockRangeRecord[e];if(null!=n&&t<n.end)return e}return-1}},{key:"getSliceByteRange",value:function(t){var e=this.getSliceBlockRange(t);if(2!==e.length||e[0]==e[1])return new Array(0,0);var n=this.getBlockByteRange(e[0]),r=this.getBlockByteRange(e[1]-1);return 0===n.length||0===r.length?new Array(0,0):new Array(n[0],r[1])}},{key:"getBlock",value:function(t){if(!(t<0||t>=this.blockCount||t>=this.blocks.length))return this.blocks[t]}}]),S()(t,[{key:"initFragmentBySize",value:function(t){this.blockSize=this.p2pContext.Config.blockSize,this.blockCount=Math.ceil(t/this.blockSize),this.buffer=new Uint8Array(t);var e=this.p2pContext.Config.fragmentShareOverride;!0===this.p2pContext.Config.multiTabsShareLimitEnable&&this.p2pContext.totalSistersCount>=1&&this.p2pContext.totalSistersCount<32&&(e/=this.p2pContext.totalSistersCount),this.shareQuota=this.fragmentSize*e,this.shareQuota>this.p2pContext.Config.fragmentShareOverrideMaxBytes&&(this.shareQuota=this.p2pContext.Config.fragmentShareOverrideMaxBytes);var n=this.p2pContext.P2P.P2PDataShareQuotaController.takeShareQuota(t*this.p2pContext.Config.fragmentExtraShareRatio);this.addShareQuotaBytes(n);for(var r=0;r<this.p2pContext.Config.sliceCount;++r){var o=Math.floor(this.blockCount/this.p2pContext.Config.sliceCount*r),i=Math.floor(this.blockCount/this.p2pContext.Config.sliceCount*(r+1));this.sliceBlockRangeRecord[r]={begin:o,end:i}}for(r=0;r<this.blockCount;++r){var a=this.getBlockByteRange(r);this.blocks.push(new R(this.buffer.subarray(a[0],a[1])))}for(r=0;r<this.p2pContext.Config.sliceCount;++r){var s=this.getSliceBlockRange(r);this.sliceProgressArray[r].curCount=0,this.sliceProgressArray[r].maxCount=s[1]-s[0],this.sliceProgressArray[r].startBlockId=s[0],this.sliceProgressArray[r].nextFinishedBlockId=s[0],this.sliceProgressArray[r].addFinishedLargestBlockIdListener(this);var c=this.getSliceByteRange(r);this.sliceProgressArray[r].sliceSize=c[1]-c[0],this.sliceProgressArray[r].shareSize=0}}},{key:"getFragmentName",value:function(){return this.fragmentName}},{key:"getFragmentSize",value:function(){return this.fragmentSize}},{key:"getFragmentData",value:function(){return this.getFragStat()==a.END_SUCCESS?this.buffer:void 0}},{key:"setNonP2PFragmentData",value:function(t,e,n){if(null!=t)for(var o=0;o<this.blockCount;o++){var i=0+this.blockSize,a=t.subarray(0,i);this.setBlockData(o,a,r.SERVER,e)||this.p2pContext.P2PDataCollectionStatus.addWastedDataSize(a.byteLength,A.e.CDN_REPEAT)}else this.setFragmentData(t,n)}},{key:"setBlockData",value:function(t,e,n,r,o){var a=this.getBlock(t);if(void 0===a)return!1;if(a.isSucceed())return!1;if(a.setData(e,n,r,o)==i.SUCCESS){this.statArray[n]+=e.byteLength,this.roleArray[r]+=e.byteLength,null!=this.p2pContext.P2PDataCollectionStatus&&this.p2pContext.P2PDataCollectionStatus.addDownloadSizeRealtime(e.byteLength,n);var s,c=this.getBlockBelongSlice(t);return++this.sliceProgressArray[c].curCount,this.sliceProgressArray[c].statArray[n]+=e.byteLength,this.sliceProgressArray[c].roleArray[r]+=e.byteLength,this.isCrcErrorToRefetch&&void 0!==a.getGhostPeerId()&&(this.p2pContext.GhostPeerIds.add(a.getGhostPeerId()),null===(s=this.p2pContext.PeerSched)||void 0===s||s.closePeer(a.getGhostPeerId())),++this.blockFinishCount,this.blockFinishCount===this.blockCount&&this.setFragmentData(this.buffer),!0}return!1}},{key:"isBlockFinished",value:function(t){var e=this.getBlock(t);return void 0!==e&&e.isSucceed()}},{key:"isSliceFinished",value:function(t){return this.sliceProgressArray[t].curCount===this.sliceProgressArray[t].maxCount}},{key:"getSliceFinishedBlockRange",value:function(t){if(t<0||t>=this.p2pContext.Config.sliceCount)return new Array(0,0);var e=this.sliceProgressArray[t],n=e.startBlockId,r=e.nextFinishedBlockId;return new Array(n,r)}},{key:"getRoleRatioForSlice",value:function(t,e){if(e<0||e>=this.p2pContext.Config.sliceCount)return 0;var n=this.sliceProgressArray[e];return 0==n.sliceSize?0:n.roleArray[t]/n.sliceSize}},{key:"getSourceRatioForSlice",value:function(t,e){if(e<0||e>=this.p2pContext.Config.sliceCount)return 0;var n=this.sliceProgressArray[e];return 0==n.sliceSize?0:n.statArray[t]/n.sliceSize}},{key:"getSliceSharedRatio",value:function(t){if(t<0||t>=this.p2pContext.Config.sliceCount)return 0;var e=this.sliceProgressArray[t];if(0==e.sliceSize)return 0;var n=e.shareSize/e.sliceSize,r=this.fragmentSize*this.p2pContext.Config.fragmentShareOverride;return r>this.p2pContext.Config.fragmentShareOverrideMaxBytes&&(n=n*r/this.p2pContext.Config.fragmentShareOverrideMaxBytes),n}},{key:"onBlockFinished",value:function(t,e){var n=this.getBlock(t);return void 0!==n&&(n.onDataResolved(e),!0)}},{key:"setFragmentData",value:function(t,e){if(null==t||0!==this.buffer.byteLength&&t.byteLength!==this.buffer.byteLength){if(this.fragStat!==a.NULL)return void this.p2pContext.P2PDataCollectionStatus.addFetchError(A.b.ERROR_NO_EFFECT);for(var n=0;n<this.getBlockCount();++n){var i,s;null!==(i=this.getBlock(n))&&void 0!==i&&i.isSucceed()||null===(s=this.getBlock(n))||void 0===s||s.setData(void 0,void 0,void 0)}this.fragStat=a.END_ERROR,this.fragEndErrorMsg=e}else if(t.byteLength==this.buffer.byteLength){if(null!=this.trustedCrc&&this.p2pContext.Config.crcVerifyEnable){var c=E.a.crc32(t,this.p2pContext.Config.crc32Interval);if(c!=this.trustedCrc){var u,l,h,f;if(this.p2pContext.printExtLog(0,d()(u=d()(l="frag name: ".concat(this.fragmentName," local crc: ")).call(l,c.toString(16)," trust crc: ")).call(u,this.trustedCrc.toString(16))),this.p2pContext.Config.allowPrintLog(0)&&console.warn(d()(h=d()(f="[SistersPlayer] frag name: ".concat(this.fragmentName," local crc: ")).call(f,c.toString(16)," trust crc: ")).call(h,this.trustedCrc.toString(16))),this.statArray[r.P2P]>0){this.isCrcErrorToRefetch=!0;for(var p=0;p<this.p2pContext.Config.sliceCount;++p)if(!this.sliceIdsInCharge.has(p)){var v=this.getSliceBlockRange(p);this.sliceProgressArray[p].nextFinishedBlockId=v[0],this.statArray[r.P2P]-=this.sliceProgressArray[p].statArray[r.P2P],this.p2pContext.P2PDataCollectionStatus.addWastedDataSize(this.sliceProgressArray[p].statArray[r.P2P],A.e.ERROR_DATA),this.sliceProgressArray[p].addFinishedLargestBlockIdListener(this),this.sliceProgressArray[p].statArray[r.P2P]=0;for(var g=v[1]-1;g>=v[0];--g)this.getBlock(g).resetStatus()&&(--this.blockFinishCount,--this.sliceProgressArray[p].curCount)}return void this.crcErrorCallback()}this.p2pContext.printExtLog(1,"frag name: ".concat(this.fragmentName," --- all from server , but crc is still error")),this.p2pContext.Config.allowPrintLog(1)&&console.warn("[SistersPlayer] frag name: ".concat(this.fragmentName," --- all from server , but crc is still error"))}}this.fragStat=a.END_SUCCESS,this.buffer.set(t)}else if(0==this.buffer.byteLength){for(this.fragmentSize=t.byteLength,this.initFragmentBySize(this.fragmentSize),p=0;p<this.blockCount;++p){var y=this.getBlockByteRange(p);this.setBlockData(p,t.subarray(y[0],y[1]),r.SERVER,o.SEED)}return}this.future.setResult(this)}},{key:"onFinished",value:function(t){this.future.onResolved(t)}},{key:"isFinished",value:function(){return this.fragStat==a.END_SUCCESS}},{key:"getFragStat",value:function(){return this.fragStat}},{key:"getFragEndErrorMsg",value:function(){return this.fragEndErrorMsg}},{key:"addShareData",value:function(t,e){var n=this.getBlockBelongSlice(t);this.sliceProgressArray[n].shareSize+=e,this.shareSize+=e}},{key:"canShare",value:function(){return this.shareSize<this.shareQuota}},{key:"addShareQuotaBytes",value:function(t){this.shareQuota+=t}},{key:"getRemainingShareQuotaBytes",value:function(){return Math.max(0,this.shareQuota-this.shareSize)}},{key:"getShareSize",value:function(){return this.shareSize}},{key:"getSharedRatio",value:function(){return 0==this.fragmentSize?0:this.shareSize/this.fragmentSize}},{key:"destroy",value:function(){this.fragStat==a.NULL&&this.setFragmentData(void 0)}}]),t}(),L=function(){function t(e){m()(this,t),b()(this,"p2pContext",void 0),b()(this,"collection",new f.a),b()(this,"queue",new Array),b()(this,"sliceIdController",void 0),this.p2pContext=e}return S()(t,[{key:"setSliceIdController",value:function(t){this.sliceIdController=t}},{key:"addFragment",value:function(t,e,n){var r=this.collection.get(t);if(void 0!==r)return r.getFragmentSize()===e?r:void 0;r=new D(this.p2pContext,t,e,n),this.collection.set(t,r),this.queue.push(t)}},{key:"getFragment",value:function(t){return this.collection.get(t)}},{key:"deleteFragment",value:function(t){var e,n,r=l()(e=this.queue).call(e,t);if(r>=0&&c()(n=this.queue).call(n,r,1),this.collection.has(t)){var o=this.collection.get(t);return null==o||o.destroy(),this.collection.delete(t),!0}return!1}},{key:"deleteFragmentUntil",value:function(t){for(var e,n=l()(e=this.queue).call(e,t);n>this.p2pContext.Config.fragmentCountOutdated;){var r=this.queue.shift();if(void 0!==r){var o=this.collection.get(r);void 0!==o&&(null!=this.p2pContext.P2PDataCollectionStatus&&(this.p2pContext.P2PDataCollectionStatus.addFragmentDataCollection(o),this.p2pContext.P2P.P2PDataShareQuotaController.addFragmentDataCollection(o)),void 0!==this.sliceIdController&&void 0!==o&&this.sliceIdController.addFragmentShareData(o),o.destroy()),this.collection.delete(r)}--n}}},{key:"destroy",value:function(){var t;x()(t=this.collection).call(t,function(t){t.destroy()})}}]),t}()}).call(this,n(294).Buffer)},function(t,e,n){var r=n(264);function o(t,e,n,o,i,a,s){try{var c=t[a](s),u=c.value}catch(t){return void n(t)}c.done?e(u):r.resolve(u).then(o,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new r(function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,c,"next",t)}function c(t){o(a,r,i,s,c,"throw",t)}s(void 0)})}}},function(t,e,n){"use strict";var r=n(14),o=n(83).f,i=n(124),a=n(15),s=n(42),c=n(28),u=n(25),l=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,h,f,p,d,v,g,y,x=t.target,C=t.global,m=t.stat,w=t.proto,S=C?r:m?r[x]:(r[x]||{}).prototype,k=C?a:a[x]||(a[x]={}),b=k.prototype;for(f in e)n=!i(C?f:x+(m?".":"#")+f,t.forced)&&S&&u(S,f),d=k[f],n&&(v=t.noTargetGet?(y=o(S,f))&&y.value:S[f]),p=n&&v?v:e[f],n&&typeof d==typeof p||(g=t.bind&&n?s(p,r):t.wrap&&n?l(p):w&&"function"==typeof p?s(Function.call,p):p,(t.sham||p&&p.sham||d&&d.sham)&&c(g,"sham",!0),k[f]=g,w&&(u(a,h=x+"Prototype")||c(a,h,{}),a[h][f]=p,t.real&&b&&!b[f]&&c(b,f,p)))}},function(t,e,n){t.exports=n(302)},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return w});var r,o,i,a=n(52),s=n.n(a),c=n(13),u=n.n(c),l=n(5),h=n.n(l),f=n(20),p=n.n(f),d=n(2),v=n.n(d),g=n(4),y=n.n(g),x=n(0),C=n.n(x),m=n(6);n.d(e,"a",function(){return m.a}),function(t){t[t.P2P_LATE=0]="P2P_LATE",t[t.ERROR_DATA=1]="ERROR_DATA",t[t.CDN_REPEAT=2]="CDN_REPEAT",t[t.TYPE_COUNT=3]="TYPE_COUNT"}(r||(r={})),function(t){t[t.ERROR_TO_RELOAD=0]="ERROR_TO_RELOAD",t[t.ERROR_NO_EFFECT=1]="ERROR_NO_EFFECT",t[t.TYPE_COUNT=2]="TYPE_COUNT"}(o||(o={})),function(t){t[t.TX_PEER=0]="TX_PEER",t[t.RX_PEER=1]="RX_PEER",t[t.LAG_PEER=2]="LAG_PEER",t[t.TX_SEEDBOX=3]="TX_SEEDBOX",t[t.RX_SEEDBOX=4]="RX_SEEDBOX",t[t.LAG_SEEDBOX=5]="LAG_SEEDBOX"}(i||(i={}));var w=function(){function t(){v()(this,t),C()(this,"statArray",new Array),C()(this,"roleArray",new Array),C()(this,"shareSize",0),C()(this,"lastestDeleteFragName","--"),C()(this,"statRealtimeArray",new Array),C()(this,"p2pSendSizeRealtime",0),C()(this,"lastestFragName","--"),C()(this,"lastestSaveRatio","0.000"),C()(this,"lastestShareRatio","0.000"),C()(this,"wastedDataArray",new Array),C()(this,"fetchRepeatFragmentNameList",new p.a),C()(this,"fetchErrorArray",new Array),C()(this,"queryServerInfo",{fragNum:0,queryNum:0,largestQPF:0}),C()(this,"trackerInfo",{reqSuccCount:0,reqFailCount:0,reqCostTimeMs:0,conSuccCount:0,conFailCount:0}),C()(this,"peerConnectionInfo",{conSuccCount:0,conFailCount:0}),C()(this,"peerMessageInfo",{pmTxP:0,pmRxP:0,pmLagP:0,pmTxS:0,pmRxS:0,pmLagS:0}),this.initToEmpty()}return y()(t,[{key:"initToEmpty",value:function(){for(var t=0;t<m.b.TYPE_COUNT;++t)this.statArray[t]=0;for(this.shareSize=0,t=0;t<m.b.TYPE_COUNT;++t)this.statRealtimeArray[t]=0;for(this.p2pSendSizeRealtime=0,t=0;t<r.TYPE_COUNT;++t)this.wastedDataArray[t]=0;for(t=0;t<o.TYPE_COUNT;++t)this.fetchErrorArray[t]=0;for(t=0;t<m.a.TYPE_COUNT;++t)this.roleArray[t]=0;this.fetchRepeatFragmentNameList.clear(),this.queryServerInfo.fragNum=0,this.queryServerInfo.queryNum=0,this.queryServerInfo.largestQPF=0,this.trackerInfo.reqSuccCount=0,this.trackerInfo.reqFailCount=0,this.trackerInfo.reqCostTimeMs=0,this.trackerInfo.conSuccCount=0,this.trackerInfo.conFailCount=0,this.peerConnectionInfo.conSuccCount=0,this.peerConnectionInfo.conFailCount=0,this.peerMessageInfo={pmTxP:0,pmRxP:0,pmLagP:0,pmTxS:0,pmRxS:0,pmLagS:0}}},{key:"addPeerMessageDataCollection",value:function(t,e){switch(t){case i.TX_PEER:this.peerMessageInfo.pmTxP+=e;break;case i.RX_PEER:this.peerMessageInfo.pmRxP+=e;break;case i.LAG_PEER:this.peerMessageInfo.pmLagP+=e;break;case i.TX_SEEDBOX:this.peerMessageInfo.pmTxS+=e;break;case i.RX_SEEDBOX:this.peerMessageInfo.pmRxS+=e;break;case i.LAG_SEEDBOX:this.peerMessageInfo.pmLagS+=e}}},{key:"addFragmentDataCollection",value:function(t){var e,n,r=this;h()(e=t.getStatArray()).call(e,function(t,e){r.statArray[e]+=t}),h()(n=t.getRoleArray()).call(n,function(t,e){r.roleArray[e]+=t}),this.shareSize+=t.getShareSize(),this.lastestDeleteFragName=t.getFragmentName()}},{key:"addPeerConnectCount",value:function(t){t?this.peerConnectionInfo.conSuccCount++:this.peerConnectionInfo.conFailCount++}},{key:"getExtendReportInfo",value:function(){return{seedSize:this.roleArray[m.a.SEED],xchgSize:this.roleArray[m.a.EXCHANGE],lackSize:this.roleArray[m.a.LACKED],peerConSucc:this.peerConnectionInfo.conSuccCount,peerConTotal:this.peerConnectionInfo.conSuccCount+this.peerConnectionInfo.conFailCount,pmTxP:this.peerMessageInfo.pmTxP,pmRxP:this.peerMessageInfo.pmRxP,pmLagP:this.peerMessageInfo.pmLagP,pmTxS:this.peerMessageInfo.pmTxS,pmRxS:this.peerMessageInfo.pmRxS,pmLagS:this.peerMessageInfo.pmLagS}}},{key:"addDownloadSizeDataCollection",value:function(t,e,n){this.statArray[e]+=t}},{key:"getP2PDownload",value:function(){return this.statArray[m.b.P2P]}},{key:"getServerDownload",value:function(){return this.statArray[m.b.SERVER]}},{key:"getP2PSend",value:function(){return this.shareSize}},{key:"getP2PSaveRatio",value:function(){var t=this.statArray[m.b.P2P]+this.statArray[m.b.SERVER];return 0==t?"0.000":(this.statArray[m.b.P2P]/t*100).toFixed(3)}},{key:"getP2PShareRatio",value:function(){var t=this.statArray[m.b.P2P]+this.statArray[m.b.SERVER];return 0==t?"0.000":(this.shareSize/t*100).toFixed(3)}},{key:"addDownloadSizeRealtime",value:function(t,e){this.statRealtimeArray[e]+=t}},{key:"addP2PSendSizeRealtime",value:function(t){this.p2pSendSizeRealtime+=t}},{key:"getServerSizeRealtime",value:function(){return this.statRealtimeArray[m.b.SERVER]}},{key:"getP2PSendSizeRealtime",value:function(){return this.p2pSendSizeRealtime}},{key:"getP2PDownloadSizeRealtime",value:function(){return this.statRealtimeArray[m.b.P2P]}},{key:"addLastestFragmentDataCollection",value:function(t){if(this.lastestFragName=t.getFragmentName(),0==t.getFragmentSize())this.lastestShareRatio="0.000",this.lastestSaveRatio="0.000";else{var e=t.getShareSize()/t.getFragmentSize();this.lastestShareRatio=(100*e).toFixed(3);var n=t.getStatArray()[m.b.P2P]/t.getFragmentSize();this.lastestSaveRatio=(100*n).toFixed(3)}this.queryServerInfo.fragNum++,this.queryServerInfo.queryNum+=t.getQueryServerNum(),t.getQueryServerNum()>this.queryServerInfo.largestQPF&&(this.queryServerInfo.largestQPF=t.getQueryServerNum())}},{key:"getLastestFragmentDataCollection",value:function(){return{lastestFragName:this.lastestFragName,lastestShareRatio:this.lastestShareRatio,lastestSaveRatio:this.lastestSaveRatio}}},{key:"getLastestDeleteFragmentName",value:function(){return this.lastestDeleteFragName}},{key:"addWastedDataSize",value:function(t,e,n){this.wastedDataArray[e]+=t,void 0!==n&&e==r.CDN_REPEAT&&this.fetchRepeatFragmentNameList.add(n.fragname+" , "+u()(s()(n.sliceIds)))}},{key:"getWastedDataSize",value:function(t){return this.wastedDataArray[t]}},{key:"getFetchRepeatFragnameListInfo",value:function(){return u()(s()(this.fetchRepeatFragmentNameList))}},{key:"addFetchError",value:function(t){this.fetchErrorArray[t]++}},{key:"getFetchErrorNum",value:function(t){return this.fetchErrorArray[t]}},{key:"addTrackerConnect",value:function(t){t?this.trackerInfo.conSuccCount+=1:this.trackerInfo.conFailCount+=1}},{key:"addTrackerResponse",value:function(t,e){t?this.trackerInfo.reqSuccCount+=1:this.trackerInfo.reqFailCount+=1,this.trackerInfo.reqCostTimeMs+=e}},{key:"getTrackerInfo",value:function(){return this.trackerInfo}},{key:"getQueryServerInfo",value:function(){return this.queryServerInfo}},{key:"clearP2PDataInfo",value:function(){this.initToEmpty()}}]),t}()},function(t,e,n){t.exports=n(248)},function(t,e,n){var r=n(14),o=n(110),i=n(25),a=n(89),s=n(113),c=n(130),u=o("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||a;t.exports=function(t){return i(u,t)||(s&&i(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},function(t,e,n){t.exports=n(237)},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(82))},function(t,e){t.exports={}},function(t,e,n){t.exports=n(187)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(15),o=n(25),i=n(117),a=n(29).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=n(271)},function(t,e,n){"use strict";n.d(e,"d",function(){return P}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return A}),n.d(e,"a",function(){return R});var r=n(9),o=n.n(r),i=n(52),a=n.n(i),s=n(38),c=n.n(s),u=n(1),l=n.n(u),h=n(3),f=n.n(h),p=n(7),d=n.n(p),v=n(5),g=n.n(v),y=n(11),x=n.n(y),C=n(2),m=n.n(C),w=n(4),S=n.n(w),k=n(0),b=n.n(k),P=function(){function t(){m()(this,t),b()(this,"notifyList",void 0),b()(this,"notifyId",0),this.notifyList=new x.a}return S()(t,[{key:"connect",value:function(t){var e=this.notifyId++;return this.notifyList.set(e,t),e}},{key:"disconnect",value:function(t){return this.notifyList.delete(t)}},{key:"call",value:function(t){var e;g()(e=this.notifyList).call(e,function(e){e(t)})}}]),t}(),E=function(){function t(){m()(this,t),b()(this,"result",void 0),b()(this,"callbacks_res",new Array)}return S()(t,[{key:"setResult",value:function(t){if(this.result=t,void 0!==this.callbacks_res){for(var e=0;e<this.callbacks_res.length;++e)this.callbacks_res[e](t);this.callbacks_res=void 0}}},{key:"onResolved",value:function(t){return void 0===this.callbacks_res?t(this.result):this.callbacks_res.push(t),this}},{key:"isResolved",value:function(){return void 0===this.callbacks_res}}]),t}(),A=function(){function t(){m()(this,t),b()(this,"waitingList_",void 0),b()(this,"isLocked_",void 0),b()(this,"mutexId_",void 0),this.waitingList_=new Array,this.isLocked_=!1,this.mutexId_=++t.maxMutexId_}return S()(t,[{key:"lock",value:function(){var t=this;return!0===this.isLocked_?new f.a(function(e){return t.waitingList_.push(e)}):(this.isLocked_=!0,f.a.resolve())}},{key:"unlock",value:function(){var t=this.waitingList_.shift();void 0!==t?t():this.isLocked_=!1}},{key:"isLocked",value:function(){return this.isLocked_}},{key:"getId",value:function(){return this.mutexId_}}]),t}();b()(A,"maxMutexId_",0);var R=function(){function t(){m()(this,t),b()(this,"notifyList",void 0),b()(this,"notifyingList",void 0),this.notifyList=new Array,this.notifyingList=new Array}var e;return S()(t,[{key:"waitUntilAsync",value:(e=d()(l.a.mark(function t(e,n){var r,o,i=this;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.unlock(),t.next=3,new f.a(function(t){return i.notifyList.push(t)});case 3:return r=t.sent,t.next=6,e.lock();case 6:if(o=n(),!0!==r&&!1!==o||this.notify(r),!0!==o){t.next=10;break}return t.abrupt("break",12);case 10:t.next=0;break;case 12:case"end":return t.stop()}},t,this)})),function(t,n){return e.apply(this,arguments)})},{key:"waitUntil",value:function(t,e){return!0===e()?f.a.resolve():this.waitUntilAsync(t,e)}},{key:"prepareNotify",value:function(){var t,e,n,r;(e=c()(t=this.notifyingList)).call.apply(e,o()(n=[t,this.notifyingList.length,0]).call(n,a()(this.notifyList))),c()(r=this.notifyList).call(r,0,this.notifyList.length)}},{key:"notify",value:function(t){var e=this.notifyingList.shift();void 0!==e&&e(t)}},{key:"notifyOne",value:function(){this.prepareNotify(),this.notify(!1)}},{key:"notifyAll",value:function(){this.prepareNotify(),this.notify(!0)}}]),t}()},function(t,e,n){var r=n(15);t.exports=function(t){return r[t+"Prototype"]}},function(t,n,r){"use strict";r.r(n),r.d(n,"PeerRole",function(){return G}),r.d(n,"PeerExtensionData",function(){return at}),r.d(n,"PeerRequest",function(){return ct}),r.d(n,"PeerResponse",function(){return ut}),r.d(n,"PeerMessage",function(){return lt}),r.d(n,"NyaPeer",function(){return ft});var o=r(175),i=r.n(o),a=r(63),s=r.n(a),c=r(1),u=r.n(c),l=r(7),h=r.n(l),f=r(5),p=r.n(f),d=r(20),v=r.n(d),g=r(11),y=r.n(g),x=r(16),C=r.n(x),m=r(4),w=r.n(m),S=r(3),k=r.n(S),b=r(2),P=r.n(b),E=r(0),A=r.n(E),R=void 0!==e&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function I(t){for(var e=t.length,n=0,r=0;r<e;){var o=t.charCodeAt(r++);if(0!=(4294967168&o))if(0==(4294965248&o))n+=2;else{if(o>=55296&&o<=56319&&r<e){var i=t.charCodeAt(r);56320==(64512&i)&&(++r,o=((1023&o)<<10)+(1023&i)+65536)}n+=0==(4294901760&o)?3:4}else n++}return n}var D=R?new TextEncoder:void 0,L=R?void 0!==e?200:0:4294967295,T=(null==D?void 0:D.encodeInto)?function(t,e,n){D.encodeInto(t,e.subarray(n))}:function(t,e,n){e.set(D.encode(t),n)};function F(t,e,n){for(var r=e,o=r+n,i=[],a="";r<o;){var s=t[r++];if(0==(128&s))i.push(s);else if(192==(224&s)){var c=63&t[r++];i.push((31&s)<<6|c)}else if(224==(240&s)){c=63&t[r++];var u=63&t[r++];i.push((31&s)<<12|c<<6|u)}else if(240==(248&s)){var l=(7&s)<<18|(c=63&t[r++])<<12|(u=63&t[r++])<<6|63&t[r++];l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l)}else i.push(s);i.length>=4096&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(a+=String.fromCharCode.apply(String,i)),a}var O=R?new TextDecoder:null,N=R?void 0!==e?200:0:4294967295,U=function(t,e){this.type=t,this.data=e};function B(t,e,n){var r=Math.floor(n/4294967296),o=n;t.setUint32(e,r),t.setUint32(e+4,o)}function M(t,e){return 4294967296*t.getInt32(e)+t.getUint32(e+4)}var _={type:-1,encode:function(t){var e,n,r,o;return t instanceof Date?function(t){var e,n=t.sec,r=t.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var o=new Uint8Array(4);return(e=new DataView(o.buffer)).setUint32(0,n),o}var i=n/4294967296,a=4294967295&n;return o=new Uint8Array(8),(e=new DataView(o.buffer)).setUint32(0,r<<2|3&i),e.setUint32(4,a),o}return o=new Uint8Array(12),(e=new DataView(o.buffer)).setUint32(0,r),B(e,4,n),o}((r=1e6*((e=t.getTime())-1e3*(n=Math.floor(e/1e3))),{sec:n+(o=Math.floor(r/1e9)),nsec:r-1e9*o})):null},decode:function(t){var e=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:var n=e.getUint32(0);return{sec:4294967296*(3&n)+e.getUint32(4),nsec:n>>>2};case 12:return{sec:M(e,4),nsec:e.getUint32(0)};default:throw new Error("Unrecognized data size for timestamp: "+t.length)}}(t);return new Date(1e3*e.sec+e.nsec/1e6)}},z=function(){function t(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(_)}return t.prototype.register=function(t){var e=t.type,n=t.encode,r=t.decode;if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{var o=1+e;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}},t.prototype.tryToEncode=function(t,e){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(r=this.builtInEncoders[n])&&null!=(o=r(t,e)))return new U(-1-n,o);for(n=0;n<this.encoders.length;n++){var r,o;if(null!=(r=this.encoders[n])&&null!=(o=r(t,e)))return new U(n,o)}return t instanceof U?t:null},t.prototype.decode=function(t,e,n){var r=e<0?this.builtInDecoders[-1-e]:this.decoders[e];return r?r(t,e,n):new U(e,t)},t.defaultCodec=new t,t}();function j(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}var q=function(){function t(t,e,n,r,o,i,a,s){void 0===t&&(t=z.defaultCodec),void 0===e&&(e=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),this.extensionCodec=t,this.context=e,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=o,this.forceFloat32=i,this.ignoreUndefined=a,this.forceIntegerToFloat=s,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encode=function(t){return this.reinitializeState(),this.doEncode(t,1),this.getUint8Array()},t.prototype.doEncode=function(t,e){if(e>this.maxDepth)throw new Error("Too deep objects in depth "+e);null==t?this.encodeNil():"boolean"==typeof t?this.encodeBoolean(t):"number"==typeof t?this.encodeNumber(t):"string"==typeof t?this.encodeString(t):this.encodeObject(t,e)},t.prototype.ensureBufferSizeToWrite=function(t){var e=this.pos+t;this.view.byteLength<e&&this.resizeBuffer(2*e)},t.prototype.resizeBuffer=function(t){var e=new ArrayBuffer(t),n=new Uint8Array(e),r=new DataView(e);n.set(this.bytes),this.view=r,this.bytes=n},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(t){!1===t?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(t){Number.isSafeInteger(t)&&!this.forceIntegerToFloat?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):(this.writeU8(211),this.writeI64(t)):this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))},t.prototype.writeStringHeader=function(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too long string: "+t+" bytes in UTF-8");this.writeU8(219),this.writeU32(t)}},t.prototype.encodeString=function(t){if(t.length>L){var e=I(t);this.ensureBufferSizeToWrite(5+e),this.writeStringHeader(e),T(t,this.bytes,this.pos),this.pos+=e}else e=I(t),this.ensureBufferSizeToWrite(5+e),this.writeStringHeader(e),function(t,e,n){for(var r=t.length,o=n,i=0;i<r;){var a=t.charCodeAt(i++);if(0!=(4294967168&a)){if(0==(4294965248&a))e[o++]=a>>6&31|192;else{if(a>=55296&&a<=56319&&i<r){var s=t.charCodeAt(i);56320==(64512&s)&&(++i,a=((1023&a)<<10)+(1023&s)+65536)}0==(4294901760&a)?(e[o++]=a>>12&15|224,e[o++]=a>>6&63|128):(e[o++]=a>>18&7|240,e[o++]=a>>12&63|128,e[o++]=a>>6&63|128)}e[o++]=63&a|128}else e[o++]=a}}(t,this.bytes,this.pos),this.pos+=e},t.prototype.encodeObject=function(t,e){var n=this.extensionCodec.tryToEncode(t,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(t))this.encodeArray(t,e);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else{if("object"!=typeof t)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(t));this.encodeMap(t,e)}},t.prototype.encodeBinary=function(t){var e=t.byteLength;if(e<256)this.writeU8(196),this.writeU8(e);else if(e<65536)this.writeU8(197),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large binary: "+e);this.writeU8(198),this.writeU32(e)}var n=j(t);this.writeU8a(n)},t.prototype.encodeArray=function(t,e){var n=t.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too large array: "+n);this.writeU8(221),this.writeU32(n)}for(var r=0,o=t;r<o.length;r++){var i=o[r];this.doEncode(i,e+1)}},t.prototype.countWithoutUndefined=function(t,e){for(var n=0,r=0,o=e;r<o.length;r++)void 0!==t[o[r]]&&n++;return n},t.prototype.encodeMap=function(t,e){var n=Object.keys(t);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(t,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large map object: "+r);this.writeU8(223),this.writeU32(r)}for(var o=0,i=n;o<i.length;o++){var a=i[o],s=t[a];this.ignoreUndefined&&void 0===s||(this.encodeString(a),this.doEncode(s,e+1))}},t.prototype.encodeExtension=function(t){var e=t.data.length;if(1===e)this.writeU8(212);else if(2===e)this.writeU8(213);else if(4===e)this.writeU8(214);else if(8===e)this.writeU8(215);else if(16===e)this.writeU8(216);else if(e<256)this.writeU8(199),this.writeU8(e);else if(e<65536)this.writeU8(200),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too large extension object: "+e);this.writeU8(201),this.writeU32(e)}this.writeI8(t.type),this.writeU8a(t.data)},t.prototype.writeU8=function(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++},t.prototype.writeU8a=function(t){var e=t.length;this.ensureBufferSizeToWrite(e),this.bytes.set(t,this.pos),this.pos+=e},t.prototype.writeI8=function(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++},t.prototype.writeU16=function(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2},t.prototype.writeI16=function(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2},t.prototype.writeU32=function(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4},t.prototype.writeI32=function(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4},t.prototype.writeF32=function(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4},t.prototype.writeF64=function(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8},t.prototype.writeU64=function(t){this.ensureBufferSizeToWrite(8),function(t,e,n){var r=n/4294967296,o=n;t.setUint32(e,r),t.setUint32(e+4,o)}(this.view,this.pos,t),this.pos+=8},t.prototype.writeI64=function(t){this.ensureBufferSizeToWrite(8),B(this.view,this.pos,t),this.pos+=8},t}(),W={};function V(t){return(t<0?"-":"")+"0x"+Math.abs(t).toString(16).padStart(2,"0")}var G,Y=function(){function t(t,e){void 0===t&&(t=16),void 0===e&&(e=16),this.maxKeyLength=t,this.maxLengthPerKey=e,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return t.prototype.canBeCached=function(t){return t>0&&t<=this.maxKeyLength},t.prototype.get=function(t,e,n){var r=this.caches[n-1],o=r.length;t:for(var i=0;i<o;i++){for(var a=r[i],s=a.bytes,c=0;c<n;c++)if(s[c]!==t[e+c])continue t;return a.value}return null},t.prototype.store=function(t,e){var n=this.caches[t.length-1],r={bytes:t,value:e};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},t.prototype.decode=function(t,e,n){var r=this.get(t,e,n);if(null!=r)return this.hit++,r;this.miss++;var o=F(t,e,n),i=Uint8Array.prototype.slice.call(t,e,e+n);return this.store(i,o),o},t}(),Q=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},H=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,o){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,o,(e=t[n](e)).done,e.value)})}}},X=function(t){return this instanceof X?(this.v=t,this):new X(t)},K=new DataView(new ArrayBuffer(0)),J=new Uint8Array(K.buffer),$=function(){try{K.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")}(),Z=new $("Insufficient data"),tt=new Y,et=function(){function t(t,e,n,r,o,i,a,s){void 0===t&&(t=z.defaultCodec),void 0===e&&(e=void 0),void 0===n&&(n=4294967295),void 0===r&&(r=4294967295),void 0===o&&(o=4294967295),void 0===i&&(i=4294967295),void 0===a&&(a=4294967295),void 0===s&&(s=tt),this.extensionCodec=t,this.context=e,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=o,this.maxMapLength=i,this.maxExtLength=a,this.keyDecoder=s,this.totalPos=0,this.pos=0,this.view=K,this.bytes=J,this.headByte=-1,this.stack=[]}return t.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1},t.prototype.setBuffer=function(t){this.bytes=j(t),this.view=function(t){if(t instanceof ArrayBuffer)return new DataView(t);var e=j(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}(this.bytes),this.pos=0},t.prototype.appendBuffer=function(t){if(-1!==this.headByte||this.hasRemaining()){var e=this.bytes.subarray(this.pos),n=j(t),r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),this.setBuffer(r)}else this.setBuffer(t)},t.prototype.hasRemaining=function(t){return void 0===t&&(t=1),this.view.byteLength-this.pos>=t},t.prototype.createExtraByteError=function(t){var e=this.view,n=this.pos;return new RangeError("Extra "+(e.byteLength-n)+" of "+e.byteLength+" byte(s) found at buffer["+t+"]")},t.prototype.decode=function(t){this.reinitializeState(),this.setBuffer(t);var e=this.doDecodeSync();if(this.hasRemaining())throw this.createExtraByteError(this.pos);return e},t.prototype.decodeAsync=function(t){var e,n,r,o;return function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function(){var i,a,s,c,u,l,h,f;return Q(this,function(p){switch(p.label){case 0:i=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),e=H(t),p.label=2;case 2:return[4,e.next()];case 3:if((n=p.sent()).done)return[3,5];if(s=n.value,i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{a=this.doDecodeSync(),i=!0}catch(t){if(!(t instanceof $))throw t}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=p.sent(),r={error:c},[3,12];case 7:return p.trys.push([7,,10,11]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(i){if(this.hasRemaining())throw this.createExtraByteError(this.totalPos);return[2,a]}throw l=(u=this).headByte,h=u.pos,f=u.totalPos,new RangeError("Insufficient data in parsing "+V(l)+" at "+f+" ("+h+" in the current buffer)")}})})},t.prototype.decodeArrayStream=function(t){return this.decodeMultiAsync(t,!0)},t.prototype.decodeStream=function(t){return this.decodeMultiAsync(t,!1)},t.prototype.decodeMultiAsync=function(t,e){return function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){o[t]&&(r[t]=function(e){return new Promise(function(n,r){i.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=o[t](e)).value instanceof X?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(t){l(i[0][3],t)}var n}function c(t){s("next",t)}function u(t){s("throw",t)}function l(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function(){var n,r,o,i,a,s,c,u,l;return Q(this,function(h){switch(h.label){case 0:n=e,r=-1,h.label=1;case 1:h.trys.push([1,13,14,19]),o=H(t),h.label=2;case 2:return[4,X(o.next())];case 3:if((i=h.sent()).done)return[3,12];if(a=i.value,e&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),h.label=4;case 4:h.trys.push([4,9,,10]),h.label=5;case 5:return[4,X(this.doDecodeSync())];case 6:return[4,h.sent()];case 7:return h.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((s=h.sent())instanceof $))throw s;return[3,10];case 10:this.totalPos+=this.pos,h.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=h.sent(),u={error:c},[3,19];case 14:return h.trys.push([14,,17,18]),i&&!i.done&&(l=o.return)?[4,X(l.call(o))]:[3,16];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(u)throw u.error;return[7];case 18:return[7];case 19:return[2]}})})},t.prototype.doDecodeSync=function(){t:for(;;){var t=this.readHeadByte(),e=void 0;if(t>=224)e=t-256;else if(t<192)if(t<128)e=t;else if(t<144){if(0!=(r=t-128)){this.pushMapState(r),this.complete();continue t}e={}}else if(t<160){if(0!=(r=t-144)){this.pushArrayState(r),this.complete();continue t}e=[]}else{var n=t-160;e=this.decodeUtf8String(n,0)}else if(192===t)e=null;else if(194===t)e=!1;else if(195===t)e=!0;else if(202===t)e=this.readF32();else if(203===t)e=this.readF64();else if(204===t)e=this.readU8();else if(205===t)e=this.readU16();else if(206===t)e=this.readU32();else if(207===t)e=this.readU64();else if(208===t)e=this.readI8();else if(209===t)e=this.readI16();else if(210===t)e=this.readI32();else if(211===t)e=this.readI64();else if(217===t)n=this.lookU8(),e=this.decodeUtf8String(n,1);else if(218===t)n=this.lookU16(),e=this.decodeUtf8String(n,2);else if(219===t)n=this.lookU32(),e=this.decodeUtf8String(n,4);else if(220===t){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue t}e=[]}else if(221===t){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue t}e=[]}else if(222===t){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue t}e={}}else if(223===t){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue t}e={}}else if(196===t){var r=this.lookU8();e=this.decodeBinary(r,1)}else if(197===t)r=this.lookU16(),e=this.decodeBinary(r,2);else if(198===t)r=this.lookU32(),e=this.decodeBinary(r,4);else if(212===t)e=this.decodeExtension(1,0);else if(213===t)e=this.decodeExtension(2,0);else if(214===t)e=this.decodeExtension(4,0);else if(215===t)e=this.decodeExtension(8,0);else if(216===t)e=this.decodeExtension(16,0);else if(199===t)r=this.lookU8(),e=this.decodeExtension(r,1);else if(200===t)r=this.lookU16(),e=this.decodeExtension(r,2);else{if(201!==t)throw new Error("Unrecognized type byte: "+V(t));r=this.lookU32(),e=this.decodeExtension(r,4)}this.complete();for(var o=this.stack;o.length>0;){var i=o[o.length-1];if(0===i.type){if(i.array[i.position]=e,i.position++,i.position!==i.size)continue t;o.pop(),e=i.array}else{if(1===i.type){if(void 0,"string"!=(a=typeof e)&&"number"!==a)throw new Error("The type of key must be string or number but "+typeof e);i.key=e,i.type=2;continue t}if(i.map[i.key]=e,i.readCount++,i.readCount!==i.size){i.key=null,i.type=1;continue t}o.pop(),e=i.map}}return e}var a},t.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},t.prototype.complete=function(){this.headByte=-1},t.prototype.readArraySize=function(){var t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:if(t<160)return t-144;throw new Error("Unrecognized array type byte: "+V(t))}},t.prototype.pushMapState=function(t){if(t>this.maxMapLength)throw new Error("Max length exceeded: map length ("+t+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:t,key:null,readCount:0,map:{}})},t.prototype.pushArrayState=function(t){if(t>this.maxArrayLength)throw new Error("Max length exceeded: array length ("+t+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:t,array:new Array(t),position:0})},t.prototype.decodeUtf8String=function(t,e){var n;if(t>this.maxStrLength)throw new Error("Max length exceeded: UTF-8 byte length ("+t+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+e+t)throw Z;var r,o=this.pos+e;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(t))?this.keyDecoder.decode(this.bytes,o,t):t>N?function(t,e,n){var r=t.subarray(e,e+n);return O.decode(r)}(this.bytes,o,t):F(this.bytes,o,t),this.pos+=e+t,r},t.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},t.prototype.decodeBinary=function(t,e){if(t>this.maxBinLength)throw new Error("Max length exceeded: bin length ("+t+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(t+e))throw Z;var n=this.pos+e,r=this.bytes.subarray(n,n+t);return this.pos+=e+t,r},t.prototype.decodeExtension=function(t,e){if(t>this.maxExtLength)throw new Error("Max length exceeded: ext length ("+t+") > maxExtLength ("+this.maxExtLength+")");var n=this.view.getInt8(this.pos+e),r=this.decodeBinary(t,e+1);return this.extensionCodec.decode(r,n,this.context)},t.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t.prototype.readU8=function(){var t=this.view.getUint8(this.pos);return this.pos++,t},t.prototype.readI8=function(){var t=this.view.getInt8(this.pos);return this.pos++,t},t.prototype.readU16=function(){var t=this.view.getUint16(this.pos);return this.pos+=2,t},t.prototype.readI16=function(){var t=this.view.getInt16(this.pos);return this.pos+=2,t},t.prototype.readU32=function(){var t=this.view.getUint32(this.pos);return this.pos+=4,t},t.prototype.readI32=function(){var t=this.view.getInt32(this.pos);return this.pos+=4,t},t.prototype.readU64=function(){var t,e,n=(t=this.view,e=this.pos,4294967296*t.getUint32(e)+t.getUint32(e+4));return this.pos+=8,n},t.prototype.readI64=function(){var t=M(this.view,this.pos);return this.pos+=8,t},t.prototype.readF32=function(){var t=this.view.getFloat32(this.pos);return this.pos+=4,t},t.prototype.readF64=function(){var t=this.view.getFloat64(this.pos);return this.pos+=8,t},t}(),nt={},rt=r(21),ot=r(10),it=r(100);!function(t){t[t.Peer=0]="Peer",t[t.Leech=1]="Leech",t[t.Seedbox=2]="Seedbox"}(G||(G={}));var at=function t(){P()(this,t),A()(this,"peerId",""),A()(this,"guid","00000000-0000-4000-8000-000000000000"),A()(this,"isDownloadBlockReport",!1)},st=function t(e){var n=this;P()(this,t),A()(this,"buf",void 0),A()(this,"promise",void 0),A()(this,"resolver",void 0),this.buf=e,this.promise=new k.a(function(t){n.resolver=t})},ct=function t(){P()(this,t),A()(this,"action",""),A()(this,"data",void 0)},ut=function t(){P()(this,t),A()(this,"requestId",-1),A()(this,"status","not_implemented"),A()(this,"data",void 0)},lt=function t(){P()(this,t),A()(this,"type",""),A()(this,"requestId",-1),A()(this,"action_type",""),A()(this,"action",""),A()(this,"data",void 0)},ht=function(){function t(e,n){var r=this;P()(this,t),A()(this,"p2pContext",void 0),A()(this,"dc",void 0),A()(this,"sendQueue",new Array),A()(this,"isSending",!1),this.p2pContext=e,this.dc=n,this.dc.binaryType="arraybuffer",this.dc.bufferedAmountLowThreshold=262144,this.dc.onbufferedamountlow=function(){return r.onDCWritable()}}return w()(t,[{key:"onDCWritable",value:function(){var t=this;this.isSending=!0;for(var e,n,r=this.dc.bufferedAmount;r<1048576;){var o,i=this.sendQueue.shift();if(void 0===i){this.isSending=!1;break}void 0!==i.buf.data&&null!==i.buf.data&&void 0!==i.buf.data.length&&i.buf.data.length>1024||(this.p2pContext.printExtLog(4,"send: "+i.buf),this.p2pContext.Config.allowPrintLog(4)&&console.log("send: "+i.buf));try{if("open"===this.dc.readyState){var a=(e=i.buf,void 0===(n=void 0)&&(n=W),new q(n.extensionCodec,n.context,n.maxDepth,n.initialBufferSize,n.sortKeys,n.forceFloat32,n.ignoreUndefined,n.forceIntegerToFloat).encode(e));this.dc.send(a),r+=a.length}}catch(t){this.p2pContext.printExtLog(0,"One sister forcibly disconnected from the Misaka Network. QwQ"),this.p2pContext.Config.allowPrintLog(0)&&console.info("[SistersPlayer] One sister forcibly disconnected from the Misaka Network. QwQ")}null===(o=i.resolver)||void 0===o||o.call(i)}this.sendQueue.length>0&&r>1048576&&this.dc.bufferedAmount<this.dc.bufferedAmountLowThreshold&&C()(function(){return t.onDCWritable()},0)}}]),w()(t,[{key:"dataChannel",value:function(){return this.dc}},{key:"send",value:function(t){var e=new st(t);return this.sendQueue.push(e),!1===this.isSending&&this.onDCWritable(),e.promise}}]),t}(),ft=function(){function t(e,n,r){var o,i=this;P()(this,t),A()(this,"p2pContext",void 0),A()(this,"peerSched",void 0),A()(this,"incoming",void 0),A()(this,"pc",void 0),A()(this,"dc",void 0),A()(this,"requestId",0),A()(this,"pendingRequests",new y.a),A()(this,"dc_resolver",void 0),A()(this,"dc_future",void 0),A()(this,"extData",new at),A()(this,"onCandidate",void 0),A()(this,"candidates",new Array),A()(this,"role_",G.Peer),A()(this,"seedSliceIds_",new v.a),A()(this,"seedScore",100),this.p2pContext=e,this.incoming=r,this.peerSched=n;var a=[];p()(o=this.p2pContext.Config.stunServers).call(o,function(t){var e={urls:t};a.push(e)}),this.pc=new RTCPeerConnection({iceServers:a,iceCandidatePoolSize:this.p2pContext.Config.iceCandidatePoolSize,iceTransportPolicy:"all"}),this.pc.addEventListener("datachannel",function(t){"misaka-denpa"===t.channel.label&&(i.dc=new ht(i.p2pContext,t.channel),i.dc.dataChannel().onmessage=function(t){return i.onMessageReceived(t.data)},void 0!==i.dc_resolver&&i.dc_resolver())}),this.pc.addEventListener("iceconnectionstatechange",function(t){switch(i.p2pContext.printExtLog(3,"peer "+i.extData.peerId+" iceconnection state: "+i.pc.iceConnectionState),i.p2pContext.Config.allowPrintLog(3)&&console.log("peer "+i.extData.peerId+" iceconnection state: "+i.pc.iceConnectionState),i.pc.iceConnectionState){case"new":case"checking":case"connected":case"completed":break;case"disconnected":i.peerSched.onPeerDisConnected(i);break;case"failed":i.peerSched.onPeerConnectComplete(i,!1);break;case"closed":i.peerSched.onPeerDisConnected(i)}}),this.pc.addEventListener("signalingstatechange",function(t){i.p2pContext.printExtLog(3,"peer "+i.extData.peerId+" signaling state: "+i.pc.iceConnectionState),i.p2pContext.Config.allowPrintLog(3)&&console.log("peer "+i.extData.peerId+" signaling state: "+i.pc.iceConnectionState),i.pc.signalingState}),this.pc.addEventListener("icecandidate",function(t){null!=t.candidate&&i.onCandidate(t.candidate)}),this.onCandidate=function(t){null!=t&&null!=t.candidate&&""!=t.candidate&&i.candidates.push(t)}}var e,n,r,o,a,c;return w()(t,[{key:"peerRole",get:function(){return this.role_==G.Seedbox&&0==this.p2pContext.Config.useSeedBox?G.Peer:this.role_}},{key:"seedSliceIds",get:function(){return this.seedSliceIds_}}]),w()(t,[{key:"close",value:function(){var t;0==this.extData.isDownloadBlockReport&&null!=this.p2pContext.PeerSched&&this.p2pContext.PeerSched.reportDownloadBlockAwaysFail(this),null===(t=this.dc)||void 0===t||t.dataChannel().close(),"closed"!=this.pc.signalingState&&this.pc.close()}},{key:"isIncoming",value:function(){return this.incoming}},{key:"setCandidateCallback",value:function(t){var e=this;new k.a(function(t){return t(e.candidates)}).then(function(e){p()(e).call(e,function(e){return t(e)})}),this.onCandidate=t,this.candidates=new Array}},{key:"createNyaOffer",value:(c=h()(u.a.mark(function t(e){var n,r=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.dc=new ht(this.p2pContext,this.pc.createDataChannel("misaka-denpa",{ordered:!1,negotiated:!1,maxPacketLifeTime:this.p2pContext.Config.peerPacketLifeTime})),this.dc_future=k.a.resolve(),this.dc.dataChannel().onmessage=function(t){return r.onMessageReceived(t.data)},this.setCandidateCallback(e),t.next=6,this.pc.createOffer({iceRestart:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1});case 6:return n=t.sent,this.pc.setLocalDescription(n),t.abrupt("return",n);case 9:case"end":return t.stop()}},t,this)})),function(t){return c.apply(this,arguments)})},{key:"answerNyaOffer",value:(a=h()(u.a.mark(function t(e,n){var r,o=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.dc_future=new k.a(function(t){return o.dc_resolver=t}),this.setCandidateCallback(n),t.next=4,this.pc.setRemoteDescription(e);case 4:return t.next=6,this.pc.createAnswer({iceRestart:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1});case 6:return r=t.sent,this.pc.setLocalDescription(r),t.abrupt("return",r);case 9:case"end":return t.stop()}},t,this)})),function(t,e){return a.apply(this,arguments)})},{key:"acceptNyaAnswer",value:(o=h()(u.a.mark(function t(e){var n=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.pc.setRemoteDescription(e).catch(function(t){n.p2pContext.printExtLog(2,"accept answer failed: "+t.message),n.p2pContext.Config.allowPrintLog(2)&&console.warn("accept answer failed: "+t.message)}),t.next=3,this.waitForConnected();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"addRemoteCandidate",value:(r=h()(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.pc.addIceCandidate(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return");case 9:case"end":return t.stop()}},t,this,[[0,6]])})),function(t){return r.apply(this,arguments)})},{key:"waitForConnected",value:(n=h()(u.a.mark(function t(){var e,n,r,o,i,a=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new rt.b,void 0===this.dc_future){t.next=6;break}return n=void 0,t.next=5,k.a.race([this.dc_future,new k.a(function(t){n=C()(t,a.p2pContext.Config.peerConnectionTimeoutMs)})]);case 5:void 0!==n&&clearTimeout(n);case 6:if(void 0!==this.dc){t.next=8;break}return t.abrupt("return",!1);case 8:if(r=void 0,"open"!==this.dc.dataChannel().readyState&&(r=new k.a(function(t){if(void 0!==a.dc){a.dc.dataChannel().onopen=function(e){return t(!0)},a.dc.dataChannel().onerror=function(e){return t(!1)};var n=function(e){"failed"===a.pc.iceConnectionState&&(a.p2pContext.printExtLog(2,"ice connection state failed when wait for connected."),a.p2pContext.Config.allowPrintLog(2)&&console.log("ice connection state failed when wait for connected."),t(!1))};a.pc.addEventListener("iceconnectionstatechange",n),e.onResolved(function(){return a.pc.removeEventListener("iceconnectionstatechange",n)})}})),o=!1,void 0===r){t.next=24;break}if(!(this.p2pContext.Config.peerConnectionTimeoutMs>0)){t.next=19;break}return t.next=15,k.a.race(new Array(r,new k.a(function(t){i=C()(function(){return t(!1)},a.p2pContext.Config.peerConnectionTimeoutMs)})));case 15:o=t.sent,clearTimeout(i),t.next=22;break;case 19:return t.next=21,r;case 21:o=t.sent;case 22:t.next=25;break;case 24:o=!0;case 25:return!0===o&&(this.dc.dataChannel().onclose=function(t){return a.peerSched.onPeerDisConnected(a)}),e.setResult(1),t.abrupt("return",o);case 28:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"sendRequestMessage",value:function(t){return this.sendMessage(function(){var e=t();if(void 0!==e)return{type:"request",requestId:-1,action_type:"action",action:e.action,data:e.data}})}},{key:"sendResponseMessage",value:function(t){return this.sendMessage(function(){var e=t();if(void 0!==e)return{type:"response",requestId:e.requestId,action_type:"status",action:e.status,data:e.data}})}},{key:"sendMessage",value:(e=h()(u.a.mark(function t(e){var n,r,o,i,a,s,c,l=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("open"!=(null===(n=this.dc)||void 0===n?void 0:n.dataChannel().readyState)){t.next=16;break}if(void 0!==(r=e())){t.next=4;break}return t.abrupt("return",void 0);case 4:return o=r.requestId<0,r.requestId<0&&(++this.requestId,r.requestId=this.requestId),(i={type:r.type,requestId:r.requestId,data:r.data})[r.action_type]=r.action,a=this.pendingRequests,s=this.dc,t.next=12,new k.a(function(t){if(o){a.has(i.requestId)&&console.log("duplicated request id!");var e=void 0;l.p2pContext.Config.peerTimeoutMs>0&&(e=C()(function(){a.delete(i.requestId),t(!1)},l.p2pContext.Config.peerTimeoutMs)),void 0!==e?a.set(i.requestId,function(n){clearTimeout(e),t(n)}):a.set(i.requestId,t)}else t(!0);null==s||s.send(i)});case 12:return c=t.sent,t.abrupt("return",c);case 16:return t.abrupt("return",void 0);case 17:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"terminateAllPendingRequests",value:function(){var t;p()(t=this.pendingRequests).call(t,function(t,e){t(void 0)}),this.pendingRequests.clear()}},{key:"onMessageReceived",value:function(t){try{var e=(n=t,void 0===r&&(r=nt),new et(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decode(n));null!==e.data&&void 0!==e.data&&void 0!==e.data.length&&e.data.length>1024||(this.p2pContext.printExtLog(4,this.extData.peerId+" recv: "+e),this.p2pContext.Config.allowPrintLog(4)&&console.log(this.extData.peerId+" recv: ",e)),"response"==e.type&&s()(e.requestId)&&e.requestId>0?this.dispatchResponse(e):"request"==e.type&&s()(e.requestId)&&this.peerSched.onPeerRequestMessage(this,e)}catch(t){void 0!==e&&this.p2pContext.P2PDataCollectionStatus.addWastedDataSize(e.byteLength,ot.e.ERROR_DATA),this.p2pContext.GhostPeerIds.add(this.extData.peerId),this.close(),console.log(t)}var n,r}},{key:"dispatchResponse",value:function(t){var e,n=this.pendingRequests.get(t.requestId);void 0!==n?(this.pendingRequests.delete(t.requestId),n(t)):"ok"===t.status&&void 0!==(null===(e=t.data)||void 0===e?void 0:e.length)&&(this.p2pContext.printExtLog(3,"no request for received response "+t.data.byteLength),this.p2pContext.Config.allowPrintLog(3)&&console.log("no request for received response "+t.data.byteLength),this.peerSched.getP2PContext().P2PDataCollectionStatus.addWastedDataSize(t.data.byteLength,ot.e.P2P_LATE))}},{key:"parsePeerRole",value:function(t){var e;null!=t&&("leech"!==t.type?"seed"===t.type&&t.sliceProvider instanceof Array&&i()(e=t.sliceProvider).call(e,function(t,e){return t&&"number"==typeof e},!0)&&(this.role_=G.Seedbox,this.seedSliceIds_=new v.a(t.sliceProvider)):this.role_=G.Leech)}},{key:"onDownloadBlockFailed",value:function(){this.peerRole==G.Seedbox&&(this.seedScore-=this.p2pContext.Config.seedScoreDown,this.seedScore<=0&&this.close())}},{key:"onDownloadBlockSucceed",value:function(){this.peerRole==G.Seedbox&&this.seedScore<this.p2pContext.Config.seedBoxScoreMax&&(this.seedScore+=this.p2pContext.Config.seedScoreUp)}},{key:"shouldUsedAsSeed",value:function(){return Object(it.b)(100)<this.seedScore}}]),t}()},function(t,e,n){var r=n(17);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(19);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(79),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(24),o=n(29),i=n(47);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(24),o=n(123),i=n(26),a=n(86),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(54);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(285),o=n(116);function i(e){return t.exports=i="function"==typeof o&&"symbol"==typeof r?function(t){return typeof t}:function(t){return t&&"function"==typeof o&&t.constructor===o&&t!==o.prototype?"symbol":typeof t},i(e)}t.exports=i},function(t,e,n){t.exports=n(183)},function(t,e,n){"use strict";n.d(e,"a",function(){return gt}),n.d(e,"c",function(){return Nt}),n.d(e,"b",function(){return Ot});var r,o=n(1),i=n.n(o),a=n(61),s=n.n(a),c=n(3),u=n.n(c),l=n(7),h=n.n(l),f=n(95),p=n.n(f),d=n(20),v=n.n(d),g=n(60),y=n.n(g),x=n(101),C=n.n(x),m=n(32),w=n.n(m),S=n(5),k=n.n(S),b=n(78),P=n.n(b),E=n(31),A=n.n(E),R=n(57),I=n.n(R),D=n(58),L=n.n(D),T=n(13),F=n.n(T),O=n(119),N=n.n(O),U=n(2),B=n.n(U),M=n(4),_=n.n(M),z=n(0),j=n.n(z),q=n(6),W=n(39),V=n(16),G=n.n(V),Y=n(99),Q=n.n(Y),H=n(11),X=n.n(H),K=n(76),J=n.n(K),$=n(59),Z=n.n($),tt=n(96),et=n.n(tt),nt=n(97),rt=n.n(nt),ot=n(98),it=n.n(ot),at=n(62),st=n.n(at),ct=n(46),ut=n.n(ct),lt=n(23),ht=n(21),ft=n(77),pt=n(10);function dt(t,e){var n;if(void 0===rt.a||null==et()(t)){if(Z()(t)||(n=function(t,e){var n;if(t){if("string"==typeof t)return vt(t,e);var r=st()(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?it()(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=J()(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}!function(t){t[t.NORMAL=0]="NORMAL",t[t.DONE=1]="DONE",t[t.ABANDONED=2]="ABANDONED"}(r||(r={}));var gt,yt=function t(){B()(this,t),j()(this,"mutex",new ht.c),j()(this,"isSeed",!1),j()(this,"lastQueryTime",0),j()(this,"sliceInfos",[]),j()(this,"status",r.NORMAL)},xt=function(){var t,e,n,o,a,s;function c(t,e){var n=this;B()(this,c),j()(this,"p2pContext",void 0),j()(this,"abandoned",void 0),j()(this,"frag",void 0),j()(this,"tasks",void 0),j()(this,"mutex",new ht.c),j()(this,"cv",new ht.a),this.p2pContext=t,this.abandoned=!1,this.frag=e,this.frag.onFinished(function(){n.stopDownload()}),this.tasks=new Array(this.p2pContext.Config.sliceCount);for(var r=0;r<this.p2pContext.Config.sliceCount;++r)for(var o=this.tasks[r]=new Array,i=e.getSliceBlockRange(r),a=i[1]-1;a>=i[0];--a)!1===e.isBlockFinished(a)&&o.push(a)}return _()(c,[{key:"requestPeerSlices",value:(t=h()(i.a.mark(function t(e,n){var o,a,s,c=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.mutex.lock();case 3:return t.next=5,e.sendRequestMessage(function(){return!0===c.abandoned?void 0:{action:"getFragSlices",data:{frag:c.frag.getFragmentName()}}});case 5:return o=t.sent,n.lastQueryTime=performance.now(),null==o||"overload"==o.status?n.status=r.ABANDONED:"not_found"==o.status?n.status=r.NORMAL:"ok"==o.status?(n.status=r.NORMAL,n.sliceInfos=o.data.sliceInfos,1==(null!==(a=null===(s=o.data)||void 0===s?void 0:s.final)&&void 0!==a&&a)&&(n.status=r.DONE)):n.status=r.ABANDONED,t.abrupt("return",n);case 9:return t.prev=9,n.mutex.unlock(),t.finish(9);case 12:case"end":return t.stop()}},t,null,[[0,,9,12]])})),function(e,n){return t.apply(this,arguments)})},{key:"updatePeerSlices",value:function(t,e,n){return e.status==r.DONE||e.status==r.ABANDONED||!1===n&&e.mutex.isLocked()||performance.now()-e.lastQueryTime<this.p2pContext.Config.refreshPeerProgressIntervalMs?u.a.resolve(e):this.requestPeerSlices(t,e)}}]),_()(c,[{key:"getTask",value:(s=h()(i.a.mark(function t(e){var n,r,o,a=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==this.abandoned){t.next=2;break}return t.abrupt("return",void 0);case 2:return n=-1,t.next=5,this.mutex.lock();case 5:return t.next=7,this.cv.waitUntil(this.mutex,function(){if(!0===a.abandoned)return!0;var t,r=dt(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=null==o?void 0:o.sliceId;if(null!=i&&a.tasks.length>i){var s=a.tasks[i];if(s.length>0){var c=s[s.length-1];if(o.progress>c)return i=o.sliceId,n=c,s.pop(),!0}}}}catch(t){r.e(t)}finally{r.f()}return!1});case 7:return r=this,o=function(){if(!0!==r.abandoned)return n>=0?{fragName:a.frag.getFragmentName(),blockId:n}:void 0}(),this.mutex.unlock(),t.abrupt("return",o);case 11:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"retry",value:(a=h()(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.frag.getBlockBelongSlice(e),t.next=3,this.mutex.lock();case 3:this.tasks[n].push(e),this.cv.notifyOne(),this.mutex.unlock();case 6:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"stopDownload",value:(o=h()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mutex.lock();case 2:this.abandoned=!0,this.cv.notifyAll(),this.mutex.unlock();case 5:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"startDownload",value:(n=h()(i.a.mark(function t(e,n){var o,a,s,c,l,h,f,p,d,g,y,x,C,m,w,S,k=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this.abandoned=!1,l=null!==(o=this.frag.getSliceIds())&&void 0!==o?o:new v.a,h=new Array,f=[],p=ut()(a=ut()(s=e.getConnectedPeers()).call(s,function(t){return t.peerRole==lt.PeerRole.Seedbox})).call(a,function(t){return t.shouldUsedAsSeed()}),d=function(t){if(l.has(t)){var n=ut()(p).call(p,function(e){return e.seedSliceIds.has(t)});if(n.length>0){var o=k.frag.getSliceBlockRange(t);if(void 0!==o&&o[0]<o[1]){var i=new yt;i.isSeed=!0,i.status=r.DONE,i.sliceInfos=[new ft.a(t,!0,o[1])];for(var a=0,s=o[0];s<o[1];++s)h.push(k.processPeer(e,n[a%n.length],i)),++a}}else f.push(t),k.tasks[t]=[]}},g=0;g<this.p2pContext.Config.sliceCount;++g)d(g);for(n(f),y=ut()(c=e.getConnectedPeers()).call(c,function(t){return t.peerRole==lt.PeerRole.Peer}),x=new X.a,C=0;h.length<this.p2pContext.Config.totalDownloadInstances&&C<this.p2pContext.Config.maxDownloadInstancesPerPeer;++C)for(m=0;h.length<this.p2pContext.Config.totalDownloadInstances&&m<y.length;++m)w=y[m],void 0===(S=x.get(w))&&(S=new yt,x.set(w,S)),h.push(this.processPeer(e,w,S));return t.next=13,u.a.all(h);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})},{key:"processPeer",value:(e=h()(i.a.mark(function t(e,n,o){var a,s,c,l,h,f=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.p2pContext.Config.allowPrintLog(4)&&console.log("start process peer "+n.extData.peerId),a=void 0,s=!0,c=-1,l=i.a.mark(function t(){var l,h,p,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.updatePeerSlices(n,o,!1);case 2:if(o.status!=r.ABANDONED){t.next=6;break}return t.abrupt("return","break");case 6:o.status!=r.NORMAL&&o.status!=r.DONE||(a=o.sliceInfos);case 7:if(l=void 0,!(void 0!==a&&a.length>0)){t.next=12;break}return t.next=11,f.getTask(a);case 11:l=t.sent;case 12:if(!0!==f.abandoned){t.next=14;break}return t.abrupt("return","break");case 14:if(void 0!==l){t.next=24;break}if(o.status!=r.DONE){t.next=17;break}return t.abrupt("return","break");case 17:if(!1!==s){t.next=20;break}return t.next=20,new u.a(function(t){return G()(t,f.p2pContext.Config.refreshPeerProgressIntervalMs)});case 20:return s=!1,t.next=23,f.updatePeerSlices(n,o,!0);case 23:return t.abrupt("return","continue");case 24:return s=!0,c=l.blockId,h=performance.now(),t.next=29,n.sendRequestMessage(function(){var t;return!0===f.abandoned?void 0:{action:"downloadBlock",data:{frag:f.frag.getFragmentName(),blockId:null===(t=l)||void 0===t?void 0:t.blockId}}});case 29:if(void 0!==(p=t.sent)&&(!1===p?n.peerRole==lt.PeerRole.Seedbox?f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.TX_SEEDBOX,1):f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.TX_PEER,1):n.peerRole==lt.PeerRole.Seedbox?(f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.LAG_SEEDBOX,Math.round(performance.now()-h)),f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.TX_SEEDBOX,1),f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.RX_SEEDBOX,1)):(f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.LAG_PEER,Math.round(performance.now()-h)),f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.TX_PEER,1),f.p2pContext.P2PDataCollectionStatus.addPeerMessageDataCollection(pt.d.RX_PEER,1))),void 0!==p&&!1!==p){t.next=35;break}return n.onDownloadBlockFailed(),c>=0&&f.retry(c),t.abrupt("return","break");case 35:if(!0!==f.abandoned){t.next=38;break}return"ok"===p.status&&void 0!==p.data&&f.p2pContext.P2PDataCollectionStatus.addWastedDataSize(p.data.byteLength,pt.e.P2P_LATE),t.abrupt("return","break");case 38:if("ok"!==p.status){t.next=54;break}if(f.frag.setBlockData(c,p.data,q.b.P2P,o.isSeed?q.a.SEED:q.a.EXCHANGE,n.extData.peerId)||void 0===p.data){t.next=49;break}return f.p2pContext.P2PDataCollectionStatus.addWastedDataSize(p.data.byteLength,pt.e.ERROR_DATA),s=!1,a=void 0,c>=0&&f.retry(c),f.p2pContext.Config.allowPrintLog(4)&&console.warn("bytelength error!!! receive data fragname："+f.frag.getFragmentName()+" peerId: "+n.extData.peerId+" sliceId "+f.frag.getBlockBelongSlice(c)+" blockId "+c+"error data size: "+p.data.byteLength+" right data size: "+(f.frag.getBlockByteRange(c)[1]-f.frag.getBlockByteRange(c)[0])),f.p2pContext.GhostPeerIds.add(n.extData.peerId),null===(d=f.p2pContext.PeerSched)||void 0===d||d.closePeer(n.extData.peerId),t.abrupt("return","break");case 49:c=-1,e.reportDownloadBlockSuccess(n),n.onDownloadBlockSucceed(),t.next=68;break;case 54:if("not_found"!==p.status){t.next=62;break}s=!1,a=void 0,c>=0&&f.retry(c),f.p2pContext.Config.allowPrintLog(4)&&console.log("not_found!!! receive data fragname："+f.frag.getFragmentName()+" peerId: "+n.extData.peerId+" sliceId "+f.frag.getBlockBelongSlice(c)+" blockId "+c),n.onDownloadBlockFailed(),t.next=68;break;case 62:if("overload"!==p.status){t.next=68;break}return c>=0&&f.retry(c),f.p2pContext.Config.allowPrintLog(4)&&console.log("overload!!! receive data fragname："+f.frag.getFragmentName()+" peerId: "+n.extData.peerId+" sliceId "+f.frag.getBlockBelongSlice(c)+" blockId "+c),o.status=r.ABANDONED,n.onDownloadBlockFailed(),t.abrupt("return","break");case 68:case"end":return t.stop()}},t)});case 5:return t.delegateYield(l(),"t0",6);case 6:if("break"!==(h=t.t0)){t.next=9;break}return t.abrupt("break",13);case 9:if("continue"!==h){t.next=11;break}return t.abrupt("continue",11);case 11:t.next=5;break;case 13:return this.p2pContext.Config.allowPrintLog(4)&&console.log(this.frag.getFragmentName()+" : stop process peer "+n.extData.peerId),t.abrupt("return");case 15:case"end":return t.stop()}},t,this)})),function(t,n,r){return e.apply(this,arguments)})}]),c}(),Ct=function(){function t(e){B()(this,t),j()(this,"url",void 0),this.url=e}return _()(t,[{key:"FetchSize",value:function(t){var e=this;return null==t&&(t=!1),new u.a(function(n){fetch(e.url,{method:"HEAD",cache:t?"default":"no-store"}).then(function(t){if(t.ok&&null!=t.headers.get("Content-Length")){var e=s()(t.headers.get("Content-Length"));n(null!=e?e:void 0)}else n(void 0)}).catch(function(t){n(void 0)})})}},{key:"FetchPart",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;null==o&&(o=!1);var i={};n>=0&&r>0&&(i.Range="bytes="+n+"-"+(r-1));var a,s=!!window.AbortController,c={mode:"cors",method:"GET",headers:i,cache:o?"default":"no-store"};return s&&(a=new AbortController,c.signal=a.signal),new u.a(function(n){var r=G()(function(){a&&a.abort(),n({state:{ok:!1,msg:"HTTP Part fetch response timeout "+t+" ms, aborted when CDN fetching"},data:void 0})},t);fetch(e.url,c).then(function(t){if(t.ok){if(clearTimeout(r),null!=t.body)return t.arrayBuffer();n({state:{ok:!1,msg:"HTTP Part fetch empty body, status code: "+t.status.toString()+" ("+t.statusText+")"},data:void 0})}else n({state:{ok:!1,msg:"HTTP Part fetch error, status code: "+t.status.toString()+" ("+t.statusText+")"},data:void 0})}).then(function(t){var e=new Uint8Array(t);n({state:{ok:!0,msg:"ok"},data:e})}).catch(function(t){n({state:{ok:!1,msg:"HTTP Part fetch error, message: "+t.toString()},data:void 0})})})}},{key:"FetchPartByBlock",value:function(t,e,n,r,o,i){var a=this;if(r==o)return new u.a(function(t){t({ok:!0,msg:"ok"})});null==i&&(i=!1);var s={};r>=0&&o>0&&(s.Range="bytes="+r+"-"+(o-1));var c,l=!!window.AbortController,h={mode:"cors",method:"GET",headers:s,cache:i?"default":"no-store"},f=!1;return l&&(c=new AbortController,h.signal=c.signal),new u.a(function(r){var o=G()(function(){c&&c.abort(),f=!0,r({ok:!1,msg:"HTTP Stream fetch response timeout "+t+" ms, aborted when CDN fetching"})},t);fetch(a.url,h).then(function(t){if(t.ok){if(null!=t.body)return clearTimeout(o),t.body;r({ok:!1,msg:"HTTP Stream fetch empty body, status code: "+t.status.toString()+" ("+t.statusText+")"})}else r({ok:!1,msg:"HTTP Stream fetch error, status code: "+t.status.toString()+" ("+t.statusText+")"})}).then(function(t){var o=null==t?void 0:t.getReader(),i=new Uint8Array(0),a=0;null==o||o.read().then(function t(s){if(!1===f)if(void 0!==s.value){var c=s.value;if(i.length>0){var u=new Uint8Array(i.length+c.length);u.set(i,0),u.set(c,i.length),c=u}for(var l,h=0;;){if(!((l=c.subarray(h,h+n)).length>=n)){i=l;break}e(l,a++,!1),i=new Uint8Array(0),h+=n}s.done?(e(i,a++,!0),r({ok:!0,msg:"ok"})):null==o||o.read().then(t).catch(function(t){r({ok:!1,msg:"HTTP Stream fetch reader error, message: "+t.toString()})})}else s.done&&(e(i,a++,!0),r({ok:!0,msg:"ok"}))}).catch(function(t){r({ok:!1,msg:"HTTP Stream fetch reader error, message: "+t.toString()})})}).catch(function(t){r({ok:!1,msg:"HTTP Stream fetch error, message: "+t.toString()})})})}}]),t}(),mt=function(){function t(e){B()(this,t),j()(this,"p2pContext",void 0),j()(this,"fragMan",void 0),j()(this,"downloadForceStopArray",new X.a),this.p2pContext=e,this.fragMan=new q.d(this.p2pContext)}return _()(t,[{key:"addDownloadTask",value:function(t,e,n){return this.fragMan.addFragment(t,e,n),void 0!==this.fragMan.getFragment(t)}},{key:"startDownload",value:function(t,e,n,r){var o=this,i=this.fragMan.getFragment(n);if(null!=i){var a=i;void 0!==t&&a.setSliceIds(t.getSliceIds());var s=new Ct(e);if(a.setCrcErrorCallback(function(){o.checkFragmentData(a,s)}),0!=a.getFragmentSize())if(null==t||void 0!==t&&0==t.getConnectedPeers().length)this.p2pContext.CDNFetchTaskWorker.post(function(){return a.doOnceQueryServer(),s.FetchPartByBlock(o.p2pContext.Config.fetchCDNTimeoutMs,function(t,e,n){e>=0&&e<a.getBlockCount()&&a.setBlockData(e,t,q.b.SERVER,q.a.SEED)||o.p2pContext.P2PDataCollectionStatus.addWastedDataSize(t.byteLength,pt.e.CDN_REPEAT,{fragname:a.getFragmentName(),sliceIds:a.getSliceIds()})},a.getBlockSize(),0,a.getFragmentSize())},!1).then(function(t){null!=t&&t.ok||a.setNonP2PFragmentData(void 0,q.a.SEED,null==t?void 0:t.msg)});else{var c=function(t){if(t.length>1){var e=Q()(t).call(t),n=new Array;k()(e).call(e,function(t){var e=a.getSliceBlockRange(t);n.push(e[0]),n.push(e[1])});for(var r=-1,i=-1,c=0;c<n.length;c+=2)-1==r?(r=n[c],i=n[c+1]):(i==n[c]||(null!=i&&r!=i&&i-1>=0&&o.pullFragmentData(a,s,r,i-1,q.a.SEED),r=n[c]),i=n[c+1]);null!=r&&null!=i&&r!=i&&i-1>=0&&o.pullFragmentData(a,s,r,i-1,q.a.SEED)}else k()(t).call(t,function(t){var e=a.getSliceBlockRange(t);e[0]>=0&&e[1]>0&&e[0]!=e[1]&&e[1]-1>=0&&o.pullFragmentData(a,s,e[0],e[1]-1,q.a.SEED)})},l=new xt(this.p2pContext,a),h=Array();if(null!=r){var f=new u.a(function(t){G()(function(){t(!1)},r)});h.push(f)}var p=new u.a(function(t){o.downloadForceStopArray.set(n,t)});h.push(p);var d=new u.a(function(e){l.startDownload(t,c),a.onFinished(function(t){e(!0)})});h.push(d),u.a.race(h).then(function(t){o.stopDownload(a.getFragmentName()),t||(l.stopDownload(),o.checkFragmentData(a,s))})}else this.p2pContext.FallbackFetchTaskWorker.post(function(){return a.doOnceQueryServer(),s.FetchPart(o.p2pContext.Config.fetchCDNTimeoutMs)},!1).then(function(t){null!=t&&t.state.ok?a.setNonP2PFragmentData(t.data,q.a.LACKED):a.setNonP2PFragmentData(void 0,q.a.LACKED,null==t?void 0:t.state.msg)})}}},{key:"checkFragmentData",value:function(t,e){for(var n=void 0,r=0;r<t.getBlockCount();++r)t.isBlockFinished(r)&&null!=n?(this.pullFragmentData(t,e,n,r-1,q.a.LACKED),n=void 0):t.isBlockFinished(r)||null!=n||(n=r);null!=n&&this.pullFragmentData(t,e,n,t.getBlockCount()-1,q.a.LACKED)}},{key:"pullFragmentData",value:function(t,e,n,r,o){var i=this;this.p2pContext.FallbackFetchTaskWorker.post(function(){return t.getBlockByteRange(n)[0]==t.getBlockByteRange(r)[1]?new u.a(function(t){t({ok:!0,msg:"ok"})}):(t.doOnceQueryServer(),e.FetchPartByBlock(i.p2pContext.Config.fetchCDNTimeoutMs,function(e,a,s){(a+=n)>=n&&a<=r&&t.setBlockData(a,e,q.b.SERVER,o)||i.p2pContext.P2PDataCollectionStatus.addWastedDataSize(e.byteLength,pt.e.CDN_REPEAT,{fragname:t.getFragmentName(),sliceIds:t.getSliceIds()})},t.getBlockSize(),t.getBlockByteRange(n)[0],t.getBlockByteRange(r)[1]))},!1).then(function(e){null!=e&&e.ok||t.setNonP2PFragmentData(void 0,o,null==e?void 0:e.msg)})}},{key:"stopDownload",value:function(t){var e=this.downloadForceStopArray.get(t);null!=e&&(e(!1),this.downloadForceStopArray.delete(t))}},{key:"destroy",value:function(){var t;k()(t=this.downloadForceStopArray).call(t,function(t){t(!1)}),this.downloadForceStopArray.clear()}}]),t}(),wt=n(176),St=n.n(wt),kt=n(38),bt=n.n(kt),Pt=n(9),Et=n.n(Pt),At=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:255,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];B()(this,t),j()(this,"maxLine",255),j()(this,"logBuffer",[]),j()(this,"isStart",!1),this.maxLine=e,this.isStart=n}return _()(t,[{key:"formatTime",value:function(t){var e,n,r,o,i,a=function(t,e){for(var n=t.toString();n.length<e;)n="0"+n;return n};return Et()(e=Et()(n=Et()(r=Et()(o=Et()(i="".concat(a(t.getMonth()+1,2),"-")).call(i,a(t.getDate(),2)," ")).call(o,a(t.getHours(),2),":")).call(r,a(t.getMinutes(),2),":")).call(n,a(t.getSeconds(),2),".")).call(e,a(t.getMilliseconds(),3))}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.isStart)for(this.logBuffer.push(this.formatTime(new Date)+" : "+t);this.logBuffer.length>this.maxLine;)this.logBuffer.shift()}},{key:"start",value:function(){this.isStart=!0}},{key:"stop",value:function(){this.isStart=!1}},{key:"clear",value:function(){var t;bt()(t=this.logBuffer).call(t,0,this.logBuffer.length)}},{key:"get",value:function(){var t,e="";return k()(t=this.logBuffer).call(t,function(t){e+=t+"\n"}),e}},{key:"download",value:function(){var t=document.createElement("a");t.href=St.a.createObjectURL(new Blob([this.get()])),t.download="logfile.log",t.click(),window.URL.revokeObjectURL(t.href)}}]),t}(),Rt=n(177),It=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;B()(this,t),j()(this,"latestWorkerId",-1),j()(this,"minAllowRunningWorkerId",0),j()(this,"tasks",[]),j()(this,"mutex",new ht.c),j()(this,"cv",new ht.a),e<0&&(e=0),this.addWorker(e)}var e,n,r;return _()(t,[{key:"post",value:(r=h()(i.a.mark(function t(e){var n,r=this,o=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],t.next=3,this.mutex.lock();case 3:return t.abrupt("return",new u.a(function(t){var o,a={task:(o=h()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)}),r:function(e){return t(e)}};n?r.tasks.unshift(a):r.tasks.push(a),r.cv.notifyOne(),r.mutex.unlock()}));case 4:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getTask",value:(n=h()(i.a.mark(function t(e){var n,r,o=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.next=3,this.mutex.lock();case 3:return t.next=5,this.cv.waitUntil(this.mutex,function(){return e<o.minAllowRunningWorkerId?(n=!0,!0):o.tasks.length>0});case 5:return!1===n&&(r=this.tasks.shift()),this.mutex.unlock(),t.abrupt("return",r);case 8:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"workerCoroutine",value:(e=h()(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTask(e);case 2:if(null==(n=t.sent)){t.next=11;break}return t.t0=n,t.next=7,n.task();case 7:t.t1=t.sent,t.t0.r.call(t.t0,t.t1),t.next=12;break;case 11:return t.abrupt("break",14);case 12:t.next=0;break;case 14:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"getWorkerNum",value:function(){return this.latestWorkerId-this.minAllowRunningWorkerId+1}},{key:"addWorker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t<0&&(t=0);for(var e=0;e<t;e++)this.latestWorkerId++,this.workerCoroutine(this.latestWorkerId);return this.getWorkerNum()}},{key:"removeWorker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t<0&&(t=0);for(var e=this.getWorkerNum(),n=0;n<t&&e>0;n++)this.minAllowRunningWorkerId++,this.cv.notifyAll(),e=this.getWorkerNum();return e}},{key:"removeAllTask",value:function(){for(;this.tasks.length>0;){var t=this.tasks.pop();null!=t&&t.r(void 0)}}},{key:"removeAllWorker",value:function(){this.minAllowRunningWorkerId=this.latestWorkerId+1,this.cv.notifyAll()}},{key:"setWorkerNum",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)-this.getWorkerNum();t>0&&this.addWorker(t),t<0&&this.removeWorker(0-t)}}]),t}(),Dt=n(64),Lt=n(100),Tt=function(){function t(){B()(this,t),j()(this,"remainingShareQuotaQueue",new Dt.a(10))}return _()(t,[{key:"addFragmentDataCollection",value:function(t){this.remainingShareQuotaQueue.push(new Lt.a(t.getRemainingShareQuotaBytes()))}},{key:"takeShareQuota",value:function(t){for(var e=0;!(this.remainingShareQuotaQueue.empty()||e>=t);){var n=t-e;if(n>0){var r=n,o=this.remainingShareQuotaQueue.front();r>o.data&&(r=o.data),e+=r,o.data-=r,o.data<=0&&this.remainingShareQuotaQueue.pop()}}return e}}]),t}(),Ft=n(56);!function(t){t[t.DONE=0]="DONE",t[t.ERROR=1]="ERROR",t[t.NOTFOUND=2]="NOTFOUND"}(gt||(gt={}));var Ot,Nt=function(){function t(e,n,r){var o=this;B()(this,t),j()(this,"Config",void 0),j()(this,"CDNFetchTaskWorker",new It),j()(this,"FallbackFetchTaskWorker",new It),j()(this,"P2PDataCollectionStatus",new pt.c),j()(this,"LogFile",new At(Number.MAX_VALUE)),j()(this,"guid",void 0),j()(this,"P2P",void 0),j()(this,"CurPeerId",""),j()(this,"DataFetch",void 0),j()(this,"FragMan",void 0),j()(this,"PeerSched",void 0),j()(this,"GhostPeerIds",new v.a),j()(this,"printExtLog",void 0),j()(this,"eventReportCallback",void 0),j()(this,"sliceIdAutoChangeIntervalSignal",new ht.d),j()(this,"totalSistersCount",1),j()(this,"tabsCheckInterval",3e3),j()(this,"tabsCheckTimer",null),this.Config=e,this.printExtLog=n,this.eventReportCallback=r,this.compatibleRTC(),this.guid=this.genGuid4(),this.P2P=new Ut(this),this.DataFetch=new mt(this),this.FragMan=this.DataFetch.fragMan,this.tabsCheckTimer=p()(function(){return o.checkMultipleTabs()},this.tabsCheckInterval+100*Math.random())}return _()(t,[{key:"onConfigurationUpdate",value:function(t){N()(t).call(t,"cdnFetchInstances")&&this.CDNFetchTaskWorker.getWorkerNum()>0&&(this.printExtLog(1,"[Notify] cdnFetchInstances: "+this.CDNFetchTaskWorker.getWorkerNum()+" -> "+this.Config.cdnFetchInstances),this.Config.allowPrintLog(1)&&console.log("[Notify] cdnFetchInstances: "+this.CDNFetchTaskWorker.getWorkerNum()+" -> "+this.Config.cdnFetchInstances),this.CDNFetchTaskWorker.setWorkerNum(this.Config.cdnFetchInstances)),N()(t).call(t,"fallbackCDNFetchInstances")&&this.FallbackFetchTaskWorker.getWorkerNum()>0&&(this.printExtLog(1,"[Notify] fallbackCDNFetchInstances: "+this.FallbackFetchTaskWorker.getWorkerNum()+" -> "+this.Config.fallbackCDNFetchInstances),this.Config.allowPrintLog(1)&&console.log("[Notify] fallbackCDNFetchInstances: "+this.FallbackFetchTaskWorker.getWorkerNum()+" -> "+this.Config.fallbackCDNFetchInstances),this.FallbackFetchTaskWorker.setWorkerNum(this.Config.fallbackCDNFetchInstances))}},{key:"setConfiguration",value:function(t){var e=this,n=function(t,n,r){if(1==r){var o="Config: "+t+" = "+F()(n);e.printExtLog(1,o),e.Config.allowPrintLog(2)&&console.log(o),e.sliceIdAutoChangeIntervalSignal.call()}else{var i="[Warning] Config: "+t+" = "+F()(n)+" not allowed.";e.printExtLog(1,i),e.Config.allowPrintLog(2)&&console.log(i)}};try{for(var r=JSON.parse(t),o=function(){var t,r=I()(a[i],2),o=r[0],s=r[1];if(A()(o)==A()(""))switch(o){case"trackerServer":A()(s)==A()("")&&(P()(s).call(s,"wss://")||P()(s).call(s,"ws://"))&&0==(P()(s).call(s,"wss:///")||P()(s).call(s,"ws:///"))?(e.Config[o]=s,n(o,s,!0)):n(o,s,!1);break;case"stunServers":case"natCheckStunServers":var c=[];s instanceof Array?(k()(s).call(s,function(t){A()(t)==A()("")&&new RegExp("^(stun|turn):.+?:[0-9]{1,5}$").exec(t)?c.push(t):(e.printExtLog(1,"Value: "+s+" not stun/turn server address."),e.Config.allowPrintLog(1)&&console.log("Value: "+s+" not stun/turn server address."))}),c.length>0&&(e.Config[o]=c,n(o,s,!0),"natCheckStunServers"==o&&e.P2P.tryToCheckNatType())):n(o,s,!1);break;default:if(e.Config.hasOwnProperty(o+"AllowedRange")&&e.Config.hasOwnProperty(o)){var u=e.Config[o+"AllowedRange"][0],l=e.Config[o+"AllowedRange"][1];e.printExtLog(2,"Key: "+o+" found range."),e.Config.allowPrintLog(2)&&console.log("Key: "+o+" found range."),A()(s)==A()(0)&&s>=u&&s<=l?(e.Config[o]=s,n(o,s,!0)):n(o,s,!1)}else e.Config.hasOwnProperty(o)&&A()(s)==A()(!0)&&w()(t=e.Config.allowedChangeBooleanValues).call(t,o)>-1?(e.Config[o]=s,n(o,s,!0)):n(o,s,!1)}},i=0,a=L()(r);i<a.length;i++)o();this.onConfigurationUpdate(C()(r)),this.eventReportCallback(new Ft.ConfigUpdateEvent(r))}catch(t){this.printExtLog(1,"Parse / Set Configuration Fail: "+t),this.Config.allowPrintLog(1)&&console.warn("Parse / Set Configuration Fail: "+t)}}},{key:"destroy",value:function(){this.GhostPeerIds.clear(),this.P2P.destroy(),this.DataFetch.destroy(),this.FragMan.destroy(),this.CDNFetchTaskWorker.removeAllWorker(),this.CDNFetchTaskWorker.removeAllTask(),this.FallbackFetchTaskWorker.removeAllWorker(),this.FallbackFetchTaskWorker.removeAllTask(),null!==this.tabsCheckTimer&&clearInterval(this.tabsCheckTimer)}},{key:"compatibleRTC",value:function(){var t=window.RTCDataChannel||window.DataChannel;t&&(window.RTCDataChannel||(window.RTCDataChannel=t),window.DataChannel||(window.DataChannel=t));var e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;e&&(window.RTCPeerConnection||(window.RTCPeerConnection=e),window.mozRTCPeerConnection||(window.mozRTCPeerConnection=e),window.webkitRTCPeerConnection||(window.webkitRTCPeerConnection=e))}},{key:"genGuid4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}},{key:"checkMultipleTabs",value:function(){var t=window.localStorage;if(void 0!==t){var e=void 0,n=t.getItem("sistersInstances");if(null!==n)try{e=JSON.parse(n)}catch(t){}void 0===e&&(e=new Object);var r=y()();e[this.guid]=r;var o=[],i=0;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=e[a];Math.abs(s-r)>2.5*this.tabsCheckInterval?o.push(a):++i}for(var c=0;c<o.length;++c)delete e[o[c]];t.setItem("sistersInstances",F()(e)),this.totalSistersCount=i}}}]),t}();!function(t){t[t.NON_NAT=-1]="NON_NAT",t[t.CONE=0]="CONE",t[t.SYMMETRIC=1]="SYMMETRIC"}(Ot||(Ot={}));var Ut=function(){function t(e){B()(this,t),j()(this,"p2pContext",void 0),j()(this,"cancelToken",{hasCancel:!1}),j()(this,"sliceIdController",void 0),j()(this,"P2PDataShareQuotaController",new Tt),this.p2pContext=e,this.tryToCheckNatType()}var e,n;return _()(t,[{key:"tryToCheckNatType",value:function(){var t,e,n=this;this.p2pContext.Config.natCheckStunServers.length<=1&&(null===(t=this.p2pContext.PeerSched)||void 0===t||null===(e=t.getTracker())||void 0===e||e.onNatTypeUpdated(Ot.CONE)),this.checkNatType(this.p2pContext.Config.natCheckStunServers[0],this.p2pContext.Config.natCheckStunServers[1]).then(function(t){var e,r;null===(e=n.p2pContext.PeerSched)||void 0===e||null===(r=e.getTracker())||void 0===r||r.onNatTypeUpdated(t)})}},{key:"checkNatType",value:(n=h()(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new u.a(function(t){var r={},o=new RTCPeerConnection({iceServers:[{urls:e},{urls:n}]});o.createDataChannel("MisakaNetwork-NAT-Check"),o.onicecandidate=function(e){var n;if(e.candidate&&-1!==w()(n=e.candidate.candidate).call(n,"srflx")){var o=function(t){for(var e,n={foundation:(e=0===w()(t).call(t,"a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:e[1],protocol:e[2].toLowerCase(),priority:s()(e[3],10),ip:e[4],port:s()(e[5],10),type:e[7],relatedAddress:"",relatedPort:NaN,tcpType:"unknown"},r=8;r<e.length;r+=2)switch(e[r]){case"raddr":n.relatedAddress=e[r+1];break;case"rport":n.relatedPort=s()(e[r+1],10);break;case"tcptype":n.tcpType=e[r+1]}return n}(e.candidate.candidate);r[o.relatedPort]||(r[o.relatedPort]=[]),r[o.relatedPort].push(o.port)}else if(!e.candidate)if(1===C()(r).length){var i=r[C()(r)[0]];t(1===i.length?Ot.CONE:Ot.SYMMETRIC)}else t(Ot.NON_NAT)},o.createOffer().then(function(t){return o.setLocalDescription(t)})}));case 1:case"end":return t.stop()}},t)})),function(t,e){return n.apply(this,arguments)})},{key:"initPeers",value:(e=h()(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.a.create(this.p2pContext,this.cancelToken,e);case 2:n=t.sent,this.p2pContext.printExtLog(0,"Last Order is Connected."),this.p2pContext.Config.allowPrintLog(0)&&console.info("[SistersPlayer] Last Order is Connected."),1==this.cancelToken.hasCancel?n.destroy():(this.p2pContext.PeerSched=n,this.sliceIdController=new Rt.a(this.p2pContext,this.p2pContext.PeerSched),this.p2pContext.FragMan.setSliceIdController(this.sliceIdController),this.p2pContext.PeerSched.beginConnectPeers());case 6:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"createDownloadFragment",value:function(t,e,n){void 0!==this.p2pContext.FragMan.getFragment(t)&&this.p2pContext.FragMan.deleteFragment(t),this.p2pContext.DataFetch.addDownloadTask(t,null!=e&&e>=0?e:0,n)}},{key:"startDownloadFragment",value:function(t,e,n,r){this.createDownloadFragment(t,n,r),this.p2pContext.DataFetch.startDownload(this.p2pContext.PeerSched,e,t)}},{key:"stopDownloadFragment",value:function(t){this.p2pContext.DataFetch.stopDownload(t),this.p2pContext.FragMan.deleteFragmentUntil(t)}},{key:"onFragmentFinished",value:function(t,e){var n=this;u.a.resolve().then(function(){var r=n.p2pContext.FragMan.getFragment(t);null!=r?r.onFinished(function(t){var o;void 0!==t&&t.getFragStat()==q.c.END_SUCCESS?(e(gt.DONE,t.getFragmentData()),null!=n.p2pContext.P2PDataCollectionStatus&&null!=r&&n.p2pContext.P2PDataCollectionStatus.addLastestFragmentDataCollection(r),null===(o=n.sliceIdController)||void 0===o||o.addFragmentFetchData(t)):(n.p2pContext.P2PDataCollectionStatus.addFetchError(pt.b.ERROR_TO_RELOAD),e(gt.ERROR,void 0,null==r?void 0:r.getFragEndErrorMsg()))}):e(gt.NOTFOUND)})}},{key:"destroy",value:function(){var t,e;null===(t=this.sliceIdController)||void 0===t||t.destroy(),null===(e=this.p2pContext.PeerSched)||void 0===e||e.destroy(),this.cancelToken.hasCancel=!0}}]),t}()},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(15),o=n(14),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e,n){n(87);var r=n(194),o=n(14),i=n(49),a=n(28),s=n(48),c=n(12)("toStringTag");for(var u in r){var l=o[u],h=l&&l.prototype;h&&i(h)!==c&&a(h,c,u),s[u]=s.Array}},function(t,e,n){"use strict";var r=n(140).charAt,o=n(43),i=n(111),a=o.set,s=o.getterFor("String Iterator");i(String,"String",function(t){a(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=s(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})})},function(t,e,n){t.exports=n(298)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return rt});var r,o=n(76),i=n.n(o),a=n(59),s=n.n(a),c=n(96),u=n.n(c),l=n(97),h=n.n(l),f=n(98),p=n.n(f),d=n(102),v=n.n(d),g=n(173),y=n.n(g),x=n(16),C=n.n(x),m=n(9),w=n.n(m),S=n(62),k=n.n(S),b=n(99),P=n.n(b),E=n(120),A=n.n(E),R=n(174),I=n.n(R),D=n(13),L=n.n(D),T=n(5),F=n.n(T),O=n(1),N=n.n(O),U=n(3),B=n.n(U),M=n(7),_=n.n(M),z=n(46),j=n.n(z),q=n(20),W=n.n(q),V=n(11),G=n.n(V),Y=n(2),Q=n.n(Y),H=n(4),X=n.n(H),K=n(0),J=n.n(K),$=n(23),Z=n(121),tt=n(77);function et(t,e){var n;if(void 0===h.a||null==u()(t)){if(s()(t)||(n=function(t,e){var n;if(t){if("string"==typeof t)return nt(t,e);var r=k()(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?p()(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){n=i()(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw a}}}}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}!function(t){t[t.GONE=0]="GONE",t[t.HIDDEN=1]="HIDDEN",t[t.BROADCAST=2]="BROADCAST"}(r||(r={}));var rt=function(){function t(e,n,r,o){Q()(this,t),J()(this,"p2pContext",void 0),J()(this,"pendingIncomingPeers",new G.a),J()(this,"pendingOutcomingPeers",new G.a),J()(this,"connectedPeers",new G.a),J()(this,"curSliceIds",void 0),J()(this,"cancelToken",void 0),J()(this,"trackerSourceParam",void 0),J()(this,"sliceId",void 0),J()(this,"allSeedboxConnectNumBySlice",new G.a),J()(this,"tracker",void 0),J()(this,"trackerConnecting",!1),this.trackerSourceParam=r,this.sliceId=o,this.p2pContext=e,this.cancelToken=n,this.curSliceIds=new W.a,this.updateAllSeedboxConnectNumBySlice()}var e,n,o,i,a;return X()(t,[{key:"allowedConnectNewPeer",value:function(){var t=this.pendingIncomingPeers.size+this.pendingOutcomingPeers.size<this.p2pContext.Config.connectingLimit,e=this.connectedPeers.size<this.p2pContext.Config.connectedLimit;return t&&e}},{key:"getLeechNeedConnectNum",value:function(){var t;return this.p2pContext.Config.leechConnectNum-j()(t=this.getConnectedPeers()).call(t,function(t){return t.peerRole==$.PeerRole.Leech}).length}},{key:"getSeedboxNeedConnectNum",value:function(t){var e=this.allSeedboxConnectNumBySlice.get(t);return e||(e=0),this.p2pContext.Config.seedboxConnectNumBySliceId-e}},{key:"recreateTracker",value:(a=_()(N.a.mark(function t(){var e=this;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new B.a(function(t){null!=e.tracker?(e.p2pContext.printExtLog(2,"Misaka will reconnect to the Last Order. (Service Redirect)"),e.p2pContext.Config.allowPrintLog(2)&&console.warn("Misaka will reconnect to the Last Order. (Service Redirect)"),e.tracker.destroy(),e.tracker=void 0,e.trackerConnecting=!0,Z.a.connect(e.p2pContext,e.trackerSourceParam,e,e.sliceId).then(function(n){e.tracker=n,e.trackerConnecting=!0,t(!0)}).catch(function(e){t(!1)})):t(!1)}));case 1:case"end":return t.stop()}},t)})),function(){return a.apply(this,arguments)})},{key:"getTracker",value:function(){return this.tracker}},{key:"getP2PContext",value:function(){return this.p2pContext}},{key:"checkGuidExist",value:function(t){var e,n=!1;return F()(e=this.connectedPeers).call(e,function(e){F()(e).call(e,function(e){e.extData.guid==t&&(n=!0)})}),n}},{key:"updateAllSeedboxConnectNumBySlice",value:function(){for(var t,e=new G.a,n=0;n<this.p2pContext.Config.sliceCount;n++)e.set(n,0);F()(t=this.connectedPeers).call(t,function(t){F()(t).call(t,function(t){var n;t.peerRole==$.PeerRole.Seedbox&&F()(n=t.seedSliceIds).call(n,function(t){var n=e.get(t);e.set(t,(n||0)+1)})})}),this.allSeedboxConnectNumBySlice=e;var r="Update Seedbox Connect Number By Slice: \n"+L()(I()(e));this.p2pContext.printExtLog(2,r),this.p2pContext.Config.allowPrintLog(2)&&console.log(r)}},{key:"checkVisibilityStateNeedChange",value:(i=_()(N.a.mark(function t(){var e=this;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new B.a(function(t){var n=e.connectedPeers.size<e.p2pContext.Config.connectedLimit,o=e.connectedPeers.size<=e.p2pContext.Config.revisibleMark;null!=e.tracker&&0==e.trackerConnecting?1==n&&1==o&&e.tracker.getVisibilityState()==r.GONE?(e.p2pContext.printExtLog(0,"Misaka will broadcast."),e.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Misaka will broadcast."),e.tracker.setSelfVisible(r.BROADCAST),t()):(0!=n||0!=o||e.tracker.getVisibilityState()!=r.BROADCAST&&e.tracker.getVisibilityState()!=r.HIDDEN||(e.p2pContext.printExtLog(0,"Misaka will gone."),e.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Misaka will gone."),e.tracker.setSelfVisible(r.GONE)),t()):t()}));case 1:case"end":return t.stop()}},t)})),function(){return i.apply(this,arguments)})},{key:"beginConnectPeers",value:(o=_()(N.a.mark(function t(){var e,n,r,o,i,a,s,c,u,l,h,f,p=this;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.cancelToken.hasCancel){t.next=25;break}if(!this.allowedConnectNewPeer()||null==this.tracker){t.next=21;break}return e=function(t){var e,n;return A()(e=P()(n=A()(t).call(t,function(t){return[Math.random(),t]})).call(n,function(t,e){return t[0]-e[0]})).call(e,function(t){return t[1]})},t.next=5,this.tracker.getPeers();case 5:for(n=t.sent,r=(r=n.peers)?e(r):new Array,o=n.leeches,i=this.getLeechNeedConnectNum(),o=o?k()(a=e(o)).call(a,0,i):new Array,this.p2pContext.printExtLog(2,"ready to connect leeches: "+L()(o)),this.p2pContext.Config.allowPrintLog(2)&&console.warn("ready to connect leeches: "+L()(o)),s=new Array,c=0;c<this.p2pContext.Config.sliceCount;c++)(u=n.seedboxes.get(c.toString()))&&(l=this.getSeedboxNeedConnectNum(c))>0&&(s=w()(s).call(s,k()(h=e(u)).call(h,0,l)));this.p2pContext.printExtLog(2,"ready to connect seedboxes: "+L()(s)),this.p2pContext.Config.allowPrintLog(2)&&console.warn("ready to connect seedboxes: "+L()(s)),(f=function(t,e){if(p.tracker){var n,r=et(e);try{var o=function(){var e=n.value;return p.p2pContext.GhostPeerIds.has(e)?(p.p2pContext.printExtLog(2,"has a ghost peerId: "+e),p.p2pContext.Config.allowPrintLog(2)&&console.warn("has a ghost peerId: "+e),"continue"):p.pendingOutcomingPeers.has(e)||p.pendingIncomingPeers.has(e)||p.connectedPeers.has(e)&&p.connectedPeers.get(e).length>0||p.p2pContext.CurPeerId===e?"continue":(p.tracker.connectPeer(e,function(t){p.pendingOutcomingPeers.set(e,t)}),p.allowedConnectNewPeer()||0!=t?void 0:"break")};for(r.s();!(n=r.n()).done;){var i=o();if("continue"!==i&&"break"===i)break}}catch(t){r.e(t)}finally{r.f()}}})(!0,s),f(!1,o),f(!1,r);case 21:return t.next=23,new B.a(function(t){return C()(function(){return t()},p.p2pContext.Config.getPeersIntervalMs)});case 23:t.next=0;break;case 25:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"IteratorToArray",value:function(t){for(var e=new Array;;){var n=t.next();if(n.done)break;e.push(n.value)}return e}},{key:"getConnectedPeers",value:function(){var t,e;return y()(t=this.IteratorToArray(v()(e=this.connectedPeers).call(e))).call(t,function(t){return t})}},{key:"getConnectingPeers",value:function(){var t,e,n;return w()(t=this.IteratorToArray(v()(e=this.pendingIncomingPeers).call(e))).call(t,this.IteratorToArray(v()(n=this.pendingOutcomingPeers).call(n)))}},{key:"onPeerConnectComplete",value:function(t,e){if(!1===t.isIncoming()?this.pendingOutcomingPeers.delete(t.extData.peerId):this.pendingIncomingPeers.delete(t.extData.peerId),!1!==e){if(this.cancelToken.hasCancel)return this.p2pContext.printExtLog(2,"Cancel connect. target peerId: "+t.extData.peerId+" when cur peerId: "+this.p2pContext.CurPeerId),this.p2pContext.Config.allowPrintLog(2)&&console.warn("Cancel connect. target peerId: "+t.extData.peerId+" when cur peerId: "+this.p2pContext.CurPeerId),void this.onPeerDisConnected(t);try{this.p2pContext.printExtLog(2,"peer connected: id:"+t.extData.peerId),this.p2pContext.Config.allowPrintLog(2)&&console.log("peer connected: id:"+t.extData.peerId),!1===this.connectedPeers.has(t.extData.peerId)&&this.connectedPeers.set(t.extData.peerId,new Array),this.connectedPeers.get(t.extData.peerId).push(t)}catch(t){console.log(t)}this.updateAllSeedboxConnectNumBySlice(),this.checkVisibilityStateNeedChange()}else t.close()}},{key:"onPeerDisConnected",value:function(t){t.close(),t.terminateAllPendingRequests();var e=this.connectedPeers.get(t.extData.peerId);if(void 0!==e){var n=j()(e).call(e,function(e){return e!=t});n.length>0?(this.p2pContext.printExtLog(2,"remove peerId ".concat(t.extData.peerId," connect.")),this.p2pContext.Config.allowPrintLog(2)&&console.log("remove peerId ".concat(t.extData.peerId," connect.")),this.connectedPeers.set(t.extData.peerId,n)):(this.p2pContext.printExtLog(2,"clear empty peerId ".concat(t.extData.peerId," connect from connectedPeers.")),this.p2pContext.Config.allowPrintLog(2)&&console.log("clear empty peerId ".concat(t.extData.peerId," connect from connectedPeers.")),this.connectedPeers.delete(t.extData.peerId))}this.updateAllSeedboxConnectNumBySlice(),this.checkVisibilityStateNeedChange()}},{key:"closePeer",value:function(t){var e=this,n=this.connectedPeers.get(t);void 0!==n&&F()(n).call(n,function(t){e.onPeerDisConnected(t)})}},{key:"initSliceId",value:function(t){void 0!==t&&this.curSliceIds.add(t)}},{key:"addSliceId",value:function(t){this.curSliceIds.add(t)}},{key:"deleteSliceId",value:function(t){this.curSliceIds.delete(t)}},{key:"getSliceIds",value:function(){return this.curSliceIds}},{key:"onPeerRelayMessage",value:(n=_()(N.a.mark(function t(e,n,r){var o,i,a,s,c,u,l,h,f,p,d=this;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.tracker){t.next=30;break}if("connect"!=(null==n?void 0:n.action)){t.next=29;break}if(!(void 0!==this.connectedPeers.get(e)&&this.connectedPeers.get(e).length>0||1==this.cancelToken.hasCancel||0==this.allowedConnectNewPeer()||this.p2pContext.GhostPeerIds.has(e)||null==(null==n||null===(o=n.data)||void 0===o?void 0:o.guid)||this.checkGuidExist(n.data.guid))){t.next=8;break}this.checkGuidExist(n.data.guid)&&(this.p2pContext.printExtLog(2,"refused connection, because GUID exist."),this.p2pContext.Config.allowPrintLog(2)&&console.warn("refused connection, because GUID exist.")),1==this.cancelToken.hasCancel&&(this.p2pContext.printExtLog(2,"refused connection, because exiting from the Misaka Network."),this.p2pContext.Config.allowPrintLog(2)&&console.warn("refused connection, because exiting from the Misaka Network.")),this.tracker.sendPeerResponse(e,r,"refused"),t.next=27;break;case 8:if((null==n||null===(i=n.data)||void 0===i?void 0:i.protocol)===this.p2pContext.Config.ProtocolVersion){t.next=12;break}this.tracker.sendPeerResponse(e,r,"protocol_incompatible"),t.next=27;break;case 12:return(s=new $.NyaPeer(this.p2pContext,this,!0)).extData.peerId=e,s.extData.guid=n.data.guid,this.pendingIncomingPeers.set(e,s),c=null==n||null===(a=n.data)||void 0===a?void 0:a.offer,s.answerNyaOffer(c,function(t){null!=d.tracker&&d.tracker.sendPeerCandidate(e,"answer",t)}).then(function(t){if(null!=d.tracker){var o=function(){d.tracker&&d.tracker.sendPeerResponse(e,r,"ok",{answer:t,role:{type:"peer"}})};if(s.parsePeerRole(n.data.role),s.peerRole==$.PeerRole.Seedbox){var i,a=!1;F()(i=s.seedSliceIds).call(i,function(t){d.getSeedboxNeedConnectNum(t)>0&&(a=!0)}),1==a?o():(d.p2pContext.printExtLog(2,"not need this seedbox: "+e),d.p2pContext.Config.allowPrintLog(2)&&console.log("not need this seedbox: "+e))}else o()}}),t.next=20,s.waitForConnected();case 20:if(!t.sent){t.next=24;break}this.onPeerConnectComplete(s,!0),t.next=27;break;case 24:this.onPeerConnectComplete(s,!1),this.p2pContext.printExtLog(2,"peer connect timeout "+e),this.p2pContext.Config.allowPrintLog(2)&&console.log("peer connect timeout "+e);case 27:t.next=30;break;case 29:"candidate"==(null==n?void 0:n.action)?(h=null===(u=n.data)||void 0===u?void 0:u.cand,f=null===(l=n.data)||void 0===l?void 0:l.direction,p=void 0,"offer"==f?p=this.pendingIncomingPeers.get(e):"answer"==f&&(p=this.pendingOutcomingPeers.get(e)),void 0!==p&&p.addRemoteCandidate(h)):this.tracker.sendPeerResponse(e,r,"not_implemented");case 30:case"end":return t.stop()}},t,this)})),function(t,e,r){return n.apply(this,arguments)})},{key:"onPeerRequestMessage",value:function(t,e){var n=this,r=e.requestId;switch(e.action){case"getFragSlices":var o=e.data.frag,i=this.p2pContext.FragMan.getFragment(o);if(void 0!==i&&i.canShare()){var a,s=new Array,c=0;if(this.p2pContext.Config.p2pTransferSecondhandDataEnable)for(var u=0;u<this.p2pContext.Config.sliceCount;++u){var l=i.getSliceFinishedBlockRange(u);i.getSliceIds().has(u)||(s.push(new tt.a(u,!1,l[1])),i.isSliceFinished(u)&&++c)}F()(a=i.getSliceIds()).call(a,function(t){s.push(new tt.a(t,!0,i.getSliceBlockRange(t)[1])),++c}),this.p2pContext.printExtLog(4,o+" 可提供的sliceinfo: "+L()(s)),this.p2pContext.Config.allowPrintLog(4)&&console.log(o+" 可提供的sliceinfo: "+L()(s)),t.sendResponseMessage(function(){return{requestId:r,status:"ok",data:{final:c==n.p2pContext.Config.sliceCount,sliceInfos:s}}})}else void 0===i||i.canShare()?t.sendResponseMessage(function(){return{requestId:r,status:"not_found"}}):t.sendResponseMessage(function(){return{requestId:r,status:"overload"}});break;case"downloadBlock":var h=e.data.frag,f=e.data.blockId,p=this.p2pContext.FragMan.getFragment(h),d=null==p?void 0:p.getBlock(f);if(void 0!==d){var v=performance.now();d.onDataResolved(function(e){void 0!==e?p.canShare()?t.sendResponseMessage(function(){return performance.now()-v>n.p2pContext.Config.uploadMaxWaitTimeoutMs?(n.p2pContext.printExtLog(2,"drop datablock response due to timeout"),void(n.p2pContext.Config.allowPrintLog(2)&&console.log("drop datablock response due to timeout"))):(p.addShareData(f,e.byteLength),null!=n.p2pContext.P2PDataCollectionStatus&&n.p2pContext.P2PDataCollectionStatus.addP2PSendSizeRealtime(e.byteLength),{requestId:r,status:"ok",data:e})}):(n.p2pContext.printExtLog(2,(null==p?void 0:p.getFragmentName())+" is overload"),n.p2pContext.Config.allowPrintLog(2)&&console.warn((null==p?void 0:p.getFragmentName())+" is overload"),t.sendResponseMessage(function(){return{requestId:r,status:"overload"}})):t.sendResponseMessage(function(){return{requestId:r,status:"not_found"}})})}else t.sendResponseMessage(function(){return{requestId:r,status:"not_found"}})}}},{key:"reportDownloadBlockSuccess",value:function(t){var e;t.extData.isDownloadBlockReport||(this.p2pContext.P2PDataCollectionStatus.addPeerConnectCount(!0),Math.random()<this.p2pContext.Config.reportPeerSuccessProbability&&(null===(e=this.tracker)||void 0===e||e.reportDownloadBlockSuccessOrAwaysFail(t.extData.peerId,!0)),t.extData.isDownloadBlockReport=!0)}},{key:"reportDownloadBlockAwaysFail",value:function(t){var e;this.p2pContext.P2PDataCollectionStatus.addPeerConnectCount(!1),Math.random()<this.p2pContext.Config.reportPeerFailedProbability&&(null===(e=this.tracker)||void 0===e||e.reportDownloadBlockSuccessOrAwaysFail(t.extData.peerId,!1))}},{key:"destroy",value:function(){var t,e,n,r=this;null!=this.tracker&&(this.tracker.destroy(),this.tracker=void 0),F()(t=this.pendingIncomingPeers).call(t,function(t){t.close()}),F()(e=this.pendingOutcomingPeers).call(e,function(t){t.close()}),F()(n=this.getConnectedPeers()).call(n,function(t){r.onPeerDisConnected(t)})}}],[{key:"create",value:(e=_()(N.a.mark(function e(n,r,o,i){var a,s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new t(n,r,o,i)).trackerConnecting=!0,e.next=4,Z.a.connect(n,o,a,i);case 4:return s=e.sent,a.tracker=s,a.trackerConnecting=!1,e.abrupt("return",a);case 8:case"end":return e.stop()}},e)})),function(t,n,r,o){return e.apply(this,arguments)})}]),t}()},function(t,e,n){var r=n(85),o=n(54);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(24),o=n(17),i=n(25),a=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(i(s,t))return s[t];e||(e={});var n=[][t],u=!!i(e,"ACCESSORS")&&e.ACCESSORS,l=i(e,0)?e[0]:c,h=i(e,1)?e[1]:void 0;return s[t]=!!n&&!o(function(){if(u&&!r)return!0;var t={length:-1};u?a(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,l,h)})}},function(t,e,n){var r=n(34);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r,o,i,a=n(189),s=n(14),c=n(19),u=n(28),l=n(25),h=n(109),f=n(88),p=n(67),d=s.WeakMap;if(a){var v=h.state||(h.state=new d),g=v.get,y=v.has,x=v.set;r=function(t,e){return e.facade=t,x.call(v,t,e),e},o=function(t){return g.call(v,t)||{}},i=function(t){return y.call(v,t)}}else{var C=f("state");p[C]=!0,r=function(t,e){return e.facade=t,u(t,C,e),e},o=function(t){return l(t,C)?t[C]:{}},i=function(t){return l(t,C)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports=!0},function(t,e,n){var r=n(115),o=n(29).f,i=n(28),a=n(25),s=n(192),c=n(12)("toStringTag");t.exports=function(t,e,n,u){if(t){var l=n?t:t.prototype;a(l,c)||o(l,c,{configurable:!0,value:e}),u&&!r&&i(l,"toString",s)}}},function(t,e,n){t.exports=n(330)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,n){var r=n(115),o=n(66),i=n(12)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(28);t.exports=function(t,e,n,o){o&&o.enumerable?t[e]=n:r(t,e,n)}},function(t,e,n){var r=n(26),o=n(143),i=n(27),a=n(42),s=n(72),c=n(142),u=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,p,d,v,g,y=n&&n.that,x=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_ITERATOR),m=!(!n||!n.INTERRUPTED),w=a(e,y,1+x+m),S=function(t){return l&&c(l),new u(!0,t)},k=function(t){return x?(r(t),m?w(t[0],t[1],S):w(t[0],t[1])):m?w(t,S):w(t)};if(C)l=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(o(h)){for(f=0,p=i(t.length);p>f;f++)if((d=k(t[f]))&&d instanceof u)return d;return new u(!1)}l=h.call(t)}for(v=l.next;!(g=v.call(l)).done;){try{d=k(g.value)}catch(t){throw c(l),t}if("object"==typeof d&&d&&d instanceof u)return d}return new u(!1)}},function(t,e,n){var r=n(199),o=n(202),i=n(151),a=n(236);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(66);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"EventReportType",function(){return r}),n.d(e,"DataReportTypeCode",function(){return o}),n.d(e,"ConfigUpdateEvent",function(){return u}),n.d(e,"TrackerClosedDataReportEvent",function(){return l});var r,o,i=n(2),a=n.n(i),s=n(0),c=n.n(s);!function(t){t[t.DataReport=0]="DataReport",t[t.ConfigUpdate=1]="ConfigUpdate"}(r||(r={})),function(t){t[t.TrackerClosedReport=0]="TrackerClosedReport"}(o||(o={}));var u=function t(e){a()(this,t),c()(this,"type",r.ConfigUpdate),c()(this,"body",void 0),this.body=e},l=function t(e){a()(this,t),c()(this,"type",r.DataReport),c()(this,"body",void 0),this.body={code:o.TrackerClosedReport,data:e}}},function(t,e,n){var r=n(240),o=n(241),i=n(151),a=n(243);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){t.exports=n(244)},function(t,e,n){t.exports=n(305)},function(t,e,n){t.exports=n(274)},function(t,e,n){t.exports=n(256)},function(t,e,n){t.exports=n(318)},function(t,e,n){t.exports=n(339)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(5),o=n.n(r),i=n(2),a=n.n(i),s=n(4),c=n.n(s),u=n(0),l=n.n(u),h=function(){function t(e){a()(this,t),l()(this,"elements",void 0),l()(this,"_size",void 0),this.elements=new Array,this._size=e}return c()(t,[{key:"push",value:function(t){return this.elements.length==this._size&&this.pop(),this.elements.push(t),!0}},{key:"pop",value:function(){return this.elements.shift()}},{key:"front",value:function(){return this.elements.length>0?this.elements[0]:void 0}},{key:"forEach",value:function(t,e){var n;o()(n=this.elements).call(n,t)}},{key:"size",value:function(){return this.elements.length}},{key:"empty",value:function(){return 0==this.size()}},{key:"clear",value:function(){this.elements=new Array}}]),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"Configuration",function(){return u});var r=n(2),o=n.n(r),i=n(4),a=n.n(i),s=n(0),c=n.n(s),u=function(){function t(){o()(this,t),c()(this,"ProtocolVersion",6),c()(this,"trackerServer","wss://tracker.chat.bilibili.com/"),c()(this,"stunServers",["stun:stun6.chat.bilibili.com:3478","stun:stun.chat.bilibili.com:3478"]),c()(this,"natCheckStunServers",["stun:stun-1.chat.bilibili.com:3478","stun:stun-2.chat.bilibili.com:3478"]),c()(this,"allowedChangeBooleanValues",["p2pTransferSecondhandDataEnable","multiTabsShareLimitEnable","useSeedBox"]),c()(this,"nonP2PFragmentCountAllowedRange",[0,8]),c()(this,"nonP2PFragmentCount",4),c()(this,"p2pBufferLengthSecAllowedRange",[0,8]),c()(this,"p2pBufferLengthSec",2.5),c()(this,"iceCandidatePoolSizeAllowedRange",[0,10]),c()(this,"iceCandidatePoolSize",10),c()(this,"serverTimeoutMsAllowedRange",[1e3,1e4]),c()(this,"serverTimeoutMs",3e3),c()(this,"peerConnectionTimeoutMsAllowedRange",[1e3,1e4]),c()(this,"peerConnectionTimeoutMs",5e3),c()(this,"peerTimeoutMsAllowedRange",[1e3,1e4]),c()(this,"peerTimeoutMs",3e3),c()(this,"uploadMaxWaitTimeoutMsAllowedRange",[1e3,1e4]),c()(this,"uploadMaxWaitTimeoutMs",2700),c()(this,"peerPacketLifetimeAllowedRange",[1e3,1e4]),c()(this,"peerPacketLifeTime",2500),c()(this,"refreshPeerProgressIntervalMsAllowedRange",[100,1e3]),c()(this,"refreshPeerProgressIntervalMs",200),c()(this,"sliceCount",4),c()(this,"blockSize",61440),c()(this,"connectingLimitAllowedRange",[1,64]),c()(this,"connectingLimit",8),c()(this,"connectedLimitAllowedRange",[1,64]),c()(this,"connectedLimit",12),c()(this,"leechConnectNumAllowedRange",[1,64]),c()(this,"leechConnectNum",4),c()(this,"seedboxConnectNumBySliceIdAllowedRange",[1,64]),c()(this,"seedboxConnectNumBySliceId",1),c()(this,"revisibleMarkAllowedRange",[1,64]),c()(this,"revisibleMark",8),c()(this,"reconnectWaitTimeSecAllowedRange",[1,120]),c()(this,"reconnectWaitTimeSec",10),c()(this,"fragmentCountOutdatedAllowedRange",[2,120]),c()(this,"fragmentCountOutdated",8),c()(this,"fragmentShareOverrideAllowedRange",[0,100]),c()(this,"fragmentShareOverride",1),c()(this,"fragmentShareOverrideMaxBytesAllowedRange",[0,1e7]),c()(this,"fragmentShareOverrideMaxBytes",125e4),c()(this,"fragmentExtraShareRatioAllowedRange",[0,50]),c()(this,"fragmentExtraShareRatio",this.fragmentShareOverride/2),c()(this,"totalDownloadInstancesAllowedRange",[2,48]),c()(this,"totalDownloadInstances",1.5*this.connectedLimit),c()(this,"minDownloadInstancesPerPeer",1),c()(this,"maxDownloadInstancesPerPeerAllowedRange",[1,32]),c()(this,"maxDownloadInstancesPerPeer",4),c()(this,"cdnFetchInstancesAllowedRange",[1,32]),c()(this,"cdnFetchInstances",2),c()(this,"fallbackCDNFetchInstancesAllowedRange",[1,64]),c()(this,"fallbackCDNFetchInstances",4),c()(this,"fetchCDNTimeoutMsAllowedRange",[500,6e4]),c()(this,"fetchCDNTimeoutMs",7e3),c()(this,"crcVerifyEnable",!0),c()(this,"crc32Interval",1),c()(this,"developmentLogLevel",2),c()(this,"productionLogLevel",0),c()(this,"developmentExtLogLevel",2),c()(this,"productionExtLogLevel",1),c()(this,"p2pSafeBufferDurationForDelayStopMsAllowedRange",[0,15e3]),c()(this,"p2pSafeBufferDurationForDelayStopMs",2e3),c()(this,"p2pDelayStopMaxMsAllowedRange",[0,15e3]),c()(this,"p2pDelayStopMaxMs",7e3),c()(this,"p2pFetchDataObCycleCountAllowedRange",[1,32]),c()(this,"p2pFetchDataObCycleCount",4),c()(this,"p2pShareDataObCycleCountAllowedRange",[1,32]),c()(this,"p2pShareDataObCycleCount",3),c()(this,"p2pSliceIdControlFetchCheckIntervalMsAllowedRange",[2e3,3e4]),c()(this,"p2pSliceIdControlFetchCheckIntervalMs",4e3),c()(this,"p2pSliceIdControlShareCheckIntervalMsAllowedRange",[2e3,3e4]),c()(this,"p2pSliceIdControlShareCheckIntervalMs",3e3),c()(this,"p2pFetchLowestRatioAllowedRange",[.2,1]),c()(this,"p2pFetchLowestRatio",.6),c()(this,"p2pShareLargestAllowedFetchRatioAllowedRange",[.2,1]),c()(this,"p2pShareLargestAllowedFetchRatio",.8),c()(this,"p2pShareLowestRatioAllowedRange",[.2,1]),c()(this,"p2pShareLowestRatio",.6),c()(this,"p2pAddSliceProbabilityAllowedRange",[0,1]),c()(this,"p2pAddSliceProbability",.25),c()(this,"p2pDeleteSliceProbabilityAllowedRange",[0,1]),c()(this,"p2pDeleteSliceProbability",.33),c()(this,"reportPeerSuccessProbabilityAllowedRange",[0,1]),c()(this,"reportPeerSuccessProbability",1),c()(this,"reportPeerFailedProbabilityAllowedRange",[0,1]),c()(this,"reportPeerFailedProbability",.05),c()(this,"p2pTransferSecondhandDataEnable",!0),c()(this,"multiTabsShareLimitEnable",!0),c()(this,"useSeedBox",!0),c()(this,"seedScoreUpAllowedRange",[1,20]),c()(this,"seedScoreUp",1),c()(this,"seedScoreDownAllowedRange",[1,50]),c()(this,"seedScoreDown",12),c()(this,"seedBoxScoreMaxAllowedRange",[100,1e3]),c()(this,"seedBoxScoreMax",200),c()(this,"coneVisibleMaxTimeMsAllowedRange",[0,864e5]),c()(this,"coneVisibleMaxTimeMs",36e5),c()(this,"symmetricVisibleMaxTimeMsAllowedRange",[0,864e5]),c()(this,"symmetricVisibleMaxTimeMs",48e4),c()(this,"nonnatVisibleMaxTimeMsAllowedRange",[0,864e5]),c()(this,"nonnatVisibleMaxTimeMs",36e5),c()(this,"getPeersIntervalMsAllowedRange",[0,36e5]),c()(this,"getPeersIntervalMs",1e4)}return a()(t,[{key:"allowPrintLog",value:function(e){return"development"===t.curNodeEnv?e<=this.developmentLogLevel:e<=this.productionLogLevel}},{key:"allowPrintExtLog",value:function(e){return"development"===t.curNodeEnv?e<=this.developmentExtLogLevel:e<=this.productionExtLogLevel}}]),t}();c()(u,"curNodeEnv","production"),c()(u,"failbackFetchCDNTimeoutMs",7e3)},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,n){var r,o=n(26),i=n(131),a=n(114),s=n(67),c=n(133),u=n(104),l=n(88)("IE_PROTO"),h=function(){},f=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[l]=t):n=p(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(132),o=n(114);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(42),o=n(85),i=n(30),a=n(27),s=n(90),c=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,h=6==t,f=7==t,p=5==t||h;return function(d,v,g,y){for(var x,C,m=i(d),w=o(m),S=r(v,g,3),k=a(w.length),b=0,P=y||s,E=e?P(d,k):n||f?P(d,0):void 0;k>b;b++)if((p||b in w)&&(C=S(x=w[b],b,m),t))if(e)E[b]=C;else if(C)switch(t){case 3:return!0;case 5:return x;case 6:return b;case 2:c.call(E,x)}else switch(t){case 4:return!1;case 7:c.call(E,x)}return h?-1:u||l?l:E}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(t,e,n){"use strict";var r=n(86),o=n(29),i=n(47);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},function(t,e,n){var r=n(49),o=n(48),i=n(12)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(17),o=n(12),i=n(91),a=o("species");t.exports=function(t){return i>=51||!r(function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){"use strict";var r=n(34),o=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},function(t,e,n){t.exports=n(242)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),o=n.n(r),i=n(0),a=n.n(i),s=function t(e,n,r){o()(this,t),a()(this,"sliceId",void 0),a()(this,"isOwner",void 0),a()(this,"progress",void 0),this.sliceId=e,this.isOwner=n,this.progress=r}},function(t,e,n){t.exports=n(280)},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t,e){var n=[][t];return!!n&&r(function(){n.call(null,e||function(){throw 1},1)})}},function(t,e,n){"use strict";n.r(e),n.d(e,"UrlHelper",function(){return s});var r=n(2),o=n.n(r),i=n(4),a=n.n(i),s=function(){function t(){o()(this,t)}return a()(t,null,[{key:"urlElementGet",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return null!==(n=t.exec(e))&&n[r]?n[r]:void 0}},{key:"getFileName",value:function(t){return this.urlElementGet(/.+[\\|\/](.*?)(?=\?|$)/gm,t)}},{key:"getUrlWithoutArguments",value:function(t){return this.urlElementGet(/^(.*?)(?=\?|$)/gm,t)}},{key:"getStreamName",value:function(t){return this.urlElementGet(/(\/?)(live-bvc)\/(\d{3,9})\/(live_.*?)(\/|\.(flv|m3u8|mpd))/gm,t,4)}}]),t}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(24),o=n(84),i=n(47),a=n(40),s=n(86),c=n(25),u=n(123),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(17),o=n(66),i="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(19);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var r=n(40),o=n(108),i=n(48),a=n(43),s=n(111),c=a.set,u=a.getterFor("Array Iterator");t.exports=s(Array,"Array",function(t,e){c(this,{type:"Array Iterator",target:r(t),index:0,kind:e})},function(){var t=u(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){var r=n(110),o=n(89),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(19),o=n(55),i=n(12)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r,o,i=n(14),a=n(107),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},function(t,e){},function(t,e,n){var r=n(66),o=n(14);t.exports="process"==r(o.process)},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){t.exports=n(270)},function(t,e,n){t.exports=n(306)},function(t,e,n){t.exports=n(307)},function(t,e,n){t.exports=n(308)},function(t,e,n){t.exports=n(319)},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return c}),n(95),n(60);var r=n(2),o=n.n(r),i=(n(4),n(0)),a=n.n(i);function s(t){return Math.floor(Math.random()*Math.floor(t))}var c=function t(e){o()(this,t),a()(this,"data",void 0),this.data=e}},function(t,e,n){t.exports=n(277)},function(t,e,n){t.exports=n(309)},function(t,e,n){"use strict";n.r(e),n.d(e,"SistersPlayerContext",function(){return O});var r=n(53),o=n.n(r),i=n(32),a=n.n(i),s=n(16),c=n.n(s),u=n(5),l=n.n(u),h=n(52),f=n.n(h),p=n(13),d=n.n(p),v=n(57),g=n.n(v),y=n(58),x=n.n(y),C=n(11),m=n.n(C),w=n(2),S=n.n(w),k=n(4),b=n.n(k),P=n(0),E=n.n(P),A=n(33),R=n(65),I=n(81),D=n(6),L=n(10);n.d(e,"WastedDataType",function(){return L.e}),n.d(e,"FetchErrorType",function(){return L.b}),n.d(e,"DataRoleType",function(){return L.a});var T,F=n(56);n.d(e,"EventReport",function(){return F}),function(t){t[t.ErrorNetworkTimeout=11e3]="ErrorNetworkTimeout",t[t.ErrorNetworkFetch=11001]="ErrorNetworkFetch",t[t.ErrorNetworkRead=11002]="ErrorNetworkRead",t[t.ErrorMseOpen=11003]="ErrorMseOpen",t[t.ErrorMseAppend=11004]="ErrorMseAppend",t[t.ErrorPlayList=11010]="ErrorPlayList"}(T||(T={}));var O=function(){function t(e,n){var r=this;S()(this,t),E()(this,"extLogCallback",function(){}),E()(this,"p2pContext",void 0),E()(this,"trackerSourceParam",void 0),E()(this,"preloadPlaylistItems",new m.a),E()(this,"p2pEnable",!1),E()(this,"realtimeData",{lastFetchItem:"--",lastPlaylistItem:"--"}),E()(this,"canStartP2PTask",!1),E()(this,"onRealtimeDataUpdate",function(){}),E()(this,"onEventReport",function(t){}),null!=e&&(this.extLogCallback=e);var o,i,a,s=new R.Configuration;if(this.trackerSourceParam="?protocol="+s.ProtocolVersion.toString(),null!=n.trackerParams)for(var c=0,u=x()(n.trackerParams);c<u.length;c++){var l=g()(u[c],2),h=l[0],f=l[1];null!=f&&(this.trackerSourceParam=this.trackerSourceParam+"&"+encodeURIComponent(h)+"="+encodeURIComponent(f.toString()))}if(this.p2pContext=new A.c(s,function(t,e){return r.printExtLog(t,e)},function(t){return r.eventReportCallback(t)}),null!=n.sdkParams){var p=d()(n.sdkParams);p.length>2&&(this.printExtLog(1,"-> Init Configuration Start <-"),this.p2pContext.Config.allowPrintLog(2)&&console.log("[SistersPlayer] -> Init Configuration Start <-"),this.p2pContext.setConfiguration(p),this.printExtLog(1,"-> Init Configuration Done. <-"),this.p2pContext.Config.allowPrintLog(2)&&console.log("[SistersPlayer] -> Init Configuration Done. <-"))}this.p2pContext.P2P.initPeers(this.trackerSourceParam),this.p2pContext.CDNFetchTaskWorker.setWorkerNum(this.p2pContext.Config.cdnFetchInstances),this.p2pContext.FallbackFetchTaskWorker.setWorkerNum(this.p2pContext.Config.fallbackCDNFetchInstances),this.p2pEnable=!0,this.preloadPlaylistItems.clear(),null!=(null===(o=Object({env:"production",buildtime:"2021-10-13 18:31:21",version:"1.3.10-ca39f727-release",packageVersion:"1.3.10-ca39f727",git:Object({version:"sistersplayer-next-61-gca39f72",commithash:"ca39f72773262466c7e13f011e03345e2b4190b2",branch:"release"})}))||void 0===o?void 0:o.env)&&(this.printExtLog(0,"Environment: production"),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Environment: production")),null!=(null===(i=Object({env:"production",buildtime:"2021-10-13 18:31:21",version:"1.3.10-ca39f727-release",packageVersion:"1.3.10-ca39f727",git:Object({version:"sistersplayer-next-61-gca39f72",commithash:"ca39f72773262466c7e13f011e03345e2b4190b2",branch:"release"})}))||void 0===i?void 0:i.buildtime)&&(this.printExtLog(0,"Build Time: 2021-10-13 18:31:21"),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Build Time: 2021-10-13 18:31:21")),null!=(null===(a=Object({env:"production",buildtime:"2021-10-13 18:31:21",version:"1.3.10-ca39f727-release",packageVersion:"1.3.10-ca39f727",git:Object({version:"sistersplayer-next-61-gca39f72",commithash:"ca39f72773262466c7e13f011e03345e2b4190b2",branch:"release"})}))||void 0===a?void 0:a.version)&&(this.printExtLog(0,"Version: 1.3.10-ca39f727-release"),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Version: 1.3.10-ca39f727-release")),this.printExtLog(1,"Create Sister GUID: "+this.p2pContext.guid),this.p2pContext.Config.allowPrintLog(1)&&console.warn("[SistersPlayer] Create Sister GUID: "+this.p2pContext.guid),this.printExtLog(0,"Misaka has been created. >w<"),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Misaka has been created. >w<")}return b()(t,null,[{key:"checkP2PSupport",value:function(){var t,e=!!window.WebSocket,n=!(!window.MediaSource&&!window.WebKitMediaSource),r=!!(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection),o=window.RTCDataChannel||window.DataChannel,i=!!o,a=!!i&&(null==o||null===(t=o.prototype)||void 0===t?void 0:t.hasOwnProperty("onbufferedamountlow")),s=!!window.ReadableStream,c=e&&n&&r&&i&&a&&s,u="Misaka Network Check: ".concat(c?"Supported":"Unsupported");if("development"==R.Configuration.curNodeEnv){var l="[SistersPlayer] ".concat(u,"\n\t")+"WebSocket: ".concat(e,"\n\t")+"MediaSource: ".concat(n,"\n\t")+"RTCPeerConnection: ".concat(r,"\n\t")+"RTCDataChannel: ".concat(i,"\n\t")+"RTCDataChannel onbufferedamountlow: ".concat(a,"\n\t")+"Fetch API ReadableStream: ".concat(s);console.log(l)}else console.log("[SistersPlayer] ".concat(u));return c}}]),b()(t,[{key:"eventReportCallback",value:function(t){try{this.onEventReport(t)}catch(t){console.error(t)}}},{key:"printExtLog",value:function(t,e){e="[SistersPlayer] "+e,this.p2pContext.Config.allowPrintExtLog(t)&&this.extLogCallback(t,e)}},{key:"destroy",value:function(){1==this.p2pEnable&&(this.p2pEnable=!1,this.printExtLog(1,"Destroy Sister GUID: "+this.p2pContext.guid),this.p2pContext.Config.allowPrintLog(1)&&console.warn("[SistersPlayer] Destroy Sister GUID: "+this.p2pContext.guid),this.p2pContext.destroy(),this.printExtLog(0,"Misaka has been destroyed. OxO"),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Misaka has been destroyed. OxO"))}},{key:"getDestroyState",value:function(){return 0==this.p2pEnable}},{key:"getP2PDataCollectionStatus",value:function(){return 1==this.p2pEnable?this.p2pContext.P2PDataCollectionStatus:void 0}},{key:"getP2PInfo",value:function(){return{p2pEnable:this.p2pEnable,protocolVersion:this.p2pContext.Config.ProtocolVersion}}},{key:"getCurPeerIdInfo",value:function(){if(null!=this.p2pContext.PeerSched){var t=this.p2pContext.CurPeerId,e=d()(f()(this.p2pContext.PeerSched.getSliceIds()));return null!=this.p2pContext.PeerSched.getTracker()?"当前 PeerId: "+t+" , SliceIds: "+e:"当前 PeerId (已主动断开): "+t+" , SliceIds: "+e}return"正在连接..."}},{key:"getPeerIdList",value:function(){var t,e,n=Array();return null!=this.p2pContext.PeerSched&&(l()(t=this.p2pContext.PeerSched.getConnectedPeers()).call(t,function(t){n.push({incoming:t.isIncoming(),connected:!0,peerId:t.extData.peerId,peerRole:t.peerRole})}),l()(e=this.p2pContext.PeerSched.getConnectingPeers()).call(e,function(t){n.push({incoming:t.isIncoming(),connected:!1,peerId:t.extData.peerId,peerRole:t.peerRole})})),n}},{key:"mergeChunkToDownloadFragment",value:function(t,e){var n=I.UrlHelper.getFileName(t);if(null!=n){var r=this.preloadPlaylistItems.get(n);if(null!=r&&r.fileSize>0){var o=this.p2pContext.FragMan.getFragment(n);if(null!=o){var i=r.fileSize,a=new Uint8Array(i),s=0;l()(e).call(e,function(t){a.set(t,s),s+=t.length}),o.setNonP2PFragmentData(a,D.a.LACKED)}}}}},{key:"cdnFetchAsBuffer",value:function(t,e,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(window.fetch){var s,u=!!window.AbortController,l={method:"GET",cache:i?"default":"no-store"},h=!1;u&&(s=new AbortController,l.signal=s.signal);var f=c()(function(){s&&s.abort(),h=!0,t(n,T.ErrorNetworkTimeout,"Failback HTTP fetch response timeout "+R.Configuration.failbackFetchCDNTimeoutMs+" ms, aborted.")},R.Configuration.failbackFetchCDNTimeoutMs);fetch(n,l).then(function(i){if(i.ok)if(clearTimeout(f),i.body){if(!1===h)if(window.ReadableStream){var s=new Array,c=i.body.getReader(),u=function(){},l=function(t){null!=t.value?(s.push(t.value),e(n,t.value.buffer,t.done),t.done&&o.mergeChunkToDownloadFragment(n,s)):(e(n,new ArrayBuffer(0),t.done),t.done&&o.mergeChunkToDownloadFragment(n,s)),t.done||u()};(u=function(){c.read().then(l).catch(function(e){t(n,T.ErrorNetworkRead,e.toString())})})()}else i.arrayBuffer().then(function(t){1==a&&1==o.p2pEnable&&null!=o.p2pContext.P2PDataCollectionStatus&&o.p2pContext.P2PDataCollectionStatus.addDownloadSizeDataCollection(t.byteLength,D.b.SERVER,r),e(n,t,!0)}).catch(function(e){t(n,T.ErrorNetworkRead,e.toString())})}else t(n,T.ErrorNetworkRead,"response.body is empty.");else t(n,T.ErrorNetworkRead,"response.ok is false.")}).catch(function(e){t(n,T.ErrorNetworkFetch,e.toString())})}else{var p=new XMLHttpRequest;p.onreadystatechange=function(t){2===p.readyState&&p.status>=200&&p.status},p.onload=function(t){p.status>=200&&p.status<=299&&(null!=p.response&&1==a&&1==o.p2pEnable&&null!=o.p2pContext.P2PDataCollectionStatus&&o.p2pContext.P2PDataCollectionStatus.addDownloadSizeDataCollection(p.response.byteLength,D.b.SERVER,r),e(n,p.response,!0))},p.onerror=function(e){t(n,p.readyState>2?T.ErrorNetworkRead:T.ErrorNetworkFetch,e.toString())},p.open("GET",n),p.responseType="arraybuffer",p.send()}}},{key:"p2pFetchAsBuffer",value:function(t,e,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(1==this.p2pEnable){!1===this.canStartP2PTask&&n()>500&&this.preloadPlaylistItems.size>this.p2pContext.Config.nonP2PFragmentCount&&(this.canStartP2PTask=!0);var a=this.p2pContext,s=I.UrlHelper.getFileName(r);if(null!=s&&!1===this.preloadPlaylistItems.has(s)){var u=s;this.realtimeData.lastFetchItem=u,this.onRealtimeDataUpdate();var l=Math.floor(n())-this.p2pContext.Config.p2pSafeBufferDurationForDelayStopMs;l>0?(l=Math.min(l,this.p2pContext.Config.p2pDelayStopMaxMs),c()(function(){a.P2P.stopDownloadFragment(u)},l)):a.P2P.stopDownloadFragment(u);a.P2P.onFragmentFinished(u,function(n,a,s){switch(n){case A.a.DONE:null!=a?e(r,a.buffer,!0):(1==o.p2pEnable&&(o.printExtLog(0,"Fetch Error: p2p download data lost. URL: "+r),o.p2pContext.Config.allowPrintLog(0)&&console.error("[SistersPlayer] Fetch Error: p2p download data lost. URL: "+r)),o.cdnFetchAsBuffer(t,e,r,D.a.LACKED,i,!1));break;case A.a.ERROR:1==o.p2pEnable&&(null!=s?(o.printExtLog(0,"Fetch Error: "+s+". on "+r),o.p2pContext.Config.allowPrintLog(0)&&console.error("[SistersPlayer] Fetch Error: "+s+". URL: "+r)):(o.printExtLog(0,"Fetch Error: p2p download error, no message. URL: "+r),o.p2pContext.Config.allowPrintLog(0)&&console.error("[SistersPlayer] Fetch Error: p2p download error, no message. URL: "+r))),o.cdnFetchAsBuffer(t,e,r,D.a.LACKED,i,!1);break;case A.a.NOTFOUND:o.cdnFetchAsBuffer(t,e,r,D.a.LACKED,i,!0)}})}else this.cdnFetchAsBuffer(t,e,r,D.a.SEED,i,!1)}else this.cdnFetchAsBuffer(t,e,r,D.a.SEED,i,!1)}},{key:"parsePlaylistItem",value:function(t){var e=I.UrlHelper.getFileName(t.uri),n=[],r=0,i=void 0;if(null!=t.title){var s,c=void 0;a()(s=t.title).call(s,"|")>=0?(n=t.title.split("|"),c=16):(n=t.title.split(";"),c=10),null!=n[0]&&(r=o()(n[0],c)),null!=n[1]&&(i=o()(n[1],c))}return{uri:t.uri,duration:t.duration,title:t.title,crc:i,fileSize:r,fragName:e}}},{key:"updatePlaylist",value:function(t,e){if(1==this.p2pEnable){var n=this.parsePlaylistItem(e);if(null!=n.fragName)if(this.realtimeData.lastPlaylistItem=n.fragName,this.onRealtimeDataUpdate(),t||null==n.title);else{var r=n.fragName,o=n.uri,i=n.fileSize,a=n.crc;this.preloadPlaylistItems.size<=this.p2pContext.Config.nonP2PFragmentCount&&(this.preloadPlaylistItems.set(r,n),this.p2pContext.P2P.createDownloadFragment(r,i,a)),!0===this.canStartP2PTask&&this.p2pContext.P2P.startDownloadFragment(r,o,i,a)}}}}]),t}()},function(t,e,n){var r=n(14),o=n(19),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(40),o=n(27),i=n(106),a=function(t){return function(e,n,a){var s,c=r(e),u=o(c.length),l=i(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(79),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){var r=n(35);t.exports=r("navigator","userAgent")||""},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(14),o=n(190),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,n){var r=n(44),o=n(109);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.0",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){"use strict";var r=n(8),o=n(128),i=n(112),a=n(134),s=n(45),c=n(28),u=n(50),l=n(12),h=n(44),f=n(48),p=n(129),d=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,g=l("iterator"),y=function(){return this};t.exports=function(t,e,n,l,p,x,C){o(n,e,l);var m,w,S,k=function(t){if(t===p&&R)return R;if(!v&&t in E)return E[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},b=e+" Iterator",P=!1,E=t.prototype,A=E[g]||E["@@iterator"]||p&&E[p],R=!v&&A||k(p),I="Array"==e&&E.entries||A;if(I&&(m=i(I.call(new t)),d!==Object.prototype&&m.next&&(h||i(m)===d||(a?a(m,d):"function"!=typeof m[g]&&c(m,g,y)),s(m,b,!0,!0),h&&(f[b]=y))),"values"==p&&A&&"values"!==A.name&&(P=!0,R=function(){return A.call(this)}),h&&!C||E[g]===R||c(E,g,R),f[e]=R,p)if(w={values:k("values"),keys:x?R:k("keys"),entries:k("entries")},C)for(S in w)(v||P||!(S in E))&&u(E,S,w[S]);else r({target:e,proto:!0,forced:v||P},w);return w}},function(t,e,n){var r=n(25),o=n(30),i=n(88),a=n(191),s=i("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,n){var r=n(17);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r={};r[n(12)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){t.exports=n(208)},function(t,e,n){var r=n(12);e.f=r},function(t,e,n){var r=n(50);t.exports=function(t,e,n){for(var o in e)n&&n.unsafe&&t[o]?t[o]=e[o]:r(t,o,e[o],n);return t}},function(t,e,n){t.exports=n(288)},function(t,e,n){t.exports=n(323)},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return _});var r=n(9),o=n.n(r),i=n(59),a=n.n(i),s=n(57),c=n.n(s),u=n(58),l=n.n(u),h=n(63),f=n.n(h),p=n(13),d=n.n(p),v=n(16),g=n.n(v),y=n(5),x=n.n(y),C=n(3),m=n.n(C),w=n(1),S=n.n(w),k=n(7),b=n.n(k),P=n(11),E=n.n(P),A=n(2),R=n.n(A),I=n(4),D=n.n(I),L=n(0),T=n.n(L),F=n(23),O=n(39),N=n(33),U=n(21),B=n(56),M=function(){function t(e,n,r){R()(this,t),T()(this,"p2pContext",void 0),T()(this,"needDestroy",!1),T()(this,"ws",void 0),T()(this,"requestId",0),T()(this,"pendingRequests",new E.a),T()(this,"messageSink",void 0),T()(this,"trackerSourceParam",void 0),T()(this,"onReconnected",function(){}),this.p2pContext=e,this.trackerSourceParam=n,this.messageSink=r}var e,n,r,o,i;return D()(t,[{key:"trackerConnect",value:(i=b()(S.a.mark(function t(){var e,n=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.p2pContext.printExtLog(0,"Last Order (re)connecting."),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Last Order (re)connecting."),!1!==this.needDestroy){t.next=20;break}return t.next=5,this.newTrackerConnect();case 5:if(void 0!==(e=t.sent)){t.next=11;break}return this.p2pContext.P2PDataCollectionStatus.addTrackerConnect(!1),t.abrupt("return",void 0);case 11:return this.p2pContext.P2PDataCollectionStatus.addTrackerConnect(!0),this.ws=e,this.ws.onmessage=function(t){n.onMessageReceived(t.data)},this.onReconnected(),this.p2pContext.printExtLog(0,"Last Order (re)connect done."),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Last Order (re)connect done."),t.abrupt("return",e);case 18:t.next=22;break;case 20:this.p2pContext.printExtLog(0,"Last Order (re)connect cancel."),this.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Last Order (re)connect cancel.");case 22:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"newTrackerConnect",value:(o=b()(S.a.mark(function t(){var e=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new m.a(function(t){var n=new WebSocket(e.p2pContext.Config.trackerServer+e.trackerSourceParam);n.onopen=function(r){e.needDestroy?(n.close(),t(void 0)):t(n)},n.onclose=function(n){var r;e.p2pContext.eventReportCallback(new B.TrackerClosedDataReportEvent(n.code)),e.p2pContext.printExtLog(0,"Last Order connection is closed. (code: "+n.code+")"),e.p2pContext.Config.allowPrintLog(0)&&console.warn("[SistersPlayer] Last Order connection is closed. (code: "+n.code+")"),x()(r=e.pendingRequests).call(r,function(t,e){return t(void 0)}),e.pendingRequests.clear(),0==e.needDestroy?(e.p2pContext.printExtLog(0,"Misaka will reconnect to the Last Order in "+e.p2pContext.Config.reconnectWaitTimeSec+" seconds."),e.p2pContext.Config.allowPrintLog(0)&&console.warn("[SistersPlayer] Misaka will reconnect to the Last Order in "+e.p2pContext.Config.reconnectWaitTimeSec+" seconds."),g()(function(){e.trackerConnect()},1e3*e.p2pContext.Config.reconnectWaitTimeSec)):(e.p2pContext.printExtLog(0,"Last Order reconnect cancel."),e.p2pContext.Config.allowPrintLog(0)&&console.log("[SistersPlayer] Last Order reconnect cancel.")),t(void 0)}}));case 1:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)})},{key:"dispatchResponse",value:function(t){var e=this.pendingRequests.get(t.requestId);void 0!==e&&(this.pendingRequests.delete(t.requestId),e(t))}},{key:"sendMessage",value:function(t,e,n,r,o,i){var a=this,s=this.ws;if(null!=s&&s.readyState==s.OPEN){0==n&&(++this.requestId,n=this.requestId);var c={type:e,requestId:n};c[r]=o,null!==t&&(c.peerId=t),void 0!==i&&(c.data=i);var u=this.pendingRequests;return new m.a(function(t){null!=s&&s.readyState==s.OPEN?(a.p2pContext.Config.allowPrintLog(5)&&console.log("send: ",c),u.set(n,t),s.send(d()(c))):t(void 0)})}return new m.a(function(t){return t(void 0)})}},{key:"sendServerRequest",value:(r=b()(S.a.mark(function t(e,n){var r,o,i,a,s,c=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=performance.now(),o=this.sendMessage(null,"request",0,"action",e,n),t.next=4,m.a.race(new Array(new m.a(function(t){return i=g()(function(){return t(void 0)},c.p2pContext.Config.serverTimeoutMs)}),o));case 4:return a=t.sent,clearTimeout(i),s=performance.now(),void 0===a?this.p2pContext.P2PDataCollectionStatus.addTrackerResponse(!1,s-r):this.p2pContext.P2PDataCollectionStatus.addTrackerResponse(!0,s-r),t.abrupt("return",a);case 9:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"sendPeerRequest",value:(n=b()(S.a.mark(function t(e,n,r,o){var i,a,s,c=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.sendMessage(e,"request",r,"action",n,o),t.next=3,m.a.race(new Array(new m.a(function(t){return a=g()(function(){return t(void 0)},c.p2pContext.Config.peerConnectionTimeoutMs)}),i));case 3:return s=t.sent,clearTimeout(a),t.abrupt("return",s);case 6:case"end":return t.stop()}},t,this)})),function(t,e,r,o){return n.apply(this,arguments)})},{key:"sendPeerResponse",value:function(t,e,n,r){return this.sendMessage(t,"response",e,"status",n,r)}},{key:"onPeerRequest",value:function(t){this.messageSink.onPeerMessage(this,t.peerId,t,t.requestId)}},{key:"onServerRequest",value:function(t){this.messageSink.onServerMessage(this,t)}},{key:"onMessageReceived",value:function(t){if(0==this.needDestroy)try{var e=JSON.parse(t);this.p2pContext.Config.allowPrintLog(5)&&console.log("recv: ",e),"response"==e.type&&f()(e.requestId)&&e.requestId>0?this.dispatchResponse(e):"request"==e.type&&f()(e.requestId)&&(null==e.peerId?this.onServerRequest(e):this.onPeerRequest(e))}catch(t){console.log(t)}}},{key:"destroy",value:function(){var t;this.needDestroy=!0,null!=this.ws&&(this.ws.close(),this.ws=void 0),x()(t=this.pendingRequests).call(t,function(t,e){return t(void 0)}),this.pendingRequests.clear()}}],[{key:"connect",value:(e=b()(S.a.mark(function e(n,r,o,i){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new t(n,r,o),e.next=3,new m.a(function(t){a.onReconnected=function(){t()},a.trackerConnect()});case 3:return a.onReconnected=i,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)})),function(t,n,r,o){return e.apply(this,arguments)})}]),t}(),_=function(){function e(t,n){R()(this,e),T()(this,"curVisibilityState",O.b.BROADCAST),T()(this,"needDestroy",!1),T()(this,"p2pContext",void 0),T()(this,"tracker",void 0),T()(this,"peerSched",void 0),T()(this,"natType",N.b.CONE),T()(this,"autoSelfInvisibleTimeoutId",void 0),this.p2pContext=t,this.peerSched=n}var n,r,i,s;return D()(e,[{key:"initTracker",value:function(t){this.tracker=t,1==this.needDestroy&&this.destroy()}},{key:"onTrackerReconnected",value:function(){var t=this;this.setSelfVisible(this.curVisibilityState).then(function(e){t.p2pContext.printExtLog(0,"SetVisible after reconnect."),t.p2pContext.Config.allowPrintLog(0)&&console.warn("[SistersPlayer] SetVisible after reconnect.")})}},{key:"getPeers",value:(s=b()(S.a.mark(function t(){var e;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e={peers:[],leeches:[],seedboxes:new E.a},null==this.tracker){t.next=7;break}return t.next=4,this.tracker.sendServerRequest("getPeers",{roles:["peer","leech","seedbox"]}).then(function(t){if(null!=t&&t.data&&(t.data.peers&&(e.peers=t.data.peers),t.data.leeches&&(e.leeches=t.data.leeches),t.data.seedboxes))for(var n=0,r=l()(t.data.seedboxes);n<r.length;n++){var o=c()(r[n],2),i=o[0],s=o[1];a()(s)&&e.seedboxes.set(i,s)}return e});case 4:return t.abrupt("return",t.sent);case 7:return t.abrupt("return",new m.a(function(t){return t(e)}));case 8:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"sendPeerCandidate",value:(i=b()(S.a.mark(function t(e,n,r){var o;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.tracker){t.next=11;break}return t.next=3,this.tracker.sendPeerRequest(e,"candidate",-1,{direction:n,cand:r});case 3:if("ok"!=(null==(o=t.sent)?void 0:o.status)){t.next=8;break}return t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:t.next=12;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this)})),function(t,e,n){return i.apply(this,arguments)})},{key:"connectPeer",value:(r=b()(S.a.mark(function t(e,n){var r,o,i,a,s,c,u,l,h=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new F.NyaPeer(this.p2pContext,this.peerSched,!1),null==n||n(r),r.extData.peerId=e,o=new U.c,t.next=6,o.lock();case 6:return t.next=8,r.createNyaOffer(function(t){o.lock().then(function(){h.sendPeerCandidate(e,"offer",t),o.unlock()})});case 8:if(i=t.sent,a=void 0,null==this.tracker){t.next=14;break}return t.next=13,this.tracker.sendPeerRequest(e,"connect",0,{protocol:this.p2pContext.Config.ProtocolVersion,guid:this.p2pContext.guid,offer:i,role:{type:"peer"}});case 13:a=t.sent;case 14:if(o.unlock(),null!=a){t.next=18;break}return this.peerSched.onPeerConnectComplete(r,!1),t.abrupt("return");case 18:if(t.prev=18,"ok"===a.status){t.next=23;break}this.peerSched.onPeerConnectComplete(r,!1),t.next=51;break;case 23:if(s=a.data,c=s.answer,this.p2pContext.printExtLog(2,"peer connecting "+e),this.p2pContext.Config.allowPrintLog(2)&&console.log("peer connecting "+e),r.parsePeerRole(s.role),r.peerRole!=F.PeerRole.Seedbox){t.next=45;break}if(l=!1,x()(u=r.seedSliceIds).call(u,function(t){h.peerSched.getSeedboxNeedConnectNum(t)>0&&(l=!0)}),1!=l){t.next=40;break}return t.t0=this.peerSched,t.t1=r,t.next=36,r.acceptNyaAnswer(c);case 36:t.t2=t.sent,t.t0.onPeerConnectComplete.call(t.t0,t.t1,t.t2),t.next=43;break;case 40:this.p2pContext.printExtLog(2,"not need this seedbox: "+e),this.p2pContext.Config.allowPrintLog(2)&&console.log("not need this seedbox: "+e),this.peerSched.onPeerConnectComplete(r,!1);case 43:t.next=51;break;case 45:return t.t3=this.peerSched,t.t4=r,t.next=49,r.acceptNyaAnswer(c);case 49:t.t5=t.sent,t.t3.onPeerConnectComplete.call(t.t3,t.t4,t.t5);case 51:t.next=57;break;case 53:t.prev=53,t.t6=t.catch(18),console.log(t.t6),this.peerSched.onPeerConnectComplete(r,!1);case 57:case"end":return t.stop()}},t,this,[[18,53]])})),function(t,e){return r.apply(this,arguments)})},{key:"getVisibilityState",value:function(){return this.curVisibilityState}},{key:"setSelfVisible",value:function(t){var e,n,r=this,o=!1;return t==O.b.HIDDEN||t==O.b.GONE?o=!1:t==O.b.BROADCAST&&(o=!0),null!==(e=null===(n=this.tracker)||void 0===n?void 0:n.sendServerRequest("setVisible",{value:o}).then(function(e){return void 0!==e&&"ok"===(null==e?void 0:e.status)&&(r.curVisibilityState=t,o?r.delaySetInvisible():r.cancelDelaySetInvisible(),!0)}))&&void 0!==e?e:m.a.resolve(!1)}},{key:"delaySetInvisible",value:function(){var e=this;void 0!==this.autoSelfInvisibleTimeoutId&&(clearTimeout(this.autoSelfInvisibleTimeoutId),this.autoSelfInvisibleTimeoutId=void 0);var n=this.p2pContext.Config,r=n.coneVisibleMaxTimeMs;this.natType==N.b.CONE?r=n.coneVisibleMaxTimeMs:this.natType==N.b.NON_NAT?r=n.nonnatVisibleMaxTimeMs:this.natType==N.b.SYMMETRIC&&(r=n.symmetricVisibleMaxTimeMs),this.autoSelfInvisibleTimeoutId=t.setTimeout(function(){e.setSelfVisible(O.b.HIDDEN)},r)}},{key:"cancelDelaySetInvisible",value:function(){void 0!==this.autoSelfInvisibleTimeoutId&&(clearTimeout(this.autoSelfInvisibleTimeoutId),this.autoSelfInvisibleTimeoutId=void 0)}},{key:"onNatTypeUpdated",value:function(t){this.natType=t,this.delaySetInvisible()}},{key:"reportDownloadBlockSuccessOrAwaysFail",value:function(t,e){var n,r,i,a;return this.p2pContext.printExtLog(3,o()(n="peerId ".concat(t," report ")).call(n,e?"peerConnected":"peerConnectFailed"," to tracker.")),this.p2pContext.Config.allowPrintLog(3)&&console.log(o()(a="peerId ".concat(t," report ")).call(a,e?"peerConnected":"peerConnectFailed"," to tracker.")),null!==(r=null===(i=this.tracker)||void 0===i?void 0:i.sendServerRequest("report",{id:e?"peerConnected":"peerConnectFailed",remote:t}).then(function(t){return void 0!==t&&"ok"===(null==t?void 0:t.status)}))&&void 0!==r?r:m.a.resolve(!1)}},{key:"onPeerMessage",value:function(t,e,n,r){return this.peerSched.onPeerRelayMessage(e,n,r)}},{key:"onServerMessage",value:function(t,e){switch(e.action){case"setPeerId":this.p2pContext.CurPeerId=e.data.id;break;case"updateConfig":this.p2pContext.setConfiguration(e.data.jsonstr);break;case"move":this.p2pContext.setConfiguration(d()({trackerServer:e.data.target})),this.peerSched.recreateTracker()}}},{key:"sendPeerResponse",value:function(t,e,n,r){return null!=this.tracker?this.tracker.sendPeerResponse(t,e,n,r):new m.a(function(t){return t(void 0)})}},{key:"destroy",value:function(){var t;this.needDestroy=!0,this.cancelDelaySetInvisible(),null===(t=this.tracker)||void 0===t||t.destroy()}}],[{key:"connect",value:(n=b()(S.a.mark(function t(n,r,o,i){var a,s;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new e(n,o),t.next=3,M.connect(n,r,a,function(){a.onTrackerReconnected()});case 3:return s=t.sent,a.initTracker(s),a.setSelfVisible(O.b.BROADCAST),t.abrupt("return",a);case 7:case"end":return t.stop()}},t)})),function(t,e,r,o){return n.apply(this,arguments)})}]),e}()}).call(this,n(82))},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,n){var r=n(24),o=n(17),i=n(104);t.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(17),o=/#|\.prototype\./,i=function(t,e){var n=s[a(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,n){var r=n(14),o=n(178).trim,i=n(122),a=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==a(i+"08")||22!==a(i+"0x16");t.exports=c?function(t,e){var n=o(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},function(t,e,n){var r=n(8),o=n(14),i=n(107),a=[].slice,s=function(t){return function(e,n){var r=arguments.length>2,o=r?a.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(i)},{setTimeout:s(o.setTimeout),setInterval:s(o.setInterval)})},function(t,e,n){var r=n(109),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){"use strict";var r=n(129).IteratorPrototype,o=n(68),i=n(47),a=n(45),s=n(48),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,u,!1,!0),s[u]=c,t}},function(t,e,n){"use strict";var r,o,i,a=n(112),s=n(28),c=n(25),u=n(12),l=n(44),h=u("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):f=!0),null==r&&(r={}),l||c(r,h)||s(r,h,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(t,e,n){var r=n(113);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(24),o=n(29),i=n(26),a=n(69);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),s=r.length,c=0;s>c;)o.f(t,n=r[c++],e[n]);return t}},function(t,e,n){var r=n(25),o=n(40),i=n(105).indexOf,a=n(67);t.exports=function(t,e){var n,s=o(t),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(u,n)||u.push(n));return u}},function(t,e,n){var r=n(35);t.exports=r("document","documentElement")},function(t,e,n){var r=n(26),o=n(193);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e,n){t.exports=n(200)},function(t,e,n){n(201);var r=n(15);t.exports=r.Array.isArray},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){t.exports=n(203)},function(t,e,n){n(37),n(204);var r=n(15);t.exports=r.Array.from},function(t,e,n){var r=n(79),o=n(54),i=function(t){return function(e,n){var i,a,s=String(o(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,n){"use strict";var r=n(42),o=n(30),i=n(205),a=n(143),s=n(27),c=n(71),u=n(72);t.exports=function(t){var e,n,l,h,f,p,d=o(t),v="function"==typeof this?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,x=void 0!==y,C=u(d),m=0;if(x&&(y=r(y,g>2?arguments[2]:void 0,2)),null==C||v==Array&&a(C))for(n=new v(e=s(d.length));e>m;m++)p=x?y(d[m],m):d[m],c(n,m,p);else for(f=(h=C.call(d)).next,n=new v;!(l=f.call(h)).done;m++)p=x?i(h,y,[l.value,m],!0):l.value,c(n,m,p);return n.length=m,n}},function(t,e,n){var r=n(26);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,n){var r=n(12),o=n(48),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e,n){var r=n(12)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},function(t,e,n){t.exports=n(206)},function(t,e,n){n(147),n(92),n(209),n(211),n(212),n(213),n(214),n(150),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226);var r=n(15);t.exports=r.Symbol},function(t,e,n){"use strict";var r=n(8),o=n(17),i=n(55),a=n(19),s=n(30),c=n(27),u=n(71),l=n(90),h=n(73),f=n(12),p=n(91),d=f("isConcatSpreadable"),v=p>=51||!o(function(){var t=[];return t[d]=!1,t.concat()[0]!==t}),g=h("concat"),y=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,forced:!v||!g},{concat:function(t){var e,n,r,o,i,a=s(this),h=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(y(i=-1===e?a:arguments[e])){if(f+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,f++)n in i&&u(h,f,i[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(h,f++,i)}return h.length=f,h}})},function(t,e,n){var r=n(132),o=n(114).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){n(18)("iterator")},function(t,e,n){var r=n(138),o=n(232),i=n(137);t.exports=function(t,e){var n;if(t){if("string"==typeof t)return i(t,e);var a=o(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?r(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}},function(t,e,n){var r=n(234),o=Array.prototype;t.exports=function(t){var e=t.slice;return t===o||t instanceof Array&&e===o.slice?r:e}},function(t,e,n){var r=n(26),o=n(72);t.exports=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){"use strict";var r=n(8),o=n(14),i=n(155),a=n(17),s=n(28),c=n(51),u=n(74),l=n(19),h=n(45),f=n(29).f,p=n(70).forEach,d=n(24),v=n(43),g=v.set,y=v.getterFor;t.exports=function(t,e,n){var v,x=-1!==t.indexOf("Map"),C=-1!==t.indexOf("Weak"),m=x?"set":"add",w=o[t],S=w&&w.prototype,k={};if(d&&"function"==typeof w&&(C||S.forEach&&!a(function(){(new w).entries().next()}))){v=e(function(e,n){g(u(e,v,t),{type:t,collection:new w}),null!=n&&c(n,e[m],{that:e,AS_ENTRIES:x})});var b=y(t);p(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(t){var e="add"==t||"set"==t;!(t in S)||C&&"clear"==t||s(v.prototype,t,function(n,r){var o=b(this).collection;if(!e&&C&&!l(n))return"get"==t&&void 0;var i=o[t](0===n?0:n,r);return e?this:i})}),C||f(v.prototype,"size",{configurable:!0,get:function(){return b(this).collection.size}})}else v=n.getConstructor(e,t,x,m),i.REQUIRED=!0;return h(v,t,!1,!0),k[t]=v,r({global:!0,forced:!0},k),C||n.setStrong(v,t,x),v}},function(t,e,n){var r=n(67),o=n(19),i=n(25),a=n(29).f,s=n(89),c=n(251),u=s("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(t){a(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},p=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,u)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[u].objectID},getWeakData:function(t,e){if(!i(t,u)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[u].weakData},onFreeze:function(t){return c&&p.REQUIRED&&h(t)&&!i(t,u)&&f(t),t}};r[u]=!0},function(t,e,n){"use strict";var r=n(29).f,o=n(68),i=n(118),a=n(42),s=n(74),c=n(51),u=n(111),l=n(157),h=n(24),f=n(155).fastKey,p=n(43),d=p.set,v=p.getterFor;t.exports={getConstructor:function(t,e,n,u){var l=t(function(t,r){s(t,l,e),d(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=r&&c(r,t[u],{that:t,AS_ENTRIES:n})}),p=v(e),g=function(t,e,n){var r,o,i=p(t),a=y(t,e);return a?a.value=n:(i.last=a={index:o=f(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),h?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},y=function(t,e){var n,r=p(t),o=f(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return i(l.prototype,{clear:function(){for(var t=p(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=p(this),n=y(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),h?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=p(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!y(this,t)}}),i(l.prototype,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),h&&r(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",o=v(e),i=v(r);u(t,e,function(t,e){d(this,{type:r,target:t,state:o(t),kind:e,last:void 0})},function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){"use strict";var r=n(35),o=n(29),i=n(12),a=n(24),s=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){t.exports=n(252)},function(t,e,n){n(160),n(92),n(260),n(166),n(167),n(263),n(37),n(36);var r=n(15);t.exports=r.Promise},function(t,e,n){"use strict";var r=n(8),o=n(112),i=n(134),a=n(68),s=n(28),c=n(47),u=n(51),l=function(t,e){var n=this;if(!(n instanceof l))return new l(t,e);i&&(n=i(new Error(void 0),o(n))),void 0!==e&&s(n,"message",String(e));var r=[];return u(t,r.push,{that:r}),s(n,"errors",r),n};l.prototype=a(Error.prototype,{constructor:c(5,l),message:c(5,""),name:c(5,"AggregateError")}),r({global:!0},{AggregateError:l})},function(t,e,n){var r=n(14);t.exports=r.Promise},function(t,e,n){var r=n(26),o=n(34),i=n(12)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e,n){var r,o,i,a=n(14),s=n(17),c=n(42),u=n(133),l=n(104),h=n(164),f=n(93),p=a.location,d=a.setImmediate,v=a.clearImmediate,g=a.process,y=a.MessageChannel,x=a.Dispatch,C=0,m={},w=function(t){if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},S=function(t){return function(){w(t)}},k=function(t){w(t.data)},b=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};d&&v||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++C]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(C),C},v=function(t){delete m[t]},f?r=function(t){g.nextTick(S(t))}:x&&x.now?r=function(t){x.now(S(t))}:y&&!h?(i=(o=new y).port2,o.port1.onmessage=k,r=c(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(b)?(r=b,a.addEventListener("message",k,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),w(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:d,clear:v}},function(t,e,n){var r=n(107);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(26),o=n(19),i=n(75);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(8),o=n(34),i=n(75),a=n(94),s=n(51);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=i.f(e),r=n.resolve,c=n.reject,u=a(function(){var n=o(e.resolve),i=[],a=0,c=1;s(t,function(t){var o=a++,s=!1;i.push(void 0),c++,n.call(e,t).then(function(t){s||(s=!0,i[o]={status:"fulfilled",value:t},--c||r(i))},function(t){s||(s=!0,i[o]={status:"rejected",reason:t},--c||r(i))})}),--c||r(i)});return u.error&&c(u.value),n.promise}})},function(t,e,n){"use strict";var r=n(8),o=n(34),i=n(35),a=n(75),s=n(94),c=n(51);r({target:"Promise",stat:!0},{any:function(t){var e=this,n=a.f(e),r=n.resolve,u=n.reject,l=s(function(){var n=o(e.resolve),a=[],s=0,l=1,h=!1;c(t,function(t){var o=s++,c=!1;a.push(void 0),l++,n.call(e,t).then(function(t){c||h||(h=!0,r(t))},function(t){c||h||(c=!0,a[o]=t,--l||u(new(i("AggregateError"))(a,"No one promise resolved")))})}),--l||u(new(i("AggregateError"))(a,"No one promise resolved"))});return l.error&&u(l.value),n.promise}})},function(t,e,n){var r=n(284);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(12)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){var r=n(17),o=n(12),i=n(44),a=o("iterator");t.exports=!r(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach(function(t,r){e.delete("b"),n+=r+t}),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},function(t,e,n){"use strict";n(87);var r=n(8),o=n(35),i=n(170),a=n(50),s=n(118),c=n(45),u=n(128),l=n(43),h=n(74),f=n(25),p=n(42),d=n(49),v=n(26),g=n(19),y=n(68),x=n(47),C=n(153),m=n(72),w=n(12),S=o("fetch"),k=o("Headers"),b=w("iterator"),P=l.set,E=l.getterFor("URLSearchParams"),A=l.getterFor("URLSearchParamsIterator"),R=/\+/g,I=Array(4),D=function(t){return I[t-1]||(I[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},L=function(t){try{return decodeURIComponent(t)}catch(e){return t}},T=function(t){var e=t.replace(R," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(D(n--),L);return e}},F=/[!'()~]|%20/g,O={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(t){return O[t]},U=function(t){return encodeURIComponent(t).replace(F,N)},B=function(t,e){if(e)for(var n,r,o=e.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),t.push({key:T(r.shift()),value:T(r.join("="))}))},M=function(t){this.entries.length=0,B(this.entries,t)},_=function(t,e){if(t<e)throw TypeError("Not enough arguments")},z=u(function(t,e){P(this,{type:"URLSearchParamsIterator",iterator:C(E(t).entries),kind:e})},"Iterator",function(){var t=A(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),j=function(){h(this,j,"URLSearchParams");var t,e,n,r,o,i,a,s,c,u=arguments.length>0?arguments[0]:void 0,l=[];if(P(this,{type:"URLSearchParams",entries:l,updateURL:function(){},updateSearchParams:M}),void 0!==u)if(g(u))if("function"==typeof(t=m(u)))for(n=(e=t.call(u)).next;!(r=n.call(e)).done;){if((a=(i=(o=C(v(r.value))).next).call(o)).done||(s=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");l.push({key:a.value+"",value:s.value+""})}else for(c in u)f(u,c)&&l.push({key:c,value:u[c]+""});else B(l,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},q=j.prototype;s(q,{append:function(t,e){_(arguments.length,2);var n=E(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){_(arguments.length,1);for(var e=E(this),n=e.entries,r=t+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;e.updateURL()},get:function(t){_(arguments.length,1);for(var e=E(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){_(arguments.length,1);for(var e=E(this).entries,n=t+"",r=[],o=0;o<e.length;o++)e[o].key===n&&r.push(e[o].value);return r},has:function(t){_(arguments.length,1);for(var e=E(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){_(arguments.length,1);for(var n,r=E(this),o=r.entries,i=!1,a=t+"",s=e+"",c=0;c<o.length;c++)(n=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=E(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(t=i[n],e=0;e<n;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===n&&o.push(t)}r.updateURL()},forEach:function(t){for(var e,n=E(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new z(this,"keys")},values:function(){return new z(this,"values")},entries:function(){return new z(this,"entries")}},{enumerable:!0}),a(q,b,q.entries),a(q,"toString",function(){for(var t,e=E(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(U(t.key)+"="+U(t.value));return n.join("&")},{enumerable:!0}),c(j,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:j}),i||"function"!=typeof S||"function"!=typeof k||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,o=[t];return arguments.length>1&&(g(e=arguments[1])&&(n=e.body,"URLSearchParams"===d(n)&&((r=e.headers?new k(e.headers):new k).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:x(0,String(n)),headers:x(0,r)}))),o.push(e)),S.apply(this,o)}}),t.exports={URLSearchParams:j,getState:E}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),o=n.n(r),i=n(4),a=n.n(i),s=n(0),c=n.n(s),u=function(){function t(){o()(this,t)}return a()(t,null,[{key:"crc32",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new Uint32Array(1);new Uint32Array(1)[0]=e;var r=new Uint32Array(1);for(r[0]=0,r[0]^=4294967295,n[0]=0;n[0]<t.length;n[0]+=e)r[0]=this.crc32_tab[255&(r[0]^t[n[0]])]^r[0]>>8&16777215;return r[0]=4294967295^r[0],r[0]<0&&(r[0]+=4294967296),r[0]}}]),t}();c()(u,"crc32_tab",new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]))},function(t,e,n){t.exports=n(312)},function(t,e,n){t.exports=n(327)},function(t,e,n){t.exports=n(334)},function(t,e,n){t.exports=n(343)},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return v});var r=n(5),o=n.n(r),i=n(20),a=n.n(i),s=n(2),c=n.n(s),u=n(4),l=n.n(u),h=n(0),f=n.n(h),p=n(64),d=n(10),v=function(){function e(t,n){var r=this;c()(this,e),f()(this,"p2pContext",void 0),f()(this,"lackedDataArray",void 0),f()(this,"currentShareDataLMQueue",void 0),f()(this,"lastestShareDataArray",void 0),f()(this,"sched",void 0),f()(this,"fetchControlIntervalId",void 0),f()(this,"shareControlIntervalId",void 0),f()(this,"lastestShareSliceIds",new a.a),f()(this,"intervalMSChangeId",void 0),this.p2pContext=t,this.sched=n,this.lackedDataArray=new Array(this.p2pContext.Config.sliceCount),this.currentShareDataLMQueue=new p.a(this.p2pContext.Config.p2pFetchDataObCycleCount),this.lastestShareDataArray=new Array(this.p2pContext.Config.sliceCount);for(var o=0;o<this.p2pContext.Config.sliceCount;++o)this.lackedDataArray[o]=new p.a(this.p2pContext.Config.p2pFetchDataObCycleCount),this.lastestShareDataArray[o]=new p.a(this.p2pContext.Config.p2pShareDataObCycleCount);this.startSliceIdControl(),this.intervalMSChangeId=t.sliceIdAutoChangeIntervalSignal.connect(function(){r.startSliceIdControl()})}return l()(e,[{key:"startSliceIdControl",value:function(){var e=this;this.stopSliceIdControl(),this.fetchControlIntervalId=t.setInterval(function(){e.checkFetch()},this.p2pContext.Config.p2pSliceIdControlFetchCheckIntervalMs),this.shareControlIntervalId=t.setInterval(function(){e.checkShare()},this.p2pContext.Config.p2pSliceIdControlShareCheckIntervalMs)}},{key:"stopSliceIdControl",value:function(){void 0!==this.fetchControlIntervalId&&(clearInterval(this.fetchControlIntervalId),this.fetchControlIntervalId=void 0),void 0!==this.shareControlIntervalId&&(clearInterval(this.shareControlIntervalId),this.shareControlIntervalId=void 0),this.currentShareDataLMQueue.clear();for(var t=0;t<this.p2pContext.Config.sliceCount;++t)this.lackedDataArray[t].clear(),this.lastestShareDataArray[t].clear()}},{key:"addFragmentFetchData",value:function(t){if(void 0===this.p2pContext.PeerSched||0!=this.p2pContext.PeerSched.getConnectedPeers().length){if(!this.isSame(this.sched.getSliceIds(),t.getSliceIds())){void 0!==this.fetchControlIntervalId&&this.checkFetch();for(var e=0;e<this.p2pContext.Config.sliceCount;++e)this.lackedDataArray[e].clear(),this.currentShareDataLMQueue.clear()}for(e=0;e<this.p2pContext.Config.sliceCount;++e)this.lackedDataArray[e].push(t.getRoleRatioForSlice(d.a.LACKED,e));this.currentShareDataLMQueue.push(t.getSharedRatio())}else this.p2pContext.PeerSched.getSliceIds().clear()}},{key:"isSame",value:function(t,e){if(t.size==e.size){var n=!0;return o()(t).call(t,function(t){e.has(t)||(n=!1)}),n}return!1}},{key:"addFragmentShareData",value:function(t){if(void 0===this.p2pContext.PeerSched||0!=this.p2pContext.PeerSched.getConnectedPeers().length){var e=!0;if(void 0!==this.lastestShareSliceIds&&(e=this.isSame(this.lastestShareSliceIds,t.getSliceIds())),!e){void 0!==this.shareControlIntervalId&&this.checkShare();for(var n=0;n<this.p2pContext.Config.sliceCount;++n)this.lastestShareDataArray[n].clear()}for(n=0;n<this.p2pContext.Config.sliceCount;++n)this.lastestShareDataArray[n].push(t.getSliceSharedRatio(n));this.lastestShareSliceIds=t.getSliceIds()}else this.p2pContext.PeerSched.getSliceIds().clear()}},{key:"checkFetch",value:function(){if(void 0===this.p2pContext.PeerSched||0!=this.p2pContext.PeerSched.getConnectedPeers().length){if(!(this.lackedDataArray[0].size()<this.p2pContext.Config.p2pFetchDataObCycleCount))for(var t=0;t<this.p2pContext.Config.sliceCount;++t){var e,n,r=0;o()(e=this.lackedDataArray[t]).call(e,function(t){r+=t}),r/=this.lackedDataArray[t].size();var i=0;o()(n=this.currentShareDataLMQueue).call(n,function(t){i+=t}),i/=this.currentShareDataLMQueue.size(),!this.sched.getSliceIds().has(t)&&i<this.p2pContext.Config.p2pShareLargestAllowedFetchRatio*this.p2pContext.Config.fragmentShareOverride&&r>=this.p2pContext.Config.p2pFetchLowestRatio&&(this.p2pContext.printExtLog(3,"fetch: want to add "+t),this.p2pContext.Config.allowPrintLog(3)&&console.log("fetch: want to add "+t),Math.random()<this.p2pContext.Config.p2pAddSliceProbability&&this.sched.addSliceId(t))}}else this.p2pContext.PeerSched.getSliceIds().clear()}},{key:"checkShare",value:function(){if(void 0===this.p2pContext.PeerSched||0!=this.p2pContext.PeerSched.getConnectedPeers().length){if(!(this.lastestShareDataArray[0].size()<this.p2pContext.Config.p2pShareDataObCycleCount))for(var t=0;t<this.p2pContext.Config.sliceCount;++t){var e,n=0;o()(e=this.lastestShareDataArray[t]).call(e,function(t){n+=t}),n/=this.lastestShareDataArray[t].size(),this.lastestShareSliceIds.has(t)&&n<=this.p2pContext.Config.p2pShareLowestRatio&&(this.p2pContext.printExtLog(3,"share: want to delete "+t),this.p2pContext.Config.allowPrintLog(3)&&console.log("share: want to delete "+t),Math.random()<this.p2pContext.Config.p2pDeleteSliceProbability&&this.sched.deleteSliceId(t))}}else this.p2pContext.PeerSched.getSliceIds().clear()}},{key:"destroy",value:function(){this.stopSliceIdControl(),void 0!==this.intervalMSChangeId&&this.p2pContext.sliceIdAutoChangeIntervalSignal.disconnect(this.intervalMSChangeId)}}]),e}()}).call(this,n(82))},function(t,e,n){var r=n(54),o="["+n(122)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},,function(t,e,n){var r=n(181);t.exports=r},function(t,e,n){n(182);var r=n(15);t.exports=r.Number.parseInt},function(t,e,n){var r=n(8),o=n(125);r({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},function(t,e,n){var r=n(184);t.exports=r},function(t,e,n){var r=n(185),o=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===o||t instanceof Array&&e===o.indexOf?r:e}},function(t,e,n){n(186);var r=n(22);t.exports=r("Array").indexOf},function(t,e,n){"use strict";var r=n(8),o=n(105).indexOf,i=n(80),a=n(41),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,u=i("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(t){return c?s.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(126);var r=n(15);t.exports=r.setTimeout},function(t,e,n){n(36);var r=n(195),o=n(49),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===i||t instanceof Array&&e===i.forEach||a.hasOwnProperty(o(t))?r:e}},function(t,e,n){var r=n(14),o=n(127),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,n){var r=n(14),o=n(28);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(17);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},function(t,e,n){"use strict";var r=n(115),o=n(49);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,e,n){var r=n(19);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(196);t.exports=r},function(t,e,n){n(197);var r=n(22);t.exports=r("Array").forEach},function(t,e,n){"use strict";var r=n(8),o=n(198);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,e,n){"use strict";var r=n(70).forEach,o=n(80),i=n(41),a=o("forEach"),s=i("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){var r=n(135),o=n(137);t.exports=function(t){if(r(t))return o(t)}},function(t,e,n){var r=n(136);t.exports=r},function(t,e,n){n(8)({target:"Array",stat:!0},{isArray:n(55)})},function(t,e,n){var r=n(138),o=n(145),i=n(116);t.exports=function(t){if(void 0!==i&&o(Object(t)))return r(t)}},function(t,e,n){var r=n(139);t.exports=r},function(t,e,n){var r=n(8),o=n(141);r({target:"Array",stat:!0,forced:!n(144)(function(t){Array.from(t)})},{from:o})},function(t,e,n){var r=n(26),o=n(142);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){throw o(t),e}}},function(t,e,n){n(36),n(37);var r=n(207);t.exports=r},function(t,e,n){var r=n(49),o=n(12),i=n(48),a=o("iterator");t.exports=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){var r=n(146);n(227),n(228),n(229),n(230),n(231),t.exports=r},function(t,e,n){"use strict";var r=n(8),o=n(14),i=n(35),a=n(44),s=n(24),c=n(113),u=n(130),l=n(17),h=n(25),f=n(55),p=n(19),d=n(26),v=n(30),g=n(40),y=n(86),x=n(47),C=n(68),m=n(69),w=n(148),S=n(210),k=n(149),b=n(83),P=n(29),E=n(84),A=n(28),R=n(50),I=n(110),D=n(88),L=n(67),T=n(89),F=n(12),O=n(117),N=n(18),U=n(45),B=n(43),M=n(70).forEach,_=D("hidden"),z=F("toPrimitive"),j=B.set,q=B.getterFor("Symbol"),W=Object.prototype,V=o.Symbol,G=i("JSON","stringify"),Y=b.f,Q=P.f,H=S.f,X=E.f,K=I("symbols"),J=I("op-symbols"),$=I("string-to-symbol-registry"),Z=I("symbol-to-string-registry"),tt=I("wks"),et=o.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=s&&l(function(){return 7!=C(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Y(W,e);r&&delete W[e],Q(t,e,n),r&&t!==W&&Q(W,e,r)}:Q,ot=function(t,e){var n=K[t]=C(V.prototype);return j(n,{type:"Symbol",tag:t,description:e}),s||(n.description=e),n},it=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof V},at=function(t,e,n){t===W&&at(J,e,n),d(t);var r=y(e,!0);return d(n),h(K,r)?(n.enumerable?(h(t,_)&&t[_][r]&&(t[_][r]=!1),n=C(n,{enumerable:x(0,!1)})):(h(t,_)||Q(t,_,x(1,{})),t[_][r]=!0),rt(t,r,n)):Q(t,r,n)},st=function(t,e){d(t);var n=g(e),r=m(n).concat(ht(n));return M(r,function(e){s&&!ct.call(n,e)||at(t,e,n[e])}),t},ct=function(t){var e=y(t,!0),n=X.call(this,e);return!(this===W&&h(K,e)&&!h(J,e))&&(!(n||!h(this,e)||!h(K,e)||h(this,_)&&this[_][e])||n)},ut=function(t,e){var n=g(t),r=y(e,!0);if(n!==W||!h(K,r)||h(J,r)){var o=Y(n,r);return!o||!h(K,r)||h(n,_)&&n[_][r]||(o.enumerable=!0),o}},lt=function(t){var e=H(g(t)),n=[];return M(e,function(t){h(K,t)||h(L,t)||n.push(t)}),n},ht=function(t){var e=t===W,n=H(e?J:g(t)),r=[];return M(n,function(t){!h(K,t)||e&&!h(W,t)||r.push(K[t])}),r};c||(R((V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=T(t),n=function(t){this===W&&n.call(J,t),h(this,_)&&h(this[_],e)&&(this[_][e]=!1),rt(this,e,x(1,t))};return s&&nt&&rt(W,e,{configurable:!0,set:n}),ot(e,t)}).prototype,"toString",function(){return q(this).tag}),R(V,"withoutSetter",function(t){return ot(T(t),t)}),E.f=ct,P.f=at,b.f=ut,w.f=S.f=lt,k.f=ht,O.f=function(t){return ot(F(t),t)},s&&(Q(V.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),a||R(W,"propertyIsEnumerable",ct,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:V}),M(m(tt),function(t){N(t)}),r({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=String(t);if(h($,e))return $[e];var n=V(e);return $[e]=n,Z[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(h(Z,t))return Z[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(t,e){return void 0===e?C(t):st(C(t),e)},defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:lt,getOwnPropertySymbols:ht}),r({target:"Object",stat:!0,forced:l(function(){k.f(1)})},{getOwnPropertySymbols:function(t){return k.f(v(t))}}),G&&r({target:"JSON",stat:!0,forced:!c||l(function(){var t=V();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))})},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(p(e)||void 0!==t)&&!it(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!it(e))return e}),o[1]=e,G.apply(null,o)}}),V.prototype[z]||A(V.prototype,z,V.prototype.valueOf),U(V,"Symbol"),L[_]=!0},function(t,e,n){var r=n(40),o=n(148).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){n(18)("asyncIterator")},function(t,e){},function(t,e,n){n(18)("hasInstance")},function(t,e,n){n(18)("isConcatSpreadable")},function(t,e,n){n(18)("match")},function(t,e,n){n(18)("matchAll")},function(t,e,n){n(18)("replace")},function(t,e,n){n(18)("search")},function(t,e,n){n(18)("species")},function(t,e,n){n(18)("split")},function(t,e,n){n(18)("toPrimitive")},function(t,e,n){n(18)("toStringTag")},function(t,e,n){n(18)("unscopables")},function(t,e,n){var r=n(14);n(45)(r.JSON,"JSON",!0)},function(t,e){},function(t,e){},function(t,e,n){n(18)("asyncDispose")},function(t,e,n){n(18)("dispose")},function(t,e,n){n(18)("observable")},function(t,e,n){n(18)("patternMatch")},function(t,e,n){n(18)("replaceAll")},function(t,e,n){t.exports=n(233)},function(t,e,n){var r=n(152);t.exports=r},function(t,e,n){n(235);var r=n(22);t.exports=r("Array").slice},function(t,e,n){"use strict";var r=n(8),o=n(19),i=n(55),a=n(106),s=n(27),c=n(40),u=n(71),l=n(12),h=n(73),f=n(41),p=h("slice"),d=f("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),g=[].slice,y=Math.max;r({target:"Array",proto:!0,forced:!p||!d},{slice:function(t,e){var n,r,l,h=c(this),f=s(h.length),p=a(t,f),d=a(void 0===e?f:e,f);if(i(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[v])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(h,p,d);for(r=new(void 0===n?Array:n)(y(d-p,0)),l=0;p<d;p++,l++)p in h&&u(r,l,h[p]);return r.length=l,r}})},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(238);t.exports=r},function(t,e,n){n(239);var r=n(15);r.JSON||(r.JSON={stringify:JSON.stringify}),t.exports=function(t,e,n){return r.JSON.stringify.apply(null,arguments)}},function(t,e,n){var r=n(8),o=n(35),i=n(17),a=o("JSON","stringify"),s=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,l=function(t,e,n){var r=n.charAt(e-1),o=n.charAt(e+1);return c.test(t)&&!u.test(o)||u.test(t)&&!c.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},h=i(function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")});a&&r({target:"JSON",stat:!0,forced:h},{stringify:function(t,e,n){var r=a.apply(null,arguments);return"string"==typeof r?r.replace(s,l):r}})},function(t,e,n){var r=n(135);t.exports=function(t){if(r(t))return t}},function(t,e,n){var r=n(76),o=n(145),i=n(116);t.exports=function(t,e){if(void 0!==i&&o(Object(t))){var n=[],a=!0,s=!1,c=void 0;try{for(var u,l=r(t);!(a=(u=l.next()).done)&&(n.push(u.value),!e||n.length!==e);a=!0);}catch(t){s=!0,c=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}return n}}},function(t,e,n){n(36),n(37);var r=n(153);t.exports=r},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(245);t.exports=r},function(t,e,n){n(246);var r=n(15);t.exports=r.Object.entries},function(t,e,n){var r=n(8),o=n(247).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},function(t,e,n){var r=n(24),o=n(69),i=n(40),a=n(84).f,s=function(t){return function(e){for(var n,s=i(e),c=o(s),u=c.length,l=0,h=[];u>l;)n=c[l++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}};t.exports={entries:s(!0),values:s(!1)}},function(t,e,n){var r=n(249);t.exports=r},function(t,e,n){n(250),n(92),n(37),n(36);var r=n(15);t.exports=r.Map},function(t,e,n){"use strict";var r=n(154),o=n(156);t.exports=r("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},o)},function(t,e,n){var r=n(17);t.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,e,n){var r=n(253);t.exports=r},function(t,e,n){n(254);var r=n(15).Object,o=t.exports=function(t,e,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(o.sham=!0)},function(t,e,n){var r=n(8),o=n(24);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n(29).f})},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=m(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function f(){}function p(){}var d={};d[o]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(b([])));g&&g!==e&&n.call(g,o)&&(d=g);var y=p.prototype=h.prototype=Object.create(d);function x(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function C(t,e){var r;this._invoke=function(o,i){function a(){return new e(function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(c.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}}function m(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,m(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function b(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return f.prototype=y.constructor=p,p.constructor=f,f.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},x(C.prototype),C.prototype[i]=function(){return this},t.AsyncIterator=C,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new C(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(y),s(y,a,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=b,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:b(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(257);t.exports=r},function(t,e,n){n(258);var r=n(15);t.exports=r.parseInt},function(t,e,n){var r=n(8),o=n(125);r({global:!0,forced:parseInt!=o},{parseInt:o})},function(t,e,n){var r=n(159);t.exports=r},function(t,e,n){"use strict";var r,o,i,a,s=n(8),c=n(44),u=n(14),l=n(35),h=n(161),f=n(50),p=n(118),d=n(45),v=n(157),g=n(19),y=n(34),x=n(74),C=n(127),m=n(51),w=n(144),S=n(162),k=n(163).set,b=n(261),P=n(165),E=n(262),A=n(75),R=n(94),I=n(43),D=n(124),L=n(12),T=n(93),F=n(91),O=L("species"),N="Promise",U=I.get,B=I.set,M=I.getterFor(N),_=h,z=u.TypeError,j=u.document,q=u.process,W=l("fetch"),V=A.f,G=V,Y=!!(j&&j.createEvent&&u.dispatchEvent),Q="function"==typeof PromiseRejectionEvent,H=D(N,function(){if(C(_)===String(_)){if(66===F)return!0;if(!T&&!Q)return!0}if(c&&!_.prototype.finally)return!0;if(F>=51&&/native code/.test(_))return!1;var t=_.resolve(1),e=function(t){t(function(){},function(){})};return(t.constructor={})[O]=e,!(t.then(function(){})instanceof e)}),X=H||!w(function(t){_.all(t).catch(function(){})}),K=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},J=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;b(function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,s,c,u=n[i++],l=o?u.ok:u.fail,h=u.resolve,f=u.reject,p=u.domain;try{l?(o||(2===t.rejection&&et(t),t.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(z("Promise-chain cycle")):(s=K(a))?s.call(a,h,f):h(a)):f(r)}catch(t){p&&!c&&p.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Z(t)})}},$=function(t,e,n){var r,o;Y?((r=j.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!Q&&(o=u["on"+t])?o(r):"unhandledrejection"===t&&E("Unhandled promise rejection",n)},Z=function(t){k.call(u,function(){var e,n=t.facade,r=t.value;if(tt(t)&&(e=R(function(){T?q.emit("unhandledRejection",r,n):$("unhandledrejection",n,r)}),t.rejection=T||tt(t)?2:1,e.error))throw e.value})},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t){k.call(u,function(){var e=t.facade;T?q.emit("rejectionHandled",e):$("rejectionhandled",e,t.value)})},nt=function(t,e,n){return function(r){t(e,r,n)}},rt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,J(t,!0))},ot=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw z("Promise can't be resolved itself");var r=K(e);r?b(function(){var n={done:!1};try{r.call(e,nt(ot,n,t),nt(rt,n,t))}catch(e){rt(n,e,t)}}):(t.value=e,t.state=1,J(t,!1))}catch(e){rt({done:!1},e,t)}}};H&&(_=function(t){x(this,_,N),y(t),r.call(this);var e=U(this);try{t(nt(ot,e),nt(rt,e))}catch(t){rt(e,t)}},(r=function(t){B(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(_.prototype,{then:function(t,e){var n=M(this),r=V(S(this,_));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=T?q.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&J(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r,e=U(t);this.promise=t,this.resolve=nt(ot,e),this.reject=nt(rt,e)},A.f=V=function(t){return t===_||t===i?new o(t):G(t)},c||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",function(t,e){var n=this;return new _(function(t,e){a.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof W&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return P(_,W.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:H},{Promise:_}),d(_,N,!1,!0),v(N),i=l(N),s({target:N,stat:!0,forced:H},{reject:function(t){var e=V(this);return e.reject.call(void 0,t),e.promise}}),s({target:N,stat:!0,forced:c||H},{resolve:function(t){return P(c&&this===i?_:this,t)}}),s({target:N,stat:!0,forced:X},{all:function(t){var e=this,n=V(e),r=n.resolve,o=n.reject,i=R(function(){var n=y(e.resolve),i=[],a=0,s=1;m(t,function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then(function(t){u||(u=!0,i[c]=t,--s||r(i))},o)}),--s||r(i)});return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=V(e),r=n.reject,o=R(function(){var o=y(e.resolve);m(t,function(t){o.call(e,t).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}})},function(t,e,n){var r,o,i,a,s,c,u,l,h=n(14),f=n(83).f,p=n(163).set,d=n(164),v=n(93),g=h.MutationObserver||h.WebKitMutationObserver,y=h.document,x=h.process,C=h.Promise,m=f(h,"queueMicrotask"),w=m&&m.value;w||(r=function(){var t,e;for(v&&(t=x.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},!d&&!v&&g&&y?(s=!0,c=y.createTextNode(""),new g(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s}):C&&C.resolve?(u=C.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=v?function(){x.nextTick(r)}:function(){p.call(h,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(t,e,n){var r=n(14);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e,n){"use strict";var r=n(8),o=n(44),i=n(161),a=n(17),s=n(35),c=n(162),u=n(165),l=n(50);r({target:"Promise",proto:!0,real:!0,forced:!!i&&a(function(){i.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=c(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then(function(){return n})}:t,n?function(n){return u(e,t()).then(function(){throw n})}:t)}}),o||"function"!=typeof i||i.prototype.finally||l(i.prototype,"finally",s("Promise").prototype.finally)},function(t,e,n){t.exports=n(265)},function(t,e,n){var r=n(159);n(266),n(267),n(268),n(269),t.exports=r},function(t,e,n){n(160)},function(t,e,n){n(166)},function(t,e,n){"use strict";var r=n(8),o=n(75),i=n(94);r({target:"Promise",stat:!0},{try:function(t){var e=o.f(this),n=i(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}})},function(t,e,n){n(167)},function(t,e,n){n(126);var r=n(15);t.exports=r.setInterval},function(t,e,n){var r=n(272);t.exports=r},function(t,e,n){n(273),n(92),n(37),n(36);var r=n(15);t.exports=r.Set},function(t,e,n){"use strict";var r=n(154),o=n(156);t.exports=r("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},o)},function(t,e,n){var r=n(275);t.exports=r},function(t,e,n){n(276);var r=n(15);t.exports=r.Date.now},function(t,e,n){n(8)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,n){var r=n(278);t.exports=r},function(t,e,n){n(279);var r=n(15);t.exports=r.Object.keys},function(t,e,n){var r=n(8),o=n(30),i=n(69);r({target:"Object",stat:!0,forced:n(17)(function(){i(1)})},{keys:function(t){return i(o(t))}})},function(t,e,n){var r=n(281);t.exports=r},function(t,e,n){var r=n(282),o=String.prototype;t.exports=function(t){var e=t.startsWith;return"string"==typeof t||t===o||t instanceof String&&e===o.startsWith?r:e}},function(t,e,n){n(283);var r=n(22);t.exports=r("String").startsWith},function(t,e,n){"use strict";var r,o=n(8),i=n(83).f,a=n(27),s=n(168),c=n(54),u=n(169),l=n(44),h="".startsWith,f=Math.min,p=u("startsWith");o({target:"String",proto:!0,forced:!(!l&&!p&&(r=i(String.prototype,"startsWith"),r&&!r.writable)||p)},{startsWith:function(t){var e=String(c(this));s(t);var n=a(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return h?h.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(19),o=n(66),i=n(12)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){t.exports=n(286)},function(t,e,n){var r=n(287);t.exports=r},function(t,e,n){n(150),n(37),n(36);var r=n(117);t.exports=r.f("iterator")},function(t,e,n){var r=n(289);t.exports=r},function(t,e,n){var r=n(290),o=n(292),i=Array.prototype,a=String.prototype;t.exports=function(t){var e=t.includes;return t===i||t instanceof Array&&e===i.includes?r:"string"==typeof t||t===a||t instanceof String&&e===a.includes?o:e}},function(t,e,n){n(291);var r=n(22);t.exports=r("Array").includes},function(t,e,n){"use strict";var r=n(8),o=n(105).includes,i=n(108);r({target:"Array",proto:!0,forced:!n(41)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(t,e,n){n(293);var r=n(22);t.exports=r("String").includes},function(t,e,n){"use strict";var r=n(8),o=n(168),i=n(54);r({target:"String",proto:!0,forced:!n(169)("includes")},{includes:function(t){return!!~String(i(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";(function(t){var r=n(295),o=n(296),i=n(297);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=s(t,r)).write(e,n);return o!==r&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return _(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return _(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){var i,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(t,i)===u(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var h=!0,f=0;f<c;f++)if(u(t,i+f)!==u(e,f)){h=!1;break}if(h)return i}return-1}function x(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function C(t,e,n,r){return j(_(e,t.length-n),t,n,r)}function m(t,e,n,r){return j(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return m(t,e,n,r)}function S(t,e,n,r){return j(z(e),t,n,r)}function k(t,e,n,r){return j(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function b(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,c,u=t[o],l=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=M(t[i]);return o}function I(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function T(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function O(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,i){return i||O(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||O(t,0,n,8),o.write(t,e,n,r,52,8),n+8}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return b(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(r,o),l=t.slice(e,n),h=0;h<s;++h)if(u[h]!==l[h]){i=u[h],a=l[h];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return m(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||L(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||L(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);L(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);L(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):T(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):T(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=c.isBuffer(t)?t:_(new c(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function _(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function j(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(82))},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],c=new i(3*(a+s)/4-s),l=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(l(t,a,a+16383>s?s:a+16383));return 1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,h=n?o-1:0,f=n?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+t[e+h],h+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,h=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*c-1)*Math.pow(2,o),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(299);t.exports=r},function(t,e,n){var r=n(300),o=Array.prototype;t.exports=function(t){var e=t.splice;return t===o||t instanceof Array&&e===o.splice?r:e}},function(t,e,n){n(301);var r=n(22);t.exports=r("Array").splice},function(t,e,n){"use strict";var r=n(8),o=n(106),i=n(79),a=n(27),s=n(30),c=n(90),u=n(71),l=n(73),h=n(41),f=l("splice"),p=h("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var n,r,l,h,f,p,g=s(this),y=a(g.length),x=o(t,y),C=arguments.length;if(0===C?n=r=0:1===C?(n=0,r=y-x):(n=C-2,r=v(d(i(e),0),y-x)),y+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=c(g,r),h=0;h<r;h++)(f=x+h)in g&&u(l,h,g[f]);if(l.length=r,n<r){for(h=x;h<y-r;h++)p=h+n,(f=h+r)in g?g[p]=g[f]:delete g[p];for(h=y;h>y-r+n;h--)delete g[h-1]}else if(n>r)for(h=y-r;h>x;h--)p=h+n-1,(f=h+r-1)in g?g[p]=g[f]:delete g[p];for(h=0;h<n;h++)g[h+x]=arguments[h+2];return g.length=y-r+n,l}})},function(t,e,n){var r=n(303);t.exports=r},function(t,e,n){var r=n(304),o=Array.prototype;t.exports=function(t){var e=t.concat;return t===o||t instanceof Array&&e===o.concat?r:e}},function(t,e,n){n(147);var r=n(22);t.exports=r("Array").concat},function(t,e,n){var r=n(136);t.exports=r},function(t,e,n){n(36),n(37);var r=n(72);t.exports=r},function(t,e,n){var r=n(146);t.exports=r},function(t,e,n){var r=n(139);t.exports=r},function(t,e,n){n(36);var r=n(310),o=n(49),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.values;return t===i||t instanceof Array&&e===i.values||a.hasOwnProperty(o(t))?r:e}},function(t,e,n){var r=n(311);t.exports=r},function(t,e,n){n(87);var r=n(22);t.exports=r("Array").values},function(t,e,n){var r=n(313);t.exports=r},function(t,e,n){var r=n(314),o=Array.prototype;t.exports=function(t){var e=t.flatMap;return t===o||t instanceof Array&&e===o.flatMap?r:e}},function(t,e,n){n(315),n(317);var r=n(22);t.exports=r("Array").flatMap},function(t,e,n){"use strict";var r=n(8),o=n(316),i=n(30),a=n(27),s=n(34),c=n(90);r({target:"Array",proto:!0},{flatMap:function(t){var e,n=i(this),r=a(n.length);return s(t),(e=c(n,0)).length=o(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},function(t,e,n){"use strict";var r=n(55),o=n(27),i=n(42),a=function(t,e,n,s,c,u,l,h){for(var f,p=c,d=0,v=!!l&&i(l,h,3);d<s;){if(d in n){if(f=v?v(n[d],d,e):n[d],u>0&&r(f))p=a(t,e,f,o(f.length),p,u-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=f}p++}d++}return p};t.exports=a},function(t,e,n){n(108)("flatMap")},function(t,e,n){var r=n(152);t.exports=r},function(t,e,n){var r=n(320);t.exports=r},function(t,e,n){var r=n(321),o=Array.prototype;t.exports=function(t){var e=t.sort;return t===o||t instanceof Array&&e===o.sort?r:e}},function(t,e,n){n(322);var r=n(22);t.exports=r("Array").sort},function(t,e,n){"use strict";var r=n(8),o=n(34),i=n(30),a=n(17),s=n(80),c=[],u=c.sort,l=a(function(){c.sort(void 0)}),h=a(function(){c.sort(null)}),f=s("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(t){return void 0===t?u.call(i(this)):u.call(i(this),o(t))}})},function(t,e,n){var r=n(324);t.exports=r},function(t,e,n){var r=n(325),o=Array.prototype;t.exports=function(t){var e=t.map;return t===o||t instanceof Array&&e===o.map?r:e}},function(t,e,n){n(326);var r=n(22);t.exports=r("Array").map},function(t,e,n){"use strict";var r=n(8),o=n(70).map,i=n(73),a=n(41),s=i("map"),c=a("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(328);t.exports=r},function(t,e,n){n(87),n(329);var r=n(15);t.exports=r.Object.fromEntries},function(t,e,n){var r=n(8),o=n(51),i=n(71);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,function(t,n){i(e,t,n)},{AS_ENTRIES:!0}),e}})},function(t,e,n){var r=n(331);t.exports=r},function(t,e,n){var r=n(332),o=Array.prototype;t.exports=function(t){var e=t.filter;return t===o||t instanceof Array&&e===o.filter?r:e}},function(t,e,n){n(333);var r=n(22);t.exports=r("Array").filter},function(t,e,n){"use strict";var r=n(8),o=n(70).filter,i=n(73),a=n(41),s=i("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(335);t.exports=r},function(t,e,n){var r=n(336),o=Array.prototype;t.exports=function(t){var e=t.reduce;return t===o||t instanceof Array&&e===o.reduce?r:e}},function(t,e,n){n(337);var r=n(22);t.exports=r("Array").reduce},function(t,e,n){"use strict";var r=n(8),o=n(338).left,i=n(80),a=n(41),s=n(91),c=n(93),u=i("reduce"),l=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!u||!l||!c&&s>79&&s<83},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(34),o=n(30),i=n(85),a=n(27),s=function(t){return function(e,n,s,c){r(n);var u=o(e),l=i(u),h=a(u.length),f=t?h-1:0,p=t?-1:1;if(s<2)for(;;){if(f in l){c=l[f],f+=p;break}if(f+=p,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=p)f in l&&(c=n(c,l[f],f,u));return c}};t.exports={left:s(!1),right:s(!0)}},function(t,e,n){var r=n(340);t.exports=r},function(t,e,n){n(341);var r=n(15);t.exports=r.Number.isInteger},function(t,e,n){n(8)({target:"Number",stat:!0},{isInteger:n(342)})},function(t,e,n){var r=n(19),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var r=n(344);t.exports=r},function(t,e,n){n(345),n(348),n(171);var r=n(15);t.exports=r.URL},function(t,e,n){"use strict";n(37);var r,o=n(8),i=n(24),a=n(170),s=n(14),c=n(131),u=n(50),l=n(74),h=n(25),f=n(346),p=n(141),d=n(140).codeAt,v=n(347),g=n(45),y=n(171),x=n(43),C=s.URL,m=y.URLSearchParams,w=y.getState,S=x.set,k=x.getterFor("URL"),b=Math.floor,P=Math.pow,E=/[A-Za-z]/,A=/[\d+-.A-Za-z]/,R=/\d/,I=/^(0x|0X)/,D=/^[0-7]+$/,L=/^\d+$/,T=/^[\dA-Fa-f]+$/,F=/[\u0000\u0009\u000A\u000D #%\/:?@[\\]]/,O=/[\u0000\u0009\u000A\u000D #\/:?@[\\]]/,N=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,U=/[\u0009\u000A\u000D]/g,B=function(t,e){var n,r,o;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=_(e.slice(1,-1))))return"Invalid host";t.host=n}else if(Q(t)){if(e=v(e),F.test(e))return"Invalid host";if(null===(n=M(e)))return"Invalid host";t.host=n}else{if(O.test(e))return"Invalid host";for(n="",r=p(e),o=0;o<r.length;o++)n+=G(r[o],j);t.host=n}},M=function(t){var e,n,r,o,i,a,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(o=c[r]))return t;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=I.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?L:8==i?D:T).test(o))return t;a=parseInt(o,i)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=P(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*P(256,3-r);return s},_=function(t){var e,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,l=++u}for(;f();){if(8==u)return;if(":"!=f()){for(e=n=0;n<4&&T.test(f());)e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,u>6)return;for(r=0;f();){if(o=null,r>0){if(!("."==f()&&r<4))return;h++}if(!R.test(f()))return;for(;R.test(f());){if(i=parseInt(f(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;h++}c[u]=256*c[u]+o,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[u++]=e}else{if(null!==l)return;h++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},z=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=b(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},j={},q=f({},j,{" ":1,'"':1,"<":1,">":1,"`":1}),W=f({},q,{"#":1,"?":1,"{":1,"}":1}),V=f({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),G=function(t,e){var n=d(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(t){return h(Y,t.scheme)},H=function(t){return""!=t.username||""!=t.password},X=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},K=function(t,e){var n;return 2==t.length&&E.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},J=function(t){var e;return t.length>1&&K(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},$=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&K(e[0],!0)||e.pop()},Z=function(t){return"."===t||"%2e"===t.toLowerCase()},tt={},et={},nt={},rt={},ot={},it={},at={},st={},ct={},ut={},lt={},ht={},ft={},pt={},dt={},vt={},gt={},yt={},xt={},Ct={},mt={},wt=function(t,e,n,o){var i,a,s,c,u,l=n||tt,f=0,d="",v=!1,g=!1,y=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(N,"")),e=e.replace(U,""),i=p(e);f<=i.length;){switch(a=i[f],l){case tt:if(!a||!E.test(a)){if(n)return"Invalid scheme";l=nt;continue}d+=a.toLowerCase(),l=et;break;case et:if(a&&(A.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";d="",l=nt,f=0;continue}if(n&&(Q(t)!=h(Y,d)||"file"==d&&(H(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,n)return void(Q(t)&&Y[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?l=pt:Q(t)&&o&&o.scheme==t.scheme?l=rt:Q(t)?l=st:"/"==i[f+1]?(l=ot,f++):(t.cannotBeABaseURL=!0,t.path.push(""),l=xt)}break;case nt:if(!o||o.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){t.scheme=o.scheme,t.path=o.path.slice(),t.query=o.query,t.fragment="",t.cannotBeABaseURL=!0,l=mt;break}l="file"==o.scheme?pt:it;continue;case rt:if("/"!=a||"/"!=i[f+1]){l=it;continue}l=ct,f++;break;case ot:if("/"==a){l=ut;break}l=yt;continue;case it:if(t.scheme=o.scheme,a==r)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query;else if("/"==a||"\\"==a&&Q(t))l=at;else if("?"==a)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query="",l=Ct;else{if("#"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.path.pop(),l=yt;continue}t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query,t.fragment="",l=mt}break;case at:if(!Q(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,l=yt;continue}l=ut}else l=ct;break;case st:if(l=ct,"/"!=a||"/"!=d.charAt(f+1))continue;f++;break;case ct:if("/"!=a&&"\\"!=a){l=ut;continue}break;case ut:if("@"==a){v&&(d="%40"+d),v=!0,s=p(d);for(var x=0;x<s.length;x++){var C=s[x];if(":"!=C||y){var m=G(C,V);y?t.password+=m:t.username+=m}else y=!0}d=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(t)){if(v&&""==d)return"Invalid authority";f-=p(d).length+1,d="",l=lt}else d+=a;break;case lt:case ht:if(n&&"file"==t.scheme){l=vt;continue}if(":"!=a||g){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(t)){if(Q(t)&&""==d)return"Invalid host";if(n&&""==d&&(H(t)||null!==t.port))return;if(c=B(t,d))return c;if(d="",l=gt,n)return;continue}"["==a?g=!0:"]"==a&&(g=!1),d+=a}else{if(""==d)return"Invalid host";if(c=B(t,d))return c;if(d="",l=ft,n==ht)return}break;case ft:if(!R.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(t)||n){if(""!=d){var w=parseInt(d,10);if(w>65535)return"Invalid port";t.port=Q(t)&&w===Y[t.scheme]?null:w,d=""}if(n)return;l=gt;continue}return"Invalid port"}d+=a;break;case pt:if(t.scheme="file","/"==a||"\\"==a)l=dt;else{if(!o||"file"!=o.scheme){l=yt;continue}if(a==r)t.host=o.host,t.path=o.path.slice(),t.query=o.query;else if("?"==a)t.host=o.host,t.path=o.path.slice(),t.query="",l=Ct;else{if("#"!=a){J(i.slice(f).join(""))||(t.host=o.host,t.path=o.path.slice(),$(t)),l=yt;continue}t.host=o.host,t.path=o.path.slice(),t.query=o.query,t.fragment="",l=mt}}break;case dt:if("/"==a||"\\"==a){l=vt;break}o&&"file"==o.scheme&&!J(i.slice(f).join(""))&&(K(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host),l=yt;continue;case vt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&K(d))l=yt;else if(""==d){if(t.host="",n)return;l=gt}else{if(c=B(t,d))return c;if("localhost"==t.host&&(t.host=""),n)return;d="",l=gt}continue}d+=a;break;case gt:if(Q(t)){if(l=yt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=yt,"/"!=a))continue}else t.fragment="",l=mt;else t.query="",l=Ct;break;case yt:if(a==r||"/"==a||"\\"==a&&Q(t)||!n&&("?"==a||"#"==a)){if(".."===(u=(u=d).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?($(t),"/"==a||"\\"==a&&Q(t)||t.path.push("")):Z(d)?"/"==a||"\\"==a&&Q(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&K(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==r||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",l=Ct):"#"==a&&(t.fragment="",l=mt)}else d+=G(a,W);break;case xt:"?"==a?(t.query="",l=Ct):"#"==a?(t.fragment="",l=mt):a!=r&&(t.path[0]+=G(a,j));break;case Ct:n||"#"!=a?a!=r&&("'"==a&&Q(t)?t.query+="%27":t.query+="#"==a?"%23":G(a,j)):(t.fragment="",l=mt);break;case mt:a!=r&&(t.fragment+=G(a,q))}f++}},St=function(t){var e,n,r=l(this,St,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(t),s=S(r,{type:"URL"});if(void 0!==o)if(o instanceof St)e=k(o);else if(n=wt(e={},String(o)))throw TypeError(n);if(n=wt(s,a,null,e))throw TypeError(n);var c=s.searchParams=new m,u=w(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},i||(r.href=bt.call(r),r.origin=Pt.call(r),r.protocol=Et.call(r),r.username=At.call(r),r.password=Rt.call(r),r.host=It.call(r),r.hostname=Dt.call(r),r.port=Lt.call(r),r.pathname=Tt.call(r),r.search=Ft.call(r),r.searchParams=Ot.call(r),r.hash=Nt.call(r))},kt=St.prototype,bt=function(){var t=k(this),e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==o?(u+="//",H(t)&&(u+=n+(r?":"+r:"")+"@"),u+=z(o),null!==i&&(u+=":"+i)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Pt=function(){var t=k(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&Q(t)?e+"://"+z(t.host)+(null!==n?":"+n:""):"null"},Et=function(){return k(this).scheme+":"},At=function(){return k(this).username},Rt=function(){return k(this).password},It=function(){var t=k(this),e=t.host,n=t.port;return null===e?"":null===n?z(e):z(e)+":"+n},Dt=function(){var t=k(this).host;return null===t?"":z(t)},Lt=function(){var t=k(this).port;return null===t?"":String(t)},Tt=function(){var t=k(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ft=function(){var t=k(this).query;return t?"?"+t:""},Ot=function(){return k(this).searchParams},Nt=function(){var t=k(this).fragment;return t?"#"+t:""},Ut=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(i&&c(kt,{href:Ut(bt,function(t){var e=k(this),n=String(t),r=wt(e,n);if(r)throw TypeError(r);w(e.searchParams).updateSearchParams(e.query)}),origin:Ut(Pt),protocol:Ut(Et,function(t){var e=k(this);wt(e,String(t)+":",tt)}),username:Ut(At,function(t){var e=k(this),n=p(String(t));if(!X(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=G(n[r],V)}}),password:Ut(Rt,function(t){var e=k(this),n=p(String(t));if(!X(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=G(n[r],V)}}),host:Ut(It,function(t){var e=k(this);e.cannotBeABaseURL||wt(e,String(t),lt)}),hostname:Ut(Dt,function(t){var e=k(this);e.cannotBeABaseURL||wt(e,String(t),ht)}),port:Ut(Lt,function(t){var e=k(this);X(e)||(""==(t=String(t))?e.port=null:wt(e,t,ft))}),pathname:Ut(Tt,function(t){var e=k(this);e.cannotBeABaseURL||(e.path=[],wt(e,t+"",gt))}),search:Ut(Ft,function(t){var e=k(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",wt(e,t,Ct)),w(e.searchParams).updateSearchParams(e.query)}),searchParams:Ut(Ot),hash:Ut(Nt,function(t){var e=k(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",wt(e,t,mt)):e.fragment=null})}),u(kt,"toJSON",function(){return bt.call(this)},{enumerable:!0}),u(kt,"toString",function(){return bt.call(this)},{enumerable:!0}),C){var Bt=C.createObjectURL,Mt=C.revokeObjectURL;Bt&&u(St,"createObjectURL",function(t){return Bt.apply(C,arguments)}),Mt&&u(St,"revokeObjectURL",function(t){return Mt.apply(C,arguments)})}g(St,"URL"),o({global:!0,forced:!a,sham:!i},{URL:St})},function(t,e,n){"use strict";var r=n(24),o=n(17),i=n(69),a=n(149),s=n(84),c=n(30),u=n(85),l=Object.assign,h=Object.defineProperty;t.exports=!l||o(function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=i(l({},e)).join("")})?function(t,e){for(var n=c(t),o=arguments.length,l=1,h=a.f,f=s.f;o>l;)for(var p,d=u(arguments[l++]),v=h?i(d).concat(h(d)):i(d),g=v.length,y=0;g>y;)p=v[y++],r&&!f.call(d,p)||(n[p]=d[p]);return n}:l},function(t,e,n){"use strict";var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,c=function(t){return t+22+75*(t<26)},u=function(t,e,n){var r=0;for(t=n?a(t/700):t>>1,t+=a(t/e);t>455;r+=36)t=a(t/35);return a(r+36*t/(t+38))},l=function(t){var e,n,r=[],o=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=t.charCodeAt(n++);56320==(64512&i)?e.push(((1023&o)<<10)+(1023&i)+65536):(e.push(o),n--)}else e.push(o)}return e}(t)).length,l=128,h=0,f=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(s(n));var p=r.length,d=p;for(p&&r.push("-");d<o;){var v=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=l&&n<v&&(v=n);var g=d+1;if(v-l>a((2147483647-h)/g))throw RangeError(i);for(h+=(v-l)*g,l=v,e=0;e<t.length;e++){if((n=t[e])<l&&++h>2147483647)throw RangeError(i);if(n==l){for(var y=h,x=36;;x+=36){var C=x<=f?1:x>=f+26?26:x-f;if(y<C)break;var m=y-C,w=36-C;r.push(s(c(C+m%w))),y=a(m/w)}r.push(s(c(y))),f=u(h,g,d==p),h=0,++d}}++h,++l}return r.join("")};t.exports=function(t){var e,n,i=[],a=t.toLowerCase().replace(o,".").split(".");for(e=0;e<a.length;e++)n=a[e],i.push(r.test(n)?"xn--"+l(n):n);return i.join(".")}},function(t,e){}])});
},{"process":"FT5O"}],"ryqy":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@bilibili-live/web-player-common"),i=t(require("@bilibili-live/fmp4.js")),a=require("@bilibili-live/sisters-p2p");function n(e){var t,n=e.corePlayer,s=e.videoEl,u=e.src,d=e.roomId,f=e.trackerServer;if(!(n instanceof i.default.Hls7Player))return r.logger.error("bilibili p2p must use be Hls7Player instance"),null;var c=null!==(t=o(u))&&void 0!==t?t:{},m=c.streamName,v=c.timeshift;if(null==m)return r.logger.error("can't detect stream name in url"),null;if(!a.SistersPlayerContext.checkP2PSupport())return r.logger.error("unsupported bilibili p2p"),null;var p=new a.SistersPlayerContext(function(e,t){r.logger.info(t)},{trackerParams:{stream:m,roomid:d,timeshift:v},sdkParams:{trackerServer:f}});if(void 0!==p.getStatisticsData)throw new Error("getStatisticsData is exist, cannot be extended");return p.getStatisticsData=l(p,{timeshift:v,streamName:m}),n.setP2PContext({P2PBufferLength:3,P2PFetchAsStream:function(e,t){void 0===t&&(t=!1),p.p2pFetchAsBuffer(this._onError,this._onResult,function(){return 1e3*r.remainBufferLength(s)},e,t)},onPlaylistUpdate:function(e,t){p.updatePlaylist(e,t)}}),p}function l(t,r){var i=r.timeshift,n=r.streamName;return function(){var r,l,o,s,u,d,f,c,m,v,p=t.getP2PDataCollectionStatus();if(null==p)return null;var P=null!==(r=p.getQueryServerInfo())&&void 0!==r?r:{},g=P.fragNum,h=void 0===g?0:g,S=P.queryNum,D=void 0===S?0:S,y=e(e({cdnDownloadValidSize:null!==(l=p.getServerDownload())&&void 0!==l?l:0,cdnDownloadInvalidSize:null!==(o=p.getWastedDataSize(a.WastedDataType.CDN_REPEAT))&&void 0!==o?o:0,fetchErrorNum:null!==(s=p.getFetchErrorNum(a.FetchErrorType.ERROR_TO_RELOAD))&&void 0!==s?s:0,p2pDownloadValidSize:null!==(u=p.getP2PDownload())&&void 0!==u?u:0,p2pDownloadInvalidSize:null!==(d=p.getWastedDataSize(a.WastedDataType.P2P_LATE))&&void 0!==d?d:0,p2pErrorSize:null!==(f=p.getWastedDataSize(a.WastedDataType.ERROR_DATA))&&void 0!==f?f:0,p2pUploadSize:null!==(c=p.getP2PSend())&&void 0!==c?c:0,fragNum:h,queryNum:D,timeshift:i,streamName:n},null!==(m=p.getExtendReportInfo())&&void 0!==m?m:{}),null!==(v=p.getTrackerInfo())&&void 0!==v?v:{});return p.clearP2PDataInfo(),y}}function o(e){var t=/\/live-bvc\/\d{3,9}\/(live_.+?)[\/.]/.exec(e);if(null==t)return{timeshift:0,streamName:null};var r=Number(new URL(e).searchParams.get("tmshift"));return{streamName:t[1],timeshift:r}}exports.default=n;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/fmp4.js":"lV3a","@bilibili-live/sisters-p2p":"GTYV"}],"p0fG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t,o){this._element=null,this._loader=null,this._responsed=!1,this._onResponse=e,this._onData=t,this._onError=o,this._onStateChangeBinder=this._onStateChange.bind(this),this.QVBP2P=window.QVBP2P}return e.prototype.destroy=function(){null!=this._loader&&(this._loader.destroy(),this._loader=null),this._responsed=!1},Object.defineProperty(e.prototype,"videoElement",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!1,configurable:!0}),e.prototype.fetchAsStream=function(e){null!=this._element&&(null!=this._loader&&this._loader.close(),this._loader=new this.QVBP2P({debug:!1}),this._loader.listen(this.QVBP2P.ComEvents.STATE_CHANGE,this._onStateChangeBinder),this._loader.loadSource({src:e}),this._loader.setMediaElement(this._element))},e.prototype._onStateChange=function(e,t){switch(t.code){case this.QVBP2P.ComCodes.RECEIVE_BUFFER:this._responsed||(this._responsed=!0,this._onResponse(200,"video/x-flv")),null!=t.payload?this._onData(new Uint8Array(t.payload)):console.warn("QVBP2P no payload");break;case this.QVBP2P.ComCodes.ROLLBACK:console.error("TX P2P error: "+e),"function"==typeof this._onError&&this._onError(11001,e)}},e.isSupported=function(){var e;return null===(e=window.QVBP2P)||void 0===e?void 0:e.isSupported()},e}();exports.default=e;
},{}],"V6Hm":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@bilibili-live/web-player-common"),t=e(require("@bilibili-live/fmp4.js")),i=e(require("./qvb-fetcher")),n=!1;function o(e){var o=e.corePlayer,u=e.videoEl;return o instanceof t.default.fMp4Player?i.default.isSupported()?n?(r.logger.warn("p2p P2P_ERROR_FLAG fallback"),!1):(o.createFetcher=function(e,t,o){var l=new i.default(function(r){e(new a(r))},t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n=!0,r.logger.error("third fetcher Error: "+JSON.stringify(e)),o.apply(void 0,e)});return l.videoElement=u,l},!0):(r.logger.error("QVB unsupported or sdk not loaded"),!1):(r.logger.error("QVB p2p must use be fMp4Player instance"),!1)}exports.default=o;var u=function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e]},e.prototype.set=function(e,r){this.map[e]=r},e}(),a=function(){return function(e){this.status=e,this.ok=e>=200&&e<=299,this.headers=new u}}();
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/fmp4.js":"lV3a","./qvb-fetcher":"p0fG"}],"R6Co":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./bili-p2p")),i=e(require("./qvb-p2p"));exports.default={bindBili:t.default,bindQVB:i.default};
},{"./bili-p2p":"ryqy","./qvb-p2p":"V6Hm"}],"A6uK":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))(function(o,i){function a(e){try{u(t.next(e))}catch(r){i(r)}}function l(e){try{u(t.throw(e))}catch(r){i(r)}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(a,l)}u((t=t.apply(e,r||[])).next())})},n=this&&this.__generator||function(e,r){var n,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;switch(t=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=r.call(e,a)}catch(l){i=[6,l],t=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("@bilibili-live/web-player-common"),i=require("@bilibili-live/web-player-video"),a=t(require("@bilibili-live/web-player-p2p")),l=t(require("@bilibili-live/web-player-track"));function u(e){var t=e.video,l=e.type,u=e.roomId,p=e.interval;return r(this,void 0,Promise,function(){var e;return n(this,function(r){switch(r.label){case 0:return o.logger.info("launch p2p: "+l),l!==o.P2PType.FLV_QVB?[3,4]:(t.delyLoad(),null!=window.QVBP2P?[3,2]:[4,f("//s1.hdslb.com/bfs/static/blive/web-player/p2p/qvbp2p_bilibili_v1.8.16.min.js").catch(function(){o.logger.error("qvb script loading failed")})]);case 1:r.sent(),r.label=2;case 2:return[4,new Promise(function(e,r){t.once(i.EventType.LoadStart,function(n){var t=n.corePlayer,o=n.videoEl;a.default.bindQVB({corePlayer:t,videoEl:o})?e():r(new Error("launch flv_qvb failed"))}),t.load()})];case 3:return[2,r.sent()];case 4:return l!==o.P2PType.HLS_BILI?[3,6]:(t.delyLoad(),[4,d(u).catch(function(e){return o.logger.error(e),null})]);case 5:return null==(e=r.sent())?(t.load(),[2]):[2,new Promise(function(r,n){t.once(i.EventType.CorePlayerCreated,function(o){var l=o.corePlayer,f=o.videoEl,d=o.src,v=a.default.bindBili({corePlayer:l,videoEl:f,src:d,roomId:u,trackerServer:e});if(null!=v){v.onEventReport=function(e){c(e,l)};var b=s(v,f,p);t.once(i.EventType.Destroyed,function(){b(),v.destroy()}),r()}else n(new Error("launch bili_p2p failed"))}),t.load()})];case 6:return[2]}})})}function c(e,r){switch(e.type){case 1:"number"==typeof e.body.p2pBufferLengthSec&&e.body.p2pBufferLengthSec>=0&&(r.minBufferLength=e.body.p2pBufferLengthSec,o.logger.info("Change P2PBufferLength: "+e.body.p2pBufferLengthSec));break;case 0:l.default.custom(e.type+1e4,e.body,{sampleRate:.01}),o.logger.warn("sister p2p emit: code: "+e.type)}}function s(r,n,t){void 0===t&&(t=30);var i=0,a=l.default.fixedDynamicFieldsVerIns();function u(){var t=o.remainBufferLength(n);t=t<0?0:t;var u=Math.round(1e3*(n.currentTime+t)),c=o.roundNumber((u<0?0:u)-i,0);i=u;var s=r.getStatisticsData();null!=s&&a.custom(l.default.CustomCode.P2PData,e(e({},s),{duration:c}),{randDelay:5e3,extFields:"all"})}var c=setInterval(u,1e3*(t>=10||t<=300?t:30)),s=function(){clearInterval(c),u()};return window.addEventListener("beforeunload",s),function(){clearInterval(c),window.removeEventListener("beforeunload",s),u()}}function f(e){return r(this,void 0,Promise,function(){var r,t,o;return n(this,function(n){return r=document.createElement("script"),t=document.getElementsByTagName("head")[0],o=new Promise(function(e,n){r.onload=function(){e()},r.onerror=n}),r.src=e,null!=t&&t.appendChild(r),[2,o]})})}exports.default=u;var d=function(){var e=null,t=0;return function(i){return r(void 0,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:if(t===i&&null!=e)return[2,e];t=i,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,o.ajax("/xlive/open-interface/v1/tracker/conf?room_id="+i)];case 2:return[4,r.sent().domains[0]];case 3:return e=r.sent(),[3,5];case 4:return r.sent(),o.logger.error("track server url parsed error"),[3,5];case 5:return[2,e]}})})}}();
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-video":"ao58","@bilibili-live/web-player-p2p":"R6Co","@bilibili-live/web-player-track":"ESUf"}],"KY4m":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))(function(o,i){function u(e){try{a(t.next(e))}catch(r){i(r)}}function c(e){try{a(t.throw(e))}catch(r){i(r)}}function a(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(u,c)}a((t=t.apply(e,r||[])).next())})},r=this&&this.__generator||function(e,r){var n,t,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;switch(t=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,t=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=r.call(e,u)}catch(c){i=[6,c],t=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxRetryChecker=exports.blockStream=exports.loadingOrCoverImg=exports.backoffById=exports.retry=void 0;var n=require("@bilibili-live/web-player-common"),t=require("@bilibili-live/web-player-video");function o(t,o){var i=this,u=-1;return function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];return e(i,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,new Promise(function(i,a){(function t(i){return e(this,void 0,Promise,function(){var e,c,a;return r(this,function(r){switch(r.label){case 0:return-1!==u?[3,1]:(u+=1,[3,3]);case 1:return e=o[u],n.logger.error("retry times: "+u+", delay: "+e),u+=1,[4,n.sleep(e)];case 2:r.sent(),r.label=3;case 3:return r.trys.push([3,5,,9]),[4,i()];case 4:return c=r.sent(),u=-1,[2,c];case 5:return a=r.sent(),n.logger.error(a),u<o.length?[4,t(i)]:[3,7];case 6:return[2,r.sent()];case 7:throw n.logger.error("retry failed"),a;case 8:return[3,9];case 9:return[2]}})})})(function(){return t.apply(void 0,c)}).then(function(e){i(e)}).catch(function(e){a(e)})})];case 1:return[2,i.sent()]}})})}}function i(e,r){var t;return null==r||""===r?(t=n.loading(e),n.coverImg(null,e)):n.coverImg(r,e),function(){null==t||t()}}function u(e,r){null==e||e.destroy(!0);var n=null==e?void 0:e.getVideoEl();if(null!=n){n.addEventListener("play",function e(){n.removeEventListener("play",e),r()})}}exports.retry=o,exports.backoffById=function(){var t=[[0,0],[.5,2],[2,4],[4,6]].map(function(e){return e.map(function(e){return 1e3*e})}),o=new Map;return function(i){return e(void 0,void 0,void 0,function(){var e,u,c,a,l,s;return r(this,function(r){switch(r.label){case 0:if(null==(e=o.get(i))&&(e={count:0,removeTimer:0},o.set(i,e)),clearTimeout(e.removeTimer),(u=e.count)>=t.length)throw o.delete(i),new Error("backoff failed");return e.removeTimer=window.setTimeout(function(){o.delete(i)},2*t[t.length-1][1]),e.count+=1,c=t[u],a=c[0],l=c[1],s=Math.round(Math.random()*(l-a)+a),n.logger.warn("backoff delay: sleepTime: "+s+", count: "+e.count),[4,n.sleep(s)];case 1:return r.sent(),[2,e.count]}})})}}(),exports.loadingOrCoverImg=i,exports.blockStream=u,exports.maxRetryChecker=function(){var e=0,r=function(){e>0||(e=performance.now())};return function(n){return n.once(t.EventType.FirstFrame,function(){e=0}),n.once(t.EventType.Error,r),n.once(t.EventType.Ended,r),function(){return!(e>0&&performance.now()-e>36e4)}}}();
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-video":"ao58"}],"rPou":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function u(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}l((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createVideoTracker=void 0;var r=require("@bilibili-live/web-player-video"),o=n(require("@bilibili-live/web-player-track")),i=o.default.PerfCode,a=o.default.EventCode,u=o.default.CustomCode;function l(){var n=this,l=!1,c=!1;return function(s){o.default.event(a.CreateVideo,null,{sampleRate:.1,extFields:["sProtocol","sHost","p2pType","sCodec","sName"],randDelay:0}),s.once(r.EventType.NetworkResponse,function(e){var t,n=e.headers.get("x-service-module");null!=n&&o.default.updateDynamicInfo(((t={})["x-service-module"]=n,t))}),s.once(r.EventType.FirstFrame,function(e){o.default.perf(i.FirstFrame,e,{sampleRate:.1})}),s.once(r.EventType.FirstPacket,function(e){o.default.perf(i.FirstPacket,e,{sampleRate:.05})}),s.once(r.EventType.MetaData,function(e){o.default.perf(i.VideoMeta,e,{sampleRate:.05})}),s.once(r.EventType.Ended,function(){return e(n,void 0,void 0,function(){return t(this,function(e){return l=!0,[2]})})}),s.once(r.EventType.FirstFrame,function(){l=!1,c=!1}),s.once(r.EventType.Error,function(e){c||(c=!0,l||o.default.error(e.code,JSON.stringify(e.errInfo)))});var f=o.default.fixedDynamicFieldsVerIns();s.on(r.EventType.WaitReport,function(e){f.custom(u.Waiting,e,{randDelay:5e3,extFields:"all"})})}}exports.createVideoTracker=l;
},{"@bilibili-live/web-player-video":"ao58","@bilibili-live/web-player-track":"ESUf"}],"XQD5":[function(require,module,exports) {
module.exports={webPlayerReplayContainer:"_web-player-replay-container_b4807",webPlayerReplayElement:"_web-player-replay-element_b4807",webPlayerReplayProgress:"_web-player-replay-progress_b4807",webPlayerReplayCurrentPoint:"_web-player-replay-current-point_b4807",webPlayerReplayBar:"_web-player-replay-bar_b4807",webPlayerReplayHighlightsHidden:"_web-player-replay-highlights-hidden_b4807",highlightItem:"_highlight-item_b4807",highlightPot:"_highlight-pot_b4807",highlightIcon:"_highlight-icon_b4807",webPlayerReplayHighlightsShow:"_web-player-replay-highlights-show_b4807",webPlayerReplayHighlights:"_web-player-replay-highlights_b4807",highlightImg:"_highlight-img_b4807",backliveBtnContainer:"_backlive-btn-container_b4807",backliveBtn:"_backlive-btn_b4807",backliveDot:"_backlive-dot_b4807"};
},{}],"EfpE":[function(require,module,exports) {
var define;
var e;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n,o){"object"==("undefined"==typeof exports?"undefined":t(exports))&&"object"==("undefined"==typeof module?"undefined":t(module))?module.exports=o():"function"==typeof e&&e.amd?e([],o):"object"==("undefined"==typeof exports?"undefined":t(exports))?exports.DanmakuWebSocket=o():n.DanmakuWebSocket=o()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";t.a={WS_OP_HEARTBEAT:2,WS_OP_HEARTBEAT_REPLY:3,WS_OP_MESSAGE:5,WS_OP_USER_AUTHENTICATION:7,WS_OP_CONNECT_SUCCESS:8,WS_PACKAGE_HEADER_TOTAL_LENGTH:16,WS_PACKAGE_OFFSET:0,WS_HEADER_OFFSET:4,WS_VERSION_OFFSET:6,WS_OPERATION_OFFSET:8,WS_SEQUENCE_OFFSET:12,WS_BODY_PROTOCOL_VERSION_NORMAL:0,WS_BODY_PROTOCOL_VERSION_BROTLI:3,WS_HEADER_DEFAULT_VERSION:1,WS_HEADER_DEFAULT_OPERATION:1,WS_HEADER_DEFAULT_SEQUENCE:1,WS_AUTH_OK:0,WS_AUTH_TOKEN_ERROR:-101}},function(e,t,n){var o=n(2).default;e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"development"===e.CONFIG.bundleType&&(console.clear(),console.dir(e.CONFIG)),this.initialize(t)}return e.prototype.initialize=function(t){var n=this;"development"===e.CONFIG.bundleType&&console.log("App Initialized.");var r=document.createElement("script");return r.src="//activity.hdslb.com/blackboard/static/20210425/d0411babbbf77c49ca42a3320eb804ae/0NCT06vruR.js",r.onload=function(){n.ws=new o.a(t)},window.document.head.append(r),this.getReturn()},e.prototype.getReturn=function(){return"development"===e.CONFIG.bundleType?this:{destroy:this.destroy.bind(this),send:this.send.bind(this),getAuthInfo:this.getAuthInfo.bind(this),getRetryCount:this.getRetryCount.bind(this)}},e.prototype.destroy=function(){this.ws&&this.ws.destroy()},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.getAuthInfo=function(){return this.ws&&this.ws.getAuthInfo()},e.prototype.getRetryCount=function(){return this.ws&&this.ws.getRetryCount()},r(e,null,[{key:"CONFIG",get:function(){return{version:"1.4.4",gitHash:"d3953535",build:"33",bundleType:"release"}}}]),e}();t.default=i},function(e,t,n){"use strict";var o=n(0),r=n(4),i=n(5),s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.checkOptions(t)){var n={url:"",urlList:[],rid:0,aid:0,uid:0,from:-1,retry:!0,retryMaxCount:0,retryInterval:5,retryThreadCount:10,connectTimeout:5e3,retryConnectCount:3,retryconnectTimeout:1e4,retryRoundInterval:Math.floor(2*Math.random())+3,customAuthParam:[],fallback:function(){},heartBeatInterval:30,onReceivedMessage:function(){},onReceiveAuthRes:function(){},onHeartBeatReply:function(){},onInitialized:function(){},onOpen:function(){},onClose:function(){},onError:function(){},onListConnectError:function(){}};this.options=i.a.extend({},n,t),this.wsBinaryHeaderList=i.a.extend([],r.a),this.authInfo={origin:"",encode:""},0!==this.options.urlList.length&&0!==this.options.retryMaxCount&&this.options.retryMaxCount<this.options.urlList.length&&(this.options.retryMaxCount=this.options.urlList.length-1),this.state={retryCount:0,listConnectFinishedCount:0,index:0,connectTimeoutTimes:0},this.callbackQueueList={onInitializedQueue:[],onOpenQueue:[],onCloseQueue:[],onErrorQueue:[],onReceivedMessageQueue:[],onHeartBeatReplyQueue:[],onRetryFallbackQueue:[],onListConnectErrorQueue:[],onReceiveAuthResQueue:[]},this.HEART_BEAT_INTERVAL=0,this.CONNECT_TIMEOUT=0,this.mixinCallback().initialize(this.options.urlList.length>0?this.options.urlList[0]:this.options.url)}}return e.prototype.initialize=function(e){var t=this,n="MozWebSocket"in window?window.MozWebSocket:window.WebSocket,o=this.options;try{this.ws=new n(e),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),i.a.callFunction(this.callbackQueueList.onInitializedQueue),this.callbackQueueList.onInitializedQueue=[];var r=this.state.connectTimeoutTimes>=3?o.retryconnectTimeout:o.connectTimeout;this.CONNECT_TIMEOUT=setTimeout(function(){t.state.connectTimeoutTimes+=1,console.error("connect timeout ",t.state.connectTimeoutTimes),t.ws.close()},r)}catch(e){"function"==typeof o.fallback&&o.fallback()}return this},e.prototype.onOpen=function(){return i.a.callFunction(this.callbackQueueList.onOpenQueue),this.state.connectTimeoutTimes=0,this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.userAuthentication(),this},e.prototype.userAuthentication=function(){var e,t=this,n=this.options,r={uid:parseInt(n.uid,10),roomid:parseInt(n.rid,10),protover:3};n.aid&&(r.aid=parseInt(n.aid,10)),n.from>0&&(r.from=parseInt(n.from,10)||7);for(var i=0;i<n.customAuthParam.length;i++){var s=n.customAuthParam[i],a=s.type||"string";switch(void 0!==r[s.key]&&console.error("Token has the same key already! 【"+s.key+"】"),s.key.toString()&&s.value.toString()||console.error("Invalid customAuthParam, missing key or value! 【"+s.key+"】-【"+s.value+"】"),a){case"string":r[s.key]=s.value;break;case"number":r[s.key]=parseInt(s.value,10);break;case"boolean":r[s.key]=!!r[s.value];break;default:return void console.error("Unsupported customAuthParam type!【"+a+"】")}}e=this.convertToArrayBuffer(JSON.stringify(r),o.a.WS_OP_USER_AUTHENTICATION),this.authInfo.origin=r,this.authInfo.encode=e,setTimeout(function(){t.ws.send(e)},0)},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.heartBeat=function(){var e=this;clearTimeout(this.HEART_BEAT_INTERVAL);var t=this.convertToArrayBuffer({},o.a.WS_OP_HEARTBEAT);this.ws.send(t),this.HEART_BEAT_INTERVAL=setTimeout(function(){e.heartBeat()},1e3*this.options.heartBeatInterval)},e.prototype.onMessage=function(e){var t=this;try{var n=this.convertToObject(e.data);if(n instanceof Array)n.forEach(function(e){t.onMessage(e)});else if(n instanceof Object)switch(n.op){case o.a.WS_OP_HEARTBEAT_REPLY:this.onHeartBeatReply(n.body);break;case o.a.WS_OP_MESSAGE:this.onMessageReply(n.body,n.seq);break;case o.a.WS_OP_CONNECT_SUCCESS:if(0!==n.body.length&&n.body[0])switch(n.body[0].code){case o.a.WS_AUTH_OK:this.heartBeat();break;case o.a.WS_AUTH_TOKEN_ERROR:this.options.retry=!1,"function"==typeof this.options.onReceiveAuthRes&&this.options.onReceiveAuthRes(n.body);break;default:this.onClose()}else this.heartBeat()}}catch(e){console.error("WebSocket Error: ",e)}return this},e.prototype.onMessageReply=function(e,t){var n=this;try{e instanceof Array?e.forEach(function(e){n.onMessageReply(e,t)}):e instanceof Object&&"function"==typeof this.options.onReceivedMessage&&this.options.onReceivedMessage(e,t)}catch(e){console.error("On Message Resolve Error: ",e)}},e.prototype.onHeartBeatReply=function(e){i.a.callFunction(this.callbackQueueList.onHeartBeatReplyQueue,e)},e.prototype.onClose=function(e){var t=this;e.code>1001&&i.a.callFunction(this.callbackQueueList.onErrorQueue,e);var n=this.options.urlList.length;return i.a.callFunction(this.callbackQueueList.onCloseQueue),clearTimeout(this.HEART_BEAT_INTERVAL),this.options.retry?(this.checkRetryState()?setTimeout(function(){console.error("Danmaku Websocket Retry .",t.state.retryCount),t.state.index+=1,0===n||t.state.retryCount>t.options.retryThreadCount?setTimeout(function(){t.initialize(t.options.url)},1e3*t.options.retryRoundInterval):0!==n&&t.state.index>n-1?(t.state.index=0,t.state.listConnectFinishedCount+=1,1===t.state.listConnectFinishedCount&&i.a.callFunction(t.callbackQueueList.onListConnectErrorQueue),setTimeout(function(){t.initialize(t.options.urlList[t.state.index])},1e3*t.options.retryRoundInterval)):t.initialize(t.options.urlList[t.state.index])},1e3*this.options.retryInterval):(console.error("Danmaku Websocket Retry Failed."),i.a.callFunction(this.callbackQueueList.onRetryFallbackQueue)),this):this},e.prototype.onError=function(e){return console.error("Danmaku Websocket On Error.",e),this},e.prototype.destroy=function(){this.HEART_BEAT_INTERVAL&&clearTimeout(this.HEART_BEAT_INTERVAL),this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.options.retry=!1,this.ws&&this.ws.close(),this.ws=null},e.prototype.convertToArrayBuffer=function(e,t){this.encoder||(this.encoder=i.a.getEncoder());var n=new ArrayBuffer(o.a.WS_PACKAGE_HEADER_TOTAL_LENGTH),r=new DataView(n,o.a.WS_PACKAGE_OFFSET),s=this.encoder.encode(e);return r.setInt32(o.a.WS_PACKAGE_OFFSET,o.a.WS_PACKAGE_HEADER_TOTAL_LENGTH+s.byteLength),this.wsBinaryHeaderList[2].value=t,this.wsBinaryHeaderList.forEach(function(e){4===e.bytes?r.setInt32(e.offset,e.value):2===e.bytes&&r.setInt16(e.offset,e.value)}),i.a.mergeArrayBuffer(n,s)},e.prototype.convertToObject=function(e){var t=new DataView(e),n={body:[]};if(n.packetLen=t.getInt32(o.a.WS_PACKAGE_OFFSET),this.wsBinaryHeaderList.forEach(function(e){4===e.bytes?n[e.key]=t.getInt32(e.offset):2===e.bytes&&(n[e.key]=t.getInt16(e.offset))}),n.packetLen<e.byteLength&&this.convertToObject(e.slice(0,n.packetLen)),this.decoder||(this.decoder=i.a.getDecoder()),!n.op||o.a.WS_OP_MESSAGE!==n.op&&n.op!==o.a.WS_OP_CONNECT_SUCCESS)n.op&&o.a.WS_OP_HEARTBEAT_REPLY===n.op&&(n.body={count:t.getInt32(o.a.WS_PACKAGE_HEADER_TOTAL_LENGTH)});else for(var r=o.a.WS_PACKAGE_OFFSET,s=n.packetLen,a="",u="";r<e.byteLength;r+=s){s=t.getInt32(r),a=t.getInt16(r+o.a.WS_HEADER_OFFSET);try{if(n.ver===o.a.WS_BODY_PROTOCOL_VERSION_NORMAL){var c=this.decoder.decode(e.slice(r+a,r+s));u=0!==c.length?JSON.parse(c):null}else if(n.ver===o.a.WS_BODY_PROTOCOL_VERSION_BROTLI){var l=e.slice(r+a,r+s),h=window.BrotliDecode(new Uint8Array(l));u=this.convertToObject(h.buffer).body}u&&n.body.push(u)}catch(t){console.error("decode body error:",new Uint8Array(e),n,t)}}return n},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.addCallback=function(e,t){return"function"==typeof e&&t instanceof Array&&t.push(e),this},e.prototype.mixinCallback=function(){var e=this.options,t=this.callbackQueueList;return this.addCallback(e.onReceivedMessage,t.onReceivedMessageQueue).addCallback(e.onHeartBeatReply,t.onHeartBeatReplyQueue).addCallback(e.onInitialized,t.onInitializedQueue).addCallback(e.onOpen,t.onOpenQueue).addCallback(e.onClose,t.onCloseQueue).addCallback(e.onError,t.onErrorQueue).addCallback(e.onRetryFallback,t.onRetryFallbackQueue).addCallback(e.onListConnectError,t.onListConnectErrorQueue).addCallback(e.onReceiveAuthRes,t.onReceiveAuthResQueue),this},e.prototype.getRetryCount=function(){return this.state.retryCount},e.prototype.checkRetryState=function(){var e=this.options,t=!1;return(0===e.retryMaxCount||this.state.retryCount<e.retryMaxCount)&&(this.state.retryCount+=1,t=!0),t},e.checkOptions=function(e){return e||e instanceof Object?e.url?!!e.rid||(console.error("WebSocket Initialize options rid(cid) missing."),!1):(console.error("WebSocket Initialize options url missing."),!1):(console.error("WebSocket Initialize options missing or error.",e),!1)},e}();t.a=s},function(e,t,n){"use strict";var o=n(0),r=[{name:"Header Length",key:"headerLen",bytes:2,offset:o.a.WS_HEADER_OFFSET,value:o.a.WS_PACKAGE_HEADER_TOTAL_LENGTH},{name:"Protocol Version",key:"ver",bytes:2,offset:o.a.WS_VERSION_OFFSET,value:o.a.WS_HEADER_DEFAULT_VERSION},{name:"Operation",key:"op",bytes:4,offset:o.a.WS_OPERATION_OFFSET,value:o.a.WS_HEADER_DEFAULT_OPERATION},{name:"Sequence Id",key:"seq",bytes:4,offset:o.a.WS_SEQUENCE_OFFSET,value:o.a.WS_HEADER_DEFAULT_SEQUENCE}];t.a=r},function(e,t,n){"use strict";var o={getDecoder:function(){return window.TextDecoder?new window.TextDecoder:{decode:function(e){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,new Uint8Array(e))))}}},getEncoder:function(){return window.TextEncoder?new window.TextEncoder:{encode:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),o=0,r=e.length;o<r;o++)n[o]=e.charCodeAt(o);return t}}},mergeArrayBuffer:function(e,t){var n=new Uint8Array(e),o=new Uint8Array(t),r=new Uint8Array(n.byteLength+o.byteLength);return r.set(n,0),r.set(o,n.byteLength),r.buffer},callFunction:function(e,t){return e instanceof Array&&e.length?(e.forEach(function(e){return"function"==typeof e&&e(t)}),null):"function"==typeof e&&e(t)},extend:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=e||{};return r instanceof Object&&n.forEach(function(e){e instanceof Object&&Object.keys(e).forEach(function(t){r[t]=e[t]})}),r}};t.a=o}])});
},{}],"MWvE":[function(require,module,exports) {
"use strict";var e,t,n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(t){i(t)}}function a(e){try{c(o.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SocketMsgType=void 0;var a,c=s(require("../sdk/socket-core.min.js")),u=require("@bilibili-live/web-player-common"),l=s(require("@bilibili-live/web-player-track"));function f(e){return n(this,void 0,Promise,function(){return o(this,function(t){switch(t.label){case 0:return[4,u.ajax("/xlive/web-room/v1/index/getDanmuInfo?id="+e+"&type=0")];case 1:return[2,t.sent()]}})})}!function(e){e.Danmaku="DANMU_MSG",e.SysMsg="SYS_MSG",e.SysGift="SYS_GIFT",e.GuardMsg="GUARD_MSG",e.SendGift="SEND_GIFT",e.Live="LIVE",e.Preparing="PREPARING",e.End="END",e.Close="CLOSE",e.Block="BLOCK",e.Round="ROUND",e.Welcome="WELCOME",e.Refresh="REFRESH",e.ActivityRedPacket="ACTIVITY_RED_PACKET",e.AreaBlock="ROOM_LIMIT",e.PkPre="PK_PRE",e.PkEnd="PK_END",e.PkSettle="PK_SETTLE",e.PkMicEnd="PK_MIC_END",e.HotRoomNotify="HOT_ROOM_NOTIFY",e.PLAY_TAG="PLAY_TAG",e.PLAY_PROGRESS_BAR="PLAY_PROGRESS_BAR",e.PlayerLogRecycle="LIVE_PLAYER_LOG_RECYCLE"}(a=exports.SocketMsgType||(exports.SocketMsgType={}));var h=function(){function s(n){this.opts=n,e.set(this,null),t.set(this,new u.EventBus),this.on=r(this,t).on,this.emit=r(this,t).emit,this.init().catch(function(e){u.logger.error(e)})}return s.prototype.init=function(){var t;return n(this,void 0,Promise,function(){var n,s,a=this;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,f(this.opts.roomId)];case 1:return n=o.sent(),[3,3];case 2:return s=o.sent(),u.logger.error("get danmainfo failed "+u.any2Str(s)),n={host_list:[],token:"",max_delay:5e3},[3,3];case 3:return u.logger.info("Socket init, serverInfo: "+JSON.stringify(n)),i(this,e,new c.default({rid:this.opts.roomId,uid:null!==(t=this.opts.userId)&&void 0!==t?t:0,url:"wss://broadcastlv.chat.bilibili.com:443/sub",urlList:n.host_list.map(function(e){return"wss://"+e.host+":"+e.wss_port+"/sub"}),retry:!0,retryMaxCount:n.host_list.length,protover:3,customAuthParam:[{type:"string",key:"platform",value:"web"},{type:"number",key:"type",value:2},{type:"string",key:"key",value:n.token}],onOpen:function(){u.logger.info("WebSocket On Open")},onClose:function(){u.logger.info("WebSocket On Close.")},onError:function(e){u.logger.warn("WebSocket On Error. url: "+JSON.stringify(e.code)),d({type:1,evt:e.code})},onInitialized:function(){u.logger.info("WebSocket Initialized.")},onReceivedMessage:function(e,t){u.wpd.SocketMsg2Console&&console.debug("socket onReceivedMessage: "+t,e),t>1&&p(t),[].concat(e).forEach(function(e){a.emit("message",e)})},onHeartBeatReply:function(e){a.emit("heartbeat",e)},onReceiveAuthRes:function(t){var n;u.logger.warn("token expired, reconnect."),null===(n=r(a,e))||void 0===n||n.destroy(),a.init().catch(function(e){u.logger.error(e)})},onListConnectError:function(){u.logger.info("WebSocket On List Connect Error."),d({type:2})},fallback:function(){u.logger.info("WebSocket Supporting Error.")}})),[2]}})})},s.prototype.destroy=function(){var n;null===(n=r(this,e))||void 0===n||n.destroy(),r(this,t).destroy()},s}();function p(e){u.ajax("/xlive/open-interface/v1/dm/message_ack",{method:"POST",data:{terminal:0,sequence:e}}).catch(function(e){u.logger.error(e)})}function d(e){l.default.error(l.default.ErrorCode.SocketConnect,JSON.stringify(e))}exports.default=h,e=new WeakMap,t=new WeakMap;
},{"../sdk/socket-core.min.js":"EfpE","@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-track":"ESUf"}],"xqO8":[function(require,module,exports) {
"use strict";var e,t,i,n,a,s,l,r,o,c,u,h,d,p,f,v,m,y,w,g,b,k,M,L,E,W,C,P,_,R,S,I,x,D,H=this&&this.__assign||function(){return(H=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},A=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(a,s){function l(e){try{o(n.next(e))}catch(t){s(t)}}function r(e){try{o(n.throw(e))}catch(t){s(t)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(l,r)}o((n=n.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var i,n,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,n=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){l=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){l.label=s[1];break}if(6===s[0]&&l.label<a[1]){l.label=a[1],a=s;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(s);break}a[2]&&l.ops.pop(),l.trys.pop();continue}s=t.call(e,l)}catch(r){s=[6,r],n=0}finally{i=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},B=this&&this.__classPrivateFieldSet||function(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i},O=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},N=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var U=N(require("./replay.less")),j=require("@bilibili-live/web-player-common"),q=require("@bilibili-live/web-player-socket"),F=N(require("@bilibili-live/web-player-track")),V=function(){return function(N,V,G,Y){var X=this;this.ctrl=Y,e.set(this,3600),t.set(this,300),i.set(this,document.createElement("div")),n.set(this,document.createElement("div")),a.set(this,document.createElement("div")),s.set(this,document.createElement("div")),l.set(this,document.createElement("div")),r.set(this,document.createElement("div")),o.set(this,null),c.set(this,new Map),u.set(this,0),h.set(this,void 0),d.set(this,void 0),p.set(this,[]),f.set(this,[]),v.set(this,0),m.set(this,{}),this.isReplay=!1,y.set(this,new j.EventBus),this.on=O(this,y).on,this.emit=O(this,y).emit,w.set(this,0),g.set(this,!0),b.set(this,!1),this.bakState={},this.init=function(){var e,i=X.ctrl.onChange(function(e,t){return A(X,void 0,void 0,function(){return T(this,function(i){return"show"===e&&(this.changeReplayStyle(t),t||this.removeMouseMoveListener()),[2]})})}),n=O(X,k).call(X);n.addEventListener("mousedown",O(X,M));var a=0,s=function(){return A(X,void 0,Promise,function(){var e,t=this;return T(this,function(i){switch(i.label){case 0:return[4,O(this,I).call(this)];case 1:return i.sent()?(O(this,D).call(this),null===(e=O(this,o))||void 0===e||e.appendChild(n),a=window.setInterval(function(){O(t,R).call(t)},1e3),window.addEventListener("message",O(this,S)),[2]):[2]}})})};if(Date.now()/1e3-O(X,u)>=O(X,t))s().catch(function(e){console.error(e)});else{var l=window.setInterval(function(){Date.now()/1e3-O(X,u)>=O(X,t)&&(s().catch(function(e){console.error(e)}),clearInterval(l))},5e3);O(X,p).push(function(){return clearInterval(l)})}var r=null===(e=O(X,o))||void 0===e?void 0:e.getElementsByClassName("web-player-controller-wrap"),c=Date.now();null!=r&&r[0].classList.add("web-player-controller-"+c.toString()),O(X,p).push(i,function(){clearInterval(a)})},this.removeReplay=function(){O(X,p).forEach(function(e){return e()}),B(X,p,[]),window.removeEventListener("message",O(X,S)),O(X,n).remove(),O(X,n).removeEventListener("mousedown",O(X,M))},this.removeHighlight=function(e){var t=!1;return O(X,c).forEach(function(i,n){i.tag_id===e&&(O(X,c).delete(n),t=!0,n.remove())}),t},this.handleHighlight=function(e){X.removeHighlight(e.tag_id),"ADD"===e.type&&O(X,_).call(X,e),"DEL_ALL"===e.type&&O(X,c).forEach(function(e,t){O(X,c).delete(t),t.remove()})},this.changeReplayStyle=function(e){e?(O(X,i).style.bottom="40px",O(X,l).style.height="4px",O(X,l).style.padding="2px 0",O(X,a).style.display="block",O(X,s).classList.add(U.default.webPlayerReplayHighlightsShow),O(X,s).classList.remove(U.default.webPlayerReplayHighlightsHidden)):(O(X,i).style.bottom="0px",O(X,l).style.height="3px",O(X,l).style.padding="0",O(X,a).style.display="none",O(X,s).classList.remove(U.default.webPlayerReplayHighlightsShow),O(X,s).classList.add(U.default.webPlayerReplayHighlightsHidden))},this.setProgress=function(e){O(X,r).style.width=e,O(X,a).style.left=e},this.removeMouseMoveListener=function(e){var t,i;if(null===(t=O(X,o))||void 0===t||t.removeEventListener("mousemove",O(X,L)),null!=e){var n=O(X,W).call(X,O(X,a).style.left);if(X.isReplay=0!==n,0===O(X,v)){var s=X.ctrl.getCtrlUI();B(X,g,Boolean(null===(i=s.danmaku)||void 0===i?void 0:i.display))}B(X,v,n),X.reload(n),window.removeEventListener("mouseup",X.removeMouseMoveListener),F.default.operation(F.default.OperationCode.TimeShift,{type:!0,timeShiftDuration:0}),B(X,w,performance.now())}},k.set(this,function(){return O(X,n).classList.add(U.default.webPlayerReplayContainer),O(X,i).classList.add(U.default.webPlayerReplayElement),O(X,l).classList.add(U.default.webPlayerReplayProgress),O(X,a).classList.add(U.default.webPlayerReplayCurrentPoint),O(X,r).classList.add(U.default.webPlayerReplayBar),O(X,s).classList.add(U.default.webPlayerReplayHighlights,U.default.webPlayerReplayHighlightsHidden),O(X,l).appendChild(O(X,a)),O(X,l).appendChild(O(X,r)),O(X,i).appendChild(O(X,l)),O(X,i).appendChild(O(X,s)),O(X,n).appendChild(O(X,i)),O(X,n)}),M.set(this,function(e){var t;if(!e.target.className.includes("highlight")){var i=O(X,E).call(X,e);X.setProgress(i),window.addEventListener("mouseup",X.removeMouseMoveListener),null===(t=O(X,o))||void 0===t||t.addEventListener("mousemove",O(X,L))}}),L.set(this,function(e){var t=O(X,E).call(X,e);O(X,r).style.width=t,O(X,a).style.left=t}),E.set(this,function(e){var t=e.clientX-O(X,i).getBoundingClientRect().left;t=t<0?0:t;var n=O(X,i).clientWidth;return(t/n>1?100:t/n*100).toFixed(2)+"%"}),W.set(this,function(t){var i=parseFloat(t.split("%")[0]),n=Date.now()/1e3-O(X,u);return n=n>O(X,e)?O(X,e):n,Math.round(n*(100-i)/100)}),C.set(this,function(t){var i=Date.now()/1e3,n=i-O(X,u);n=n>O(X,e)?O(X,e):n;var a=Math.round(i-t);return{timeShift:a,left:(100-100*a/n).toFixed(2)+"%"}}),P.set(this,function(){var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div");return e.classList.add(U.default.backliveBtnContainer),t.classList.add(U.default.backliveBtn),i.classList.add(U.default.backliveDot),t.appendChild(i),t.append("返回直播"),t.onclick=function(){X.setProgress("100%"),X.returnLive(),X.emit("timeShiftChange",0),F.default.operation(F.default.OperationCode.TimeShift,{type:!1,timeShiftDuration:Math.round(performance.now()-O(X,w))}),B(X,w,0)},e.appendChild(t),e}),_.set(this,function(e){var t=document.createElement("div");t.classList.add(U.default.highlightItem);var i='<div class="'+U.default.highlightPot+'"></div>';null!=e.pic&&""!==e.pic&&(i+='\n      <div class="'+U.default.highlightIcon+'">\n        <div class="'+U.default.highlightImg+'" style="background-image: url('+e.pic+')">\n        </div>\n      </div>\n      '),t.innerHTML=i,t.onclick=function(){var t,i=O(X,C).call(X,e.timestamp),n=i.timeShift,a=i.left;if(X.setProgress(a),0===O(X,v)){var s=X.ctrl.getCtrlUI();B(X,g,Boolean(null===(t=s.danmaku)||void 0===t?void 0:t.display))}B(X,v,n),X.isReplay=0!==n,X.reload(n),F.default.operation(F.default.OperationCode.TimeShift,{type:!0,isHighlight:!0,timeShiftDuration:0}),B(X,w,performance.now())},O(X,c).set(t,H(H({},e),{isAppend:!1,left:""}))}),R.set(this,function(){O(X,c).forEach(function(e,t){var i=O(X,C).call(X,e.timestamp);i.left.includes("-")?(t.remove(),O(X,c).delete(t)):(t.style.left=i.left,O(X,c).set(t,H(H({},e),i)),e.isAppend||(O(X,c).set(t,H(H({},e),{isAppend:!0})),O(X,s).appendChild(t)))})}),S.set(this,function(e){var t=e.origin.split("://");if(t.length>=2&&/^(?:uat-)?mlive\.bilibili\.co(?::\d+)?$/.test(t[1].split("/")[0])||"production".includes("dev")){var i=e.data;"previewPlaybackTimelineAnchor"===i.type&&X.handleHighlight({tag_id:0,timestamp:i.data.time,pic:i.data.iconUrl,type:"ADD"})}}),I.set(this,function(){return A(X,void 0,Promise,function(){var e,t=this;return T(this,function(i){switch(i.label){case 0:return O(this,c).forEach(function(e,i){O(t,c).delete(i),i.remove()}),[4,j.ajax("/xlive/web-room/v1/index/getProgressBarInfo?roomid="+O(this,d)+"&platform=web")];case 1:return e=i.sent(),O(this,b)?[2,!1]:(null!=e.play_tag_list&&"ENABLE"===e.bar_status&&e.play_tag_list.forEach(function(e){t.handleHighlight(H(H({},e),{type:"ADD"}))}),[2,"ENABLE"===e.bar_status])}})})}),x.set(this,function(e){return e.on("message",function(e){switch(e.cmd){case q.SocketMsgType.PLAY_TAG:X.handleHighlight(e.data);break;case q.SocketMsgType.PLAY_PROGRESS_BAR:var t=e.data,i=t.platform,n=t.type;if(!i.includes("web"))return;if(["DISABLE","LIMIT"].includes(n)){if(X.isReplay){var a=X.on("timeShiftChange",function(e){0===e&&(X.removeReplay(),a())});return void O(X,p).push(a)}X.removeReplay()}else if(null!=O(X,d)){var s=Number(e.data.scatter.min),l=Number(e.data.scatter.max),r=setTimeout(function(){X.init()},Math.floor(1e3*(Math.random()*(l-s)+s)));O(X,p).push(function(){clearTimeout(r)})}}})}),this.destroy=function(){B(X,b,!0),X.removeReplay()},this.returnLive=function(){O(X,f).forEach(function(e){return e()}),B(X,f,[]),X.setProgress("100%"),X.emit("backLive");var e=X.ctrl.getCtrlUI();e.ctrlItemVisibility=H(H({},e.ctrlItemVisibility),O(X,m)),e.onChange("danmaku",{display:O(X,g)}),X.isReplay=!1,B(X,v,0)},this.reload=function(e){if(void 0===e&&(e=O(X,v)),O(X,f).forEach(function(e){return e()}),B(X,f,[]),0!==e){var t=X.ctrl.getCtrlUI();t.onChange("danmaku",{display:!1}),0===Object.keys(O(X,m)).length&&B(X,m,H({},t.ctrlItemVisibility)),t.ctrlItemVisibility=H(H({},t.ctrlItemVisibility),{rightSetting:!1,quality:!1,danmaku:!1}),O(X,f).push(t.appendCtrlItem(O(X,h))),X.isReplay=!0}else X.returnLive();X.emit("timeShiftChange",e)},D.set(this,function(){var e=X.ctrl.getCtrlUI();O(X,p).push(X.ctrl.onChange(function(e,t){"show"===e&&(!1===t&&0===O(X,v)?O(X,n).style.visibility="hidden":O(X,n).style.visibility="visible")}),X.on("timeShiftChange",function(t){0!==t||e.show?O(X,n).style.visibility="visible":O(X,n).style.visibility="hidden"}))}),B(this,o,N),B(this,u,V.live_time),B(this,d,V.rid),O(this,c).clear(),B(this,h,O(this,P).call(this)),O(this,p).push(O(this,x).call(this,G))}}();exports.default=V,e=new WeakMap,t=new WeakMap,i=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,r=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,v=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,k=new WeakMap,M=new WeakMap,L=new WeakMap,E=new WeakMap,W=new WeakMap,C=new WeakMap,P=new WeakMap,_=new WeakMap,R=new WeakMap,S=new WeakMap,I=new WeakMap,x=new WeakMap,D=new WeakMap;
},{"./replay.less":"XQD5","@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-socket":"MWvE","@bilibili-live/web-player-track":"ESUf"}],"blC7":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectMirror=exports.connectVideoPip=exports.connectVideoLoading=exports.connectUIandVideo=void 0;var t=require("@bilibili-live/web-player-common"),n=require("@bilibili-live/web-player-video"),i=e(require("@bilibili-live/web-player-track"));function r(e,n){var i=e.getCtrlUI(),r=n.getVideoEl();if(null==r||null==i)return function(){};var o=t.userSetting.getVolume();null!=o&&(r.volume=o.value/100,r.muted=o.disabled);var u=function(){i.playStatus=!0},a=function(){i.playStatus=!1},l=function(){n.getVideoEl().paused&&e.show()},c=function(e){null!=i.volume&&(i.volume={disabled:r.muted,value:100*r.volume})};r.addEventListener("playing",u),r.addEventListener("pause",a),r.addEventListener("loadeddata",l),r.addEventListener("volumechange",c);var d=e.onChange(function(e,n){if("playStatus"===e)n?r.play().catch(function(e){t.logger.error(e)}):r.pause();else if("volume"===e){var i=n,o=i.disabled,u=i.value;r.muted=o,r.volume=u/100}});return function(){d(),r.removeEventListener("playing",u),r.removeEventListener("pause",a),r.removeEventListener("loadeddata",l),r.removeEventListener("volumechange",c)}}function o(e,i,r){var o,u=function(){o=t.loading(i)},a=function(){null==o||o()},l=e.on(n.EventType.WaitStart,function(){u()}),c=e.on(n.EventType.WaitEnd,a);return e.once(n.EventType.FirstFrame,function(){a(),t.coverImg(null,i)}),null==r||""===r?(u(),t.coverImg(null,i)):t.coverImg(r,i),function(){l(),c(),a()}}function u(e,t){var r=function(){null!=document.pictureInPictureElement&&document.exitPictureInPicture()},o=e.on(n.EventType.Destroyed,function(){r(),l.pipStatus=!1,o()}),u=t.onChange(function(t,n){if("pipStatus"===t&&document.pictureInPictureEnabled){if(n){var i=e.getVideoEl();return r(),void i.requestPictureInPicture()}r()}}),a=e.getVideoEl(),l=t.getCtrlUI(),c=0,d=function(){i.default.operation(i.default.OperationCode.PictureInPicture,Math.floor((performance.now()-c)/1e3),{sampleRate:1})},v=function(){l.pipStatus=!1,d()},s=function(){c=performance.now()},p=function(){null!=document.pictureInPictureElement&&d()};return a.addEventListener("leavepictureinpicture",v),a.addEventListener("enterpictureinpicture",s),window.addEventListener("beforeunload",p),function(){u(),a.removeEventListener("leavepictureinpicture",v),a.removeEventListener("enterpictureinpicture",s),window.removeEventListener("beforeunload",p),r()}}function a(e,t){!0===t.getCtrlUI().mirrorStatus&&(e.getVideoEl().style.transform="rotateY(180deg)");var n=t.onChange(function(t,n){if("mirrorStatus"===t){var i=e.getVideoEl();i.style.transform=!0!==n?"":"rotateY(180deg)"}});return function(){n()}}exports.connectUIandVideo=r,exports.connectVideoLoading=o,exports.connectVideoPip=u,exports.connectMirror=a;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-video":"ao58","@bilibili-live/web-player-track":"ESUf"}],"fyPa":[function(require,module,exports) {
"use strict";var t,e,i,r,n,s,o,h,a,l,c,d,p,g,f,u,w,_,m,b,k,v,y=this&&this.__assign||function(){return(y=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},x=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,s){function o(t){try{a(r.next(t))}catch(e){s(e)}}function h(t){try{a(r.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,h)}a((r=r.apply(t,e||[])).next())})},T=this&&this.__generator||function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function h(s){return function(h){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(h){s=[6,h],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,h])}}},M=this&&this.__classPrivateFieldSet||function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},E=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};Object.defineProperty(exports,"__esModule",{value:!0});var W,R=require("@bilibili-live/web-player-common");!function(t){t[t.Normal=1]="Normal",t[t.Text=2]="Text"}(W||(W={}));var S=R.isWebPSupported(),B=function(){return function(B){var I=this;this.container=B,t.set(this,void 0),e.set(this,void 0),i.set(this,null),r.set(this,0),n.set(this,0),s.set(this,new Map),o.set(this,new Map),h.set(this,[]),a.set(this,0),l.set(this,[]),c.set(this,!1),this.onSei=function(t){E(I,w).call(I,t).catch(function(t){throw R.logger.error("贴纸加载失败"),new Error(t)})},this.onVideoInfo=function(i){i.width!==E(I,t).width&&i.height!==E(I,t).height&&(M(I,t,i),M(I,e,{width:0,height:0}))},d.set(this,function(t){var e,i;E(I,s).has(t.sticker_id)||E(I,c)||(M(I,c,!0),t.sticker_type===W.Text?(null===(e=E(I,s).get(t.sticker_id))||void 0===e||e.el.remove(),E(I,s).set(t.sticker_id,E(I,p).call(I,t))):(null===(i=E(I,s).get(t.sticker_id))||void 0===i||i.el.remove(),E(I,s).set(t.sticker_id,E(I,g).call(I,t))))}),p.set(this,function(t){R.logger.info("create text sticker, id: "+t.sticker_id);var i=new Image,s=document.createElement("div"),h=E(I,o).get(t.sticker_id);return i.onload=function(){I.container.append(i),h.stretch.top_margin=(i.height-3)/2,h.stretch.bottom_margin=i.height/2,E(I,o).set(t.sticker_id,y(y({},h),{width:i.width,height:i.height}));var a=E(I,f).call(I,h,i.getBoundingClientRect(),t),l=document.createElement("span");l.innerText=t.sticker_title,l.style.cssText="\n        color: "+t.sticker_title_color+";\n        font-size: "+(a.borderBottom+a.borderTop)+"px;\n        position: absolute;\n        z-index: 4;\n        visibility: hidden;\n        word-break: keep-all;\n        white-space: no-wrap;\n        transform: scale(0.3);\n        transform-origin: 0 0;\n        white-space: nowrap;\n        cursor: default;\n        user-select: none;\n      ",I.container.append(l),l.style.cssText+="\n        top: -"+2.2*h.title.bottom_margin/i.height*(a.borderBottom+a.borderTop)+"px;\n        left: -"+(3*h.title.right_margin/i.width*a.width-.3*a.height)+"px;\n      ",s.style.cssText="\n        transition: all .1s ease-in-out;\n        position: absolute;\n        z-index: 4;\n        border-style: solid;\n        border-color: transparent;\n        border-left-width: "+a.borderLeft+"px;\n        border-right-width: "+a.borderRight+"px;\n        border-top-width: "+a.borderTop+"px;\n        border-bottom-width: "+a.borderBottom+"px;\n        width: "+(l.getBoundingClientRect().width-a.borderRight+.5*a.height)+"px;\n        border-image-source: url("+h.url+");\n        border-image-repeat: stretch stretch;\n        border-image-slice: "+h.stretch.top_margin+" "+h.stretch.right_margin+" "+h.stretch.bottom_margin+" "+h.stretch.left_margin+" fill;\n      ",s.append(l),I.container.append(s);var d=E(I,e).width,p=E(I,e).height;d-=s.getBoundingClientRect().width,p=p-a.borderBottom-a.borderTop-l.getBoundingClientRect().height,t.display_width-t.sticker_right_offset<2?s.style.cssText+="\n            left: "+(E(I,n)+d)+"px;\n            top: "+(E(I,r)+Math.min(t.sticker_top_offset*E(I,e).height/t.display_height,p))+"px;\n          ":s.style.cssText+="\n            left: "+(E(I,n)+Math.min(t.sticker_left_offset*E(I,e).width/t.display_width,d))+"px;\n            top: "+(E(I,r)+Math.min(t.sticker_top_offset*E(I,e).height/t.display_height,p))+"px;\n          ",l.style.visibility="visible",i.remove(),M(I,c,!1)},i.src=S?h.url:h.url.replace(".webp",".gif"),i.style.visibility="hidden",{el:s,sei:t,width:0,height:0}}),g.set(this,function(t){R.logger.info("create img sticker, id: "+t.sticker_id);var i=new Image,s=E(I,o).get(t.sticker_id);return I.container.append(i),i.onload=function(){var h=E(I,e).width,a=E(I,e).height,l=E(I,f).call(I,s,i.getBoundingClientRect(),t);a-=l.height,h-=l.width,i.style.cssText="\n          transition: all .1s ease-in-out;\n          position: absolute;\n          z-index: 4;\n        ",t.display_width-t.sticker_right_offset<2?i.style.cssText+="\n            left: "+(E(I,n)+h)+"px;\n            top: "+(E(I,r)+Math.min(t.sticker_top_offset*E(I,e).height/t.display_height,a))+"px;\n          ":i.style.cssText+="\n            left: "+(E(I,n)+Math.min(t.sticker_left_offset*E(I,e).width/t.display_width,h))+"px;\n            top: "+(E(I,r)+Math.min(t.sticker_top_offset*E(I,e).height/t.display_height,a))+"px;\n          ",E(I,o).set(t.sticker_id,y(y({},s),{width:i.width,height:i.height})),i.width=l.width,M(I,c,!1)},i.src=S?s.url:s.url.replace(".webp",".gif"),{el:i,sei:t,width:0,height:0}}),this.batchUpdateStickerElement=function(){E(I,s).forEach(function(t,e){E(I,u).call(I,e)})},f.set(this,function(t,i,r){var n={width:0,height:0,top:0,left:0,borderLeft:0,borderRight:0,borderTop:0,borderBottom:0};if(n.height=E(I,e).height*(r.sticker_bottom_offset-r.sticker_top_offset)/r.display_height/1.1,n.width=n.height*i.width/i.height,t.sticker_type===W.Text){var s=t,o=s.stretch,h=o.top_margin,a=o.left_margin,l=o.right_margin,c=o.bottom_margin,d=s.title,p=d.top_margin,g=d.left_margin;n.borderBottom=n.height/(c+h)*c,n.borderLeft=n.width/(a+l)*a,n.borderRight=n.width/(a+l)*l,n.borderTop=n.height/(c+h)*h,n.left=g*n.width/i.width,n.top=p*n.width/i.width}return n}),u.set(this,function(t){var i=E(I,s).get(t),h=E(I,o).get(t);if(null!=i&&null!=h){var a=E(I,f).call(I,h,{width:h.width,height:h.height},i.sei),l=E(I,e).width,c=E(I,e).height;if(i.sei.sticker_type===W.Text){var d=h,p=i.el,g=p.firstElementChild;if(null==g)return;var u=a.borderBottom+a.borderTop;g.style.fontSize=u.toString()+"px",g.innerText=String(i.sei.sticker_title);var w=g.getBoundingClientRect().width-a.borderRight+.5*a.height;w=w>0?w:0,p.style.cssText+="\n          border-left-width: "+a.borderLeft+"px;\n          border-right-width: "+a.borderRight+"px;\n          border-top-width: "+a.borderTop+"px;\n          border-bottom-width: "+a.borderBottom+"px;\n          width: "+w+"px;\n        ",g.style.cssText+="\n          top: -"+2.2*d.title.bottom_margin/d.height*(a.borderBottom+a.borderTop)+"px;\n          color: "+i.sei.sticker_title_color+";\n          left: -"+(3*d.title.right_margin/h.width*a.width-.3*a.height)+"px;\n        ",l=l-a.borderLeft-a.borderRight-w,c=c-a.borderBottom-a.borderTop-g.getBoundingClientRect().height}else i.el.width=a.width,c-=a.height,l-=a.width;i.el.style.cssText+="\n        display: block;\n      ",i.sei.display_width-i.sei.sticker_right_offset<2?i.el.style.cssText+="\n          left: "+(E(I,n)+l)+"px;\n          top: "+(E(I,r)+Math.min(i.sei.sticker_top_offset*E(I,e).height/i.sei.display_height,c))+"px;\n        ":i.el.style.cssText+="\n          left: "+(E(I,n)+Math.min(i.sei.sticker_left_offset*E(I,e).width/i.sei.display_width,l))+"px;\n          top: "+(E(I,r)+Math.min(i.sei.sticker_top_offset*E(I,e).height/i.sei.display_height,c))+"px;\n        "}}),w.set(this,function(i){return x(I,void 0,Promise,function(){var r,n,h,c,p,g,f=this;return T(this,function(w){if(0===E(this,t).width)return[2];if(!(r=R.uint8ArrayToString(i[3])).includes("LIVE_STICKER"))return[2];if(n=JSON.parse(r),0===E(this,e).width&&(E(this,m).call(this,n.LIVE_STICKER[0]),this.batchUpdateStickerElement()),clearTimeout(E(this,a)),0===n.LIVE_STICKER.length)return E(this,v).call(this),[2];for(E(this,s).forEach(function(t,e){for(var i,r=!0,o=0,h=n.LIVE_STICKER;o<h.length;o++)h[o].sticker_id===e&&(r=!1);r&&(null===(i=t.el)||void 0===i||i.remove(),R.logger.info("remove sticker id: "+t.sei.sticker_id),E(f,s).delete(e))}),h=0,c=n.LIVE_STICKER;h<c.length;h++)if(p=c[h],E(this,s).has(p.sticker_id))(null==(g=E(this,s).get(p.sticker_id))?void 0:g.sei.hash)!==p.hash&&(null!=g?(E(this,s).set(p.sticker_id,y(y({},g),{sei:p})),E(this,u).call(this,p.sticker_id)):(R.logger.info("2remove sticker id: "+p.sticker_id),E(this,s).delete(p.sticker_id)));else if(E(this,o).has(p.sticker_id))E(this,d).call(this,p);else{if(E(this,l).includes(p.group_id))return[2];E(this,l).push(p.group_id),E(this,k).call(this,p.group_id,p).catch(function(t){console.warn(t)})}return[2]})})}),_.set(this,function(){window.addEventListener("resize",E(I,b)),document.addEventListener("fullscreenchange",E(I,b)),E(I,h).push(function(){window.removeEventListener("resize",E(I,b)),document.removeEventListener("fullscreenchange",E(I,b))})}),this.calcDisplayInfo=function(){if(null!=E(I,i)){var s=I.container.getBoundingClientRect().height,o=I.container.getBoundingClientRect().width,h=E(I,t).width,a=E(I,t).height;s/a<o/h?(M(I,e,{width:s*h/a,height:s*h/a*E(I,i).display_height/E(I,i).display_width}),M(I,r,E(I,e).width*E(I,i).display_height/E(I,i).display_width*.2),M(I,n,(o-E(I,e).width)/2)):(M(I,n,0),M(I,e,{width:o,height:o*E(I,i).display_height/E(I,i).display_width}),M(I,r,(s-E(I,e).width/7*4)/2+E(I,e).width/14))}},m.set(this,function(t){M(I,i,t),null!=t&&I.calcDisplayInfo()}),this.destroy=function(){E(I,v).call(I),M(I,c,!1),E(I,h).forEach(function(t){return t()}),M(I,h,[]),M(I,t,{width:0,height:0}),M(I,e,{width:0,height:0}),M(I,l,[])},b.set(this,function(){I.calcDisplayInfo(),I.batchUpdateStickerElement()}),k.set(this,function(t,e){return x(I,void 0,Promise,function(){var i=this;return T(this,function(r){return R.ajax.disperse("/xlive/web-room/v1/stickers/getStickers",{scope:1e3*e.request_random_sec_range,expiresTime:performance.now()+1e3*e.request_random_sec_range}),R.ajax("/xlive/web-room/v1/stickers/getStickers?id="+t).then(function(t){for(var r=0,n=t.pic_stickers;r<n.length;r++){var s=n[r];E(i,o).has(s.id)||E(i,o).set(s.id,s)}for(var h=0,a=t.text_stickers;h<a.length;h++){var l=a[h];E(i,o).has(l.id)||(l.stretch.top_margin*=3,l.stretch.left_margin*=3,l.stretch.right_margin*=3,l.stretch.bottom_margin*=3,E(i,o).set(l.id,l))}E(i,d).call(i,e)}).catch(function(t){console.warn(t)}),[2]})})}),v.set(this,function(){E(I,s).forEach(function(t){var e=t.el;null==e||e.remove()}),E(I,s).clear()}),M(this,t,{width:0,height:0}),M(this,e,{width:0,height:0}),E(this,_).call(this)}}();exports.default=B,t=new WeakMap,e=new WeakMap,i=new WeakMap,r=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakMap,u=new WeakMap,w=new WeakMap,_=new WeakMap,m=new WeakMap,b=new WeakMap,k=new WeakMap,v=new WeakMap;
},{"@bilibili-live/web-player-common":"KGHo"}],"OKfi":[function(require,module,exports) {
var define;
var e;!function(r,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof e&&e.amd?e([],o):"object"==typeof exports?exports.WasmPlayerLoader=o():r.WasmPlayerLoader=o()}(self,function(){return function(){"use strict";var e={d:function(r,o){for(var n in o)e.o(o,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:o[n]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}},r={};e.d(r,{default:function(){return P}});var o="4.6.5";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]);function a(){try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch(e){return!1}}function i(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video/mp4",n=document.createElement("video");if("function"!=typeof n.canPlayType||"function"!=typeof(null===(r=window.MediaSource)||void 0===r?void 0:r.isTypeSupported))return!1;var t="".concat(o,'; codecs="').concat(e,'"'),a=n.canPlayType(t).toLowerCase();return!("maybe"!==a&&"probably"!==a||!window.MediaSource.isTypeSupported(t))}function s(){var e,r,o=document.createElement("canvas"),n="",t="";try{(e=o.getContext("webgl")||o.getContext("webgl2")||o.getContext("experimental-webgl"))&&(r=e.getExtension("WEBGL_debug_renderer_info"))&&(n=e.getParameter(r.UNMASKED_VENDOR_WEBGL),t=e.getParameter(r.UNMASKED_RENDERER_WEBGL))}catch(e){return null}return{vendor:n,renderer:t}}var c="name",u="version";function l(e,r){for(var o,t,a,i,s,c={},u=0;u<r.length;u+=2){o=r[u],a=r[u+1];for(var l=0;l<o.length;l++)if(s=o[l].exec(e)){for(var w=0;w<a.length;w++)i=s[w+1],"object"===n(t=a[w])&&t.length>0?2===t.length?c[t[0]]=t[1]:console.error("[Browser] [rgxMapper] not support arg count!"):c[t]=i||void 0;return c}}return c}var w,d,p=function(){var e="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:null,r="other",o="other",n="0";if(null!==e){r=function(e){var r=l(e,[[/microsoft (windows) (vista|xp)/i],"",[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d.\w ]*)/i,/(windows)[\/ ]?([ntce\d. ]+\w)(?!.+xbox)/i],[c],[/(win(?=3|9|n)|win 9x )([nt\d.]+)/i],"Windows",[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[c,"iOS"]],[/(mac os x) ?([\w. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,"Mac OS"]]]).name;return{Windows:!0,"Mac OS":!0}[r]?r:"other"}(e);var t=function(e){var r=l(e,[[/edg(?:e|ios|a)?\/([\w.]+)/i],[u,[c,"Edge"]],[/\bopr\/([\w.]+)/i],[u,[c,"Opera"]],[/(kindle)\/([\w.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w.]*)/i,/(ba?idubrowser)[\/ ]?([\w.]+)/i,/(?:ms|\()(ie) ([\w.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w.]+)/i,/(weibo)__([\d.]+)/i],[c,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w.]+)/i],[u,[c,"UCBrowser"]],[/\bqbcore\/([\w.]+)/i],[u,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w.]+)/i],[u,[c,"WeChat"]],[/konqueror\/([\w.]+)/i],[u,[c,"Konqueror"]],[/trident.+rv[: ]([\w.]{1,9})\b.+like gecko/i],[u,[c,"IE"]],[/yabrowser\/([\w.]+)/i],[u,[c,"Yandex"]],[/(avast|avg)\/([\w.]+)/i],[[c,"Avast/AVG Secure Browser"],u],[/coc_coc\w+\/([\w.]+)/i],[u,[c,"Coc Coc"]],[/dolfin\/([\w.]+)/i],[u,[c,"Dolphin"]],[/slbrowser\/([\w.]+)/i],[u,[c,"Lenovo"]],[/115browser\/([\w.]+)/i],[u,[c,"115 Browser"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 Browser"]],[/(comodo_dragon)\/([\w.]+)/i],[[c,"Comodo Dragon"],u],[/(electron)\/([\w.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w.]+)/i],[c,u],[/(metasr)[\/ ]?([\w.]+)/i,/(lbbrowser)/i],[c],[/headlesschrome(?:\/([\w.]+)| )/i],[u,[c,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w.]+)/i],[[c,"Chrome WebView"],u],[/(chrome)\/v?([\w.]+)/i],[[c,"Chrome"],u]]);return{browser:{Chrome:!0,Edge:!0}[r.name]?r.name:"other",version:r.version||"0"}}(e);o=t.browser,n=t.version}return{ua:e||"",os:r,browser:o,version:n,gpuInfo:s,hardwareConcurrency:window.navigator.hardwareConcurrency||0,isPThreadSupported:a,isSupportHEVC:i("hvc1.1.6.L123")}},f="bwphevc_debug",m=(w=-1!==window.location.href.indexOf("".concat(f,"=1")),d="1"===window.localStorage.getItem(f),w||d||!1),b={BROWSER_LIST:{Chrome:{min:80,blackList:[]},Edge:{min:80,blackList:[]}},OS_LIST:{Windows:!0,"Mac OS":!0},GPU_LIST:[],BASE_CPU_CORE_NUMBER:4};function v(){if(m){for(var e,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];(e=console).log.apply(e,["[WasmPlayerLoader]"].concat(o))}}var y={},h=!1,g=null,S=navigator.userAgent,C="bwphevc_live_supported";function E(){if(null!==g)return g;var e=JSON.parse(localStorage.getItem(C)||"null"),r=(null==e?void 0:e.version)===o;if(e&&r&&e.ua===S)null!=e&&e.supported?(g=!0,null!=e&&e.cached?(v("SUPPORT! Already cached!"),h=!0):(v("SUPPORT! But not cache done!"),y=e.supportInfo,h=!1)):g=!1;else{h=Boolean(e&&e.cached&&r);var n=function(){var e=+new Date,r=!1,o=p(),n=b.BROWSER_LIST[o.browser],t=!!b.OS_LIST[o.os]&&!!n&&parseFloat("".concat(o.version))>=n.min,a=o.isSupportHEVC,i=o.hardwareConcurrency>=b.BASE_CPU_CORE_NUMBER;a&&"Chrome"===o.browser&&(v("use browser HEVC!"),r=!0,t=!0);var s=r?null:!!o.gpuInfo(),c=r?null:o.isPThreadSupported(),u=!!r||!!(c&&i&&s&&t);return v("supportedChecker end spent: ".concat(+new Date-e,"ms")),{pass:u,supportInfo:{browser:t,browserHEVC:a,cpu:i,gpu:s,gpuInfo:o.gpuInfo,pthread:c,hardwareConcurrency:o.hardwareConcurrency},isUseNativeHEVC:r}}();y=n.supportInfo,g=n.pass,n.isUseNativeHEVC&&(v("IsUseNativeHEVC set cached true!"),h=!0),function(e){var r=JSON.stringify({version:o,ua:S,supported:e,supportInfo:y,cached:h,date:+new Date});localStorage.setItem(C,r)}(g)}return g||!1}var P={loadWasmPlayer:function(){return new Promise(function(e,r){E()?function(e,r){v("start load WasmPlayer SDK");var o=+new Date,n=function(){window.WasmPlayer?(v("load done WasmPlayer SDK, spent: ".concat(+new Date-o," ms")),h?e():window.WasmPlayer.preloadBwp(function(o){o?e():r("Cache WasmPlayer lib error, please retry!")})):r("Can not get WasmPlayer Instance!")};if(window.WasmPlayer)n();else{var t=document.createElement("script");t.type="text/javascript",t.setAttribute("async","async"),t.src="//s1.hdslb.com/bfs/static/wasmplayer/wasm-player-4.6.5.min.js",document.body.appendChild(t),t.addEventListener("load",n),t.addEventListener("error",function(){r("ERROR: load SDK error!")})}}(e,r):r("Not Support!")})},isHEVCSupported:E,isBwpSupported:E};return r.default}()});
},{}],"lCVI":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))(function(n,i){function u(e){try{s(o.next(e))}catch(r){i(r)}}function a(e){try{s(o.throw(e))}catch(r){i(r)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t(function(e){e(r)})).then(u,a)}s((o=o.apply(e,r||[])).next())})},r=this&&this.__generator||function(e,r){var t,o,n,i,u={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,o=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(n=(n=u.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){u.label=i[1];break}if(6===i[0]&&u.label<n[1]){u.label=n[1],n=i;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(i);break}n[2]&&u.ops.pop(),u.trys.pop();continue}i=r.call(e,u)}catch(a){i=[6,a],o=0}finally{t=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWASMDecoder=exports.isWASMSupportHEVC=exports.destroy=exports.once=exports.on=exports.maybe360Browser=exports.isHardSupportHEVC=exports.isBwpSupported=void 0;var o=require("@bilibili-live/web-player-common"),n=t(require("@bilibili/wasmplayer-loader")),i=require("@bilibili/wasmplayer-loader");function u(e,r){var t;void 0===r&&(r="video/mp4");var o=document.createElement("video");if("function"!=typeof o.canPlayType||"function"!=typeof(null===(t=window.MediaSource)||void 0===t?void 0:t.isTypeSupported))return!1;var n=r+'; codecs="'+e+'"',i=o.canPlayType(n).toLowerCase();return!("maybe"!==i&&"probably"!==i||!window.MediaSource.isTypeSupported(n))}function a(){return o.ua.isIOS()||o.ua.isSafari()&&u("hvc1.1.6.L123")}function s(){return o.ua.isChrome()&&!o.ua.isEdg()&&u("hvc1.1.6.L123")}Object.defineProperty(exports,"isBwpSupported",{enumerable:!0,get:function(){return i.isBwpSupported}}),exports.isHardSupportHEVC=a,exports.maybe360Browser=s;var c=new o.EventBus;exports.on=c.on,exports.once=c.once,exports.destroy=c.destroy;var p=!1;function l(){return p}function f(){return e(this,void 0,Promise,function(){return r(this,function(e){switch(e.label){case 0:return[4,n.default.loadWasmPlayer().then(function(){p=!0})];case 1:return[2,e.sent()]}})})}exports.isWASMSupportHEVC=l,exports.loadWASMDecoder=f,o.wpd.SupportHEVC&&f().catch(function(e){console.error(e)});
},{"@bilibili-live/web-player-common":"KGHo","@bilibili/wasmplayer-loader":"OKfi"}],"yABZ":[function(require,module,exports) {
"use strict";function e(e,r){if(r.some(function(r){return r.value===e.code.toString()}))return e.code.toString();for(var t=r[r.length-1],n=r.length-1;n>=0;n-=1){if(Number(r[n].value)>e.code&&null!=t)return String(t.value);t=r[n]}return String(t.value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHEVCDowngradeQn=void 0,exports.getHEVCDowngradeQn=e;
},{}],"H7b7":[function(require,module,exports) {
"use strict";var e=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},t=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SwitchBetterLine=void 0;var n=5,i=8e3,r=6e4,a=1e4,o=5e3,s=0,c=function(){function c(d,m){var l=this;this.video=d,this.opts=m,u.set(this,!1),h.set(this,[]),f.set(this,0),p.set(this,0),w.set(this,[]),this.getNeedSwitchLine=function(){return e(l,u)},this.destroy=function(){e(l,w).forEach(function(e){return e()}),t(l,w,[])},v.set(this,function(v){var d=0;s=performance.now();var m=function(){e(l,u)?c.switchNum+=1:d=performance.now()},g=function(){if(!(s+a>performance.now()||0===d||e(l,p)+o>=performance.now())){var c={duration:performance.now()-d,waitingStartTime:d};e(l,h).push(c),t(l,h,e(l,h).filter(function(n){return n.waitingStartTime+r<performance.now()&&t(l,f,e(l,f)-n.duration),n.waitingStartTime+r>=performance.now()})),t(l,f,e(l,h).reduce(function(e,t){return e+t.duration},0)),(e(l,f)>i||e(l,h).length>=n)&&t(l,u,!0)}},E=function(){t(l,p,performance.now())};v.addEventListener("playing",g),v.addEventListener("seeking",E),v.addEventListener("waiting",m),e(l,w).push(function(){v.removeEventListener("seeking",E),v.removeEventListener("playing",g),v.removeEventListener("waiting",m)})}),c.switchNum+1!==this.opts.lineNum&&e(this,v).call(this,d)}var u,h,f,p,w,v;return u=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,w=new WeakMap,v=new WeakMap,c.switchNum=0,c.lastSwitchTime=0,c}();exports.SwitchBetterLine=c;
},{}],"z0Gg":[function(require,module,exports) {
"use strict";var e,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRetryStrategy=exports.RetryStrategies=void 0;var t,o=require("@bilibili-live/web-player-common"),P=((e={})[o.P2PType.HLS_BILI]=o.P2PType.FLV_QVB,e[o.P2PType.FLV_QVB]=o.P2PType.HLS_BILI,e[o.P2PType.NONE]=o.P2PType.HLS_NOT_P2P,e[o.P2PType.HLS_NOT_P2P]=o.P2PType.NONE,e);!function(e){e[e.Retry=0]="Retry",e[e.SwitchLine=1]="SwitchLine",e[e.changeProtocol=2]="changeProtocol"}(t=exports.RetryStrategies||(exports.RetryStrategies={}));var y=((r={})[o.ProtocolType.HTTP_HLS]=[o.P2PType.HLS_BILI,o.P2PType.HLS_NOT_P2P],r[o.ProtocolType.HTTP_STREAM]=[o.P2PType.FLV_QVB,o.P2PType.NONE],r);function T(e,r){if(null==e)return t.Retry;var T=e.getCurP2PType();switch(r){case 1:case 2:return t.Retry;case 3:return o.logger.error("retry count: "+r+", auto change line"),e.setCurLine(e.getCurLine()+1),t.SwitchLine;case 4:if(null!=o.wpd.P2PType)return t.Retry;if(y[o.ProtocolType.HTTP_STREAM].includes(T)&&!e.hasHLSPlayerSupportStream())return o.logger.error("retry count: "+r+", auto change line"),e.setCurLine(e.getCurLine()+1),t.SwitchLine;var p=P[T];return y[o.ProtocolType.HTTP_HLS].includes(p)?e.useStream({protocol:o.ProtocolType.HTTP_HLS,expectP2PType:p}):e.useStream({protocol:o.ProtocolType.HTTP_STREAM,expectP2PType:p}),t.changeProtocol;default:return t.Retry}}exports.useRetryStrategy=T;
},{"@bilibili-live/web-player-common":"KGHo"}],"pBr6":[function(require,module,exports) {
"use strict";var e,t,r,i,n,o,l,a,u,s,c,d,p,h,f,y,v,g,m,w,P,S,E,C,T,b=this&&this.__assign||function(){return(b=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},I=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),_=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),L=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&I(t,e,r);return _(t,e),t},k=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function l(e){try{u(i.next(e))}catch(t){o(t)}}function a(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(l,a)}u((i=i.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var r,i,n,o,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(n=(n=l.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(a){o=[6,a],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},M=this&&this.__classPrivateFieldSet||function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},U=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},F=this&&this.__spreadArray||function(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e},H=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LivePlayer=exports.LivePlayerEvent=exports.isBwpSupported=void 0;var Q,D=require("@bilibili-live/web-player-common"),O=L(require("@bilibili-live/web-player-video")),q=H(require("@bilibili-live/web-player-playurl-parser")),x=H(require("../common/controller")),W=H(require("./p2p-adapter")),N=require("../common/utils"),B=require("../common/track-video"),R=H(require("@bilibili-live/web-player-track")),A=H(require("./replay")),j=require("../common/connects"),J=H(require("./sticker")),G=require("./hevc-adapter"),K=require("./live-player-tool"),z=require("./switch-better-line"),X=require("./retry-strategy"),Y=require("./hevc-adapter");Object.defineProperty(exports,"isBwpSupported",{enumerable:!0,get:function(){return Y.isBwpSupported}}),function(e){e.Failed="liveplayer-failed",e.LiveStatusChange="liveplayer-status-change",e.Destroyed="liveplayer-destroyed"}(Q=exports.LivePlayerEvent||(exports.LivePlayerEvent={}));var Z=function(){function I(I,_,L){var F=this;this.container=I,this.opts=_,this.socket=L,e.set(this,""),t.set(this,""),r.set(this,null),i.set(this,null),this.playUrlParser=null,n.set(this,0),this.replay=null,o.set(this,[]),l.set(this,[]),a.set(this,null),u.set(this,!1),s.set(this,null),c.set(this,null),d.set(this,"Fetch"),p.set(this,void 0),h.set(this,null),f.set(this,function(){}),y.set(this,!1),v.set(this,new D.EventBus),this.on=U(this,v).on,this.once=U(this,v).once,this.emit=U(this,v).emit,g.set(this,new Set),m.set(this,function(e){return k(F,void 0,Promise,function(){var t,r,o,a=this;return V(this,function(u){switch(u.label){case 0:return M(this,n,e),this.opts.roomId=e,D.logger.info("live player init roomId: "+e),null!=this.opts.roomInfo?[3,2]:[4,U(this,S).call(this)];case 1:return u.sent(),[3,3];case 2:if(M(this,i,this.opts.roomInfo),null==U(this,i).playurl_info.playurl)return this.emit(Q.Failed,R.default.ErrorCode.PlayUrlNull),D.logger.error("playUrlInfo.playurl is null"),[2];this.playUrlParser=ae(U(this,i).playurl_info,{userId:this.opts.userId,ownerId:U(this,i).uid}),u.label=3;case 3:return this.reload(),null!=(null===(t=U(this,i))||void 0===t?void 0:t.live_time)&&U(this,l).push(te(U(this,i).live_time,this.ctrl.getCtrlUI())),null!=U(this,i)&&(this.replay=new A.default(this.container,{live_time:null===(r=U(this,i))||void 0===r?void 0:r.live_time,rid:null===(o=U(this,i))||void 0===o?void 0:o.room_id},this.socket,this.ctrl),this.replay.on("timeShiftChange",function(e){a.tmShiftHandler(e),a.reload()}),this.enableReplay()&&this.replay.init()),[2]}})})}),this.tmShiftHandler=function(e){var t,r,i,n=F.playUrlParser;if(null!=F.replay&&null!=n){var o=n.getCurP2PType(),l=n.getCurStreamInfo().protocol,a=D.ProtocolType.HTTP_HLS,u=D.P2PType.HLS_NOT_P2P,s=n.getCurStreamInfo().timeshift;0!==e?(0===s&&(F.replay.bakState={p2pType:o,protocol:l}),(null!==(t=F.replay.bakState.p2pType)&&void 0!==t?t:o)>0&&(n.setCurP2PType(D.P2PType.HLS_BILI),u=D.P2PType.HLS_BILI)):(u=null!==(r=F.replay.bakState.p2pType)&&void 0!==r?r:o,n.setCurP2PType(u),a=null!==(i=F.replay.bakState.protocol)&&void 0!==i?i:l,F.replay.bakState={}),n.setTimeShift(e),n.useStream({protocol:a,expectP2PType:u})}},w.set(this,function(e){var t,r,i=null!==(r=null===(t=F.playUrlParser)||void 0===t?void 0:t.getLineCandidates().length)&&void 0!==r?r:0,n=new z.SwitchBetterLine(e.getVideoEl(),{lineNum:i}),l=e.on(O.EventType.WaitStart,function(){var t,r,i;if(!0!==(null===(t=F.replay)||void 0===t?void 0:t.isReplay)&&n.getNeedSwitchLine()){var o=performance.now(),l=navigator.connection;F.switchLine(z.SwitchBetterLine.switchNum,!1),R.default.custom(R.default.CustomCode.SwitchLine,{switchNum:z.SwitchBetterLine.switchNum,videoCurrentTime:e.getVideoEl().currentTime,interval:Math.floor((o-z.SwitchBetterLine.lastSwitchTime)/1e3),downlink:null!==(r=null==l?void 0:l.downlink)&&void 0!==r?r:-1,rtt:null!==(i=null==l?void 0:l.rtt)&&void 0!==i?i:-1}),D.logger.warn("waiting auto switch line to "+z.SwitchBetterLine.switchNum)}});U(F,o).push(n.destroy),U(F,o).push(l)}),P.set(this,function(){U(F,o).forEach(function(e){return e()}),M(F,o,[])}),S.set(this,N.retry(function(e){return void 0===e&&(e=0),k(F,void 0,Promise,function(){var t,r,o,l,a,u,c,d,p=this;return V(this,function(h){switch(h.label){case 0:return N.loadingOrCoverImg(this.container,U(this,s)),t=null!==(a=null===(l=this.playUrlParser)||void 0===l?void 0:l.getCurLine())&&void 0!==a?a:0,r=(null!==(c=null===(u=this.playUrlParser)||void 0===u?void 0:u.getCurStreamInfo())&&void 0!==c?c:{}).timeshift,D.logger.info("updateRoomInfo quality: "+e+", line: "+t),[4,new Promise(function(t,r){D.ajax(ee(U(p,n),e),{handleRes:function(e){e.code!==D.ApiErrorCode.AreaBlock?t(e.data):p.emit(Q.Failed,D.ApiErrorCode.AreaBlock,e.message)}}).catch(r)})];case 1:return 1!==(o=h.sent()).live_status?(D.unloading(),this.emit(Q.LiveStatusChange,o.live_status),[2]):null==o.playurl_info?(D.unloading(),this.playUrlParser=null,D.logger.info("playUrlInfo is null"),[2]):(M(this,i,o),D.logger.debug("room info: "+JSON.stringify(o)),null==o.playurl_info.playurl?(this.emit(Q.Failed,R.default.ErrorCode.PlayUrlNull),D.logger.error("playUrlInfo.playurl is null"),[2]):(this.playUrlParser=ae(U(this,i).playurl_info,{userId:this.opts.userId,ownerId:o.uid}),null===(d=this.playUrlParser)||void 0===d||d.setCurLine(t),this.tmShiftHandler(null!=r?r:0),[2]))}})})},[0,1,3,5,10,20,30,60,90,120].map(function(e){return 1e3*e}))),E.set(this,function(i,n){var l;i.once(O.EventType.LoadStart,function(){l=window.setTimeout(function(){R.default.error(R.default.ErrorCode.FirstFrameNotEmit,"firstFrame timeout",{sampleRate:.01}),D.logger.error("firstFrame timeout"),i.destroy(),F.reload()},1e4),U(F,o).push(function(){clearTimeout(l)})}),i.once(O.EventType.FirstFrame,function(){var o,s;U(F,g).forEach(function(e){e!==i&&(e.destroy(),U(F,g).delete(e))}),clearTimeout(l),M(F,e,D.uuid()),M(F,t,n),U(F,u)?i.destroy():(null===(o=U(F,r))||void 0===o||o.removeVideoEl(),F.container.appendChild(i.getVideoEl()),M(F,r,i),null===(s=U(F,a))||void 0===s||s.success(),U(F,f).call(F),M(F,f,ie(i,U(F,h))))})}),C.set(this,function(e){var t=N.maxRetryChecker(e);e.once(O.EventType.Ended,function(){return k(F,void 0,void 0,function(){return V(this,function(i){return e.destroy(),t()?(r(function(){}).catch(function(e){D.logger.error(e)}),[2]):(D.logger.error("retry over 6 min"),this.emit(Q.Failed,R.default.ErrorCode.RetryMaxTime),[2])})})}),e.once(O.EventType.Error,function(i){return k(F,void 0,void 0,function(){var i,n;return V(this,function(o){return e.destroy(),t()?(i=N.loadingOrCoverImg(this.container,U(this,s)),!0===(null===(n=this.replay)||void 0===n?void 0:n.isReplay)?[2]:(r(i).catch(function(e){D.logger.error(e),i()}),[2])):(this.emit(Q.Failed,R.default.ErrorCode.RetryMaxTime),[2])})})});var r=function(e){return k(F,void 0,Promise,function(){var t,r,i;return V(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,7]),[4,N.backoffById(this.playUrlParser)];case 1:return t=n.sent(),null!=this.playUrlParser&&X.useRetryStrategy(this.playUrlParser,t)===X.RetryStrategies.SwitchLine&&this.emit(D.ExternalEventType.SwitchLine,this.playUrlParser.getCurLine()),e(),[3,7];case 2:r=n.sent(),e(),D.logger.error(r),n.label=3;case 3:return n.trys.push([3,5,,6]),[4,U(this,S).call(this)];case 4:return n.sent(),[3,6];case 5:throw i=n.sent(),this.emit(Q.Failed,R.default.ErrorCode.RoomP0ApiFetchError),this.destroy(),i;case 6:return[3,7];case 7:return this.reload(),[2]}})})}}),T.set(this,function(e){return[D.EventBus.forwardEvent(e,U(F,v),[O.EventType.Destroyed,O.EventType.Play,O.EventType.Pause,O.EventType.LoadStart,O.EventType.MetaData,O.EventType.FirstFrame,O.EventType.WaitStart]),e.on(O.EventType.VideoInfo,function(e){var t,r;F.emit(O.EventType.VideoInfo,{mediaInfo:b(b({},e.mediaInfo),{corePlayerType:(null!==(r=null===(t=e.mediaInfo)||void 0===t?void 0:t.corePlayerType)&&void 0!==r?r:"")+" ("+U(F,d)+")"}),realtimeInfo:e.realtimeInfo})}),e.on(O.EventType.SEIData,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];F.emit(O.EventType.SEIData,e)}),e.once(O.EventType.WASMDecoderDegrade,function(){var e=F.playUrlParser;if(null!=e){var t=e.getQualityDesc();if((null==t?void 0:t.codec)===D.CodecType.HEVC){var r=K.getHEVCDowngradeQn(t,e.getAVCQnCandidates());F.switchQuality(r,"CPU负载较高，")}}})]}),this.play=function(){var e;null===(e=U(F,r))||void 0===e||e.play().catch(function(){})},this.pause=function(){var e;null===(e=U(F,r))||void 0===e||e.pause()},this.volume=function(e){var t;null===(t=U(F,r))||void 0===t||t.volume(e)},this.mute=function(e){var t;null===(t=U(F,r))||void 0===t||t.mute(e)},this.enableReplay=function(){return null!=U(F,i)&&null!=F.playUrlParser&&!(!U(F,i).all_special_types.includes(19)||!F.playUrlParser.hasHLSPlayerSupportStream())},I.style.overflow="hidden",this.ctrl=new x.default(I,{userId:_.userId}),$(this.ctrl,this,I),M(this,p,B.createVideoTracker()),U(this,m).call(this,this.opts.roomId).catch(function(e){D.logger.error(e),R.default.error(R.default.ErrorCode.RoomEnterLiveError,e)})}return I.prototype.reload=function(){var e,t=this;if(!U(this,u)){D.logger.info("live player load roomId: "+U(this,n));var r=U(this,n);if(null!=U(this,i)&&0!==r&&null!=this.playUrlParser){var l,a=this.playUrlParser;null==U(this,c)&&M(this,c,a.getCurQuality());try{l=a.getCurPlayUrl()}catch(m){return D.logger.error(m),void U(this,S).call(this).then(function(){t.reload()}).catch(function(e){D.logger.error(e)})}if(!U(this,u)){var h=this.playUrlParser.getCurStreamInfo();R.default.updateDynamicInfo({p2pType:h.p2pType,sHost:h.host,sQuery:h.query,sProtocol:h.protocol,sCodec:h.codec,sName:h.name,quality:h.quality},!0),D.logger.info("current stream info: "+JSON.stringify(h)),U(this,P).call(this);var f=new O.default(l,{wasmDecode:a.getCurCodecType()===D.CodecType.HEVC&&!G.isHardSupportHEVC()&&!G.maybe360Browser()&&G.isWASMSupportHEVC()});U(this,g).add(f),oe(this.ctrl.getCtrlUI(),a,D.wpd.SupportHEVC||G.isHardSupportHEVC()||U(this,y)),U(this,w).call(this,f),le(f,this,this.container),U(this,E).call(this,f,l),U(this,C).call(this,f),U(this,p).call(this,f),(e=U(this,o)).push.apply(e,F([j.connectUIandVideo(this.ctrl,f),re(f),j.connectVideoLoading(f,this.container,U(this,s)),j.connectVideoPip(f,this.ctrl),j.connectMirror(f,this.ctrl)],U(this,T).call(this,f)));var v=a.getCurP2PType();W.default({video:f,type:v,roomId:r,interval:a.getDynamicConfig().report_interval_sec}).then(function(){var e;M(t,d,(e={},e[D.P2PType.HLS_BILI]="SistersFetcher",e[D.P2PType.FLV_QVB]="QVBFetcher",e[D.P2PType.HLS_NOT_P2P]="Fetch",e[D.P2PType.NONE]="Fetch",e)[v])}).catch(function(e){var r;M(t,d,"Fetch");var i=((r={})[D.P2PType.HLS_BILI]=D.P2PType.HLS_NOT_P2P,r[D.P2PType.FLV_QVB]=D.P2PType.NONE,r);a.setCurP2PType(i[v]),R.default.updateDynamicInfo({p2pType:i[v]}),D.logger.error(e)})}}}},I.prototype.setTitlePageImg=function(e){M(this,s,e)},I.prototype.setAutoSyncCfg=function(e){M(this,h,e),null!=U(this,r)&&(U(this,f).call(this),M(this,f,ie(U(this,r),e)))},I.prototype.getPlayerInfo=function(){var i,n,o,l,a,u;return{guid:U(this,e),playingStatus:!(null===(n=null===(i=U(this,r))||void 0===i?void 0:i.getVideoEl().paused)||void 0===n||n),playSrc:U(this,t),quality:null!==(l=null===(o=this.playUrlParser)||void 0===o?void 0:o.getCurQuality())&&void 0!==l?l:"",qualityCandidates:null!==(u=null===(a=this.playUrlParser)||void 0===a?void 0:a.getQnCandidates())&&void 0!==u?u:[]}},I.prototype.getVideoEl=function(){var e;return null===(e=U(this,r))||void 0===e?void 0:e.getVideoEl()},I.prototype.blockStream=function(){var e=this;N.blockStream(U(this,r),function(){e.emit(O.EventType.Play)})},I.prototype.discardFrame=function(e){var t,i=null===(t=U(this,r))||void 0===t?void 0:t.getVideoEl();null!=i&&(i.currentTime+=e)},I.prototype.remainBufferLength=function(){var e,t=null===(e=U(this,r))||void 0===e?void 0:e.getVideoEl();return null==t?0:D.remainBufferLength(t)},I.prototype.showHEVCQuality=function(e){var t=this;if(!G.isHardSupportHEVC()){var r=this.playUrlParser;if(null!=r)if(e)G.loadWASMDecoder().then(function(){null!=t.playUrlParser&&(M(t,y,!0),oe(t.ctrl.getCtrlUI(),t.playUrlParser,U(t,y)||D.wpd.SupportHEVC||G.isHardSupportHEVC()))}).catch(function(e){console.error(e)});else{M(this,y,!1);var i=r.getQualityDesc();if((null==i?void 0:i.codec)!==D.CodecType.HEVC)return void oe(this.ctrl.getCtrlUI(),r,!1);var n=K.getHEVCDowngradeQn(i,r.getAVCQnCandidates());this.switchQuality(n)}}},I.prototype.destroy=function(e){var t,i;D.logger.info("live player destroy, holdLastFrame: "+String(e)),null===(t=U(this,r))||void 0===t||t.destroy(e),U(this,u)||(M(this,u,!0),this.emit(Q.Destroyed),null===(i=this.replay)||void 0===i||i.destroy(),U(this,P).call(this),this.ctrl.destroy(),U(this,v).destroy(),U(this,l).forEach(function(e){return e()}),M(this,l,[]))},I.prototype.switchQuality=function(e,t){var r,i,n=this;void 0===t&&(t=""),D.logger.info("switchQuality to "+e);var o=this.playUrlParser;if(null!=o){var l=o.getQualityDesc(e),u=o.getQualityDesc(o.getCurQuality()),s=o.getQualityDesc(null!==(r=U(this,c))&&void 0!==r?r:"0");if(null!=l&&null!=s&&null!=u){if(0===this.opts.userId&&l.code>s.code)return D.logger.warn("user not login, reject switch quality"),this.emit(D.ExternalEventType.SwitchQualityNotLogin,{newQn:{qn:e,text:l.label},oldQn:{qn:u.value,text:u.label}}),!1;if(D.toast(t+"清晰度即将切换至"+l.label,this.container),M(this,a,{success:function(){D.toast(t+"清晰度已经切换至"+l.label,n.container),M(n,a,null),n.emit(D.ExternalEventType.SwitchQuality,e,u.value,o.getQnCandidates().map(function(e){var t=e.label;return{qn:e.value,desc:t}}))}}),u.code===l.code)return null===(i=this.playUrlParser)||void 0===i||i.useStream({codec:l.codec}),void this.reload();U(this,S).call(this,l.code).then(function(){var e;null===(e=n.playUrlParser)||void 0===e||e.useStream({codec:l.codec}),n.reload()}).catch(function(e){D.logger.error(e)})}else D.logger.error("switchQuality: quality parser error. "+JSON.stringify({targetQnDesc:l,curQnDesc:u,defQnDesc:s}))}},I.prototype.switchLine=function(e,t){var r,i,n,o=this;void 0===t&&(t=!0);var l=this.playUrlParser;null!=l&&(t&&D.toast("线路即将切换至"+(null!==(i=null===(r=l.getLineCandidates().find(function(t){return t.value===e}))||void 0===r?void 0:r.label)&&void 0!==i?i:""),this.container),M(this,a,{success:function(){t&&D.toast("线路已经切换至"+l.getCurLineDesc().label,o.container),M(o,a,null),o.emit(D.ExternalEventType.SwitchLine,e)}}),null===(n=this.playUrlParser)||void 0===n||n.setCurLine(e),this.reload())},I.prototype.capturePic=function(e,t){var i,n;return null!==(n=null===(i=U(this,r))||void 0===i?void 0:i.capturePic(e,t))&&void 0!==n?n:null},I}();function $(e,t,r){var i=this,n=!1,o=e.onRefresh(function(){var e,i;t.once(O.EventType.FirstFrame,function(){n&&(D.toast("刷新成功",r),n=!1)}),D.toast("正在刷新",r),n=!0,!0===(null===(e=t.replay)||void 0===e?void 0:e.isReplay)&&(null===(i=t.replay)||void 0===i||i.returnLive()),t.tmShiftHandler(0),t.reload(),t.emit(D.ExternalEventType.Reload),R.default.operation(R.default.OperationCode.Refresh)}),l=e.onChange(function(e,r){return k(i,void 0,void 0,function(){return V(this,function(i){return"quality"===e?[2,t.switchQuality(r)]:("line"===e&&t.switchLine(r),ne(e,r),[2])})})});return function(){o(),l()}}function ee(e,t){return void 0===t&&(t=0),"//api.live.bilibili.com/xlive/web-room/v2/index/getRoomPlayInfo?room_id="+e+"&protocol=0,1&format=0,1,2&codec=0,1&qn="+t+"&platform=web&ptype=8"}function te(e,t){var r=Date.now()/1e3-e-performance.now()/1e3,i=window.setInterval(function(){var e,i,n,o;t.time={value:(e=performance.now()/1e3+r,i=Math.floor(e/3600),n=("0"+Math.floor((e-3600*i)/60)).slice(-2),o=("0"+Math.floor(e%60)).slice(-2),(0!==i?i.toFixed(0)+":":"")+n+":"+o),tips:"直播持续时间"}},1e3);return function(){clearInterval(i)}}function re(e){var t=[],r=e.getVideoEl(),i=0;return D.logger.info("start monitor buffer length"),e.on(O.EventType.VideoInfo,function(e){var n=e.realtimeInfo;if(!(r.paused||r.currentTime<=0)){var o=n.videoBufferLength;(o>10||i===r.currentTime&&o>5)&&(r.currentTime+=o/2,D.logger.warn("auto discard frame, current time: "+r.currentTime),t.length<3&&((t=t.filter(function(e){return performance.now()-e<5e3})).push(performance.now()),3===t.length&&R.default.custom(R.default.CustomCode.AutoDiscardFrame,null,{extFields:"all"}))),i=r.currentTime}})}function ie(e,t){if(null===t)return function(){};if(!D.ua.isChrome()&&!D.ua.isEdg())return function(){};var r=t.auto_sync_enable,i=t.auto_sync_high_speed,n=t.auto_sync_low_speed,o=t.auto_sync_max_threshold,l=t.auto_sync_min_threshold;return 1!==r?function(){}:(D.logger.info("live player start auto sync video progress"),e.on(O.EventType.VideoInfo,function(t){var r=1e3*t.realtimeInfo.videoBufferLength;if(!(r<0||isNaN(r))){var a=e.getVideoEl(),u=1;r<l?u=n:r>o&&(u=i),(u<=0||u>2)&&(u=1),u!==a.playbackRate&&(a.playbackRate=u)}}))}function ne(e,t){"quality"===e?R.default.operation(R.default.OperationCode.SwitchQuality,{quality:t}):"line"===e?R.default.operation(R.default.OperationCode.SwitchLine,{line:t}):"danmaku"===e?R.default.operation(R.default.OperationCode.Danmaku,b({},t)):"volume"===e?!0===t.disabled?R.default.operation(R.default.OperationCode.Mute):R.default.operation(R.default.OperationCode.Volume,{value:t.value}):"playStatus"===e?!0===t?R.default.operation(R.default.OperationCode.Play):R.default.operation(R.default.OperationCode.Pause):"fullScreenStatus"===e?R.default.operation(R.default.OperationCode.FullScreen,{value:t}):"webFullScreenStatus"===e&&R.default.operation(R.default.OperationCode.WebFullScreen,{value:t})}function oe(e,t,r){var i,n,o,l={list:null!==(i=t.getLineCandidates())&&void 0!==i?i:[],value:null!==(n=t.getCurLine())&&void 0!==n?n:0};e.line=l;var a=t.getQnCandidates();r||(a=t.getAVCQnCandidates());var u={list:a,value:null!==(o=t.getCurQuality())&&void 0!==o?o:"0"};e.quality=u}function le(e,t,r){D.logger.debug("listen sticker SEI");var i=D.seiKeyComparator("LIVE_SEI_CHANNEL"),n=null,o=!1,l=e.on(O.EventType.SEIData,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i(e[2])&&(o||(o=!0,n=new J.default(r)),null==n||n.onSei(e))}),a=e.on(O.EventType.MetaData,function(e){o&&(D.logger.info("destroy sticker when metadata"),null==n||n.destroy(),o=!1)}),u=0,s=t.ctrl.onChange(function(e,t){"webFullScreenStatus"!==e&&"fullScreenStatus"!==e||(clearTimeout(u),u=window.setTimeout(function(){null==n||n.calcDisplayInfo(),null==n||n.batchUpdateStickerElement()},"webFullScreenStatus"===e?10:300))}),c=e.on(O.EventType.VideoInfo,function(e){null==n||n.onVideoInfo({width:e.mediaInfo.width,height:e.mediaInfo.height})});t.once(Q.Destroyed,p),e.once(O.EventType.Destroyed,p);var d=!1;function p(){d||(d=!0,D.logger.info("destroy sticker..."),clearTimeout(u),null==n||n.destroy(),s(),l(),a(),c())}}function ae(e,t){var r=t.userId,i=t.ownerId,n=new q.default(e);return r===i&&(n.setCurP2PType(D.P2PType.NONE),R.default.updateDynamicInfo({p2pType:D.P2PType.NONE})),G.isHardSupportHEVC()&&n.useStream({codec:D.CodecType.HEVC,expectP2PType:n.getCurP2PType()}),n}exports.LivePlayer=Z,e=new WeakMap,t=new WeakMap,r=new WeakMap,i=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,a=new WeakMap,u=new WeakMap,s=new WeakMap,c=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,y=new WeakMap,v=new WeakMap,g=new WeakMap,m=new WeakMap,w=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,C=new WeakMap,T=new WeakMap;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-video":"ao58","@bilibili-live/web-player-playurl-parser":"uCDP","../common/controller":"as8u","./p2p-adapter":"A6uK","../common/utils":"KY4m","../common/track-video":"rPou","@bilibili-live/web-player-track":"ESUf","./replay":"xqO8","../common/connects":"blC7","./sticker":"fyPa","./hevc-adapter":"lCVI","./live-player-tool":"yABZ","./switch-better-line":"H7b7","./retry-strategy":"z0Gg"}],"W75V":[function(require,module,exports) {
"use strict";var t,e,n,r,i,o,a,l,u,s=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&s(e,t,n);return c(e,t),e},h=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function l(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,l)}u((r=r.apply(t,e||[])).next())})},f=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(l){o=[6,l],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},p=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},v=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},y=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RoundPlayer=exports.NonRoundStatus=void 0;var m,b=require("@bilibili-live/web-player-common"),g=d(require("@bilibili-live/web-player-video")),w=require("../common/connects"),E=y(require("../common/controller")),_=require("../common/utils"),P=y(require("@bilibili-live/web-player-track"));!function(t){t[t.Preround=-1]="Preround",t[t.Failed=-2]="Failed",t[t.Nonenabled=-3]="Nonenabled"}(m=exports.NonRoundStatus||(exports.NonRoundStatus={}));var x=function(){function s(s,c){var d=this;this.container=s,this.opts=c,t.set(this,""),e.set(this,null),n.set(this,""),r.set(this,!1),i.set(this,[]),o.set(this,null),a.set(this,new b.EventBus),this.on=p(this,a).on,this.emit=p(this,a).emit,l.set(this,function(){return h(d,void 0,Promise,function(){var s,c,d,y,E,x,T,M,V,q=this;return f(this,function(j){switch(j.label){case 0:return p(this,r)?[2]:(b.logger.info("round player start loop playing"),null===(M=p(this,e))||void 0===M||M.destroy(),s=b.loading(this.container),[4,R(this.opts.roomId)]);case 1:return c=j.sent(),s(),c.cid===m.Failed?[2]:c.cid<=0?(d=void 0,c.cid===m.Nonenabled&&(d=P.default.ErrorCode.RoomUnSettingRound),b.logger.warn("exit round cause: "+m[c.cid]),this.emit("failed",c.cid,c.play_time,d),this.destroy(),[2]):(this.emit(b.ExternalEventType.StartPlayRound,c),[4,k(c.cid,c.bvid)]);case 2:if(y=j.sent(),null==(E=S(y,c.play_time)))throw new Error("can't find round segment");return p(this,r)?[2]:(x=new g.default(E.url,{startTime:E.startTime}),v(this,t,b.uuid()),v(this,n,E.url),p(this,i).forEach(function(t){return t()}),v(this,i,[]),p(this,i).push(p(this,u).call(this,c.title),w.connectUIandVideo(this.ctrl,x),w.connectVideoLoading(x,this.container,p(this,o)),w.connectVideoPip(x,this.ctrl),w.connectMirror(x,this.ctrl),b.EventBus.forwardEvent(x,p(this,a),[g.EventType.Play,g.EventType.Pause,g.EventType.LoadStart,g.EventType.MetaData,g.EventType.VideoInfo])),T=function(){return h(q,void 0,Promise,function(){var t,e;return f(this,function(n){switch(n.label){case 0:t=new URL(E.url),n.label=1;case 1:return n.trys.push([1,3,,4]),e=b.loading(this.container),[4,_.backoffById(""+t.origin+t.pathname)];case 2:return n.sent(),null==e||e(),[3,4];case 3:return n.sent(),null==e||e(),[3,4];case 4:return p(this,l).call(this).catch(function(t){b.logger.error(t),P.default.error(P.default.ErrorCode.RoomEnterRoundError,t)}),[2]}})})},x.once(g.EventType.Ended,T),x.once(g.EventType.Error,T),v(this,e,x),null===(V=p(this,e))||void 0===V||V.removeVideoEl(),this.container.appendChild(x.getVideoEl()),[2])}})})}),u.set(this,function(t){var e,n="web-player-round-title";null===(e=document.querySelector("."+n))||void 0===e||e.remove();var r=document.createElement("div");return r.classList.add(n),r.textContent=t,r.style.cssText="\n      z-index: 2;\n      position: absolute;\n      right: 20px;\n      bottom: 20px;\n      pointer-events: none;\n      color: #aaa;\n      font-size: 14px;\n    ",d.container.appendChild(r),function(){r.remove()}}),this.play=function(){var t;null===(t=p(d,e))||void 0===t||t.play().catch(function(){})},this.pause=function(){var t;null===(t=p(d,e))||void 0===t||t.pause()},this.volume=function(t){var n;null===(n=p(d,e))||void 0===n||n.volume(t)},this.mute=function(t){var n;null===(n=p(d,e))||void 0===n||n.mute(t)},b.logger.info("enter round"),this.ctrl=new E.default(s,{userId:c.userId}),this.ctrl.onRefresh(function(){p(d,l).call(d).catch(function(t){b.logger.error(t),P.default.error(P.default.ErrorCode.RoomEnterRoundError,t)})}),p(this,l).call(this).catch(function(t){b.logger.error(t),P.default.error(P.default.ErrorCode.RoomEnterRoundError,t)})}return s.prototype.setTitlePageImg=function(t){v(this,o,t)},s.prototype.getVideoEl=function(){var t;return null===(t=p(this,e))||void 0===t?void 0:t.getVideoEl()},s.prototype.getPlayerInfo=function(){var r,i;return{guid:p(this,t),playingStatus:!(null!==(i=null===(r=p(this,e))||void 0===r?void 0:r.getVideoEl().paused)&&void 0!==i&&i),playSrc:p(this,n),quality:"0",qualityCandidates:[]}},s.prototype.blockStream=function(){var t=this;_.blockStream(p(this,e),function(){t.emit(g.EventType.Play)})},s.prototype.destroy=function(t){var n;b.logger.info("round player destroy, holdLastFrame: "+String(t)),null===(n=p(this,e))||void 0===n||n.destroy(t),p(this,r)||(v(this,r,!0),p(this,i).forEach(function(t){return t()}),v(this,i,[]),this.ctrl.destroy(),p(this,a).destroy())},s.prototype.capturePic=function(t,n){var r,i;return null!==(i=null===(r=p(this,e))||void 0===r?void 0:r.capturePic(t,n))&&void 0!==i?i:null},s}();function R(t){return h(this,void 0,Promise,function(){var e;return f(this,function(n){switch(n.label){case 0:return[4,b.ajax("/live/getRoundPlayVideo?room_id="+t+"&a="+Date.now()+"&type=flv")];case 1:if(e=n.sent(),Object.values(m).includes(e.cid))return[2,{play_time:e.play_time,cid:e.cid,bvid:e.bvid,title:e.title}];if(e.cid<=0)throw new Error("getRoundPlayVideo result parse failed: "+JSON.stringify(e));return[2,{play_time:e.play_time,cid:e.cid,bvid:e.bvid,title:e.title}]}})})}function k(t,e){var n,r;return h(this,void 0,Promise,function(){var i,o;return f(this,function(a){switch(a.label){case 0:return[4,b.ajax("//api.bilibili.com/x/player/playurl?cid="+t+"&bvid="+e+"&qn=0&platform=web")];case 1:if(i=a.sent(),"number"!=typeof(o=null===(n=null==i?void 0:i.durl)||void 0===n?void 0:n.length)||0===o)throw new Error(null!==(r=null==i?void 0:i.message)&&void 0!==r?r:"round play url parse error");return[2,i.durl.map(function(t){return{url:t.url,length:t.length}})]}})})}function S(t,e){for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(n<o.length/1e3)return{url:o.url,startTime:n};n-=o.length/1e3}return null}exports.RoundPlayer=x,t=new WeakMap,e=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-video":"ao58","../common/connects":"blC7","../common/controller":"as8u","../common/utils":"KY4m","@bilibili-live/web-player-track":"ESUf"}],"DfF7":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,i){void 0===i&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){void 0===i&&(i=t),e[i]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var i in r)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||e(t,r,i)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoEventType=void 0;var t=require("@bilibili-live/web-player-video");r(require("./live-player/live-player"),exports),r(require("./round-player/round-player"),exports),exports.VideoEventType=t.EventType;
},{"@bilibili-live/web-player-video":"ao58","./live-player/live-player":"pBr6","./round-player/round-player":"W75V"}],"jM0N":[function(require,module,exports) {
window.requestIdleCallback=window.requestIdleCallback||function(e){var n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)};
},{}],"aGDI":[function(require,module,exports) {
var define;
var t;!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof t&&t.amd?t([],i):"object"==typeof exports?exports.Danmaku=i():e.Danmaku=i()}(self,function(){return function(){"use strict";var t={8481:function(t,e,i){var n=i(3645),a=i.n(n),r=i(1667),o=i.n(r),s=new URL(i(3619),i.b),l=new URL(i(3845),i.b),A=new URL(i(4599),i.b),c=new URL(i(7482),i.b),h=new URL(i(8789),i.b),d=new URL(i(145),i.b),u=new URL(i(2837),i.b),f=new URL(i(3740),i.b),g=new URL(i(6866),i.b),m=new URL(i(9117),i.b),p=new URL(i(5102),i.b),b=new URL(i(7328),i.b),w=new URL(i(318),i.b),v=new URL(i(4617),i.b),M=new URL(i(2328),i.b),D=new URL(i(7676),i.b),x=new URL(i(6244),i.b),B=new URL(i(4409),i.b),y=new URL(i(1111),i.b),E=new URL(i(5738),i.b),C=new URL(i(5772),i.b),P=new URL(i(3342),i.b),k=new URL(i(5483),i.b),R=new URL(i(7061),i.b),T=new URL(i(7807),i.b),I=new URL(i(5059),i.b),S=a()(function(t){return t[1]}),H=o()(s),z=o()(l),L=o()(A),F=o()(c),Q=o()(h),j=o()(d),U=o()(u),J=o()(f),G=o()(g),O=o()(m),Y=o()(p),V=o()(b),X=o()(w),N=o()(v),K=o()(M),W=o()(D),Z=o()(x),q=o()(B),_=o()(y),$=o()(E),tt=o()(C),et=o()(P),it=o()(k),nt=o()(R),at=o()(T),rt=o()(I);S.push([t.id,".bilibili-danmaku{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;white-space:pre;pointer-events:none;display:inline-block;will-change:transform;font-family:SimHei,'Microsoft JhengHei',Arial,Helvetica,sans-serif;font-weight:var(--weight,bold);line-height:1.125;font-size:var(--size,25px);color:var(--color,#fff);opacity:var(--opacity,1);text-shadow:1px 0 1px var(--shadowColor),0 1px 1px var(--shadowColor),0 -1px 1px var(--shadowColor),-1px 0 1px var(--shadowColor);transform:translateZ(0)}.bilibili-danmaku[mode='1']{top:var(--top);left:var(--offset);-webkit-animation:roll linear var(--duration) forwards;animation:roll linear var(--duration) forwards}.bilibili-danmaku[mode='4']{top:var(--top);left:50%;transform:translateX(-50%);z-index:1}.bilibili-danmaku[mode='5']{top:var(--top);left:50%;transform:translateX(-50%);z-index:1}.bilibili-danmaku[mode='6']{top:var(--top);right:var(--offset);-webkit-animation:roll-reverse linear var(--duration) forwards;animation:roll-reverse linear var(--duration) forwards}.bilibili-danmaku[master='border']{padding-left:1px;padding-right:1px;border:1px solid var(--borderColor)}.bilibili-danmaku[mode='meteor']{transform-origin:left center;left:var(--left,0);top:var(--top,0);background-position:left 5px center,center right 74px,center right;background-size:auto 80%,cover,74px 100%;background-repeat:no-repeat;border-radius:20px;padding:2px 60px 2px 38px;background-image:url("+H+"),linear-gradient(90deg,rgba(15,18,47,0.4) 0%,rgba(15,18,47,0.4) 100%),linear-gradient(90deg,rgba(15,18,47,0.4) 0%,rgba(15,18,47,0) 80%,rgba(15,18,47,0) 100%);-webkit-animation:meteor linear var(--duration) forwards;animation:meteor linear var(--duration) forwards;transform:translateX(var(--sx)) translateY(var(--sy)) translateZ(0) rotate(-45deg) scale(var(--scale))}.bilibili-danmaku[master='meteor']{background-image:url("+z+"),linear-gradient(90deg,rgba(15,18,47,0.4) 0%,rgba(15,18,47,0.4) 100%),linear-gradient(90deg,rgba(15,18,47,0.4) 0%,rgba(15,18,47,0) 80%,rgba(15,18,47,0) 100%)}.bilibili-danmaku[master='meteor'] div{position:absolute;top:-3px;bottom:-3px;left:-3px;right:0;width:100%;height:100%;border:3px solid #82f2ff;border-radius:50px;-webkit-clip-path:polygon(0 0,20% 0,20% 100%,0 100%);clip-path:polygon(0 0,20% 0,20% 100%,0 100%);z-index:-1}.bilibili-danmaku[master='meteor']::before,.bilibili-danmaku[master='meteor']::after{content:'';display:inline-block;position:absolute;left:15%;right:0;width:85%;height:3px;background-image:linear-gradient(90deg,#82f2ff 0%,#82f2ff 10%,rgba(130,242,255,0) 90%,rgba(130,242,255,0) 100%)}.bilibili-danmaku[master='meteor']::before{top:-3px}.bilibili-danmaku[master='meteor']::after{bottom:-3px}.bilibili-danmaku[mode='midAutumn']{font-family:KaiTi,STFangsong,Helvetica Neue,Sans-Serif;-ms-writing-mode:tb-rl;writing-mode:vertical-rl;left:var(--left,0);top:var(--top,0);padding:18px 2px 4px 2px;transform-origin:top center;-webkit-animation:midAutumn linear var(--duration) forwards;animation:midAutumn linear var(--duration) forwards;background-repeat:no-repeat;background-position:top,top 23px center;background-size:100% 23px,cover}.bilibili-danmaku[mode='midAutumn']::before{display:inline-block;content:'';width:44px;height:44px;position:absolute;background-image:url("+L+");background-repeat:no-repeat;background-size:contain;left:-10px;top:-26px;background-size:cover}.bilibili-danmaku[mode='midAutumn']:nth-child(2n+1):not([master='midAutumn'])::before{background-image:url(\"//i0.hdslb.com/bfs/activity-plat/static/20210915/863a208ee5ae1ec64e10833bd04a1da6/lamp_bright_1.png\"),url("+L+")}.bilibili-danmaku[mode='midAutumn']:nth-child(3n+1):not([master='midAutumn'])::before{background-image:url(\"//i0.hdslb.com/bfs/activity-plat/static/20210915/863a208ee5ae1ec64e10833bd04a1da6/lamp_bright_2.png\"),url("+L+")}.bilibili-danmaku[mode='midAutumn']::after{position:absolute;left:0;right:0;bottom:-10px;content:'';display:inline-block;width:100%;height:10px;background-image:url("+F+");background-size:contain;background-repeat:no-repeat}.bilibili-danmaku[mode='midAutumn'].type1{z-index:2;background-image:url("+Q+"),linear-gradient(180deg,rgba(127,38,38,0.7) 0%,rgba(112,24,35,0.7) 100%)}.bilibili-danmaku[mode='midAutumn'].type2{z-index:1;background-image:url("+j+"),linear-gradient(180deg,rgba(127,38,38,0.7) 0%,rgba(112,24,35,0.7) 100%)}.bilibili-danmaku[mode='midAutumn'].type2::before{transform:rotate(-12deg)}.bilibili-danmaku[mode='midAutumn'].type3{z-index:0;background-image:url("+U+"),linear-gradient(180deg,rgba(127,38,38,0.7) 0%,rgba(112,24,35,0.7) 100%)}.bilibili-danmaku[mode='midAutumn'].type3::before{transform:rotate(-22deg)}.bilibili-danmaku[master='midAutumn']{z-index:3;background-image:url("+J+"),linear-gradient(180deg,rgba(71,48,137,0.7) 0%,rgba(59,33,93,0.7) 100%)}.bilibili-danmaku[master='midAutumn']::before{background-image:url(\"//i0.hdslb.com/bfs/activity-plat/static/20210915/863a208ee5ae1ec64e10833bd04a1da6/lamp_master_bright.png\"),url("+G+")}.bilibili-danmaku[master='midAutumn']::after{background-image:url("+O+")}.bilibili-danmaku[master='midAutumn'] div:nth-child(1)::before,.bilibili-danmaku[master='midAutumn'] div:nth-child(1)::after{content:'';position:absolute;top:23px;height:calc(100% - 22px);width:1px;background-image:linear-gradient(180deg,#ffd551 0%,#f59828 100%);transform:scaleX(.8)}.bilibili-danmaku[master='midAutumn'] div:nth-child(1)::before{left:0;transform-origin:left;border-right:1px solid #180046}.bilibili-danmaku[master='midAutumn'] div:nth-child(1)::after{right:0;transform-origin:right;border-left:1px solid #180046}.bilibili-danmaku[master='midAutumn'] div:nth-child(2)::before,.bilibili-danmaku[master='midAutumn'] div:nth-child(2)::after{z-index:1;content:'';position:absolute;background-size:100% 100%;transform-origin:top center}.bilibili-danmaku[master='midAutumn'] div:nth-child(2)::before{width:16px;height:28px;left:4px;bottom:-27px;background-image:url("+Y+");-webkit-animation:swing1 2s infinite linear;animation:swing1 2s infinite linear}@-webkit-keyframes swing1{0%{transform:rotate(-4deg)}50%{transform:rotate(8deg)}100%{transform:rotate(-4deg)}}@keyframes swing1{0%{transform:rotate(-4deg)}50%{transform:rotate(8deg)}100%{transform:rotate(-4deg)}}.bilibili-danmaku[master='midAutumn'] div:nth-child(2)::after{width:13px;height:22px;left:10px;bottom:-22px;background-image:url("+V+");-webkit-animation:swing2 2s infinite linear;animation:swing2 2s infinite linear}@-webkit-keyframes swing2{0%{transform:rotate(-4deg)}50%{transform:rotate(4deg)}100%{transform:rotate(-4deg)}}@keyframes swing2{0%{transform:rotate(-4deg)}50%{transform:rotate(4deg)}100%{transform:rotate(-4deg)}}.bilibili-danmaku[mode='battle']{top:var(--top);left:var(--left);-webkit-animation:battleRoll linear var(--duration) forwards;animation:battleRoll linear var(--duration) forwards;display:flex;align-items:center;padding:0 75px}.bilibili-danmaku[mode='battle'] .battle-main{display:flex;align-items:center}.bilibili-danmaku[mode='battle'] .battle-head{position:relative;height:50px;width:35px;background-size:100% 100%;background-repeat:no-repeat;padding:0;margin:0}.bilibili-danmaku[mode='battle'] .battle-head:before{z-index:-1;display:inline-block;content:'';height:80px;width:65px;position:absolute;top:-15px;right:-15px;background-size:100% 100%;background-repeat:no-repeat}.bilibili-danmaku[mode='battle'] .battle-tail{position:relative;display:flex;align-items:center;line-height:50px;background-repeat:no-repeat;padding:0;margin:0;min-width:120px}.bilibili-danmaku[mode='battle'] .battle-tail::before,.bilibili-danmaku[mode='battle'] .battle-tail::after{z-index:-1;display:inline-block;content:'';position:absolute;top:0;bottom:0;background-size:100% 100%;background-repeat:no-repeat}.bilibili-danmaku[mode='battle'] .battle-tail::before{left:0;right:0}.bilibili-danmaku[mode='battle'] .battle-tail::after{width:88px}.bilibili-danmaku[mode='battle'].blue{color:#dcfaff}.bilibili-danmaku[mode='battle'].blue .battle-head{background-image:url("+X+")}.bilibili-danmaku[mode='battle'].blue .battle-head:before{background-image:url("+N+")}.bilibili-danmaku[mode='battle'].blue .battle-tail::before{background-image:url("+K+")}.bilibili-danmaku[mode='battle'].blue .battle-tail::after{background-image:url("+W+")}.bilibili-danmaku[mode='battle'].red{color:#ffe9f0}.bilibili-danmaku[mode='battle'].red .battle-head{background-image:url("+Z+")}.bilibili-danmaku[mode='battle'].red .battle-head:before{background-image:url("+q+")}.bilibili-danmaku[mode='battle'].red .battle-tail::before{background-image:url("+_+")}.bilibili-danmaku[mode='battle'].red .battle-tail::after{background-image:url("+$+")}.bilibili-danmaku[mode='battle'].left .battle-main{flex-direction:row-reverse;text-align:right}.bilibili-danmaku[mode='battle'].left .battle-tail{justify-content:flex-end}.bilibili-danmaku[mode='battle'].left .battle-tail::before{left:50px}.bilibili-danmaku[mode='battle'].left .battle-tail::after{left:-38px}.bilibili-danmaku[mode='battle'].left.red .battle-head{transform:scaleX(-1)}.bilibili-danmaku[mode='battle'].left.red .battle-tail::before{transform:scaleX(-1)}.bilibili-danmaku[mode='battle'].left.red .battle-tail::after{transform:scaleX(-1)}.bilibili-danmaku[mode='battle'].right .battle-main{flex-direction:row}.bilibili-danmaku[mode='battle'].right .battle-tail::before{right:50px}.bilibili-danmaku[mode='battle'].right .battle-tail::after{right:-38px}.bilibili-danmaku[mode='battle'].right.blue .battle-head{transform:scaleX(-1)}.bilibili-danmaku[mode='battle'].right.blue .battle-tail::before{transform:scaleX(-1)}.bilibili-danmaku[mode='battle'].right.blue .battle-tail::after{transform:scaleX(-1)}.bilibili-danmaku[mode='battle'].battle-active{-webkit-animation:battleRoll2 linear var(--hitDuration) both,disappear linear .8s forwards var(--hitDuration);animation:battleRoll2 linear var(--hitDuration) both,disappear linear .8s forwards var(--hitDuration)}.bilibili-danmaku[mode='battle'].battle-active .battle-main{-webkit-animation:ease-in var(--speedUpDuration) forwards var(--speedUpTime);animation:ease-in var(--speedUpDuration) forwards var(--speedUpTime)}.bilibili-danmaku[mode='battle'].battle-active.left .battle-main{-webkit-animation-name:battle-speedup-l;animation-name:battle-speedup-l}.bilibili-danmaku[mode='battle'].battle-active.right .battle-main{-webkit-animation-name:battle-speedup-r;animation-name:battle-speedup-r}.bilibili-danmaku[mode='battle'].battle-active.bomb::after{content:'';position:absolute;width:150px;height:150px;background-repeat:no-repeat;-webkit-animation:bomb-step 1.2s steps(24) var(--hitDuration);animation:bomb-step 1.2s steps(24) var(--hitDuration)}@-webkit-keyframes bomb-step{100%{background-position-y:-3600px}}@keyframes bomb-step{100%{background-position-y:-3600px}}.bilibili-danmaku[mode='battle'].battle-active.bomb.left::after{transform:translateX(50%);right:0}.bilibili-danmaku[mode='battle'].battle-active.bomb.right::after{transform:translateX(-50%);left:0}.bilibili-danmaku[mode='battle'].battle-active.bomb.red::after{background-image:url(\"//i0.hdslb.com/bfs/activity-plat/static/20210922/863a208ee5ae1ec64e10833bd04a1da6/red_animate.png\")}.bilibili-danmaku[mode='battle'].battle-active.bomb.blue::after{background-image:url(\"//i0.hdslb.com/bfs/activity-plat/static/20210922/863a208ee5ae1ec64e10833bd04a1da6/blue_animate.png\")}.bilibili-danmaku[master='battle'].blue{color:#ffe680}.bilibili-danmaku[master='battle'].blue .battle-head{background-image:url("+tt+")}.bilibili-danmaku[master='battle'].blue .battle-tail::before{background-image:url("+et+")}.bilibili-danmaku[master='battle'].blue .battle-tail::after{background-image:url("+it+")}.bilibili-danmaku[master='battle'].red{color:#ffe680}.bilibili-danmaku[master='battle'].red .battle-head{background-image:url("+nt+")}.bilibili-danmaku[master='battle'].red .battle-tail::before{background-image:url("+at+")}.bilibili-danmaku[master='battle'].red .battle-tail::after{background-image:url("+rt+")}@-webkit-keyframes roll{0%{transform:translateX(0) translateZ(0)}100%{transform:translateX(var(--translateX)) translateZ(0)}}@keyframes roll{0%{transform:translateX(0) translateZ(0)}100%{transform:translateX(var(--translateX)) translateZ(0)}}@-webkit-keyframes roll-reverse{0%{transform:translateX(0) translateZ(0)}100%{transform:translateX(calc(var(--translateX) * -1)) translateZ(0)}}@keyframes roll-reverse{0%{transform:translateX(0) translateZ(0)}100%{transform:translateX(calc(var(--translateX) * -1)) translateZ(0)}}@-webkit-keyframes meteor{100%{transform:translateX(var(--ex)) translateY(var(--ey)) translateZ(0) rotate(-45deg) scale(var(--scale))}}@keyframes meteor{100%{transform:translateX(var(--ex)) translateY(var(--ey)) translateZ(0) rotate(-45deg) scale(var(--scale))}}@-webkit-keyframes midAutumn{0%{transform:translateY(0) translateZ(0) scale(var(--scale)) translateX(0)}100%{transform:translateY(var(--translateY)) translateZ(0) scale(var(--scale)) translateX(var(--translateX))}}@keyframes midAutumn{0%{transform:translateY(0) translateZ(0) scale(var(--scale)) translateX(0)}100%{transform:translateY(var(--translateY)) translateZ(0) scale(var(--scale)) translateX(var(--translateX))}}@-webkit-keyframes battleRoll{0%{transform:translateX(var(--translateSX)) translateZ(0)}100%{transform:translateX(var(--translateX)) translateZ(0)}}@keyframes battleRoll{0%{transform:translateX(var(--translateSX)) translateZ(0)}100%{transform:translateX(var(--translateX)) translateZ(0)}}@-webkit-keyframes battleRoll2{0%{transform:translateX(var(--ASX)) translateZ(0)}100%{transform:translateX(var(--AEX)) translateZ(0)}}@keyframes battleRoll2{0%{transform:translateX(var(--ASX)) translateZ(0)}100%{transform:translateX(var(--AEX)) translateZ(0)}}@-webkit-keyframes disappear{100%{opacity:0}}@keyframes disappear{100%{opacity:0}}@-webkit-keyframes battle-speedup-l{100%{transform:translateX(75px)}}@keyframes battle-speedup-l{100%{transform:translateX(75px)}}@-webkit-keyframes battle-speedup-r{100%{transform:translateX(-75px)}}@keyframes battle-speedup-r{100%{transform:translateX(-75px)}}",""]),e.Z=S},3645:function(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i}).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(n)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&a[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},1667:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8807:function(t,e,i){i.r(e);var n=i(3379),a=i.n(n),r=i(9037),o=i.n(r),s=i(569),l=i.n(s),A=i(3565),c=i.n(A),h=i(9216),d=i.n(h),u=i(8481),f={};f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=d(),a()(u.Z,f),e.default=u.Z&&u.Z.locals?u.Z.locals:void 0},3379:function(t){var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var r={},o=[],s=0;s<t.length;s++){var l=t[s],A=n.base?l[0]+n.base:l[0],c=r[A]||0,h="".concat(A," ").concat(c);r[A]=c+1;var d=i(h),u={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(e[d].references++,e[d].updater(u)):e.push({identifier:h,updater:a(u,n),references:1}),o.push(h)}return o}function a(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i.update(t=e)}else i.remove()}}t.exports=function(t,a){var r=n(t=t||[],a=a||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var s=i(r[o]);e[s].references--}for(var l=n(t,a),A=0;A<r.length;A++){var c=i(r[A]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=l}}},569:function(t){var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},9216:function(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},3565:function(t,e,i){t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},9037:function(t){var e,i=(e=[],function(t,i){return e[t]=i,e.filter(Boolean).join("\n")});function n(t,e,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=i(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var a={singleton:null,singletonCounter:0};t.exports=function(t){var e=a.singletonCounter++,i=a.singleton||(a.singleton=t.insertStyleElement(t));return{update:function(t){n(i,e,!1,t)},remove:function(t){n(i,e,!0,t)}}}},7547:function(t,e,i){var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(7783),o=i(801);i(8807);var s=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.getText=function(t){var e;return this.config.isRecycling&&this.recyclingDivList.length&&(e=this.recyclingDivList.shift()),o.default(t,this.config,e)},e}(r.default);e.default=s},801:function(t,e,i){var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(6393),o=i(7255),s=function(t){function e(e,i,n){return t.call(this,e,i,n)||this}return a(e,t),e.prototype.textRender=function(t,e){var i,n=!0;this.running=!1,this.recyclingDiv?(n=!1,(i=this.recyclingDiv).innerHTML=""):i=document.createElement("div"),i.className="bilibili-danmaku",this.divInit(i,t,e),n&&this.parent.appendChild(i);var a=this.getDivInfo(i,t);return i.style.display="none",{bitmap:i,width:a.width,height:a.height}},e.prototype.render=function(){this.running||(this.running=!0,this.divRender(),this.element.style.display="")},e.prototype.textFree=function(t,e){e?(this.running=!1,t.innerHTML="",t.removeAttribute("mode"),t.removeAttribute("master"),t.removeAttribute("style")):this.parent.removeChild(t)},e.prototype.parseText=function(t){return t.text.replace(/\r/g,"\r\n")},e.prototype.getDivInfo=function(t,e){return t.getBoundingClientRect()},e}(r.default),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.divInit=function(t,e,i){e.text&&(t.innerText=this.parseText(e)),e.divClassName&&(t.className+=" "+e.divClassName);var n="";if(e.html){if(e.dmType===o.DMType.Emoji){var a=1.125*e.size;n+="height: "+a.toFixed(1)+"px;",n+="width: "+(a*e.emojiRatio).toFixed(1)+"px;"}t.innerHTML=e.html}n+="--size:"+e.size*i.fontSize+"px;",n+="--color:"+this.getHexColor(e.color)+";",n+="--opacity:"+(i.opacity<.1?.1:i.opacity)+";",n+="--shadowColor:"+this.getHexColor(this.GetOutlineColor(e))+";",e.isMaster&&(t.setAttribute("master","border"),n+="--borderColor:"+this.getHexColor(e.borderColor)+";"),t.style.cssText=n,t.setAttribute("mode",""+this.textData.mode)},e.prototype.divRender=function(){var t="--top:"+this._y+"px;";this.textData.mode!==o.EDanmakuMode.Roll&&this.textData.mode!==o.EDanmakuMode.ReverseRoll||(t+="--offset:"+this._x+"px;",t+="--duration:"+this.time+"s;",t+="--translateX:"+-(this.config.width+this.width)+"px;"),this.element.style.cssText+=t},e}(s),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.divInit=function(t,e,i){e.text&&(t.innerText=this.parseText(e));var n="--weight: normal;";n+="--color:"+this.getHexColor(e.color)+";",n+="--opacity:"+this.renderConfig.opacity+";";var a=this.config.width/2;n+="--sx:"+a+"px;",n+="--sy:"+-a+"px;",n+="--scale:"+this.renderConfig.size+";",e.isMaster&&(t.setAttribute("master","meteor"),t.appendChild(document.createElement("div"))),t.style.cssText=n,t.setAttribute("mode","meteor")},e.prototype.divRender=function(){var t="--left:"+this.x+"px;--top:"+this.y+"px;";t+="--duration:"+this.time+"s;";var e=(this.config.height+this.config.width)/2;t+="--ex:"+(-e-this.width)+"px;",t+="--ey:"+(e+this.height)+"px;",this.element.style.cssText+=t},e.prototype.parseText=function(t){return t.text.replace(/(\r\n)|(\n)|(\r)/g,"")},e}(s),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.divInit=function(t,e,i){e.text&&(t.innerText=this.parseText(e));var n="--weight: bold;";n+="--size:20px;",n+="--color:#fff;",n+="--opacity:"+this.renderConfig.opacity+";",n+="--scale:"+this.renderConfig.size+";",n+="--translateX:"+this.renderConfig.translateX+"px;",e.isMaster?(t.setAttribute("master","midAutumn"),t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div"))):t.className+=" type"+this.renderConfig.type,t.style.cssText=n,t.setAttribute("mode","midAutumn")},e.prototype.divRender=function(){var t="--left:"+this.x+"px;";t+="--top:"+(this._y+60)+"px;",t+="--duration:"+this.time+"s;",t+="--translateY:"+-(this.config.height+this.height)+"px;",this.element.style.cssText+=t},e.prototype.parseText=function(t){return t.text.replace(/(\r\n)|(\n)|(\r)/g,"")},e.prototype.getDivInfo=function(t,e){var i=e.isMaster?100:60,n=t.getBoundingClientRect();return n.height=n.height*this.renderConfig.size+i,n},e}(s),h=function(t){function e(e,i,n){var a=t.call(this,e,i,n)||this;return a.wait=!1,a}return a(e,t),e.prototype.divInit=function(t,e,i){var n=document.createElement("div");n.className="battle-main";var a=document.createElement("div");a.className="battle-head";var r=document.createElement("div");r.className="battle-tail",e.text&&(r.innerText=this.parseText(e)),n.appendChild(a),n.appendChild(r),t.appendChild(n),e.isMaster&&t.setAttribute("master","battle"),t.style.cssText="--size:24px;",t.setAttribute("mode","battle")},e.prototype.divRender=function(){var t="--top:"+this.y+"px;";t+="--duration:"+this.time+"s;",t+="--left:"+this.x+"px;";var e="",i=this.config.width+this.width;switch(t+="--translateSX"+(this._x-this.x)+"px;",this.side){case"left":e=this.getColor(0),this.element.className+=" left",t+="--translateX:"+i+"px;";break;case"right":e=this.getColor(1),this.element.className+=" right",t+="--translateX:"+-i+"px;"}this.element.className+=" "+e,this.element.style.cssText+=t},e.prototype.setAnimation=function(t,e){var i=e.hitDuration,n=e.speedUpDuration,a=e.bombSide;this.element.className+=" battle-active",this.element.style.cssText+="--ASX:"+t[0]+"px;",this.element.style.cssText+="--AEX:"+t[1]+"px;",this.element.style.cssText+="--hitDuration:"+i+"s;",this.element.style.cssText+="--speedUpDuration:"+n+"s",this.element.style.cssText+="--speedUpTime:"+(i-n)+"s",this.side===a&&(this.element.className+=" bomb")},e.prototype.parseText=function(t){return t.text.replace(/(\r\n)|(\n)|(\r)/g,"")},e.prototype.getColor=function(t){var e,i,n,a;return(1===(null!==(a=null===(n=null===(i=null===(e=this.config._extra)||void 0===e?void 0:e.game_color)||void 0===i?void 0:i[0])||void 0===n?void 0:n.color)&&void 0!==a?a:1)?["blue","red"]:["red","blue"])[t]||"blue"},e}(s);e.default=function(t,e,i){switch(t.mode){case o.EDanmakuMode.Meteor:return new A(t,e,i);case o.EDanmakuMode.MidAutumn:return new c(t,e,i);case o.EDanmakuMode.Battle:return new h(t,e,i);default:return new l(t,e,i)}}},162:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},5230:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},8101:function(t,e){var i,n;Object.defineProperty(e,"__esModule",{value:!0}),e.EDanmakuSpecialMode=e.EDanmakuMode=void 0,(n=e.EDanmakuMode||(e.EDanmakuMode={}))[n.Roll=1]="Roll",n[n.BottomMiddleFLoat=4]="BottomMiddleFLoat",n[n.TopMiddleFLoat=5]="TopMiddleFLoat",n[n.ReverseRoll=6]="ReverseRoll",n.Meteor="meteor",n.MidAutumn="midAutumn",n.Battle="battle",(i=e.EDanmakuSpecialMode||(e.EDanmakuSpecialMode={}))[i.Battle=3e3]="Battle"},4718:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},4707:function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.DMType=void 0,(i=e.DMType||(e.DMType={}))[i.Normal=0]="Normal",i[i.Emoji=1]="Emoji",i[i.Voice=2]="Voice"},7255:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),a=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),a(i(162),e),a(i(5230),e),a(i(8101),e),a(i(4718),e),a(i(4707),e),a(i(902),e),a(i(1435),e),a(i(4050),e),a(i(7224),e),a(i(518),e)},902:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},1435:function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialType=void 0,(i=e.SpecialType||(e.SpecialType={}))[i.Normal=0]="Normal",i[i.Metror=1]="Metror",i[i.MidAutumn=2]="MidAutumn",i[i.Battle=3]="Battle"},4050:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},7224:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},518:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},7783:function(t,e,i){var n=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,a=t.length;i<n;i++,a++)t[a]=e[i];return t};Object.defineProperty(e,"__esModule",{value:!0});var a=i(8343),r=i(7255),o=function(){function t(t){this.config=t.config,this.core=t,this.danmakuModes=a.default(this.config),this.visualArray=[],this.recyclingDivList=[],this.init(),this.resize()}return t.prototype.init=function(){this.container=this.config.container},t.prototype.validate=function(t){if(t.isMaster)return!0;var e=this.config.danmakuNumber;switch(this.config.specialType){case r.SpecialType.Battle:case r.SpecialType.Metror:case r.SpecialType.MidAutumn:e=150}return!(this.visualArray.length>=e&&0!==e)},t.prototype.start=function(t){if(this.validate(t)){var e=this.danmakuModes[t.mode];if(e){var i=this.getText(t);e.onStart(i),i.time<=0?this.end(i):(this.visualArray.push(i),this.config.danmakuInserting(t))}}},t.prototype.resize=function(){this.config.width=this.container.offsetWidth||680,this.config.height=this.container.offsetHeight||420},t.prototype.beforeRender=function(t){switch(this.config.specialType){case r.SpecialType.Metror:this.meteorSpecialShow(t);break;case r.SpecialType.Battle:t-this.lastRenderTime>800&&this.clearVisualList()}},t.prototype.afterRender=function(t){this.lastRenderTime=t},t.prototype.render=function(t){var e=this;this.beforeRender(t),this.visualArray=this.visualArray.reduce(function(i,a){if(a.wait)return n(n([],i),[a]);var r=a.mode;return r&&r.onUpdate(a,t)?(a.render(),n(n([],i),[a])):(e.end(a),i)},[]),this.afterRender(t)},t.prototype.end=function(t,e){var i=t.mode,n=i&&i.onEnd(t,e);this.config.isRecycling&&n&&this.recyclingDivList.push(n)},t.prototype.clearVisualList=function(){var t=this;this.visualArray.forEach(function(e){t.end(e,!0)}),this.visualArray=[]},t.prototype.clearRecyclingDivList=function(){this.recyclingDivList.forEach(function(t){t.remove()}),this.recyclingDivList=[]},t.prototype.option=function(t,e){this.config[t]=e},t.prototype.destroy=function(){this.clearVisualList(),this.clearRecyclingDivList()},t.prototype.meteorSpecialShow=function(t){this.meteorSpecialShowTime?this.meteorSpecialShowTime<=t&&(this.meteorSpecialShowTime=null,this.core.add({mode:1,size:25,color:16777215,date:+new Date,uid:"",dmid:+new Date,text:"哔哩哔哩干杯",isMock:!0})):this.meteorSpecialShowTime=t+1e3*Math.floor(3*Math.random()+5)},t}();e.default=o},8343:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(1487),a=i(7255),r=function(){function t(t,e){this.config=t,this.spaceManager=new e(t)}return t.prototype.onStart=function(t){this.spaceManager.add(t),t.mode=this},t.prototype.onEnd=function(t,e){return this.spaceManager.remove(t),t.mode=null,t.free(e)},t.prototype.onUpdate=function(t,e){return t.endTime>=e},t}(),o=function(){function t(t){this.config=t,this.spaceManager=new n.SpaceManagerBattle(t)}return t.prototype.onStart=function(t){this.spaceManager.add(t),t.mode=this},t.prototype.onEnd=function(t,e){return this.spaceManager.remove(t),t.mode=null,t.free(e)},t.prototype.onUpdate=function(t,e){var i=this.spaceManager.orbit[t.index];return!(!i||e>=t.endTime||(i.hitTime&&e>=i.hitTime&&this.spaceManager.remove(t),0))},t}();e.default=function(t){var e;return(e={})[a.EDanmakuMode.Roll]=new r(t,n.SpaceManagerRoll),e[a.EDanmakuMode.BottomMiddleFLoat]=new r(t,n.SpaceManagerMiddleFLoat),e[a.EDanmakuMode.TopMiddleFLoat]=new r(t,n.SpaceManagerMiddleFLoat),e[a.EDanmakuMode.ReverseRoll]=new r(t,n.SpaceManagerRoll),e[a.EDanmakuMode.Meteor]=new r(t,n.SpaceManagerMeteor),e[a.EDanmakuMode.MidAutumn]=new r(t,n.SpaceManagerMidAutumn),e[a.EDanmakuMode.Battle]=new o(t),e}},6393:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(7255),a=i(8593),r=function(){function t(t,e,i){var n,r;this.textData=t,this.extra=a.jsonParse(null!==(r=null===(n=t.modeInfo)||void 0===n?void 0:n.extra)&&void 0!==r?r:""),this.config=Object.assign({},e),this.width=0,this.height=0,this.element=null,this.endTime=0,this.speed=0,this.x=0,this.y=0,this.bottom=0,this.parent=this.config.container,this.recyclingDiv=i,this.init()}return t.prototype.init=function(){this.textData.text&&(this.textData.text=this.textData.text.trim()),this.renderConfig=this.getConfigData();var t=this.textRender(this.textData,this.config);this.element=t.bitmap,this.width=t.width,this.height=t.height,this.initTime()},t.prototype.getHexColor=function(t){return"#"+("000000"+t.toString(16)).slice(-6)},t.prototype.GetOutlineColor=function(t){return t.color?0:16777215},t.prototype.getSpeed=function(){switch(this.textData.mode){case n.EDanmakuMode.Roll:case n.EDanmakuMode.ReverseRoll:case n.EDanmakuMode.Battle:this.speed=(512+this.width)/(this.textData.duration||this.config.duration)*this.config.speedPlus;break;case n.EDanmakuMode.Meteor:this.speed=(512+this.width)/(this.textData.duration||this.config.duration)*this.config.speedPlus*this.renderConfig.speedRatio;break;case n.EDanmakuMode.MidAutumn:this.speed=(512+this.height)/(this.textData.duration||this.config.duration)*this.config.speedPlus*this.renderConfig.speedRatio;break;default:this.speed=0}},t.prototype.initTime=function(){switch(this.startTime=this.config.curTime(),this.textData.mode){case n.EDanmakuMode.Meteor:this.getSpeed(),this.endTime=this.startTime+1.414*(this.config.width+this.config.height/2)/this.speed*1e3;break;case n.EDanmakuMode.MidAutumn:this.getSpeed(),this.endTime=this.startTime+(this.config.height+this.height)/this.speed*1e3,this.headArrivalTime=this.startTime+this.config.height/this.speed*1e3;break;case n.EDanmakuMode.Roll:case n.EDanmakuMode.ReverseRoll:case n.EDanmakuMode.Battle:this.getSpeed(),this.endTime=this.startTime+(this.config.width+this.width)/this.speed*1e3,this.headArrivalTime=this.startTime+this.config.width/this.speed*1e3;break;default:this.endTime=this.startTime+1e3*(this.textData.duration||this.config.duration)}this.time=(this.endTime-this.startTime)/1e3},Object.defineProperty(t.prototype,"_x",{get:function(){switch(this.textData.mode){case n.EDanmakuMode.Roll:case n.EDanmakuMode.ReverseRoll:return this.config.width-(this.config.curTime()-this.startTime)/1e3*this.speed;case n.EDanmakuMode.BottomMiddleFLoat:case n.EDanmakuMode.TopMiddleFLoat:return(this.config.width-this.width)/2;case n.EDanmakuMode.Battle:return this.x<=0?this.x+(this.config.curTime()-this.startTime)/1e3*this.speed:this.x-(this.config.curTime()-this.startTime)/1e3*this.speed;default:return this.x}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_y",{get:function(){switch(this.textData.mode){case n.EDanmakuMode.BottomMiddleFLoat:return this.config.height-(this.config.offsetBottom||0)-this.y-this.height+(this.config.offsetTop||0);case n.EDanmakuMode.MidAutumn:return this.config.height-(this.config.curTime()-this.startTime)/1e3*this.speed;default:return this.y}},enumerable:!1,configurable:!0}),t.prototype.free=function(t){var e=this.config&&this.config.isRecycling&&!t;return this.config=null,this.textData=null,this.textFree(this.element,e),!e&&(this.element=null),this.element},t.prototype.hide=function(){this.element.style.visibility="hidden"},t.prototype.show=function(){this.element.style.visibility=""},t.prototype.getConfigData=function(){var t=[];switch(this.textData.mode){case n.EDanmakuMode.Meteor:var e=[[1.1,1,1.3],[1,.9,1.1],[.9,.7,1],[.8,.5,.9]];return{size:(t=this.textData.isMaster?[1.1,1,1]:this.textData.isMock?[.8,.7,8.3]:e[Math.floor(Math.random()*e.length)])[0],opacity:t[1],speedRatio:t[2]};case n.EDanmakuMode.MidAutumn:var i=[[1.5,1,.7,150,1],[1,.9,.5,120,2],[.8,.7,.5,80,2],[.6,.5,.4,-20,3]];return{size:(t=this.textData.isMaster?[1.5,1,.7,120,0]:i[Math.floor(Math.random()*i.length)])[0],opacity:t[1],speedRatio:t[2],translateX:t[3],type:t[4]}}},t}();e.default=r},1487:function(t,e){var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpaceManagerBattle=e.SpaceManagerMidAutumn=e.SpaceManagerMeteor=e.SpaceManagerMiddleFLoat=e.SpaceManagerRoll=e.BaseSpaceManager=void 0;var a=function(){function t(t){this.config=t}return t.prototype.discard=function(t){t.time=-1},t}();e.BaseSpaceManager=a;var r=function(t){function e(e){var i=t.call(this,e)||this;return i.list=[],i}return n(e,t),e.prototype.clean=function(){this.list=[]},e.prototype.add=function(t){t.x=this.config.width,this.setY(t)},e.prototype.remove=function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},e.prototype.vCheck=function(t,e){if(t<(this.config.offsetTop||0))return!1;var i=t+e.height,n=e.x+e.width;return this.list.every(function(a){return a.y>i||a.bottom<t||(a._x+a.width<e.x||a._x>n)&&a.endTime<=e.headArrivalTime})},e.prototype.setY=function(t){var e=this.config.offsetTop||0;if(0===this.list.length||this.vCheck(e,t))this.setIn(t,e);else for(var i=this.config.height*(this.config.danmakuArea?this.config.danmakuArea/100:1),n=this.config.height-(this.config.offsetBottom||0),a=0;a<this.list.length;a++){if((e=this.list[a].bottom+1)>i||e+t.height>n)return void this.discard(t);if(this.vCheck(e,t))return void this.setIn(t,e)}},e.prototype.setIn=function(t,e){t.y=e,t.bottom=e+t.height;var i=this.list.findIndex(function(e){return e.bottom>=t.bottom});this.list.splice(i<0?this.list.length:i,0,t)},e}(a);e.SpaceManagerRoll=r;var o=function(t){function e(e){var i=t.call(this,e)||this;return i.list=[],i}return n(e,t),e.prototype.clean=function(){this.list=[]},e.prototype.add=function(t){t.x=(this.config.width-t.width)/2,this.setY(t)},e.prototype.remove=function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},e.prototype.vCheck=function(t,e){if(t<(this.config.offsetTop||0))return!1;var i=t+e.height;return this.list.every(function(e){return e.y>i||e.bottom<t})},e.prototype.setY=function(t){var e=this.config.offsetTop||0;if(0===this.list.length||this.vCheck(e,t))this.setIn(t,e);else for(var i=this.config.height*(this.config.danmakuArea?this.config.danmakuArea/100:1),n=this.config.height-(this.config.offsetBottom||0),a=0;a<this.list.length;a++){if((e=this.list[a].bottom+1)>i||e+t.height>n)return void this.discard(t);if(this.vCheck(e,t))return void this.setIn(t,e)}},e.prototype.setIn=function(t,e){t.y=e,t.bottom=e+t.height;var i=this.list.findIndex(function(e){return e.bottom>=t.bottom});this.list.splice(i<0?this.list.length:i,0,t)},e}(a);e.SpaceManagerMiddleFLoat=o;var s=function(t){function e(e){var i=t.call(this,e)||this;return i.lastUsedList=[],i.MAIN_RANGE=[.3,.7],i.SECONDARY_RANGE=[.1,.9],i.ORBIT_LENGTH=33,i.orbit=[],i}return n(e,t),e.prototype.getOrbitNum=function(){var t=(this.config.width+this.config.height)/1.414;return Math.floor(t/this.ORBIT_LENGTH)},e.prototype.randomIndex=function(t,e,i){var n=this,a=[],r=[];i.forEach(function(i,n){return n>=t&&n<=e&&(i?a:r).push([i,n])});var o=[];r.length>0?o=r:a.forEach(function(t){if(!(n.lastUsedList.indexOf(t[1])>=0)){var e=o[0];!e||e[0]>t[0]?o=[t]:e[0]===t[0]&&o.push(t)}});var s=o.length,l=s>1?Math.floor(Math.random()*s):0;return o[l][1]},e.prototype.getPos=function(t){var e=t.textData.isMaster||Math.random()>.5?this.MAIN_RANGE:this.SECONDARY_RANGE,i=this.getOrbitNum(),n=Math.round(e[0]*i),a=Math.round(e[1]*i);this.orbit.length!==i&&(this.orbit=Array.apply(null,{length:i}).map(function(){return 0}),this.orbitId=Date.now(),this.lastUsedList=[]);var r=this.randomIndex(n,a,this.orbit);this.lastUsedList.length>Math.ceil(i/10)&&this.lastUsedList.shift(),this.lastUsedList.push(r),this.orbit[r]+=t.width;var o=Math.round((this.config.width+this.config.height)/2/i)*r;return{index:r,x:o,y:o}},e.prototype.clean=function(){this.orbit=[]},e.prototype.add=function(t){var e=this.getPos(t);t.index=e.index,t.x=e.x,t.y=e.y,t.orbitId=this.orbitId},e.prototype.remove=function(t){if(this.orbitId===t.orbitId&&this.orbit[t.index]){var e=this.orbit[t.index]-t.width;this.orbit[t.index]=e>0?e:0}},e}(a);e.SpaceManagerMeteor=s;var l=function(t){function e(e){var i=t.call(this,e)||this;return i.orbitList={},i}return n(e,t),e.prototype.getIndex=function(t,e){var i=Math.min.apply(Math,t);if(e.headArrivalTime<i)return-1;var n=[];t.forEach(function(t,e){return t===i&&n.push(e)});var a=n.length;if(0===a)return-1;var r=a>1?Math.floor(Math.random()*a):0;return n[r]},e.prototype.setX=function(t){var e=this.orbitList[t.renderConfig.type];e||(e=[]);var i={0:180,1:180,2:70,3:140}[t.renderConfig.type];i||(console.warn("缺失弹道配置"),i=100);var n=Math.floor(this.config.width/i);e.length!==n&&(e.length=n,e=Array.from(e,function(t){return t||0}));var a=this.getIndex(e,t);if(-1!==a){e[a]=t.endTime,this.orbitList[t.renderConfig.type]=e;var r=Math.round(this.config.width/n);t.x=r*a}else this.discard(t)},e.prototype.clean=function(){this.orbitList={}},e.prototype.add=function(t){this.setX(t)},e.prototype.remove=function(){},e}(a);e.SpaceManagerMidAutumn=l;var A=function(t){function e(e){var i=t.call(this,e)||this;return i.ORBIT_HEIGHT=60,i.SAFE_AREA=75,i.orbit=[],i.waitList=[],i}return n(e,t),e.prototype.add=function(t){var e=this.curOrbitNum,i=this.orbit.length;if(i<e&&(this.orbit.length=e,this.orbit=Array.from(this.orbit,function(t){return t||{}}),this.waitList.length>0))for(var n=i;n<e;n++){var a=this.waitList.shift();a&&this.reAdd(a,n)}switch(t.extra&&t.extra.direction){case 1:t.side="left",t.x=-t.width;break;case 2:t.side="right",t.x=this.config.width;break;default:return void this.discard(t)}var r,o=this.getIdleOrbitIndex(t,e);0!==o.both.length||0!==o.single.length?(r=o.single.length>0?this.getRandomVal(o.single):this.getRandomVal(o.both),this.setData(t,r)):t.textData.isMaster?(t.wait=!0,this.waitList.push(t)):(this.discard(t),t.index=-1)},e.prototype.remove=function(t){t.index<0||!this.orbit[t.index]||!this.orbit[t.index][t.side]||t===this.orbit[t.index][t.side]&&(this.orbit[t.index][t.side]=null,this.orbit[t.index].left||this.orbit[t.index].right||(this.orbit[t.index]={},this.waitList.length>0&&t.index<=this.curOrbitNum&&this.reAdd(this.waitList.shift(),t.index)))},e.prototype.clean=function(){this.orbit=[]},Object.defineProperty(e.prototype,"curOrbitNum",{get:function(){return Math.floor(this.config.height/this.ORBIT_HEIGHT)},enumerable:!1,configurable:!0}),e.prototype.setData=function(t,e){t.y=e*this.ORBIT_HEIGHT,t.index=e,this.orbit[e][t.side]=t;var i=this.orbit[e];if(i.left&&i.right&&!i.hitTime){var n=this.config.curTime(),a=i.right._x,r=i.left._x,o=(a-r-i.left.width)/(i.right.speed+i.left.speed),s=a-o*i.right.speed,l=s>=this.config.width/2?"left":"right",A=.5;o<A&&(A=o);var c=n+1e3*o;this.orbit[e].hitTime=c,this.orbit[e].left.endTime=c+1500,this.orbit[e].right.endTime=c+1500;var h={hitDuration:o,speedUpDuration:A,bombSide:l};this.orbit[e].left.setAnimation([r-this.orbit[e].left.x,s],h),this.orbit[e].right.setAnimation([a-this.orbit[e].right.x,s-this.orbit[e].right.x],h)}},e.prototype.reAdd=function(t,e){t.initTime(),t.wait=!1,this.setData(t,e)},e.prototype.getIdleOrbitIndex=function(t,e){var i=this,n=[],a=[],r=t.textData.isMaster?t.width:this.SAFE_AREA;return this.orbit.forEach(function(o,s){if(!(s>e-1))if(o.left||o.right){if(!o[t.side]){if("left"===t.side&&o.right._x<r||"right"===t.side&&o.left._x+o.left.width>i.config.width-r)return;n.push(s)}}else a.push(s)}),{single:n,both:a}},e.prototype.getRandomVal=function(t){var e=t.length;return t[e>1?Math.floor(Math.random()*e):0]},e}(a);e.SpaceManagerBattle=A},8593:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.jsonParse=void 0,e.jsonParse=function(t){try{return JSON.parse(t)}catch(t){return{}}}},318:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABkCAMAAAAMlLaLAAABRFBMVEUAAAA9S70+S70uN4NT6P9S4fwuOIY4RawzPpZCcc0/WcNU6/9c9P9S5f5Q2fhU5/9T6P9Ddc46R7BBY8dT6f9U6f9W6f9Z7P9g//9R3vhT6P9U6P9V6P9T4/xS3vtU5/9Q0/Y9gLZT5/9Qz/U4ZaM1WJsuPIc0QJxT5/9Fe9FCb81T6P8+VcE+UL5T5/9U6P9U6P9T6P9V6P9U6f9W7f9Y7f9X8f9V//9P1fJLwORDos47c61Oy/QwRIszP5lImN00PplGkttBa8pU6P9U6P9W6f9NyupHstlAksNOxvBNwO5Nu+xMtupMruZKp+RKoeFHi9dGg9RAXcVU5/9U6P9U6P9T6P9T6P9U6P9V6P9V6P9U6P9T5/9U6P9U5/9KveFHsNhGqtNCmMdBjMA+hbozT5MyS5BU6P9T6P9V6P9U6P9T5//Ky2ByAAAAa3RSTlMA2dn1/f304evh2zEL/vvu6OLf3Z2GIhYC/vTxS/78+fn5+Pj39vXo4+Pg3dvazsWokkI5KRwRBv78+/j39erp6ejgWFVF/fv69fTy8e/t6+bl3NXUvbuzsXhvbWtiYPz7+/r5+fb229p7eiTcK3QAAAN1SURBVFjDrZnpXxJBGMfdBS/QjMSAEsoDC9IOK80jScvuy+7D7jv+//fBQPOD/e3wzIPOCz/7e7FfZ2ZnvzwzOzA9W49t2QFd23VwplSUMKwU4znvNJggCCqDsZjkTQ0mDIJMPOfUrgLTg3Mi7Y8xnNF4ztHjmkGFQejgnMv5PqkGpNmqpXqtedXMqdOWc37Me1CBIe1smwvTJo9YzstV3yludaI9ulbewRgv5v0wbZDti8mZccu55DvFphvokcl74PzxnmL0xOZtPK8PMga3hmHzAvkJXotpEYN/3/6D/AjL+bLn3IQgIT+wnIkrEga3ty+Ql+5ZztmrwhSb2zGkrrw4ZznPV8RXs/NZdednWM4XxuS5MbeG5m93nixZzuu85Bt0Jozkzlc/K/oGE0K5Mg7Li75BZyg/TVrOe+llwFrmXBMtD99g8XB+DMsvK3xD+aHlnEx7+4bz0n22vOwbzoubZHnZN5zJ8l6+4dxp+Vervr7hPFIuwPKevuE8kkjMF2F5lW+QRxKNtoHl/Fb2DecGxbQZWP6j6BvOTYppd8nynr5pjci2dbK8p2/MiNDukOX9fGMoaAtrZHnRNxgR2idM84sVb9/ciFC+gwLLi77ZilDK3UXZm7yHb7gvC7eplhd9w5TEV67lZd9sRSnzyTq1fcE3TLl+La6Wv9XbN2cS0falHtdml3v5hikbRIDlXb5hyk9oi2p5l2+YAktw+5Vz+ObYEHPWIjfjsf3OuXwTw/lRIAoG5fJNDGeGKJhip29iOJ+Jggfu9A04WH+gYPlJvhkecr0NSWD2Zd9wf9ajlCnZN+hPxBRFEoVQ3xCn3KgEB0lbYn1DnG/1AklUrm/AwdOC0hX1DTj0A6Oqb8ChnztNfQMO/fiq6htwqBTQ1TfDXJio6xvDgUVRJmnrGzMuLtrk+obzMJWQcn3DWShoyTeOLJbX7BvOHsU++4YzbT362k/RRqi//RRty/raT9Ui/tbup8Qtq8I38gZa9o2wnff1jXC44Okb4ajD1zfywYvsG+EYyN837kMpjW/cR2Qa3wgHdp6+EY4PPX2zB8rfngDyzWgKfdIercIvmcHN1P9hKQ964RtzLD+XCk3WHjvDN+YVbHDcxyPyujmsI/mDfyDgvjj9Lfim6vx4osFUD+NTTlAt6T8scUtPKD5zqSlZFeUfl59m6LLJ4M4AAAAASUVORK5CYII="},5772:function(t){t.exports="data:image/png;base64,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"},2328:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABkBAMAAADgT2ZIAAAAJ1BMVEU8SrwuPKoxP64kMZwjMJk1QrIrOaYkMJY6SLg3RbUnNKApNqIAAABUNCVmAAAADXRSTlPZ2dnZ2NnZ1tnZ2dkAlJSxZgAAAdJJREFUaN7tmjFug0AURF2mhcI9SJwAKreLlB5pC0qaNGmR0lLGB7BEanehp7CvkEMl/Pn472oRimW7sPTnAKOZZf6r2Pw8QI8x/SC9lpOMMTnp+D1pOE96IzURFKdQZkmHL9Inqduw2LQt4Zobx/REpiNcI1bKgmkN0z2Zbi6CJ5sWCLrb7S5JxxGeWwRNOGhWOaZ9HyaV+qVhV0p6JqG91I/JM7MQgvZB0klly665W3+Q+tuo8epXlmwPtfOmL4tJC8NPepTvNL57UdOYLDPLUflNl5NCucmh677+fh+8qbga8fRdpX5CUas/uUnh2XXLkyq4fpAUnpLU4gFqMV3/+tI+/PpxlGBRfn3xdHcK09Kf1Ak79ZIm8Zy0cur3i1+/5e0Xhjz5UbEoyP9QVeom7bn/fy4K9eWiMCnYWueiYBlOiutzUK4/iGkzJ03kSknemXbLOy1zp76MnzbF9VkV6q+Nv/V3iosahmD88SUqU0r6B0mFpybg6XymjSTFA1zJ0+MKT5F0vqga7W/mKfe3d+UpX1R1T54mylPlqfJUeao8VZ4qT5WnylPlqfJUeao8VZ4qT5WnylPlqfJUeao8VZ4qT5Wnz8lT9lzl6fP8ifALhHrL+5T2l8kAAAAASUVORK5CYII="},3342:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABkCAMAAAAlv4tJAAAAV1BMVEU8S7woNqItO6gjMJkkMJY2RLQjMJsmM580QrEyP64vPas4R7c7SLkrOKYAAADz3YPMvIb34ILey4Xiz4X75ILu2ITYxoXn04Xr1oXSwobPwIXUxIb/5oAl99U7AAAAHHRSTlPZ2dnY1tnZ2dnZ2dnZ2QD89P34+f779/r69vX2kpfFOgAAAftJREFUeNrtm1uWgjAQRAEliEHn5TjP/a9zHgKdTtuWHL/iqWID91S6w/1JtS8k5YA+Zvkc8zHm6z/HOc8qL0ne5rzPeZ3zkOVJ5TDn20mpoBOmBj0msZgWVGNi0INK6aDrJKvVeiUJSbo0tcqu3p3S6Gzn9FM2/UbSSmIbxwxxmFLpKNCUM6SkGjMDlSjMZsIUUMWZosYZdIgK0wNVCarSAEmbnVPoFjQaBVUK9UAtanDPPjv5WnNaUqdSffb46N1KTZ+gUYCpOVsNCgu1M6qHVPoMaJf0waekW+H0Gs1JK0tqlh5VWv9+mLTJKG2lKqZRBxSNaJcOqTl5vEyS82cfly2TW+gJMwDU63ZJAhodrp5R6fQPMsCtd4a0T+JwRrX1wumDgkZHzC6r8/L91J/9M7Vg7SvbqCW1Q9qBC99v1JLKkLozihsFF74P6t9PvbNLGjQuA728TLDSxhtSZCWWtFq89fgXCu9Rc+PLjFrSG/9Meuk7dPT6z+RvvQQvPX2UPkofpY/SR+mj9FH6KH2UPkofpY/SR+mj9FH6KH2UPkofpY/SR+mj9FH6KH2UPkofpY/SR+mj9FH6KH2UPkofpY/SR+mj9FH6KH2UPkofpY/SR+mj9NEFPuo9CJbIA9ZbngSDB8HwSXDpoDc/ssZPglXuCXRfSIoB/QGUquJZPWjYuwAAAABJRU5ErkJggg=="},7676:function(t){t.exports="data:image/png;base64,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"},5483:function(t){t.exports="data:image/png;base64,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"},4617:function(t){t.exports="data:image/png;base64,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"},6244:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABkCAMAAAAMlLaLAAAA/FBMVEUAAACeHjifHzl4HzB7HzD/L16VHjaTHjX9Ll36Llz/S3fzLVrcKFD2LlvqK1feKVF6ITDQJ0zJJkj/L17/L1+jHzr/L17/L1//L1//L1//L17/L17/M2H/N2T/O2juLFjiKlKsID2oHz3UKlDHKEr/L16UIjr/MF7mK1SIIDWBIDP/L16zIUD/L17/MF7/L1//L1//MF//MWD/MWH/MGD/MGD/NGD/NmL/Omb/NmvyLFm5IkL/MF//MGDgLFTfLFTKKk25J0erJUKjJD6eIz2NIjfXJ0/DJEfAJUa8I0T/MF7/MF7/MF7/MGD/MV//L17/MmP/L17/MWD/L17CsVKhAAAAU3RSTlMA4eH19P3l5v7+Bfzz/fvz8+/t8unh3c68qJR5MhcN/fTk4/v6+ff29vb17ubj1rKdY01DOioiHBEJ+uiFVvz8+vn49/f28Ovq6cbFtZBubCSHWHdfAwIAAANMSURBVFjDrZmJctMwEIaRFNe5nQQCtOVKKKUthXJDW+67UM68/7uAR5ZkS95r6M6kzZ8Z/17J0ueVdE4SV86vWuO0L3H5daHd5UDkcvViu8sNrTTf5dol0EUptkv/MpyL5tust7sUZS78Rm0ALkorQaM2212GWpWhmdk8CFfOyruXOSwHpYskm4eZd5mWd7c5LKbuK6+LH98OrVAuAW2TqjTD5cmd8HRDLtbIadrl2V3vsjN3t3eNcYJ0eX7Pu1yfh0zsN6dJm8Ov3mWw1LYp2uUSNDUFTr3LaOFu77uZ/aTue5fevu1U7Z1qmrD57V26J+Fym0dNEzY/vEv2WdUT0Vo3NebypzF4dePZRBpxeXTLu3xyE0m7v5Fm8bvQzQ5RiQZdngZ+77gu8B2SaAa/x3NtR723SDXN76NlyMFe3KJJfo8WoR/sp01T/O7tx3xp1QS/u8cxX9o1zu/sS8wXQBP8jvkCaZzfMV9AjfH7TR7zBdQIv2+aSR7zBdIwv193jDF5zBdAg/we75kycscXAW8Ov4W3wK4xzscGmzf9gzAFPpoqJnnKl1QD/N42puajJLx5EabAe1OLzpoS8OZnmALjLdPwyfm8eZmF7l1lH0wzH5I3Kb8H5Wcv8iF4k/J7UA3hRkzWcN4k/B5V/9+ZKB+UNzG/e/7LbuyD8sbyO7j4eGViH4Q3TX53V7V4m/igvFmPXLzaTnwQ3nwPw27VjHEn8QF5s5m4hNgyiQ/AG6kNwBthoyDeyLoY4o3sgcO8kQw/gDfCyYDwRjA1Md7wQYHyho8tmjc0RHOkvhEgnaxvOC+YnKxvWK87Rn1DvnxNzqpv6FKArm9YhQld31Bl0iRXvPoGK9psv7DqG7yEjPkCaaKgjfkCaqK8jvkCabrYT/mSanrpEfOlVbMWQvR6irUso9dT3EUiwhvBkpXkDW8BTfGGuZwnecPdXKB5k0ZK+SnKG8nGi3T/pp3yJyhvBJtSwv0biPILmDeyDTsRb0DKH80B3og3MwHeiLdWA2+Oa9NdvNHrB8ssK3De4JSvEpj9+6kgeENvgs+qDfky/n9LvgB4Iz0gGAK8kR5XDAHeSA9PhtCTAimPHFmIDpZgn7M45trgGnjKQz5/Acng5up9r3/yAAAAAElFTkSuQmCC"},7061:function(t){t.exports="data:image/png;base64,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"},1111:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABkCAMAAAAlv4tJAAAARVBMVEWeHjh9FiuCGC1XDhyGGS6OGjKLGTCTGzOZHDVpEiJjESBcDx4AAABvEyVfEB9zFCZUDRpQDRl5FSl2FShsEySWHDRmEiEAhwuuAAAAF3RSTlPh5OTo4+Lj4uHm5+gA5ufl6Onl5ebi5wjFCAMAAAIFSURBVHja7JZRboMwEEQpuMSQ0rSBcP+jVtgeLGc6NnxFlvJO8LSzY2/zVQn1iBLW8XBcPJ+gB8bTmhZ87Nw3ZsfNMzmWadkYwLqO4zpufIPrRrfz4/h1sGfAeypTA9OdxFOYOs8laG4E0RGansQTps+aiekFqtLTQPPZdPZEzWgacKLw9EAUQLMwUR29iaoyejlReA5RdEw9r/Ck6FkTosqUPVuKPvGk6AdO3qt2YqJMUqYAlQlAM4rSisJ0cSQrCmBKyUtRm42+p4meaf0E0WiKiYoydRw9Zy+SBzL6ewCesky69oefJ35Hde3hmS2T9sxP1HMievakieain27/RY8H36F3VEcPVfE8UZdA9GTTgPMEmR0F2TKlnkD+odx63lFMlGsP09PR24NfqCl+obOqPQ9Uj/TIjj7EjuJjAuyZe570F1r+6xldph6qJ99RRF+oPa1oV3zw4UmmwNCO6usJO7oU/no2zU3UVnKP2kNlMq+/R5ta7tFkojr619+jTS33qK3lHm3e9+gfu3UgAAAAAADk/9oIFX70R3/0R3/0R3/0R3/0R3/0R3/0R3/0R7VzxyYAwCAABBNr95/XHQQF4X6Kq55HeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeZRHeXTco3/bo6/n0Zj36J0RQB6pABLKabt7wm5bAAAAAElFTkSuQmCC"},7807:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABkCAMAAAAlv4tJAAAA6lBMVEWeHjh9FisAAACTGzNXDhyGGS5zFCZ5FSllESGAFyx2FShiESBfEB9aDh2DGC1wFCZoEiJtEyWXHDWNGjFVDRqLGjBdDx6QGzNSDRlpEiOJGS+cHTeOGjJsEySaHDZPDBhODBiWHDSZHDVfEB9QDRlPDBjxzXbnwXHhuW3rxXLdtWvZsWjuyXS/llrkvW/63Hzz0Hj52XrQp2PGnl7Dmlz213nMpGL84H3203jUqmXJoWDWrWaxbk6iYUa5cVGXW0GQWT7DdVarZUq8elOoa0rKelnDgFebYkPTjGDOiF3KhFqLUjuFTjiDTDjR9jhkAAAATnRSTlPh5ADi6OPl5efk5efn6OTm5ubh4ujj6OLp5uPh4ubh5+Ti4ebp5vv5+fr4+Pr1+f37/Pf29vz3/fz39/jv7+7v7+7u8PDu8PDw8PDv7uqjXivBAAADaklEQVR42uyW6U7bQBSFQxMokNCkaVLsOJtxaOlGd7qXSlQsff8H6l0mPjNzR7X4UQkkPuUBPp3jeyate7eE2yP6SXjteCt8dHwW3ghPal7WPHM89ThmjsBzx4uab8IX4Z1w4vgqvHd8EF45riEK1ybRo+P/IqpAlDGifqZItAaaDojWpEUV9VTWmjdX9OSfopc+V5dXPn8CziPOzs8MP9d8j/lt+FFzEXB6car88mmBopgX8/nBwZAoy7Kt7DPT6SNmPB5PJpNNxwNhR9hQ7iu7zJbSZx4ys1k+y/NBPhgMtpUu0etWPeIxs0d09jrMqDMismy1WK0Wi8Pl0niSKFN7tkmTIU0SNabwTIv2t8RTRcmTTBnRJFGiIlGCNEmUTQX1JNQzFC1YdK6BDtslEp3uI1HCTzTpGZgKKVH1JM06UnhCdEEcxomSp0ZaSqIQ9aofJ0w3avxAlbQnTKtKPQUjytUbUUK6d4k6WJN+4mkTTUcqojZRwonCk5sXRDMUzUaxKJoPjgm3BFFRDQK1oruCH6jgEs0j0a569kQUx+REM4iao4eoEF09PDdtoKge3QeBEvBcR1rh6tkUV59J904U6C2pqKl+GgSqsCdM05H2IWquXukppKl41asosYyrL5xpiUjD6hGpnVF4Kn6g2FHMaLROvE92nWz1RSvcUQy+7qgdfL/6psFHogOlrr7qwhTfKEx58O03yqZDN/glAvW+UbNODdfUxzVBNIhUZtR+o4iUSM4TEkWkDU+oSbRh8IOPtEqIwnRFRC+TVm89GfHEkNpEmwd/tt4nkygiTT6hUaJ2n+CJwb/+W+83D89o8CucvX1CE289Bh/zhGOCqK1+p+FlwtXjG0X1eJmY6GXKGgbf7L2tvumW4nlC9du+qcaZrp5xid79H737P/qX3ToQAAAAAADyf22ECj/6oz/6oz/6oz/6oz/6oz/6oz/6oz/6o9q5dxwAQSCKoomrsaf1gyZWyP63o4WZYBgdCk0guZcNTHmaBx7Fo3gUj+JRPIpH8SgexaN4FI/iUTyKR/EoHsWjeBSP4lE8ikfxKB7Fo3gUj9bg0S1rUZq0hnur0qg0Z3kp+JC0SzGWb5fTmXW+s5WelrbXyvZ879tl56yRtT0JluxJcK9NgqWySfC/h0pfH9rORwBdIx2cIHurZy40HQAAAABJRU5ErkJggg=="},5738:function(t){t.exports="data:image/png;base64,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"},5059:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAABkCAMAAAARxkpVAAAC91BMVEUAAACOAABGCRU+CBJECRRGChVDCRRACBNJChZ8AwZ+BAaDBgdODBiHGi0+CBOJAQFKCxaFAAJ4AgVIChaGAQNECRQ4BhBKCxc9BxJNDBeBBQeIGyxNDBg/CBJCCRQ/CBNvAwaBBgeHGSxECRQ5BhA5BxFGChU3BQ9bAwlqAgdsAgZ1FiZnAgdUAwpOBAt0AgVlAwhLCxddAwlMDBc6BxFHChZBCROEAwVsEyNfAghZAwmJGy1yEB9MBAx2AQRvEyNjAwdtEyGGGixvESA8BxJJBQw8BxJrEiJQBAxzFSVYBApiAgiFGStSBAp4FidzFSVwAQV8GCmFGSxxFCWAGClCCRRIBA1vAgY7BxFyAwVzAgVHChZ5FidrFCJuEiE7Bg9EBQ1TBAt0EB9xFCU+BQ9CBQ1+GClxESBGBA1vFCRWAwlwESBABQ45Bg87BxGBGSp7Fyh5Dht8Dhp1EB9rEyJ5Dxx1Dx5xEiB6FyhsEyJ8DBi7lFmBGStsEyJ+DRmyjFR4EB2EGSy1jlWADxd8Dxu4kFeHEBKDDxaCDRZ/FymCDBW6kliZVTSBDBiDCxOTYTuCCxCzjFSCGSqeekmGDhaFCxNuEyFtEiGxilOZc0eVb0Wcdki9lVm2kFangU+lf02ie0yTbUSNFBRzFCWth1GZPyZmEiGYTjCZRCeLEhKaPSWviVJoCRJ4FidyFSVeEB5gER+UXDqpg1BKChdaCRVvCRGSZD50FSZkChR+SzaGVjpUDhuPakJnEiFhER9YDRhkCRJvBw9xFSWJWDyrhlBuQy9pDRpuDRmXVzZ/GCqCTTdvQi9YDxxYDhtECRVzCBB1CAyZTj5UDhprEyNKCxdSDRmENCKjXkRaEB1iER92STKXTT1XDxx7TTVNCRVyOSiaWEFRDRpgEB6QaEGARTNjEB5ZDRpeChR0DBdlEiGBPjOUSjx+UTZODBlgDhpPDRmGOi2IMSSQSDl8PTJsNidrLSGNRzmDVTiAUjh2Qy6OQy+GLid2KyvU/TNqAAAA/XRSTlMABcSmvMK5sM4hHhPi6akJ0Q8lywy+kdSj3Rvs4Ku2rTMY57+Ul8eNUzw4vj9daCpD10/amsmyFa1MVu6MbCiwRqDkmJ9voadlullJ4GLBuDHM4rTTtHI2nC4txsWpm4Z3YIe2g3vPk3WyWpV/ip7WyW9qgqR0fZHHo2Dw0qtb33nd5Vdl6zVKUNBN7WVTQJA84tvFR0Scndy9uMHz6NDMybQnvdcz4Fo6LSvZYePa1qqG05h8WZrNb9zVuq+vpIdoUebg1KV+dXDq5rKtnJxNRd/XxqShVu/itrHYw7qNgtnLwaumnZR2Zsy10sG9kK6DZ86wiXfKycWTdHGo00yOMQAAEL9JREFUeNrs2dePTVEUBnC9995774Sr905EvWr03jvRRR8lInrvVxvRzcQYzKiTMASDiBYtJAhPPHiwvn327HXO2Wefi8Sb9Rf88uXb+6y7b4r/869nB80cMavELBWzk2aRmHWYBdZsoTl27ADNtWunT++i2b179x7MeprtNFtpttHspbl48eKbN2/eNt80oGXLsSNHzlyLOYXpNLhq1TEdGjSoUGG1mEM0VSpWrFSpV4kSXQ4fPnzw4MGjR49mzFSoZKGSdTPnzJknT/bsKVP+HfiYBT5NAzB5IYZXB9MAvFmAZ8487wJ3ABhcM7hQyZKZM0MMcEo/MLwMVlwlRsIg76Yh7x4/8CYJ5oQXXlEJ30pOuKInuJAA5wkPJq+WMIMdlfjNhAcNWitGgEkMcNiESwLsqsTVxzxX7XPBOa+S5/v37z9+/Pgk5nnyPOW5ruYt5qeV8NhBo15ivmIWLpweaVXi2yNrNmxQ4GXLDh45so8mE4FL6glnSWiIKVy4cNbjNWvWzJ8/f44cOTJkyE1Tp1y5cv1SpUqbNm3pvGk+TqTpQRMTCATSp09fvHjxotloUqcuQNOmTasJE3r3rl27dtmyZWjy0Zzp33batFnNCTwACY/q2bN168aNo2fMmEHg6ZEi4Vq16tfv2KxZjRpVFLhP3+rVm+TKlTEjwCJhdBheBsMLMLwAZ6Ahb5068Apw6bzPBHhuj7kxQQkuWrQoeWmEtxV5e8MrxMLbv21bgFEJgEcBXK1atZsCPBkJG8BNbOC6nLAGTqCE4RVimXAqGgFOIxM2gSF2gC9JMCrBCZO43U2Ap39o8DtgVQlOOF5VIgFeIZYJUyOSK5E3b5QV8dzXQUclOOEJ5BVi4U2aN09LWIJJTAlPjkwGd0wG93KDC/Gh44TjVcJZHWCIFZjEH+EFOMAJyw4D7OrwmXrzjAl36jQd4Cl/0GE9YQmGGF5XJcib5pk8dA+4EsIrxDJhrsQlF3isDdyu0xUhjuSEw1eCEw4pb9b7lpcr0Y8PXZp0PawOM1iK+dBJsQiYwZsVWCU8mMSImMDw2sBdrIS5EnW9wRB7gCFOKzucJsrqcJRWCQXmSvRXYL7WRnHCgwdPn0wzO0wlyEtgVMIOfsIJhwyVKI2E0QlUYkQQXmcl2kAsvRAn1WPw5s3qHmZw1StIeEoDvRLeCcPLYCUO8aFz3cN5CZymBwVMETsqAS+NK+F6Tev5HTosP5MBnm1O2HxLZBFeBjvuYVwSOHRCHGVdEzHqWhNgeydkwklNCVyPOzzAAxwJ8JQK/uBMAEOsvABzwvHmaw0JPyMvwGGvtVjyciW0hNuJ9RLgJef8PxyFtH0Y4ASV8HH90KlrjcR0TxA44rVHwgCrhK2AvT8cDI5Ewku8OtzXI2FErIMT+NAB7Dx0NA+sew1ev10itimJ53GH9UoAPGaKiPg3KuHucLwCZ3VVohxXQiT8uQfAUfzhoHF+OCBOHA2w6x7WK9EhEgnP9gGT2LEPM1iJ70svd9hKWFYiXRQqERFM765EG3slTo5WlZj27v37919a6pUYjJ9IAC+J64hKmMF6wvZP3QnzPpwG4GdIeESM3z5MAVtg8t4pP37gwGHDxo277JVwgw8AnwufsPuWeMKVCJn3YSSMiOfi1Jk7jIBlJe6ULz9egocPv8z7sOgwEu4A8GzTLQGw69Osg+O992EGPwP4ge8+DC8O3ZnydvAg16FDwhQxgc/5grkSnHARrsRx4z4swcUo4ogov304qbtViTP5AB7IYHuH5c/8SIBnG/dhGv1LB3CCTJjG/OGQYLooIkYEfT4csd2RMLzhE24gwHGmDmcUldD2YXURk7fUffM+TAPxA7omYsz7cGJ3kXAS/eZwgIdrhw4/QmcDvNi0D+8jcF2PDheJl15cE8Z9WHqLFRsRMeK1eR8+2R0JX8rnB+6kwOcAnt/Rex9GKUp6gkOccMi8D0MM8OuIiCjjPpw4FAnXKwOwX4cHy6eq2QDHuRNmsNc+jGtCeAE+bt6H4YU4+CBiRMB7H0bAAJ/JJ8B3zrwYT153h6tFR6vHwHMAzzeB4eV9mBN+wgm38NuH4SVwsOuIGNM+PBoJnyxjJdwWn+Z3719cphk+/Czmxo0ZU+khpRPASLiCAN/1BOeSYP2WKFKYvLLE9437MINjuj4w7MMPh3Yf2n10ogRf4n0Yz62NaIZMnQqwSrjWOYDXeIJx5gjM+zCDE1TCpU4Y92EFDgRiJhmutdihlDAFXAZeAuOpSr0PwztkiBd4cTP9lkDAhewJMxjXRGEJzhoy7sMKDHHAcx9O7Eze7okAiw6LhNX7sPAyWD5VCfBd9z4McCZO2F2JEIH51Bn3YYgBNu7DJwE+WdYJVu/DXImbnDBFTODFXpVgsNbhJyrhUt2M+zAnbNyHh3amSiQCLCpxRiasVSLaBq4vwHe9wO5KMLhgQykuRd864z7MYMM+fLszgWPLMtjU4Wh1DxP4HMArfMB6wjh1yQlnPeG3D4tKGN+HhwKcBK/8cNjeh8fOtIGv2BOOA3jNPTOY92FOOF5VolS87z7MldA7/LA9wLU54fLT9EqIDrcDWL0PC/BK7ZYwJ4xTx+BuPvswjRncKhbgk/IxUHbCsxLRcpeQ4DiAV4QHc8I4dRKMhc13H1ZgbR9+2B7gJIDhFRHf8Tp0N61tjV/gAV5zz/N92PtLR51QCdP+47sP0xgeA2MFmP/jEPvwOz3hGdXUtibBcUiYOmHusPvDUbDgcQmmOW7eh7kS2j5MAQNMjVCVAPiF8x5GwNFyH2ZwR4BX3POphJ5wSH43iNwizD4c9H4fvl0Z4CT5Pqz24ffuL90N+z4s34fjAF7p9T5sBD+RCSPj+/77cNCzEm3aC3CirATvw+/EtcaVaMz7MP9lIMAbw78PcyUKZrUSpmkRCrMPe74P364McCx5nQkPfLF5M4MRcDW9Es3uArxcBxv24SJWiQHmEpv34YDX+3B7AT5Z25UwRbzZ0WH+iWRPuNmaNQSuooONt4QoMQYRZwizD3u8Xt6uvB/ghzJh+0+k9/Z9+AaDHf+E3kXCGzSwtg8z+IlMGKfuVzvn9jJTFIbxO6KUCLmRCxfOEReIG3Ehp0wOkTNNicKNU3KIHL4Yk1O5JSRmRhmnxHyUz2mYwUcmp0bxfQg5lsOF511rzXr33u9eM7NvXHn/gl9Pz1rrWe9+18648rDbw0f6QWFsaqwwX/O921qLutNJ4EG7CTghdglHHiYT37KLbnTakYedCkNgKEwWDipMwHM9lvA1UrwfFhsI+IC/P+zOw91R13jVxSLnYQhMHs6HAn8EsQV2WGLQIABvP5CoMw8T8RO2xOhMxDwMgZWHm/VnpIAlXlhLwMIuS/QvAhgS15mHUUM66DysPBExDx+ZpIGpGegAXqqAs76+hP9bMyyx/0CyzjwM3iEpVjgWLQ+XwKsscbpZbmtoTLAlWoTCvc9uMN3LIgEnZrjysFT4GAErgeGJSHm43yRSGFmC4uU9ofDixR+NJVq4P6wVHrHO0wzcvx3AyfryMAEPIWBDnI6Sh0uTGJguofeCCqMDn/s4MpcVvTVqt3Jvrbj9wIFEomcdedgAp3QeJoVjkfIweLWHAUydn0fgdfTWxEcZ7q31V5ZI1MzDDHzMehieiJKH8yD2AlN3uGvN/nDrSgUMXl50wsPOPEzAg9kS8ESEPGxWnbaE7g9fqdUfPkXfmtWnULNLNKhtLVlvHgYwPGFOOlSs/jzMB8dkozB14OecEcBiXmJl61k7L7FdnXQJkYerAh/zAGci5eFmnyUMcRUPX9hE0wen+OAo7lAnXYQ8PAQ12DoCnoiWh/M+S/BnL9Ef5iGlU5yHES8VcJ8Iebg7AV+zwLFYOVoeLvWzCtsPi3fDF93ATRgDa/Tm4fG7VR5O1MjDEviBST8EnI6UhytXJOoPa4FpXuIueCUwupcXFviyxG51RSr2rZGHJfDgFExsFJ4QKQ/TrVkojG+3UuFR4G2U13xSGOfcjBn15GEGxrKzwJkIeZi6l3n2MM9L3BWLTjZS0PlRCjeoky6Z3LZtJiSukYcN8GD2cCwdsT88ZhED87zEG7/CY9GXwLYmm4HqxmGAUTTfCmQA49Ot28MksQWGxPXl4U+f8qXSonG86HzzEi98wE1NowJ5GL1Ao7A+mhm4UzsxLyEVfkASG+B0jTzc9tOlUunIJFX6ikTAiwCseCGxare+MAcHLAFemYfHDy8UCg0oCUwmdiis92HUNcML4Fg5PA9Pu3Tp1cOHs1esWLFmzZrZs2cTL5VcdLo/zApns84bB9IaKplkYHhCzEtIhbs9YEtAYpmHH56P79wZj0+ZMgXA4EVZhdnDvhGauZVFl81687BzfnjmzFknGNidhwFMxClridiEsszDrzAvEWdgEAtg8Prm1g5+rAD783Ct+eF2znkJBsZ8R8YqDIlD8nB8vVA4mIeXBMfAcgo4K+YlIs4PhwN3S1WAgVyWu8QrVlhagtOaf5RxmcjDQmHnzI8zD7PEDJwOycPnlcIoryX8i04AL3XMS1SfH27HlqimcMcUAWtPbC7LPHwJAhtgtgTKqTD1h3Ph8xLV5odRvOiqAmeshyFxSB5+KIC1JdwKQ+JcLotqQV1ANTY2nqI6i7p6tVCINi/BedhKrATWEss83GOKsES/4BVJzA/7P45vUiPl5hKKk253oSiBzT5cLQ+DV0usiQk4HTIvcb4CvMLpYTk/vNoJrLNEQzFkXqLmLmEGA9OjrcKb34o8DF4NjGLeI5yHeR92zUtIYMrDfcRUlZwflsBE/MADvDe46LBLSA/zJVRaAgq7LLGVgDmthQ3aufMwKwyJtSEADIl9ebgNeAWwUXiy6+CQlgCvUBjxsq9jftidh838cEdS2ADvLXvy8If4VBwcrn140WVVp1FXVL1+/VrvEjwv0bTqBmolqrW1VeFahRHgA91LkdbCLQHiTMUSqDR7GLwGWCo8Lt88VPSHX7wOfrptCklr4/VXJNUMDF5Ca+RhO1SVYoX3vq3k4Q87iTcAbPLwomY7Us7Ad/mlDHv4QiAP00lXbLABXgBXy8NMnDFHnSI2eZgGtEEMXrkPl+R7Oh7wgCVW++clZJbYbgP8THd/WCrM88Np4FaA013UYyT9jiPUEvmQ93RXeNEtzc2fn+V5iU03Jso8XFSWoAA/s3Z/2ALz/HAZHkYRL0wB4GfmLZJYdOD9JN7T9brCeXjuR52HmxbyLrFygEhr/e0ldJYAdudhngzMWIVRz/SLRSWx2NaONAff0+FtD29rbxZXrvnTmzzb2imRh/vYW/MJd3/YDdw57QFe/lbzAnhq0BIl8fAEuPbgeP3Ce2tusScdNQNFHk7YS2gd/WGU/z1dmYFRGhjEfOPQxKXge7p7w/ikW/sm2G5t8Zx0rSIP8yW0k7CES2GeDMzobU0Axy0weD8F3tPdw6sI2apiYPOI1Rx1Z4N5eIa9Nbv6w7e9ddFf9z311NZ7VV9QP378eH7HW9evf32n6+vXP3OudDXNwNw31Euq7xcQ4AfeoFX3+/fvz6gteNW83ZOHZxDvUdX5Ef3hut/mbzTFD8cDL8fNU/dD3pfjX8/Y/vDPc1R7qL7bJ5a/bqJ2qXoMYPly/HC70P6w5UVF/vsBA8un7tfNJwMJPBEnXaMBJuTjLmA5Pxwd+CRKKrzPBTzPAqMYGCfdAFb4+PGCA7i9rz/8v/5J/QXJyoOyRAtOzQAAAABJRU5ErkJggg=="},4409:function(t){t.exports="data:image/png;base64,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"},3619:function(t){t.exports="data:image/png;base64,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"},3845:function(t){t.exports="data:image/png;base64,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"},7482:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAUCAMAAADm3a4bAAAAS1BMVEVxGSQAAABxGSNyGiZxGSVxGiRyGiVxGSRxGiVxGSVzGyZyGyd5KDZxGSVyGSVxGSRxGiVxGSZxGSdyGid1KytnZ2dxGSZwGyV4Hi0yLvR/AAAAGXRSTlOzAJlCr6yff2JXNR4Gpo5ybV47JwwCZksR06uwqwAAAIVJREFUOMvV08sOwiAQRuE50FJo0dqb+v5PasKqwcYws/PffyE5E+RP19tpJ86OnUQ7fshkx5uwmB9GOGabHTICvG6GI6WDgslrvKsyP/0OBZeNGpyAM1ZF9xUmKPC7xouiMzXe25NPFdYkS3xjfNdkI1eYreHYYeUawzi7/sf/DYPPnPYBLJoDFT+vn9EAAAAASUVORK5CYII="},9117:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAUCAMAAADm3a4bAAABZVBMVEU8Il4AAAAfBEnokCzojyzojysqDkc5H1zhiy4eB0s3G1xDIERZL0LQgDBgO0fjiyjljix/SDt8RDsmDFCzbTYsE1OnYzgvFlUzF1aQVT11U1MYBTL0vismDzPYhC3LfDBxPz7TgTC9czSmZDyrZjeRVT0jDDH3xCnhiingiSjfiSnahirsmyvTgSugXzcbCDVJJjNPKELNfjCeXz8pEkaRV0KoZTkvGE40G1VcOFVBJl2LV0SGU0NFKWD4ySrZlDPRgCrFeCrOizTmoy3upCuaXC3nsi7MfDHkqzDGdy3qtEUeCjmrZzIiCEqJUDSXWjPFgDjIhDPDeDK4lFUjDz+qaDqph1btxFDAgjauajm+gDi8fjfWgy02HEx8WlYxGlFvQk7giCmEUEjtxlHkjCmQVDzahizkiymhYj/jiyrIezReOFfkiys9JGGqZD7wtEv/v2Djiyj5zCrtxVAYBTHru0nnpDlDbblIAAAAcXRSTlOzAO/4+Pjvt/bru/Hx8Az++PPz3drNyMfEign9/fj39vXx593PkP39/f37+vn39PT08e/Y1dPLyL++tFJQEv77+/v6+vr49/b29vHu7u3s7Ovp5OHh39vZ2NbV1c7MycTEv72tp5GRhHJuT0lCPyERCPWiGSIAAAHISURBVDjLhdKHjqMwEIBhe8YmsIH0bHpPtt72Xq733nvvvQzk7vnPBzoJB9D+Qgh5+CRkzFAAsIT2tgaDrb34GYBAJjAJ7z/w/hDR3MZ+PEZkJhowFYvvet6V188WiAYxwykwZptsXa5BOc6+8Ly3Pzn/cYeyr6LTMnTdC2wbl8FKxeBbvx/+4qqvbepHhikLzrhP2SGiDVY5+uUL9JH/6/h9ak9+c9kC+1zzgPGhaNsQpL2Qpc8B3qBFbaP8umdxyBnP9BGX14xJvLNE73z8vU+XdXw93T3purczCvPMEIWQQup49yZlv3E1fUN0Q8PHXNWJRxmusOpwe93Eyf/dWqK5D18+Pc7S6ec6nm1eenLAuY+DTGmAtumbq4vkd2o1vM1goOmDMHYwDVUWbqV1bZ5o/vzMTmixCml0IriEeShqeHdl3GjNjBub4cUi5GUpgkeiA1DRT8K9xnh89WV4qQJwEUcRXHdkASyltSbOTsWCAvbqEcxrmLMBitUUSyhVLQLYOVnjUcynMVeAIyrk5DSPYF8L2cmnjSRopPMdgcrGYl7roUDhpx5QolQX+mtS+M+9Gk/CvP6+5JgYFCB1+5/plEZ17fW/6t87xkTI0XIAAAAASUVORK5CYII="},5102:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAA4CAMAAACrIQowAAACQ1BMVEUAAABv//9o//9v/v909P90//9l+P9r+f9t/v9w/f+fNTVm8f9k//+GIiL/jY3/jIxd6On+j4//kJB3+Ptx7/93//9y///VQEBFubyvKSmlJib/jY3/jIz/jY2lJiamJib/jY3+jo5x9vhr/P9s+v//j49q//9m/v9s+v9t//9n+v+kKCidJiZt9f+bJSX1gYGdJSXZWVnB9faprrBIuLqLJSW0/P7hoKD8iIjwgIDhcnKlOjqGISG3KipVqqxDu73OsbOUMTHxlpf/jo6fJCRFur2rJye2KipIv8KIKipIv8P/jY2r/v+HHx9Jwsb/jY2RT0/OrrCFICCAj5H/jY2vKSlZ29+qKSlZ29/ZamqEHh6CRUeR//9quryMKSm1KyulJiaB//99en2qKCj/j4+HHx+0Kyvrnp7/jIxp9v+2KirqdXVu//9u+f++NDT/j4/em5vDLS3/kpL/mZmmJiazKSmpJye1KiqcIyOvKCijJSWZIyOgJSWGHx+EHh6sKCieJCRf6OpNzM5DurvAQ0O6PDySNzeFNjaXKSmw/v+o/v+X/v+O/v+I/v9X3N5U19pKxMZHwMFBtrjvfX3kaWnNWVmCVlfERUW+ODifNze7NjaHLCyHKCiMJCSg//+A/f9g6+1c4uVU19hT1NVR0dNMx8xYnqBcnZ2ij4+Xjo9iiInzhYaufX3be3vqc3PmcnKAa23UZmbZZGTUWlrJUVGRUVGCTE2NSEqzR0eYREWPQ0OlPDy0MDC4LS2jKiqnKSmXKCh0vrsPAAAAdHRSTlMAAgQWCwkHKB8SDQsG/sK5a2QlIxQPDQT99/Lw3dirmIJ9UEtEQD88NjMxLB4YGP39+/n59/b19PPw7e3q5+Pc2dnY0MzJycfDvLuwrayrqKebmJSRj4eEgX9+enZ2b2teXVxaUlFOTDw4MTAsLCcgFxEOChOVu4sAAAHuSURBVDjLYhiUoCg7TxyfvILh3nJbPPKCU8qBoBC3Ar7ppeXl7nhMkJ1RWloaT0hBGh4FMrMqSyuz8CuolOTCo0B6T2VlKB75fP36ekk9PAr4W+rr3fDIp0wpKyuTx6PAuRWoIBy3vOq6kpKysmTcChQ3lwCBNj4nVu0vkRLHE1OtVSUlcgx4FVRVJeBR4D+9pkoKXziHbKmpwWcDg3dLTQ2+YCq22NfQ4IJHger6hooGAzy+FNxUAQQ6eFI8QFMrqqsrcAcko+LUaiDQwSXNyCi4saOj4wDOcGBiS1/b1tbmyMrExIjVBG5mYfOt23cF6IqyMmHVL5Kj5rBi5YbgTA4WHiz62cQ41GOMOjsl7JRyOVmwWMLCzJ5oNq+7u6nZS0VYlBWLAg5Nn66e3t6+pRICWpxsjBh+FBNWdu3qmb+gcXFzhIYIpgIebg4Vjwl9jY0Ll0wS0GTGdAMjK7NGWHNT/6L+Jns1dk4mLL7kZFf2mzRxwkQTAS1dMYQBCDuA3lAyXr5sVaw6B9aQYgSMiUUkcM20aduS2JlZIU7AdKfTzvb29mhObhxxwVSwes6c2bM9mRgh8phAaHIt70xeXmDpgFtB7Y66Wl/cKUp6bq31zLq6VNx5d3edjeXcuiicCjKsTIOEIuO4GIYfAAAQJIJhx4UMLAAAAABJRU5ErkJggg=="},7328:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAsCAMAAABMt1hMAAABLFBMVEUAAABo//9o9/9x/P9+HR1v/f9k//9+HR1+Hh5l+P9+Hh5+HR1/HBx/Hh5r//9o+/9o/f+AMTF5R0dGvL1+HR2AHh6AICCCICBp//9o//9w//+AKytFvL5+HR1/HR1R0NNW2dtt//+CHR1r+/9n+f9q//9s/P9x//+AHx9t//9x8f97Pj6t2Nh9Li59JiZ2b3B5UlJ/ISGx/v9IvsB3YWNKwcV6Tk59MjKAHh6i/f+AHx9iv8FV2dt+Hh5+Hx9ZyMt5RUVo9vl2Z2qAHh5m+PyBHx9p+v+AMDCCISFk//9+HR2f//+J/v9U19pIwsN9ISFd5+lKxshghIV8Li59KCi2//+x/v+Y/v9//v9i7O9a4OFZ3+FY3N9S0NNRztBPzM5ZlpdclJaNkJF5UVFVL69gAAAASnRSTlMAAgQI7RYG6MIN+vf0XTUvHA3+/eOCOCcREAsG8cqsiYZEPDosKSUiGBQS/u3t7OXh2cjHx7SuqZiSjn94d3VwZ1ZSTEtBODAiF48MB+QAAAEzSURBVDjLpdPXdoJAEAZgdgUEC6CAEjQae0nvvfcBJZb0nrz/O4Qcr1iYK/f2O//uP3vOcFOeAgYZA2YROgeAXDSlfdpBCbsx51MSqZEESCA9SgAphKoAcWyyFCSxqXmANEJ+jxKe4hGS8PaHOLUT6GBcHKCN0x5e0cBTcIO2h2o0mT5dRlPep3w00VXPy1BKSUhIbHs0OrHsGA1LZyv7u1LXZJGwIjQ2fr6+9xXNJiQgYrdRWbh3PvWyKsQoE7rafXh0Xz+Kp80ZlpQ1x3266/XnFIu5UFDWHff5n9RgihO7arnfe3l7L1605CARuVXZ1AcD/UDtiIQpf1uvHQ+HyzXNZmemsqA1s9n5s8lLTE62FsfjpWvChY2KksdDPPL3yRGkDJCit4yHtGQiy2kWuOnOH4ehLPusgLcLAAAAAElFTkSuQmCC"},4599:function(t){t.exports="data:image/png;base64,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"},6866:function(t){t.exports="data:image/png;base64,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"},8789:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAuCAMAAABDPIrQAAAAe1BMVEWAJiZPFxcAAABeHBxSGBh2IyNXGhpqHx9zIiJ7JSVaGhp9JSVVGhpiHR1wISF0JiZVGBhmHh5tISFsISF5JCSBJyeAJydOFxd8JiaBJydRGhpPFxeBJydPFxd/Jyd/JydQGRmCJiZ+KCiAJydQFxdPGRmAJydRGxuAKythQurBAAAAKXRSTlOzyQDCyLfFvLi1xLTGwLkVx767u7WtimVUSDbAp56UYFI4KbGmh3YmDCL7DZMAAAFTSURBVEjH7dTXcoMwEIXhs1FDCNMM7j31/Z8wAwwYsGNWXOe7/2eXZUZ4u0vOp9LQK/vjOukFvXhbAhA0YX95Fm9Q0TRp/Rjf6tYRw+4hXtWx4sQf4zhBLSCO71F8RSPlxJdBnGy/0Mg48ecu6eLbCh1LPMddE2/f0SOIaV3FVwzExLV5w88BQymzFWWCDUYMr5UWZ6wwphaSEefACQc8sdRTbQigRMN7fIGXXB7+3Rp0vMdrPMM8veK0VlKuFg9tBg5RX9UZPbo0R9AtqMQ9jVmti3oLWhNVqQjAI0i7wSJioXilsxlJhVmMJKJ4XhtQxc6Lm3+79M1s+xj5r+1C0kU7OPK9ExHJWBNlIhLWM86plqq5P8j/Uu2ZZPdC+X9wSg3pHUekq8nRjENDVSXJALHWgWdbaAopJQNvgWmPVfi31BLwZoVo2tBhDqW0FEv8m/ALsOYOPsKIPKMAAAAASUVORK5CYII="},145:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAuCAMAAABDPIrQAAAAe1BMVEWAJiZ/JiZPFxcAAABSGBhQFxdzIiJnHh5eHBxZGhp6JSVrHx9VGRliHR1wISF2IyOAJydtIyNPFxdsISGAJydOFxdRGhpQGBhPFxd+JyeBKChQGRmBJyeBJydpISFwJSVQFxdPGRmAJydtISGBKChQFxeCJiZ9KCiAKysjMcaCAAAAKXRSTlOzs8kAyMm4vsLFtbvGv7q2qhTBu4plNsielFZSSz4mGKaHdmVfWTUtDMSZ6CEAAAHySURBVEjHlZSJkoMgEESZWQ7BqMnm2Ps+//8LFwYWEwTRLmPsmrx0xrLDrkbtPu+2wGDAoq5vj7sz4Ax+tCQDYLLIEv+Qg+8tB8xK4ryOU/jHYhQMPVZ0msAHApk99jX4NYV3xNGrxZqeE/jbxQLdsTr8cAG/PL27WB8+iBr8dtpF+PngUuPO0GFdtycPP3omkO7McYGODn4KiD/cibau6+uK/W4JCTx4Wi+Br1/YvQcDxYAuJC7RBzv4z//HBr7Buvgd21KeFdHxbWibTQVWW8oixTsWvek7LYqsMP6zFBjw1EvV8Hxw2BHGYMj5gWO6w0YCC4K4b9YPyJMdOrh4OCBQOa+wIU87UOz4QNEpghmvcT/6oVXhing6x8CpNyggPx+/n65zvkWdn3tB3DHnNbb5eawUvUPOS+RQnl/0OfWm4diU5uMydKSe2imG7Nxp2ufRh3J2+TmDpM+J7z1cmid9TrwhWJbmSZ8T31n0pi3My30GZZkehTRQ6PtMn7WN7Diqct/LfYbQW1Pq+2yftaeFys9n+yw5Bg2Z+XyfzQb/aTmdV/qs6F+LuwebdlzV5w1qFDYUDPl1feYWRR39qj4bx2IT/ao+t+huWBf9mj7vhUUF9rG/y/ssNYZfnfa73mdwILFjf5f3WVn1TU9+tu9/fiQTKRcYvhkAAAAASUVORK5CYII="},2837:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAuCAMAAABDPIrQAAAAeFBMVEWAJiZPFxcAAABTGBh9JSVWGRlZGhpxISFpHx91IyN6JCSAKChiHR1lHh5tICBfHByAJyd3JSVaGhpPFxeAJydPFxdPGBh+JSV+KSmBJyeBKChQGRmAJyeBJyeAKChcHBx/JydPGRmAJyd+JyeAJydSGxuAKChRGxu8430bAAAAKHRSTlOzyQDHtMbEuby3tbPAvrvBihHDwK6kZzYWp1lSUUstwpWHdmFCOCYmPDJhsgAAAUBJREFUSMe109duwzAMheHDaivyyt7d7fu/YWUobRK7qAkC/e8M4QNogcLDte16taA/W6zW3Q24waclMVocfsN7QBGn9RifAcyJ1fsItwASD6+GuEPOE6/PAd702DHx4Q5v3156rC0PP2+6H/zRzlCKhqc12nPBp0KLVhzrkdv3eIPbAtcCxwd0O9zluBbLLY4YVE/YGt+9osWwGIJzrvbeV1VKDdHcWmPUyOIJO0xEpHFJ6xhxbYmpIimIC2Tk2NFcjmtq5DhRJceGnNhqIi3/YxKPHSk3Nfds+H2352l8ztuQnHhula2KMqsV2Upo4ckIoXdaCTekoT4VhFdVMhKe6JIVvWM51qoMrSRj12Tku5XIZhxluMlY/JSrjBUFGfZjzH/Plsx17PH5xNR9CYJ0WWyrIVxNoxqRRf0YHP67L8sADKl2Gh6MAAAAAElFTkSuQmCC"},3740:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAuCAMAAABDPIrQAAAA3lBMVEVHMIorHVUAAAAgBlDzzFQcBEfxyVEtHlg7J3NCLIFELIQwIF0xImAzImQ9KXkuH1o1JGg4JW1GL4eri0///bpAK32AamrnwVIoEUhSN1ItE1EhCVQqF1VBKYLfuVLvx1Hxy1Skg05aPktONEuohlReQVDRrU8dBUsjEE6zkVkzGWyxjld+YlOMaWBqalX786n44YBoTVvVr1TDoFLXx5YrGlP9+LL88J7XyY/33Xj28bLGr3nx5KDqxlrpw1ZuUGro3Z/VsFXIo1bSv43Lt4QtF2IxGWqghH6WeHL//74ERgS4AAAASXRSTlOzyQDv+PP5yLy2tsbEw7nHwb+00f64DPjz8fDrz7v5+fj39fX08vHw28/Ny1NQDP378+/p3M3+/Pr6+fj39vb08e/m29fRzVtV19r/bQAAAd1JREFUSMeM0edywjAQBOAzd5axAxmDjcH03gklkN673v+FooDGgWgisb/9zZ61kNrLbLIqMk2K/WC6//0ejkZNImZIIzhTsbAvRN24ZGtS6rQYOxdawSOq9xBtQ9p1Fqh41qQeVt6rlibV4cBus8ZUwRPqYsUDx9JmM7BbLFDwM8U4BshZ+gztDusr+J7KWANwDbhql1jxAH+ub8JLQgSRjEHb9m5viaM15+H8WuK0ESd7Cxw98YvbuIy4w3nHgJO9I4Ff+XwpoMTGJ0v2plEKvni4xMq4BkncnCzX7t2j5gze+NXPvodJm55tg9ilCdzxR7GvEtfX1jsfGNMKQr7dV01eV39awzI9AOeICjTVZwEQiSD8D2ue3vEkXiw02BMHur6C0yAxkQZnrez270/+HH0MTluOHLHg/9ICHIM9RxwoI+sd3wU4CmesDMjI+pw8xIi973bqWIeBGIQBKN6aQOASqf//qz018tTh5Mz1/oQEMheq208eMZvZ7Ajn95zrDO/lvlW8p8UJ7o7otvbgMA1PAJUOvIbPpWG+P+eeFcwSpel4AEUtYPaA5XcZFxy3dgCh4kQBqGbp0UTcCoFiCRWck8taMk4w02Tcr8H3pOM7rXmNtBPM/PET/gCoBCeBK+1F5wAAAABJRU5ErkJggg=="}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var r=e[n]={id:n,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.m=t,i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.b=document.baseURI||self.location.href;var n={};return function(){var t=n;Object.defineProperty(t,"__esModule",{value:!0});var e=i(7547),a=i(7255),r=i(8593),o=function(){function t(t){this.config=Object.assign({container:document.getElementById("player"),duration:4.5,danmakuNumber:500,danmakuArea:100,fontSize:1,offsetTop:0,offsetBottom:0,opacity:1,speedPlus:1,type:"div",visible:!0,isRecycling:!0,specialType:0,specialTypeExtra:"",danmakuInserting:function(){},curTime:function(){return window.performance.now()}},t),this.config._extra=Object.assign({},r.jsonParse(this.config.specialTypeExtra)),this.container=this.config.container,this.setType()}return t.prototype.setType=function(t,e){t=t||this.config.type;var i=this.config.container,n={div:"div"};if(i.tagName.toLowerCase()!==n[t]){var a=i.getAttribute("class"),r=i.getAttribute("id"),o=i.parentNode,s=i.offsetWidth,l=i.offsetHeight;o.removeChild(i),this.manager&&this.manager.destroy();var A=e||document.createElement(n[t]);o.appendChild(A),A.setAttribute("class",a),A.width=s,A.height=l,r&&A.setAttribute("id",r),this.config.container=A,this.manager=this.createManager(t)}else this.manager||(this.manager=this.createManager(t))},t.prototype.createManager=function(t){var i;switch(t){case"div":i=new e.default(this);break;default:i=new e.default(this)}return i},t.prototype.play=function(){this.isStarted=!0,this.nextFrame()},t.prototype.add=function(t){if(this.visible()&&this.isStarted){var e=this.typeParse(t);e&&this.manager&&this.manager.start(e)}},t.prototype.searchAreaDanmaku=function(t,e){if(!this.manager)return[];if([a.SpecialType.Metror,a.SpecialType.MidAutumn,a.SpecialType.Battle].includes(this.config.specialType))return[];t=t||0,e=e||0;for(var i=[],n=this.manager.visualArray.length-1;n>=0;n--){var r=this.manager.visualArray[n];r.textData&&r.textData.mode===a.EDanmakuMode.ReverseRoll?t>=r.x-r._x-r.width-5&&t<=r.x-r._x+5&&e>=r._y-5&&e-r.height<=r._y+5&&i.push(r):t>=r._x-5&&t<=r._x+r.width+5&&e>=r._y-5&&e-r.height<=r._y+5&&i.push(r)}return i},t.prototype.option=function(t,e){if(t&&void 0!==e)switch(t){case"container":if(1===arguments.length)return this.config.container;if(!e||"object"!=typeof e||1!==e.nodeType||"string"!=typeof e.nodeName)return;return void this.setType(this.config.type,e);case"type":if(1===arguments.length)return this.config.type;this.setType(e),this.clear(),this.play();break;case"speedplus":if(1===arguments.length)return this.config.speedPlus;this.manager&&(this.manager.config.speedPlus=e);break;case"fontsize":if(1===arguments.length)return this.config.fontSize;this.manager&&(this.manager.config.fontSize=e);break;case"danmakunumber":if(1===arguments.length)return this.config.danmakuNumber;this.manager&&(this.manager.config.danmakuNumber=e);break;case"danmakuArea":if(1===arguments.length)return this.config.danmakuArea;if(this.manager){var i=+e;(i||0===i)&&(i=i<0?0:i>100?100:i,this.manager.config.danmakuArea=i)}break;case"duration":if(1===arguments.length)return this.config.duration;this.manager&&(this.manager.config.duration=e);break;case"visible":if(1===arguments.length)return this.config.visible;this.manager&&(this.manager.config.visible=e);break;case"opacity":if(1===arguments.length)return this.config.opacity;this.manager&&(this.manager.config.opacity=e);break;case"specialType":if(1===arguments.length)return this.config.specialType;this.config.specialType!==e&&(this.config.specialType=e,this.manager.destroy());break;case"specialTypeExtra":if(1===arguments.length)return this.config.specialTypeExtra;this.manager&&(this.manager.config.specialTypeExtra=e,this.manager.config._extra=Object.assign(this.manager.config._extra,r.jsonParse(e)));break;default:this.manager&&this.manager.option(t,e)}},t.prototype.nextFrame=function(){var t=this;if(this.isStarted){if(this.visible()&&this.manager){var e=this.config.curTime();this.manager.render(e)}window.requestAnimationFrame(function(){t.nextFrame()})}},t.prototype.visible=function(t){return 0===arguments.length?this.config.visible:(this.config.visible!==t&&(this.config.visible=t,!this.config.visible&&this.manager&&this.manager.clearVisualList()),t)},t.prototype.resize=function(){this.manager&&this.manager.resize()},t.prototype.clear=function(){this.manager.clearVisualList()},t.prototype.destroy=function(){this.isStarted=!1,this.manager.destroy()},t.prototype.typeParse=function(t){var e,i,n=t.dmType===a.DMType.Emoji;switch(this.config.specialType){case a.SpecialType.Metror:if(n)return;t.mode=a.EDanmakuMode.Meteor;break;case a.SpecialType.MidAutumn:if(n)return;t.mode=a.EDanmakuMode.MidAutumn;break;case a.SpecialType.Battle:if(n)return;if((null!==(i=null===(e=t.modeInfo)||void 0===e?void 0:e.mode)&&void 0!==i?i:0)!==a.EDanmakuSpecialMode.Battle)return;t.mode=a.EDanmakuMode.Battle}return Object.assign({},t,{isMaster:!!t.border,border:t.border||!1,borderColor:t.borderColor||6750207})},t}();t.default=o}(),n}()});
},{}],"QxLc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=10;function e(t,e){for(var i=0,n=0,r=0,o=0,u=0,f=0,l=0,h="",v=0,m=0,c=0,b=0,g=0,p=0,k=new DataView(t.buffer,0,e);i<e;){var d=s(t,i,e);switch(i=d.bufPos,d.value){case 1:i=(d=s(t,i,e)).bufPos;break;case 2:i=(d=a(k,i,e)).bufPos,n=d.value,i=(d=a(k,i,e)).bufPos,r=d.value,i=(d=a(k,i,e)).bufPos,o=d.value,i=(d=a(k,i,e)).bufPos,u=d.value,i=(d=a(k,i,e)).bufPos,f=d.value,i=(d=a(k,i,e)).bufPos,l=d.value;break;case 3:h+="z ";break;case 4:i=(d=s(t,i,e)).bufPos,v=d.value,i=(d=s(t,i,e)).bufPos,m=d.value,h+="M"+v.toString()+" "+m.toString()+" ";break;case 5:i=(d=s(t,i,e)).bufPos,v=d.value,i=(d=s(t,i,e)).bufPos,m=d.value,h+="m"+v.toString()+" "+m.toString()+" ";break;case 6:i=(d=s(t,i,e)).bufPos,v=d.value,i=(d=s(t,i,e)).bufPos,m=d.value,h+="L"+v.toString()+" "+m.toString()+" ";break;case 7:i=(d=s(t,i,e)).bufPos,v=d.value,i=(d=s(t,i,e)).bufPos,m=d.value,h+="l"+v.toString()+" "+m.toString()+" ";break;case 8:i=(d=s(t,i,e)).bufPos,v=d.value,i=(d=s(t,i,e)).bufPos,m=d.value,i=(d=s(t,i,e)).bufPos,c=d.value,i=(d=s(t,i,e)).bufPos,b=d.value,i=(d=s(t,i,e)).bufPos,g=d.value,i=(d=s(t,i,e)).bufPos,p=d.value,h+="C"+v.toString()+" "+m.toString()+" "+c.toString()+" "+b.toString()+" "+g.toString()+" "+p.toString()+" ";break;case 9:i=(d=s(t,i,e)).bufPos,v=d.value,i=(d=s(t,i,e)).bufPos,m=d.value,i=(d=s(t,i,e)).bufPos,c=d.value,i=(d=s(t,i,e)).bufPos,b=d.value,i=(d=s(t,i,e)).bufPos,g=d.value,i=(d=s(t,i,e)).bufPos,p=d.value,h+="c"+v.toString()+" "+m.toString()+" "+c.toString()+" "+b.toString()+" "+g.toString()+" "+p.toString()+" "}}return 0===h.length?"":'<?xml version="1.0" standalone="no"?>\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n      width="'+n+'px" height="'+r+'px" viewBox="0 0 '+n+" "+r+'"\n      preserveAspectRatio="xMidYMid meet">\n      <g transform="translate('+o+", "+u+") scale("+f+", "+l+')"\n      fill="#000000" stroke="none" shape-rendering="optimizeSpeed">\n      <path d="'+h+'"></path>\n      </g>\n  </svg>'}function s(e,s,a){for(var n=0,r=0;s<a&&n<t;){var o=e[s],u=127&o;if(r+=u<<=7*n,n++,s++,0==(128&o))return{bufPos:s,value:i(r)}}return{bufPos:-1,value:-1}}function i(t){return t>>1^1+~(1&t)}function a(t,e,s){return e+4>s?{bufPos:-1,value:-1}:{bufPos:e+4,value:t.getFloat32(e)}}var n=function(){function t(){this.currentTime=0,this.currentMask="",this.hasVideoInfo=!1,this.videoInfo={direction:"",padding:0},this._masks=[]}return t.prototype.clear=function(){this._masks.splice(0,this._masks.length)},t.prototype.input=function(t,s){var i=e(s,s.length);""!==i&&this._addMask({timestamp:t,mask:i})},t.prototype.output=function(t){if(0===this._masks.length)return null;for(var e=0,s=t-this._masks[0].timestamp,i=Math.abs(s),a=1;a<this._masks.length;++a){var n=Math.abs(t-this._masks[a].timestamp),r=Math.abs(n);if(!(r<=i))break;e=a,s=n,i=r}var o=this._masks[e];return this._masks.splice(0,e),o},t.prototype._addMask=function(t){if(0===this._masks.length)this._masks.push(t);else{for(var e=this._masks.length-1;e>=0;--e){if(this._masks[e].timestamp<t.timestamp){e+=1;break}}this._masks.splice(e,0,t),e>0&&this._masks[e].timestamp<this._masks[e-1].timestamp&&this._masks.splice(0,e)}},t.equalsUuid=function(t,e){if(16!==t.length||16!==e.length)return!1;for(var s=0;s<16;++s)if(t[s]!==e[s])return!1;return!0},t.prototype.onUpdateMask=function(t,e){var s=t.currentTime;this.getVideoInfo(t);var i=this.output(s);if(null!=this.currentTime&&this.currentTime-s>1&&e.style.removeProperty("-webkit-mask-image"),null==i||null==i.mask||i.mask===this.currentMask)return this.currentMask="",void(this.currentTime=0);var a=i.mask;if(null===a||a===this.currentMask)return this.currentMask="",void(this.currentTime=0);if(i.timestamp-s<=1&&this.hasVideoInfo){var n="data:image/svg+xml;base64,"+btoa(a),r="linear-gradient(\n        to "+this.videoInfo.direction+",\n        rgb(0,0,0,1),\n        rgb(0,0,0,1) "+this.videoInfo.padding+"%,\n        rgb(0,0,0,0) "+this.videoInfo.padding+"%,\n        rgba(0,0,0,0) "+(100-this.videoInfo.padding)+"%,\n        rgba(0,0,0,1) "+(100-this.videoInfo.padding)+"%,\n        rgba(0,0,0,1)),\n        url("+n+")";e.style.cssText+="\n        -webkit-mask-image: "+r+";\n        -webkit-mask-size: contain;\n        mask-size: contain;\n        -webkit-mask-repeat: no-repeat;\n        mask-repeat: no-repeat;\n        -webkit-mask-position: center center;\n        mask-position: center center;\n      ",this.currentMask=a,this.currentTime=i.timestamp}},t.prototype.destroy=function(){this._masks=[]},t.prototype.getVideoInfo=function(t){var e,s,i=t.videoHeight,a=t.videoWidth,n=t.clientHeight,r=t.clientWidth,o=t.clientHeight,u=t.clientWidth;if(0===i||0===a)return!1;a/i>r/n?(s="bottom",e=Math.ceil((n-i*r/a)/(2*o)*100*100)/100):(s="right",e=Math.ceil((r-a*n/i)/(2*u)*100*100)/100),this.hasVideoInfo=!0,this.videoInfo={direction:s,padding:e}},t}();exports.default=n;
},{}],"uyEh":[function(require,module,exports) {
"use strict";var e,t,n,i,o,a,r,s,l,u,c,d,h,f,m=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}l((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},v=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},w=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},k=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DmType=exports.DanmakuMode=void 0,require("requestidlecallback-polyfill");var y,b,g=k(require("@bilibili-live/live-danmaku-engine-v2")),M=k(require("./mask-decoder")),x=require("@bilibili-live/web-player-common"),E=x.isWebPSupported(),T=150;!function(e){e[e.Normal=0]="Normal",e[e.Meteor=1]="Meteor",e[e.Moon=2]="Moon",e[e.Pk=3]="Pk"}(y=exports.DanmakuMode||(exports.DanmakuMode={})),function(e){e[e.Text=0]="Text",e[e.Emoji=1]="Emoji",e[e.Voice=2]="Voice"}(b=exports.DmType||(exports.DmType={}));var W="web-player-danmaku",P="danmaku-item-container",j=function(){function k(k,y){var g=this;this.container=k,e.set(this,void 0),t.set(this,void 0),n.set(this,[]),i.set(this,!1),o.set(this,void 0),a.set(this,void 0),r.set(this,void 0),s.set(this,void 0),l.set(this,null),u.set(this,[]),c.set(this,void 0),d.set(this,1),h.set(this,void 0),f.set(this,0),this.parseEmoticon=function(e,t){return m(g,void 0,Promise,function(){var n,i;return p(this,function(o){switch(o.label){case 0:return!1,e.dmType!==b.Emoji?[3,2]:(n=new Image,i=t.url,n.style.width="100%",n.style.height="100%",n.src=E?i+"@56h.webp":i,[4,new Promise(function(e){n.onerror=function(){e(!0)},n.onload=function(){e(!1)}})]);case 1:return o.sent()?[2,""]:[2,n.outerHTML];case 2:return[2,""];case 3:return[2]}})})},this.getEmoticonInfo=function(e){return m(g,void 0,Promise,function(){var t,n,i,o;return p(this,function(a){switch(a.label){case 0:return t=null!==(o=e.emoticonOptions)&&void 0!==o?o:{width:1,height:1,url:"",emoji:""},[4,this.parseEmoticon(e,t)];case 1:return n=a.sent(),i=e.dmType===b.Emoji?Number((t.width/t.height).toFixed(1)):1,[2,{html:n,emojiRatio:i}]}})})},this.add=function(e,i){void 0===i&&(i=!1),null!=w(g,t)&&(i?e.dmType===b.Emoji?g.getEmoticonInfo(e).then(function(n){w(g,t).add(Object.assign({},e,{html:n.html,emojiRatio:n.emojiRatio}))}).finally(function(){}):w(g,t).add(e):(w(g,n).length>w(g,t).config.danmakuNumber&&w(g,n).shift(),w(g,n).push(e),null==w(g,l)&&g.render()))},this.onPlay=function(e){v(g,o,e)},this.onPause=function(e){v(g,a,e)},this.offPlay=function(){v(g,o,void 0)},this.offPause=function(){v(g,a,void 0)},this.onSelect=function(e){g.offSelect(),v(g,r,e),v(g,s,function(n){var i=g.container.getBoundingClientRect(),o=n.clientX-i.left,a=n.clientY-i.top,r=w(g,t).searchAreaDanmaku(o,a);r.length>0&&(e(r.map(function(e){return e.textData})),n.preventDefault())}),g.container.addEventListener("contextmenu",w(g,s),!0)},this.offSelect=function(){var e;null!=w(g,s)&&(null===(e=g.container)||void 0===e||e.removeEventListener("contextmenu",w(g,s),!0),v(g,s,void 0))},this.play=function(){var e;w(g,i)||(v(g,i,!0),null===(e=w(g,t))||void 0===e||e.play(),null!=w(g,o)&&w(g,o).call(g))},this.pause=function(){var e;w(g,i)&&(v(g,i,!1),null===(e=w(g,t))||void 0===e||e.pause(),null!=w(g,a)&&w(g,a).call(g))},this.setRenderType=function(n){var i;null===(i=w(g,t))||void 0===i||i.setType(n),null!=w(g,e)&&g.setBackGroundImage(w(g,e)),null!=w(g,s)&&(g.offSelect(),null!=w(g,r)&&g.onSelect(w(g,r)))},this.resize=function(){var e,n=w(g,t).config.container;return null!=n&&(n.style.width=w(g,c).clientWidth+"px",n.style.height=w(g,c).clientHeight+"px",null===(e=w(g,t))||void 0===e||e.resize()),g},this.show=function(){var e;null===(e=w(g,t))||void 0===e||e.visible(!0)},this.hide=function(){var e;null===(e=w(g,t))||void 0===e||e.visible(!1)},this.setBackGroundImage=function(t){if(null==w(g,c))throw new Error("danmakuWrapNode must be HTMLElement");t!==w(g,e)&&v(g,e,t),w(g,c).style.backgroundImage="url("+t+")",w(g,c).style.backgroundRepeat="no-repeat",w(g,c).style.backgroundPosition="center",w(g,c).style.backgroundSize="contain"},this.set=function(e){var n=w(g,t);if(null!=n)for(var i in e){var o=e[i];switch(i){case"type":g.setRenderType(o);break;case"backgroundImage":g.setBackGroundImage(o);break;case"maxCount":i="danmakuNumber",n.option(i,o);break;case"danmakuArea":n.option("danmakuNumber",Math.round(w(g,d)*T*o/100)),n.option(i,o);break;case"density":i="danmakuNumber",v(g,d,o),n.option(i,Math.round(o*T*n.config.danmakuArea/100));break;default:n.option(i,o)}}},this.clear=function(){var e;null===(e=w(g,t))||void 0===e||e.clear()},this.destroy=function(){var e;w(g,c).remove(),null===(e=w(g,t))||void 0===e||e.destroy(),v(g,t,null),w(g,h).destroy(),null!=w(g,l)&&(window.cancelIdleCallback(w(g,l)),v(g,l,null)),v(g,n,[]),w(g,u).forEach(function(e){return window.clearTimeout(e)}),window.removeEventListener("resize",g.resize),cancelAnimationFrame(w(g,f))},this.addMaskSVG=function(e){w(g,h).input(e[1],e[3])},this.clearMask=function(){w(g,h)._masks=[]},this.addMaskToWrap=function(e){var t=w(g,c),n=w(g,h);cancelAnimationFrame(w(g,f));v(g,f,window.requestAnimationFrame(function i(o){o>performance.now()-5&&n.onUpdateMask(e,t),v(g,f,window.requestAnimationFrame(i))}))},v(this,e,null==y?void 0:y.backgroundImage),v(this,c,document.createElement("div")),w(this,c).classList.add(W),w(this,c).style.cssText="\n        width: 100%;\n        height: 100%;\n        position: relative;\n        top: 0;\n        left: 0;\n        z-index: 8;\n        pointer-events: none;\n      ",k.appendChild(w(this,c)),this.initialize(),v(this,h,new M.default)}return k.prototype.render=function(){var e=this;v(this,l,window.requestIdleCallback(function(i){if(null!=i.timeRemaining)for(var o=function(){var i=w(e,n).shift(),o=100*w(e,u).length,a=setTimeout(function(){try{(null==i?void 0:i.dmType)===b.Emoji?e.getEmoticonInfo(i).then(function(n){w(e,t).add(Object.assign({},i,{html:n.html,emojiRatio:n.emojiRatio}))}).finally(function(){}):w(e,t).add(i)}catch(n){}w(e,u).shift()},o);w(e,u).push(a)};(i.timeRemaining()>0||i.didTimeout)&&w(e,n).length>0&&w(e,u).length<10;)o();if(w(e,n).length>0)return e.render();null!=w(e,l)&&(window.cancelIdleCallback(w(e,l)),v(e,l,null))},{timeout:1e3}))},k.prototype.initialize=function(){var n=document.createElement("div");n.classList.add(P);var i=document.createElement("style");i.innerHTML="\n        ."+W+" ."+P+"{\n          width: "+w(this,c).clientWidth+"px;\n          height: "+w(this,c).clientHeight+"px;\n          position: relative;\n          overflow: hidden;\n        }",document.getElementsByTagName("HEAD")[0].appendChild(i),w(this,c).appendChild(n),v(this,t,new g.default({container:n,isLive:!0,type:"div",opacity:1,fontSize:1,duration:6,danmakuArea:100,danmakuNumber:T,isRecycling:!0})),null!=w(this,e)&&this.setBackGroundImage(w(this,e)),window.addEventListener("resize",this.resize)},k.prototype.closeMask=function(e){cancelAnimationFrame(w(this,f)),e||w(this,c).style.removeProperty("-webkit-mask-image")},k}();exports.default=j,e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,r=new WeakMap,s=new WeakMap,l=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;
},{"requestidlecallback-polyfill":"jM0N","@bilibili-live/live-danmaku-engine-v2":"aGDI","./mask-decoder":"QxLc","@bilibili-live/web-player-common":"KGHo"}],"Rr2x":[function(require,module,exports) {
"use strict";var o,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.IPlatform=exports.RoomStatus=void 0,function(o){o[o.Preparing=0]="Preparing",o[o.Live=1]="Live",o[o.Round=2]="Round"}(o=exports.RoomStatus||(exports.RoomStatus={})),function(o){o[o.Web=1]="Web",o[o.Android=2]="Android",o[o.Ios=3]="Ios"}(t=exports.IPlatform||(exports.IPlatform={}));
},{}],"E90K":[function(require,module,exports) {
"use strict";function e(e,n,r){var t=null!=r?r:"直播时空次元异常，正在努力恢复中",l=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");l.className="web-player-error-panel",a.className="web-player-error-code",o.className="web-player-error-image",s.className="web-player-error-tip";i.style.cssText="\n    display: block;\n    max-width: 80%;\n    display: inline-block;\n    font-size: 16px;\n    color: #eee;\n    line-height: 24px;\n    padding: 10px;\n    cursor: default;\n  ",o.style.cssText="\n    display: block;\n    width: 300px;\n    height: 225px;\n    background: url(//s1.hdslb.com/bfs/static/player/live/html5/images/error.png) no-repeat 0 0;\n    background-size: contain;\n  ",l.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    z-index: 18;\n    background: #000;\n    cursor: default;\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n  ";var c="\n    font-size: 24px;\n    margin-top: 12px;\n    color: #999999;\n    height: 33px;\n    line-height: 33px;\n    text-align: center;\n  ";return a.style.cssText=c,s.style.cssText=c,i.innerHTML='直播已断开\n    <div style="\n    display: block;\n    font-size: 13px;\n    color: #fff;\n  " class="web-player-error-operation">\n      ( 请尝试\n        <a style="\n    color: #fd9ccc;\n    display: inline-block;\n    position: relative;\n    margin: 0 3px;\n  " class="web-player-error-reload" href="javascript:void(0);">刷新</a>\n      )\n    </div>\n  ',l.appendChild(i),l.appendChild(o),s.innerHTML=t,a.innerText="status: "+n,i.style.display="none",l.appendChild(a),l.appendChild(s),e.appendChild(l),function(){l.remove()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createErrorPanel=void 0,exports.createErrorPanel=e;
},{}],"YQ89":[function(require,module,exports) {
"use strict";var e,r,o=this&&this.__awaiter||function(e,r,o,t){return new(o||(o=Promise))(function(n,i){function a(e){try{u(t.next(e))}catch(r){i(r)}}function l(e){try{u(t.throw(e))}catch(r){i(r)}}function u(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o(function(e){e(r)})).then(a,l)}u((t=t.apply(e,r||[])).next())})},t=this&&this.__generator||function(e,r){var o,t,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,t&&(n=2&i[0]?t.return:i[0]?t.throw||((n=t.return)&&n.call(t),0):t.next)&&!(n=n.call(t,i[1])).done)return n;switch(t=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=r.call(e,a)}catch(l){i=[6,l],t=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.reportLog=exports.getUserId=exports.updateDanmakuSetting=exports.createContextmenuHandler=exports.ajaxWatcher=exports.loadRoomInfo=exports.initPlayer=exports.commonLogInfo=exports.downloadFile=exports.isSupported=exports.PlayerEnv=exports.ENV=void 0;var i,a=require("@bilibili-live/web-player-common"),l=n(require("@bilibili-live/web-player-track")),u=require("./ui-components/error-panel");function c(){var e;return null!=Object.entries&&null!=Element.prototype.prepend&&("fetch"in window&&"ReadableStream"in window&&Boolean(null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))||a.ua.isIOS())}function s(e,r){try{var o=document.createElement("a");o.download=r,o.style.display="none";var t=new Blob([e]);o.href=window.URL.createObjectURL(t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(n){console.log("Failed to download file ",n)}}function p(e){a.logger.info(e+" version: "+exports.ENV.VERSION+", current date: "+(new Date).toLocaleDateString()+", build time: "+exports.ENV.BUILD_TIME),a.logger.info("user agent: "+navigator.userAgent),setTimeout(function(){a.ajax("/xlive/web-room/v1/index/getIpInfo").then(function(e){a.logger.info("client ip info: "+JSON.stringify(e))}).catch(a.logger.error)},100)}function d(e,r){if(!c())throw l.default.error(l.default.ErrorCode.UnsupportedPlayer,"UnsupportedPlayer"),a.logger.error("Unsupported Player"),new Error("Unsupported Player");var o=x();a.logger.info("userId: "+o);var t=a.uuid();return l.default.initStaticInfo({uvid:t,uid:o,version:r+exports.ENV.VERSION,roomId:e}),a.userSetting.init(o),{userId:o,uvid:t}}function f(e,r){return o(this,void 0,Promise,function(){return t(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o,t){a.ajax("//api.live.bilibili.com/xlive/web-room/v2/index/getRoomPlayInfo?room_id="+e+"&protocol=0,1&format=0,1,2&codec=0,1&qn=0&platform=web&ptype=8",{handleRes:function(e){if(e.code===a.ApiErrorCode.AreaBlock)throw u.createErrorPanel(r,a.ApiErrorCode.AreaBlock,"Sorry, bilibili is currently not available in your country according to copyright restrictions<br/>非常抱歉，根据版权方要求，您所在的地区无法观看本直播"),new Error("RoomAreaBlock");o(e.data)}}).catch(t)})];case 1:return[2,o.sent()]}})})}function v(e,r){var o=r.duration,t=void 0===o?0:o,n=r.errMsg,i=void 0===n?"ApiError":n,a=r.apiUrl,u=void 0===a?"":a;"apiBizErr"===e?l.default.error(l.default.ErrorCode.ApiBiz,i,{apiUrl:u,extFields:[]}):"requestErr"===e?l.default.error(l.default.ErrorCode.ApiRequest,i,{apiUrl:u,extFields:[],sampleRate:.01}):"responseErr"===e?l.default.error(l.default.ErrorCode.ApiResponse,i,{apiUrl:u,extFields:[]}):"perf"===e&&l.default.perf(l.default.PerfCode.Api,t,{params:{apiUrl:u},extFields:[],sampleRate:.01})}function m(e,r){return{handleLogger:function(r){var o,t=a.logger.dump();switch(r){case"copy":return void(null===(o=navigator.clipboard)||void 0===o||o.writeText(t).catch(function(){}));case"download":return void s(t,"Bilibili-Live-HTML5-Player-EventLog-"+Date.now()+".txt");case"show":e.show()}},handleVideoInfo:function(){r.show()}}}function b(e,r){var o={area:"danmakuArea",fontScale:"fontSize"},t=function(e){return e/100},n={opacity:t,fontScale:t,density:t,area:function(e){return e/4*100}};Object.entries(e).map(function(e){var r,t,i=e[0],a=e[1];return[null!==(r=o[i])&&void 0!==r?r:i,(null!==(t=n[i])&&void 0!==t?t:function(e){return e})(a)]}).forEach(function(e){var o,t=e[0],n=e[1];"display"===t?r[n?"show":"hide"]():r.set(((o={})[t]=n,o))})}function x(){return Number(a.getCookie("DedeUserID"))}function h(e,r,n,i){return void 0===r&&(r="player-report"),o(this,void 0,Promise,function(){var o,l,u,c;return t(this,function(t){switch(t.label){case 0:o=new Blob(["--"+JSON.stringify(e)]),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,a.ajax("//api.bilibili.com/x/upload/web/image",{method:"POST",data:{bucket:"live-log-ttl",dir:"live-web-player-log",file:o}})];case 2:return null==(l=t.sent().location)||""===l?[2,!1]:(u={appName:"live-web-player",userID:x(),source:r,url:l.replace(".txt","")},null!=i&&(u.appID=i),null!=n&&(u.msgID=n),[4,a.ajax("//api.live.bilibili.com/xlive/open-interface/v1/webLogAgent/setWebAppLogRecord",{method:"POST",data:u})]);case 3:return t.sent(),[2,!0];case 4:return c=t.sent(),console.warn(c),[2,!1];case 5:return[2]}})})}exports.ENV={VERSION:null!==(e="3.5.14")&&void 0!==e?e:"unknown",BUILD_TIME:null!==(r="10/14/2021, 3:37:19 PM")&&void 0!==r?r:"unknown",NODE_ENV:"production"},function(e){e.Activity="A",e.Room="R",e.Home="H"}(i=exports.PlayerEnv||(exports.PlayerEnv={})),exports.isSupported=c,exports.downloadFile=s,exports.commonLogInfo=p,exports.initPlayer=d,exports.loadRoomInfo=f,exports.ajaxWatcher=v,exports.createContextmenuHandler=m,exports.updateDanmakuSetting=b,exports.getUserId=x,exports.reportLog=h;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-track":"ESUf","./ui-components/error-panel":"E90K"}],"ZWNU":[function(require,module,exports) {
"use strict";var e,t,n,i,o,r,a,s,l,c,u,d,h,p,f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},m=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&m(t,e,n);return y(t,e),t},k=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{l(i.next(e))}catch(t){r(t)}}function s(e){try{l(i.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},_=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},w=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.roomBlockAdapter=exports.DanmakuBiz=void 0;var g=require("@bilibili-live/web-player-common"),S=v(require("@bilibili-live/web-player-danmaku")),T=require("./biz-interface"),x=require("./biz-common"),B={mode:1,size:25,color:16777215},O=function(){function m(f,m){var y=this;this.container=f,this.opts=m,e.set(this,void 0),t.set(this,[]),n.set(this,[]),i.set(this,{rank:!1,verify:!1,level:0}),o.set(this,[]),r.set(this,[]),a.set(this,null),s.set(this,!1),l.set(this,{}),c.set(this,0),u.set(this,{mode:B.mode,color:B.color,length:20}),d.set(this,{type:"level",level:0,second:0}),h.set(this,!0),this.maskState=!1,this.isBlocked=function(e){var a;return!!w(y,o).includes(e.type)||(!!w(y,r).includes(e.dmType)||(w(y,i).level>e.user.level||(!!(w(y,i).rank&&e.user.rank<1e4)||(!(null===(a=w(y,i))||void 0===a||!a.verify||e.user.verify)||(!!w(y,n).some(function(t){return e.text.includes(t)})||!!w(y,t).some(function(t){return t.id===e.uid}))))))},p.set(this,function(e){if(null!=e&&(Array.isArray(e.keyword_list)&&e.keyword_list.forEach(function(e){y.blockKeyword(e,"add")}),Array.isArray(e.shield_user_list)&&e.shield_user_list.forEach(function(e){var t=e.uid,n=e.uname;y.blockUser({uid:t,uname:n},"add")}),null!=(null==e?void 0:e.shield_rules))){var t=e.shield_rules;w(y,i).level=Number(t.level),w(y,i).rank=Boolean(t.rank),w(y,i).verify=Boolean(t.verify)}}),_(this,e,new S.default(this.container,m)),x.updateDanmakuSetting(g.userSetting.getDanmaku(),this)}return m.prototype.onSei=function(t){w(this,e).addMaskSVG(t)},m.prototype.clearMask=function(){w(this,e).clearMask()},m.prototype.changeMaskState=function(t,n,i){void 0===i&&(i=!1),this.maskState=n,n?w(this,e).addMaskToWrap(t):w(this,e).closeMask(i)},m.prototype.connectSocket=function(t,n){_(this,a,E(w(this,e),t,f(f({},this.opts),{isBlocked:this.isBlocked,emitDanmaku:n})))},m.prototype.initDanmakuConfig=function(e){_(this,s,!0),null!=e.userBlockInfo&&w(this,p).call(this,e.userBlockInfo),null!=e.danmakuInfo&&_(this,u,Object.assign(w(this,u),e.danmakuInfo)),null!=e.roomBlockInfo&&_(this,d,Object.assign(w(this,d),e.roomBlockInfo))},m.prototype.getBlockList=function(){return w(this,n).concat(w(this,t).map(function(e){return e.id+"_"+e.name}))},m.prototype.setBlockTypes=function(e){Array.isArray(e)&&_(this,o,e)},m.prototype.setBlockSpecialDanmakuTypes=function(e){Array.isArray(e)&&_(this,r,e)},m.prototype.blockUser=function(e,n){"add"===n&&null!=e.uid&&null!=e.uname?(w(this,l)[w(this,c)]={type:"user",value:e.uid},_(this,c,w(this,c)+1),w(this,t).push({id:e.uid,name:e.uname})):"del"===n&&_(this,t,w(this,t).filter(function(t){return t.id!==e.uid}))},m.prototype.blockKeyword=function(e,t){"add"!==t||w(this,n).includes(e)?"del"===t&&_(this,n,w(this,n).filter(function(t){return t!==e})):(w(this,l)[w(this,c)]={type:"keyword",value:e},_(this,c,w(this,c)+1),w(this,n).push(e))},m.prototype.findBlockKwOrUserByIdx=function(e){return w(this,l)[e]},m.prototype.blockBatchUsers=function(e,t){"level"===e?w(this,i).level=t:["rank","verify"].includes(e)&&(w(this,i)[e]=Boolean(t))},m.prototype.userSendDanmaku=function(t){var n,i,o,r;return k(this,void 0,Promise,function(){var a,s=this;return b(this,function(l){switch(l.label){case 0:return a={stime:-1,mode:null!==(n=t.mode)&&void 0!==n?n:B.mode,size:null!==(i=t.fontsize)&&void 0!==i?i:B.size,color:null!==(o=t.color)&&void 0!==o?o:B.color,date:performance.now(),uid:this.opts.userId,dmid:this.opts.rnd,text:t.msg,border:!0,borderColor:"66FFFF",uname:"",isMaster:!0,dmType:S.DmType.Text},t.dm_type===S.DmType.Emoji&&(a=Object.assign({},a,{emoticonOptions:t.emoticonOptions,text:null===(r=t.emoticonOptions)||void 0===r?void 0:r.emoji,dmType:S.DmType.Emoji}),delete t.emoticonOptions),delete t.isIgnore,delete t.uniqueID,[4,new Promise(function(n,i){D(f(f({},t),{color:a.color,fontsize:a.size,mode:a.mode,rnd:a.dmid,roomid:s.opts.roomId}),function(i){var o,r,l;if(0===i.code&&w(s,h)){if(a.dmType===S.DmType.Emoji)return 1===(null!==(r=null===(o=t.emoticonOptions)||void 0===o?void 0:o.inPlayerArea)&&void 0!==r?r:1)&&w(s,e).add(a,!0),void n(i);var c=null===(l=i.data)||void 0===l?void 0:l.mode_info;null!=c&&(a=Object.assign({},a,{modeInfo:c})),w(s,e).add(a,!0)}n(i)}).catch(function(e){i(e)})})];case 1:return[2,l.sent()]}})})},m.prototype.onSelect=function(t){w(this,e).onSelect(t)},m.prototype.offSelect=function(){w(this,e).offSelect()},m.prototype.getDanmakuConfig=function(){var e=w(this,u).color.toString(16);return e=(Array(6).join("0")+e).slice(-6),{ready:w(this,s),level:w(this,i).level,shield_list:this.getBlockList(),shield_keyword:w(this,n),shield_users:w(this,t).map(function(e){return e.id+"_"+e.name}),danmu_color:"0x"+e,danmu_length:w(this,u).length,danmu_mode:w(this,u).mode,room_silent_type:w(this,d).type,room_silent_level:w(this,d).level,room_silent_second:w(this,d).second,user_silent_level:w(this,i).level,user_silent_rank:w(this,i).rank,user_silent_verify:w(this,i).verify}},m.prototype.fetchBlockRules=function(){var e=this;g.ajax("/banned_service/v1/shield/get_shield_info").then(function(t){w(e,p).call(e,t)}).catch(function(e){g.logger.error(e)})},m.prototype.show=function(){_(this,h,!0),w(this,e).show()},m.prototype.hide=function(){_(this,h,!1),w(this,e).hide()},m.prototype.resize=function(){w(this,e).resize()},m.prototype.set=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(t=w(this,e)).set.apply(t,n)},m.prototype.destroy=function(){var t;null===(t=w(this,a))||void 0===t||t.call(this),w(this,e).destroy()},m}();function j(e,t,n,i){if("block"===e.component){var o=e.action,r=e.data,a=e.callback;switch(o){case"addShieldUser":t.blockUser(null!=r?r:{},"add"),i("addShieldList",{code:0,msg:r.uid+"_"+r.uname+"]}"});break;case"addShieldWord":M("add",r,function(e){0===e.code?(t.blockKeyword(r,"add"),i("addShieldList",{code:0,msg:r})):i("addShieldList",Object.assign({},e,{msg:e.message}))});break;case"deleteShieldId":Array.isArray(r)&&r.forEach(function(e){var o=t.findBlockKwOrUserByIdx(e),r=o.type,a=o.value;"keyword"===r?M("del",a,function(n){0===n.code?(t.blockKeyword(a,"del"),i("deleteShieldList",{code:0,msg:[e]})):i("deleteShieldList",Object.assign({},n,{msg:n.message}))}):"user"===r&&P("del",a,n,function(n){0===n.code?(t.blockUser({uid:a},"del"),i("deleteShieldList",{code:0,msg:[e]})):i("deleteShieldList",n)})});break;case"blockDanmaku":t.setBlockTypes(r.type);break;case"blockSpecialDanmaku":t.setBlockSpecialDanmakuTypes(r.type);break;case"roomListShield":A(Boolean(r),n).then(function(){i("roomListShield",Boolean(r))}).catch(function(e){console.error(e)});break;case"globalShield":if(null==(null==r?void 0:r.type))break;I({type:r.type,level:r.level,minute:r.minutes},n,function(e){i("globalShield",e)});break;case"setUserShield":W({type:r.type,level:r.level,callback:function(e){null==a||a(e),0===e.code&&t.blockBatchUsers(r.type,r.level)}}).catch(function(e){console.error(e)})}}}function D(e,t){return k(this,void 0,Promise,function(){return b(this,function(n){switch(n.label){case 0:return[4,g.ajax("/msg/send",{method:"POST",data:e,handleRes:t})];case 1:return[2,n.sent()]}})})}function M(e,t,n){var i="/xlive/web-ucenter/v1/banned/DelShieldKeyword";"add"===e&&(i="/xlive/web-ucenter/v1/banned/AddShieldKeyword"),g.ajax(i,{method:"POST",data:{keyword:t},handleRes:n}).catch(function(e){console.error(e)})}function P(e,t,n,i){g.ajax("/liveact/shield_user",{method:"POST",data:{uid:t,roomid:n,type:"add"===e?1:0},handleRes:i}).catch(function(e){console.error(e)})}function A(e,t){return k(this,void 0,Promise,function(){return b(this,function(n){switch(n.label){case 0:return[4,g.ajax("/liveact/set_room_shield",{method:"POST",data:{roomid:t,type:e}})];case 1:return n.sent(),[2]}})})}function I(e,t,n){var i=e.type,o=e.level,r=e.minute;g.ajax("/liveact/room_silent",{method:"POST",data:{room_id:t,type:i,level:o,minute:r},handleRes:n}).catch(function(e){console.error(e)})}function W(e){var t=e.type,n=e.level,i=e.callback;return k(this,void 0,Promise,function(){return b(this,function(e){switch(e.label){case 0:return[4,g.ajax("/liveact/user_silent",{method:"POST",data:{type:t,level:n},handleRes:i})];case 1:return e.sent(),[2]}})})}function E(e,t,n){var i=n.userId,o=n.rnd,r=n.isBlocked,a=n.emitDanmaku;return e.clear(),e.play(),t.on("message",function(t){if("DANMU_TAG_CHANGE"===t.cmd){var n=L(t.data);n.dmTag!==S.DanmakuMode.Normal&&n.platform.includes(T.IPlatform.Web)?e.set({specialType:n.dmTag,specialTypeExtra:n.extra}):e.set({specialType:S.DanmakuMode.Normal})}if(t.cmd.startsWith("DANMU_MSG")){var s=z(t.cmd).web;if((t.info[2][0]!==i||t.info[0][5]!==o)&&(s.danmaku||s.panel)){var l=U(t.info);if(!r(l)){if(s.danmaku)if(l.dmType===S.DmType.Emoji)1===t.info[0][13].in_player_area&&e.add(l);else e.add(l);s.panel&&a(f(f({},t),{cmd:"DANMU_MSG"}))}}}})}function z(e){if(!e.includes(":"))return{h5:{danmaku:!0,panel:!0},web:{danmaku:!0,panel:!0}};var t=e.split(":"),n=t[4],i=t[5];return{web:{panel:0==(1&Number(n)),danmaku:0==(Number(n)>>1&1)},h5:{panel:0==(1&Number(i)),danmaku:0==(Number(i)>>1&1)}}}function U(e){var t=e[0][12],n=e[0][14],i=e[0][13],o={stime:-1,mode:e[0][1],size:e[0][2],color:e[0][3],date:performance.now(),uid:e[2][0],dmid:e[0][5],text:e[1],uname:e[2][1],user:{level:e[4][0],rank:e[2][5],verify:Boolean(e[2][6])},checkInfo:{ts:e[9].ts,ct:e[9].ct},type:e[0][9],dmType:S.DmType.Text,modeInfo:e[0][15]};return t===S.DmType.Emoji?Object.assign({},o,{emoticonOptions:i,dmType:S.DmType.Emoji}):t===S.DmType.Voice?Object.assign({},o,{dmType:S.DmType.Voice,voiceConfig:n}):o}function L(e){return{dmTag:e.dm_tag,platform:e.platform,extra:e.extra}}exports.DanmakuBiz=O,e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,exports.roomBlockAdapter=j;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-danmaku":"uyEh","./biz-interface":"Rr2x","./biz-common":"YQ89"}],"vDPq":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(n){r(n)}}function l(e){try{s(i.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,l)}s((i=i.apply(e,n||[])).next())})},t=this&&this.__generator||function(e,n){var t,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(e,a)}catch(l){r=[6,l],i=0}finally{t=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},i=this&&this.__spreadArray||function(e,n){for(var t=0,i=n.length,o=e.length;t<i;t++,o++)e[o]=n[t];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.endRecommendPanel=void 0;var o,r,a=require("@bilibili-live/web-player-common");function l(e,n,t,i,o){n.classList.add("web-player-ending-panel"),n.style.cssText="\n    z-index: 3;\n    color: #fff;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background: #000;\n  ",n.appendChild(s(t,i,o))}function s(e,n,t){var i=document.createElement("div"),a=document.createElement("div");return i.style.cssText="\n    width: 606px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate3d(-50%, -50%, 0);\n    -moz-transform: translate3d(-50%, -50%, 0);\n    -ms-transform: translate3d(-50%, -50%, 0);\n    -o-transform: translate3d(-50%, -50%, 0);\n    transform: translate3d(-50%, -50%, 0);\n  ",e.style.cssText="\n    font-size: 28px;\n    color: #aaa;\n    text-align: center;\n    line-height: 50px;\n    height: 50px;\n    margin-bottom: 20px;\n  ",i.appendChild(e),n.classList.add("web-player-ending-panel-recommendList"),t.forEach(function(e,t){t<6&&r({type:o.recommendListShow,data:e}),n.appendChild(d(e))}),n.style.cssText="\n    display: "+(t.length>0?"block":"none")+";\n    height: 236px;\n    overflow: hidden;\n  ",a.innerText="闲置中",a.style.cssText="display: none;",i.appendChild(n),i.appendChild(a),i}function d(e){var n=document.createElement("a"),t=document.createElement("div"),i=document.createElement("div");t.style.cssText="\n    position: relative;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  ",i.style.cssText="\n    width: 100%;\n    position: absolute;\n    height: 50px;\n    bottom: -20px;\n    z-index: 3;\n    background-image: linear-gradient(-180deg, rgba(0, 0, 0, 0) 0%, #000000 100%);\n    color: #fffff;\n    -webkit-transition: bottom 0.3s ease-in-out;\n    -moz-transition: bottom 0.3s ease-in-out;\n    -ms-transition: bottom 0.3s ease-in-out;\n    -o-transition: bottom 0.3s ease-in-out;\n    transition: bottom 0.3s ease-in-out;\n  ";var l=document.createElement("div");l.style.cssText="\n    margin-top: 8px;\n    height: 16px;\n    position: relative;\n    line-height: 16px;\n    color: '#fff\n  ";var s=document.createElement("div");s.innerText=e.title,s.style.cssText="\n    padding: 0 8px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    color: #fff;\n  ";var d=document.createElement("div");d.style.cssText="\n    padding: 6px 8px;\n    color: #969696;\n    height: 16px;\n    position: relative;\n    line-height: 16px;\n  ";var c=document.createElement("div");c.style.cssText="\n    width: 60%;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    float: left;\n  ",c.innerText=e.uname;var p=document.createElement("span");p.style.cssText="\n    float: right;\n  ","online"in e&&(e.online>1e4?p.innerHTML=Math.floor(e.online/1e4).toString()+"万":p.innerText=e.online.toString()),d.appendChild(c),d.appendChild(p),l.appendChild(s),i.appendChild(l),i.appendChild(d);var u=document.createElement("img");if(u.alt=e.title,u.src=e.cover+(a.isWebPSupported()?"@384w_240h.webp":""),u.style.cssText="\n    width: 100%;\n    height: 100%;\n    border: none;\n  ",t.appendChild(u),n.appendChild(t),n.appendChild(i),n.style.cssText="\n    width: 192px;\n    height: 108px;\n    -webkit-border-radius: 2px;\n    -moz-border-radius: 2px;\n    border-radius: 2px;\n    float: left;\n    overflow: hidden;\n    display: inline-block;\n    position: relative;\n    margin: 5px;\n    text-decoration: none;\n    outline: none;\n    color: #444;\n    font-size: 12px;\n    cursor: pointer;\n  ",n.href="javascript:void(0);",n.addEventListener("mouseover",function(){i.style.bottom="0px"}),n.addEventListener("mouseout",function(){i.style.bottom="-20px"}),n.onclick=function(){r({type:o.recommendListClick,data:e}),"text"in e?"最新回放"===e.text?window.open("//live.bilibili.com/record/"+e.rid):"主播推荐"===e.text&&window.open("//www.bilibili.com/video/"+e.bvid):window.open("//live.bilibili.com/"+e.roomid)},n.onmouseenter=function(){r({type:o.recommendListMoveEnter,data:e})},"text"in e){var m=document.createElement("div");m.innerText=e.text,m.style.cssText="\n      background: #4fc1e9;\n      position: absolute;\n      top: 4px;\n      right: 5px;\n      height: 16px;\n      line-height: 16px;\n      width: 48px;\n      padding: 1px 4px;\n      color: #fff;\n      border-radius: 2px;\n    ",t.appendChild(m)}return n}function c(e,n,t,i,o){var s=t.roomId,d=t.rnd,c=t.showRecommend;void 0===o&&(o=""),r=i;var u=document.createElement("div"),m=document.createElement("div"),h=c;if(c){var f=a.loading(e);p(s,d).then(function(t){if(f(),h){var i=t.tips,r=void 0===i?"主播已关播":i,a=t.recommend,s=void 0===a?[]:a;m.innerText=r,""!==o&&(m.innerText=o),l(e,n,m,u,s)}else m.innerText="主播已关播",l(e,n,m,u,[])}).catch(function(e){a.logger.error(e),f()})}else m.innerText="主播已关播",l(e,n,m,u,[]);return function(){h=!1,m.innerText="主播已关播",u.style.display="none"}}function p(l,s){return n(this,void 0,Promise,function(){var n,d;return t(this,function(t){switch(t.label){case 0:return n=null,[4,a.ajax("/xlive/web-room/v1/index/getOffLiveList?room_id="+l+"&count=8&rnd="+s.toFixed(0))];case 1:return null!=(n=t.sent())&&Array.isArray(n.recommend)||r({type:o.recommendListNull}),d=n.record_list.map(function(n){return e(e({},n),{roomid:n.rid,text:""===n.rid?"主播推荐":"最新回放"})}),n.recommend=i(i([],d),n.recommend).sort(function(e,n){return e.global_order-n.global_order}),[2,n]}})})}!function(e){e.recommendListNull="nolive",e.recommendListClick="click",e.recommendListMoveEnter="move",e.recommendListShow="show"}(o||(o={})),exports.endRecommendPanel=c;
},{"@bilibili-live/web-player-common":"KGHo"}],"vS7T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=require("../biz-interface"),l='\n  <svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 157 45">\n    <defs>\n      <style>\n        .cls-1,\n        .cls-2 {\n          fill: #fff;\n          opacity: 0.4;\n          filter: url(#shadow);\n        }\n\n        .cls-2 {\n          fill-rule: evenodd;\n        }\n      </style>\n    </defs>\n    <defs>\n      <filter id="shadow">\n        <feDropShadow dx="1" dy="2" stdDeviation="1" />\n      </filter>\n    </defs>\n    <path class="cls-1 xxx"\n      d="M124.92,10.08h-9.28l.86-2a.31.31,0,0,0-.28-.43h-4a.62.62,0,0,0-.56.38l-.88,2.07H99.8a.3.3,0,0,0-.3.31v1.23a.29.29,0,0,0,.3.3H110L108.66,15H102a.3.3,0,0,0-.31.3v23H99.8a.29.29,0,0,0-.3.3V39.8a.3.3,0,0,0,.3.31h25.12a.31.31,0,0,0,.31-.31V38.57a.3.3,0,0,0-.31-.3h-1.84V16.21A1.21,1.21,0,0,0,121.86,15h-8.3l1.3-3.07h10.06a.3.3,0,0,0,.31-.3V10.39A.31.31,0,0,0,124.92,10.08Zm-6.74,28.19H106.54V34.59h11.64Zm0-5.52H106.54V28.46h11.64Zm0-6.12H106.54V22.34h11.64Zm-.61-9.81a.61.61,0,0,1,.61.62V20.5H106.54V16.82Z" />\n    <path class="cls-1"\n      d="M137.06,26.83l-1.42.59V15.6h1.54a.3.3,0,0,0,.3-.31V14.07a.3.3,0,0,0-.3-.31h-1.54V7.94a.3.3,0,0,0-.3-.31h-4.29a.31.31,0,0,0-.31.31v5.82h-1.53a.31.31,0,0,0-.31.31v1.22a.31.31,0,0,0,.31.31h1.53V29.51l-1.46.62a.61.61,0,0,0-.38.56v1a.31.31,0,0,0,.43.28l1.41-.6v6.93a.61.61,0,0,1-.61.61h-.76a.3.3,0,0,0-.28.43l.44,1a.6.6,0,0,0,.56.37h4.33a1.22,1.22,0,0,0,1.22-1.23V29.26l1.47-.62a.61.61,0,0,0,.37-.56v-1A.3.3,0,0,0,137.06,26.83Z" />\n    <path class="cls-1"\n      d="M138.49,17.44h5.82v6.12a.31.31,0,0,0,.31.31h3.68a.3.3,0,0,0,.3-.31V17.44h5.82a.31.31,0,0,0,.31-.31V15.9a.31.31,0,0,0-.31-.3H148.6V10.7h4a1.25,1.25,0,0,0,1.13-.75l.8-1.89a.31.31,0,0,0-.28-.43h-3.42a.62.62,0,0,0-.57.38l-.2.48a.62.62,0,0,1-.56.37h-11a.3.3,0,0,0-.3.31v1.22a.3.3,0,0,0,.3.31h5.82v4.9h-5.82a.3.3,0,0,0-.3.3v1.23A.3.3,0,0,0,138.49,17.44Z" />\n    <path class="cls-1"\n      d="M154.36,11.62h-3.42a.59.59,0,0,0-.56.37l-1,2.26a.31.31,0,0,0,.29.43h3.62a.3.3,0,0,0,.28-.19l1-2.45A.3.3,0,0,0,154.36,11.62Z" />\n    <path class="cls-1"\n      d="M155.68,23.44l-2.08-4.9a.31.31,0,0,0-.28-.18H149.7a.31.31,0,0,0-.29.42l2.16,5.09h3.83A.3.3,0,0,0,155.68,23.44Z" />\n    <path class="cls-1"\n      d="M139.25,14.31a.63.63,0,0,0,.57.37h3.42a.3.3,0,0,0,.28-.43l-1-2.26a.61.61,0,0,0-.56-.37h-3.42a.31.31,0,0,0-.29.42Z" />\n    <path class="cls-1"\n      d="M143.52,18.78a.3.3,0,0,0-.28-.42h-3.62a.31.31,0,0,0-.29.18l-2.08,4.9a.31.31,0,0,0,.29.43h3.82Z" />\n    <path class="cls-1"\n      d="M153.2,25.4H138.8a.31.31,0,0,0-.31.31V39.8a.31.31,0,0,0,.31.31h15.32a.3.3,0,0,0,.3-.31V26.63A1.22,1.22,0,0,0,153.2,25.4Zm-8.89,12.87h-1.53v-4.9h1.53Zm0-6.74h-1.53V27.24h1.53Zm5.82,6.74H148.6v-4.9h1.53Zm0-6.74H148.6V27.24h.92a.61.61,0,0,1,.61.61Z" />\n    <path class="cls-1"\n      d="M32.47,5.09l4.14-.51a.23.23,0,0,1,.25.21l2.66,31.36a.22.22,0,0,1-.22.24h-3a.25.25,0,0,1-.24-.21L32.27,5.35A.24.24,0,0,1,32.47,5.09Z" />\n    <path class="cls-2"\n      d="M26.84,21.69l4.62-.57a.24.24,0,0,1,.27.2l2,16.42a.21.21,0,0,1-.19.24l-3.41.43a.21.21,0,0,1-.23-.17L26.64,22A.23.23,0,0,1,26.84,21.69Z" />\n    <path class="cls-2"\n      d="M41.21,21.44h4.55a.22.22,0,0,1,.22.22V38.25a.21.21,0,0,1-.21.21H42.48a.23.23,0,0,1-.23-.21L41,21.68A.22.22,0,0,1,41.21,21.44Z" />\n    <path class="cls-2"\n      d="M25.36,13.32l2-.24a.22.22,0,0,1,.25.19l.79,5.92a.22.22,0,0,1-.19.25l-1.56.19a.22.22,0,0,1-.25-.18l-1.18-5.89A.19.19,0,0,1,25.36,13.32Z" />\n    <path class="cls-2"\n      d="M28.44,13.16l.73,5.94a.22.22,0,0,0,.24.19l1.82-.23a.22.22,0,0,0,.19-.24l-.73-6a.21.21,0,0,0-.23-.18l-1.83.23A.21.21,0,0,0,28.44,13.16Z" />\n    <path class="cls-2"\n      d="M40.35,13.21l.46,6a.21.21,0,0,0,.2.19h1.61a.21.21,0,0,0,.21-.21l-.13-6a.22.22,0,0,0-.22-.21H40.56A.2.2,0,0,0,40.35,13.21Z" />\n    <path class="cls-2"\n      d="M43.5,13.21l.13,6a.22.22,0,0,0,.22.22h1.71a.22.22,0,0,0,.22-.22v-6a.21.21,0,0,0-.21-.21H43.71A.21.21,0,0,0,43.5,13.21Z" />\n    <path class="cls-2"\n      d="M52.21,40.3a.25.25,0,0,0,.22.23,26.47,26.47,0,0,0,17.13-3.72c2.65-1.63,6.3-5.58,1-8.59a24.15,24.15,0,0,0-14.72-3.06.25.25,0,0,1-.28-.22A138.25,138.25,0,0,1,54.67.58a.2.2,0,0,0-.27-.2L47.51,2.89a.23.23,0,0,0-.15.26A354.89,354.89,0,0,1,52.21,40.3Zm13.51-8.11a27.14,27.14,0,0,1-6,4.23.22.22,0,0,1-.32-.14c-.11-.55-.59-4-.87-6.63a.22.22,0,0,1,.25-.24,22.53,22.53,0,0,1,6.85,2.41C65.83,31.92,65.83,32.09,65.72,32.19Z" />\n    <path class="cls-2"\n      d="M6.14,40.3a.26.26,0,0,0,.23.23,26.44,26.44,0,0,0,17.12-3.72c2.65-1.63,6.3-5.58,1-8.59A24.14,24.14,0,0,0,9.81,25.16a.26.26,0,0,1-.28-.22A138.68,138.68,0,0,1,8.61.5.21.21,0,0,0,8.34.29L1.45,2.8a.23.23,0,0,0-.15.26A362.8,362.8,0,0,1,6.14,40.3Zm13.52-8.11a27.39,27.39,0,0,1-6,4.23.22.22,0,0,1-.32-.14c-.12-.55-.6-4-.88-6.63a.22.22,0,0,1,.26-.24,22.79,22.79,0,0,1,6.85,2.41A.22.22,0,0,1,19.66,32.19Z" />\n    <path class="cls-1"\n      d="M78.63,5.09l4.14-.51a.23.23,0,0,1,.25.21l2.66,31.36a.22.22,0,0,1-.22.24h-3a.25.25,0,0,1-.24-.21L78.43,5.35A.24.24,0,0,1,78.63,5.09Z" />\n    <path class="cls-2"\n      d="M73,21.69l4.62-.57a.24.24,0,0,1,.27.2l2,16.42a.21.21,0,0,1-.19.24l-3.41.43a.21.21,0,0,1-.23-.17L72.8,22A.23.23,0,0,1,73,21.69Z" />\n    <path class="cls-2"\n      d="M87.37,21.44h4.55a.22.22,0,0,1,.22.22V38.25a.21.21,0,0,1-.21.21H88.64a.23.23,0,0,1-.23-.21L87.15,21.68A.22.22,0,0,1,87.37,21.44Z" />\n    <path class="cls-2"\n      d="M71.52,13.32l2-.24a.22.22,0,0,1,.25.19l.79,5.92a.22.22,0,0,1-.19.25l-1.56.19a.22.22,0,0,1-.25-.18l-1.18-5.89A.2.2,0,0,1,71.52,13.32Z" />\n    <path class="cls-2"\n      d="M74.6,13.16l.73,5.94a.22.22,0,0,0,.24.19l1.82-.23a.22.22,0,0,0,.19-.24l-.73-6a.21.21,0,0,0-.23-.18l-1.83.23A.22.22,0,0,0,74.6,13.16Z" />\n    <path class="cls-2"\n      d="M86.51,13.21l.46,6a.21.21,0,0,0,.2.19h1.61a.21.21,0,0,0,.21-.21l-.13-6a.22.22,0,0,0-.22-.21H86.72A.2.2,0,0,0,86.51,13.21Z" />\n    <path class="cls-2"\n      d="M89.66,13.21l.13,6a.22.22,0,0,0,.22.22h1.71a.22.22,0,0,0,.22-.22v-6a.21.21,0,0,0-.21-.21H89.87A.21.21,0,0,0,89.66,13.21Z" />\n  </svg>\n',n="https://i0.hdslb.com/bfs/activity-plat/static/20210309/d0411babbbf77c49ca42a3320eb804ae/xUd8TRdAk.png";function s(a){var l=document.createElement("div");return l.className="web-player-icon-roomStatus",l.style.cssText="\n    position: absolute;\n    left: auto;\n    right: 10px;\n    top: 10px;\n    z-index: 2;\n    pointer-events: none;\n  ",a.appendChild(l),{destroy:function(){l.remove()},setRoomStatus:function(a){t(l,a)}}}function t(s,t){t===a.RoomStatus.Round?(s.innerHTML="",s.style.cssText+="\n      background-size: 78px 50px;\n      width: 78px;\n      height: 50px;\n      opacity: 0.8;\n      background: url("+n+") no-repeat 0 0;\n    "):(s.innerHTML=l,s.style.cssText+="\n      width: 122px;\n      height: 43px;\n      opacity: 0.4;\n      background: none;\n    ")}exports.default=s;
},{"../biz-interface":"Rr2x"}],"EORf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e='\n  <svg id="图层_1" data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">\n    <defs>\n      <style>\n        .feed-back-cls-1 {\n          fill: #fff;\n          fill-rule: evenodd;\n          filter: url(#shadow);\n        }\n      </style>\n    </defs>\n    <defs>\n      <filter id="shadow">\n        <feDropShadow dx="0.3" dy="0.3" stdDeviation="0.6" />\n      </filter>\n    </defs>\n    <path class="feed-back-cls-1"\n      d="M24,10H12a2,2,0,0,0-2,2V26l3-3H24a2,2,0,0,0,2-2V12A2,2,0,0,0,24,10ZM19,21H17V19h2Zm1.19-4.38a2,2,0,0,0-.18.15l-.37.31c-.49.4-.64.58-.64.92H17c0-1.84,2-1.76,2-3a1,1,0,0,0-1-1,1,1,0,0,0-.81.41.9.9,0,0,0-.11.24.5.5,0,0,1-.48.35h-1a.5.5,0,0,1-.5-.5.28.28,0,0,1,0-.09,3.17,3.17,0,0,1,.21-.72A3,3,0,0,1,21,15,2.14,2.14,0,0,1,20.19,16.62Z" />\n  </svg>\n';function n(n,t){var o=document.createElement("div"),i=0;function s(e){e.stopPropagation(),clearTimeout(i),i=0,o.style.opacity="1.0"}function a(){clearTimeout(i),i=window.setTimeout(function(){o.style.opacity="0"},1e3),o.style.opacity="0.8"}function r(){i=window.setTimeout(function(){o.style.opacity="0"},1e3)}return o.className="web-player-icon-feedback",o.innerHTML=e,o.style.cssText="\n    position: absolute;\n    top: 0px;\n    right: 12px;\n    z-index: 100;\n    width: 36px;\n    height: 36px;\n    cursor: pointer;\n    transition: opacity 0.5s ease 0s;\n    opacity: 0;\n  ",n.appendChild(o),n.addEventListener("mousemove",a),n.addEventListener("mouseleave",r),o.addEventListener("click",t),o.addEventListener("mousemove",s),function(){o.remove(),n.removeEventListener("mousemove",a),n.removeEventListener("mouseleave",r),o.removeEventListener("click",t),o.removeEventListener("mousemove",s),clearTimeout(i)}}exports.default=n;
},{}],"weyG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@bilibili-live/web-player-common");function n(n,o,a){void 0===a&&(a=300),e.logger.info("start round count down");var i=n.getElementsByClassName("web-player-video-round-counter");1===i.length&&i[0].remove();var l=document.createElement("div");l.innerHTML='\n    <p style="'+r(20)+'">\n      <span>'+t(a)+'</span>\n      后\n      </p>\n    <p style="'+r(30)+'">主播的投稿视频将轮流播放</p>\n  ',l.classList.add("web-player-video-round-counter"),l.style.cssText="\n    width: 400px;\n    position: absolute;\n    z-index: 10;\n    pointer-events: none;\n    left: 50%;\n    top: 50%;\n    margin-left: -200px;\n    margin-top: -66px;\n    color: #aaa;\n  ";var s=l.getElementsByTagName("span");s[0].style.fontSize="50px",n.append(l);var p=window.setInterval(function(){a>1?s[0].innerText=t(--a):(clearInterval(p),l.remove(),o().catch(function(n){e.logger.error(n)}))},1e3);return function(){clearInterval(p),l.remove()}}function t(e){var n=Math.floor(e/60),t=Math.floor(e%60);return"0"+n+":"+(t<10?"0"+t.toString():t)}function r(e){return"\n    text-align: center;\n    line-height: 50px;\n    letter-spacing: 3px;\n    font-weight: normal;\n    font-size: "+e+"px;\n    line-height: 1;\n  "}exports.default=n;
},{"@bilibili-live/web-player-common":"KGHo"}],"ntSr":[function(require,module,exports) {
module.exports={"web-player-context-menu":"_web-player-context-menu_3757f","context-menu-item":"_context-menu-item_3757f",disabled:"_disabled_3757f","context-sub-menu":"_context-sub-menu_3757f","menu-item-hr":"_menu-item-hr_3757f","context-menu-right-arrow":"_context-menu-right-arrow_3757f","context-menu-text":"_context-menu-text_3757f","context-sub-menu-item":"_context-sub-menu-item_3757f","left-sub-menu":"_left-sub-menu_3757f","blp-icon-show":"_blp-icon-show_3757f","blp-icon-copy":"_blp-icon-copy_3757f","blp-icon-download":"_blp-icon-download_3757f"};
},{}],"wERC":[function(require,module,exports) {
"use strict";var e,t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},n=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@bilibili-live/web-player-common"),u=i(require("./index.less")),o=function(){function i(){this.menuContainer=null,e.set(this,{})}return i.prototype.show=function(e,t){void 0===t&&(t=!1),t?this.menuContainer.classList.add(u.default["left-sub-menu"]):this.menuContainer.classList.remove(u.default["left-sub-menu"]);var n=this.menuContainer.style;n.top=e.top+"px",n.left=e.left+"px",n.opacity="1"},i.prototype.hide=function(){var e=this.menuContainer.style;e.top="",e.left="",e.opacity="0"},i.prototype.initContextmenu=function(e){this.menuContainer=this.createMenuUl(u.default["web-player-context-menu"]);var t=this.createContextmenuList(e);this.menuContainer.appendChild(t)},i.prototype.prependMenuItem=function(e,n){var a=t(t({},n),{name:e}),i=this.createMenuElement(a);return this.menuContainer.prepend(i),function(){i.remove()}},i.prototype.resetSubmenu=function(t,a,i,r){var o;void 0===r&&(r=-1);var l=n(this,e)[t];if(null!=l){var s=null!==(o=l.querySelector(u.default["context-sub-menu"]))&&void 0!==o?o:this.createMenuUl(u.default["context-sub-menu"]);s.innerHTML="";var c=a.map(function(e){return{label:e.label,value:e.value,disable:e.value===r,click:i.bind(null,e.value)}}),d=this.createSubmenuFragment(c);s.appendChild(d),l.appendChild(s)}},i.prototype.submenuActive=function(t,a){var i,r=n(this,e)[t];if(null!=r){for(var o=0,l=r.getElementsByClassName(u.default["context-sub-menu-item"]);o<l.length;o++){l[o].classList.remove(u.default.disabled)}null===(i=r.getElementsByClassName(u.default["context-sub-menu-item"])[a])||void 0===i||i.classList.add(u.default.disabled)}},i.prototype.createMenuUl=function(e){return void 0===e&&(e=""),r.createElement("ul",{classname:e})},i.prototype.createArrow=function(){return r.createElement("div",{classname:u.default["context-menu-right-arrow"]})},i.prototype.createMenuLi=function(e){var n=t({disable:!1,hr:!1,remove:!1},e),a=u.default.disabled,i=u.default["menu-item-hr"];return r.createElement("li",{classname:e.classname+(n.disable?" "+a:"")+(n.hr?" "+i:""),text:"",attributes:n.remove?[["data-auto-remove","1"]]:[]})},i.prototype.createSubmenuLi=function(e){var n=t({disable:!1,icon:""},e),a=u.default.disabled,i=r.createElement("li",{classname:n.classname+(n.disable?" "+a:""),text:n.text});if(""!==n.icon){var o=r.createElement("span",{classname:u.default[n.icon]});i.prepend(o)}return i.onclick=function(){!i.className.includes(u.default.disabled)&&n.click(n.index)},i},i.prototype.createContextmenuList=function(e){var t=this,n=document.createDocumentFragment();return e.forEach(function(e){n.appendChild(t.createMenuElement(e))}),n},i.prototype.createMenuElement=function(t){var a=this,i=t.name,o=t.label,l=t.click,s=t.hr,c=void 0!==s&&s,d=t.submenu,m=void 0===d?null:d,p=t.autoRemove,f=void 0!==p&&p,h=this.createMenuLi({text:o,classname:u.default["context-menu-item"],disable:"function"!=typeof l&&null==m,remove:f,hr:c}),v=r.createElement("span",{text:o,classname:u.default["context-menu-text"]});if(h.appendChild(v),null!=l&&h.addEventListener("click",function(){l(),a.hide()}),null!=m){h.appendChild(this.createArrow());var b=this.createMenuUl(u.default["context-sub-menu"]),y=this.createSubmenuFragment(m);b.appendChild(y),h.appendChild(b)}return f||(n(this,e)[i]=h),h},i.prototype.createSubmenuFragment=function(e){var t=this,n=document.createDocumentFragment();return e.forEach(function(e,a){var i,r=t.createSubmenuLi({text:e.label,classname:u.default["context-sub-menu-item"],disable:e.disable,icon:null!==(i=e.icon)&&void 0!==i?i:"",index:a,click:function(){e.click(),t.hide()}});n.appendChild(r)}),n},i.prototype.removeMenuItems=function(){for(var e=this.menuContainer.querySelectorAll('[data-auto-remove="1"]'),t=e.length-1;t>=0;t--){var n=e[t];this.menuContainer.removeChild(n)}},i.prototype.destroy=function(){this.menuContainer.innerHTML="",a(this,e,{})},i}();e=new WeakMap,exports.default=o;
},{"@bilibili-live/web-player-common":"KGHo","./index.less":"ntSr"}],"x9fc":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.EMenuType=void 0,function(e){e.DANMU="danmu",e.LINE="line",e.LOGGER="logger",e.VIDEO_INFO="videoInfo",e.VERSION="version",e.COPYRIGHT="copyright",e.CLOSE="close"}(e=exports.EMenuType||(exports.EMenuType={}));
},{}],"YNoa":[function(require,module,exports) {
"use strict";var e,t,n,i,o,l,a,r,u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.IDanmuInfo=void 0;var h,d=p(require("./contextmenu")),f=require("./type");Object.defineProperty(exports,"IDanmuInfo",{enumerable:!0,get:function(){return f.IDanmuInfo}}),function(e){e.DANMU="danmu",e.LINE="line",e.LOGGER="logger",e.VIDEO_INFO="videoInfo",e.VERSION="version",e.COPYRIGHT="copyright",e.CLOSE="close"}(h||(h={}));var m=function(p){function d(u,s){var h=p.call(this)||this;return e.set(h,void 0),t.set(h,void 0),n.set(h,[]),i.set(h,[]),o.set(h,null),l.set(h,!1),a.set(h,function(e){e.preventDefault(),p.prototype.removeMenuItems.call(h),h.danmuPreCheck(),h.showContextmenu(h.computePosition(e))}),r.set(h,function(e){h.menuContainer.contains(e.target)||(h.removeMenuItems(),p.prototype.hide.call(h))}),c(h,t,u),c(h,e,s),h.init(),h}return u(d,p),d.prototype.setLines=function(e,t,n){var l;if(null===(l=s(this,o))||void 0===l||l.call(this),0!==e.length){var a={label:"观看卡顿？切换备线试试",submenu:e.map(function(e){return{value:e.value,label:e.label,disable:e.value===t,click:n.bind(null,e.value)}})};c(this,i,e),c(this,o,this.prependMenuItem(h.LINE,a))}},d.prototype.changeLine=function(e){var t=s(this,i).findIndex(function(t){return t.value===e});null!=t&&this.submenuActive(h.LINE,t)},d.prototype.updateDanmuInfo=function(e){c(this,n,e)},d.prototype.setAdmin=function(){c(this,l,!0)},d.prototype.destroy=function(){p.prototype.destroy.call(this),this.removeListener(),s(this,t).removeChild(this.menuContainer)},d.prototype.init=function(){var e=this.getInitialConfig();p.prototype.initContextmenu.call(this,e),s(this,t).appendChild(this.menuContainer),this.addListener()},d.prototype.getInitialConfig=function(){var t=s(this,e);return[{name:h.LOGGER,label:"播放器日志信息",submenu:[{value:1,icon:"blp-icon-show",label:"显示日志",click:t.click.handleLogger.bind(null,"show")},{value:2,icon:"blp-icon-copy",label:"复制日志",click:t.click.handleLogger.bind(null,"copy")},{value:3,icon:"blp-icon-download",label:"下载日志",click:t.click.handleLogger.bind(null,"download")}]},{name:h.VIDEO_INFO,label:"视频统计信息",click:t.click.handleVideoInfo},{name:h.VERSION,label:"Bilibili HTML5 Live Player "+t.version},{name:h.COPYRIGHT,label:"Copyright bilibili "+(new Date).getFullYear()},{name:h.CLOSE,label:"关闭",click:function(){}}]},d.prototype.showContextmenu=function(e){p.prototype.show.call(this,{top:e.top,left:e.left},e.mainAxiosRight<160)},d.prototype.danmuPreCheck=function(){var e=this,t=s(this,n);t.length>0&&t.forEach(function(t,n){e.prependDanmu(t,0===n)}),c(this,n,[])},d.prototype.getDanmuConfig=function(t,n){var i=t.text.trim(),o=t.uid,a=o===s(this,e).uid,r={hr:n,autoRemove:!0,label:i,submenu:[{value:1,label:"举报选中弹幕",disable:a,click:s(this,e).click.handleDanmu.bind(this,"report",t)},{value:2,label:"屏蔽此用户的弹幕",disable:a,click:s(this,e).click.handleDanmu.bind(this,"shield",t)},{value:4,label:"复制弹幕",click:function(){var e;null===(e=navigator.clipboard)||void 0===e||e.writeText(i).catch(function(){})}},{value:5,label:"去TA的个人空间",click:function(){window.open("//space.bilibili.com/"+o)}}]};return s(this,l)&&r.submenu.splice(2,0,{value:3,label:"添加进黑名单",disable:a,click:s(this,e).click.handleDanmu.bind(this,"addBlackList",t)}),r},d.prototype.prependDanmu=function(e,t){var n=this.getDanmuConfig(e,t);p.prototype.prependMenuItem.call(this,h.DANMU,n)},d.prototype.computePosition=function(e){var n=s(this,t).getBoundingClientRect(),i=this.menuContainer.getBoundingClientRect(),o=Math.min(e.clientX-n.left,n.width-i.width);return{left:o,top:Math.min(e.clientY-n.top,n.height-i.height),mainAxiosRight:n.width-o-i.width}},d.prototype.addListener=function(){s(this,t).addEventListener("contextmenu",s(this,a)),window.addEventListener("click",s(this,r))},d.prototype.removeListener=function(){s(this,t).removeEventListener("contextmenu",s(this,a)),window.removeEventListener("click",s(this,r))},d}(d.default);e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,l=new WeakMap,a=new WeakMap,r=new WeakMap,exports.default=m;
},{"./contextmenu":"wERC","./type":"x9fc"}],"RYhb":[function(require,module,exports) {
"use strict";var t,i,e,s,h,n,r,a=this&&this.__classPrivateFieldSet||function(t,i,e){if(!i.has(t))throw new TypeError("attempted to set private field on non-instance");return i.set(t,e),e},o=this&&this.__classPrivateFieldGet||function(t,i){if(!i.has(t))throw new TypeError("attempted to get private field on non-instance");return i.get(t)};Object.defineProperty(exports,"__esModule",{value:!0});var p=function(){function p(o){t.set(this,0),i.set(this,0),e.set(this,[]),s.set(this,[]),h.set(this,0),n.set(this,0),r.set(this,0),a(this,t,o.width),a(this,i,o.height),this.initGraph()}return p.prototype.updateGraph=function(t){o(this,e).shift(),o(this,e).push(t),a(this,s,[]),a(this,n,o(this,e).length>0?Math.max.apply(this,o(this,e)):1);try{a(this,r,o(this,i)/(o(this,n)-o(this,h)))}catch(f){console.log(f)}for(var p=0,l=o(this,e).length;p<l;p++){var u=o(this,e)[p];o(this,s).push([2*p,o(this,i)-(u-o(this,h))*o(this,r)])}},p.prototype.getGraph=function(){for(var e="",h=o(this,s),n=0,r=h.length;n<r;n++)e+=h[n].join(",")+" ";return e.includes("NaN")&&(e="0"),'<svg width="'+o(this,t)+'" height="'+o(this,i)+'" viewBox="0 0 '+o(this,t)+" "+o(this,i)+'">\n                <g>\n                  <polyline stroke="white" fill="none" points="'+e+'">\n                  </polyline>\n                </g>\n              </svg>'},p.prototype.destroy=function(){a(this,e,[]),a(this,s,[]),a(this,h,0),a(this,n,0),a(this,r,0),this.initGraph()},p.prototype.initGraph=function(){for(var h=0,n=o(this,t)/2;h<n;h++)o(this,e).push(0),o(this,s).push([2*h,o(this,i)])},p}();t=new WeakMap,i=new WeakMap,e=new WeakMap,s=new WeakMap,h=new WeakMap,n=new WeakMap,r=new WeakMap,exports.default=p;
},{}],"E7iI":[function(require,module,exports) {
"use strict";var t,e,n,i,s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},o=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},r=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};Object.defineProperty(exports,"__esModule",{value:!0});var a=require("@bilibili-live/web-player-common"),l="web-player-show-videoinfo",p=function(){function p(p,h){t.set(this,void 0),e.set(this,0),n.set(this,{style:{},scope:null}),i.set(this,a.createElement("div",{classname:"web-player-video-info-panel",attributes:[["style","display: none;\n        position: absolute;\n        padding: 15px 36px 15px 15px;\n        text-align: left;\n        color: #fff;\n        background-color: rgba(28, 28, 28, 0.8);\n        border-radius: 4px;\n        font-size: 12px;\n        z-index: 102;\n        cursor: text;\n        user-select: text;\n      "]]})),o(this,t,p),o(this,n,s(s({},r(this,n)),h)),this.initPanel(),p.appendChild(r(this,i)),"1"===localStorage.getItem(l)&&(this.status=1)}return Object.defineProperty(p.prototype,"status",{get:function(){return r(this,e)},set:function(t){o(this,e,t),r(this,i).style.display=1===t?"block":"none",localStorage.setItem(l,""+t)},enumerable:!1,configurable:!0}),p.prototype.destroy=function(){r(this,t).removeChild(r(this,i))},p.prototype.initPanel=function(){var t=this,e=r(this,n).style;Object.keys(e).forEach(function(n){r(t,i).style[n]=e[n]});var s=this.createCloseBtn();r(this,i).appendChild(s),null!=r(this,n).scope&&r(this,i).appendChild(r(this,n).scope)},p.prototype.createCloseBtn=function(){var t=this,e=a.createElement("div",{text:"[x]",attributes:[["style","position: absolute;\n        top: 10px;\n        right: 10px;\n        width: 14px;\n        height: 14px;\n        line-height: 14px;\n        text-align: center;\n        cursor: pointer;"]]});return e.addEventListener("click",function(e){e.stopPropagation(),t.status=0}),e},p}();t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new WeakMap,exports.default=p;
},{"@bilibili-live/web-player-common":"KGHo"}],"SR9Z":[function(require,module,exports) {
"use strict";var e,t,i,a,r,n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__classPrivateFieldSet||function(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i},s=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var d=require("@bilibili-live/web-player-common"),l=p(require("./wave-graph")),h=p(require("./panel")),u="p-video-info-",c=function(){function p(p){var u=this;e.set(this,void 0),t.set(this,void 0),i.set(this,void 0),a.set(this,0),r.set(this,void 0),this.videoTemplate={mimeType:{label:"Mime Type",data:""},playerCore:{label:"Player Core",data:""},videoInfo:{label:"Video Info",data:""},audioInfo:{label:"Audio Info",data:""},encoder:{label:"Encoder",data:""},streamHost:{label:"Stream Host",data:""},bufferLength:{label:"Buffer Length",data:""},droppedFrames:{label:"Decoded Frames",data:""},networkActivity:{label:"Download Bitrate",data:""}},this.template=Object.keys(this.videoTemplate).map(function(e){var t;return(t={})[e]=u.videoTemplate[e].data,t}).reduce(function(e,t){return n(n({},e),t)}),this.templateProxy=this.createTemplateProxy(),o(this,e,p),o(this,i,d.createElement("div")),o(this,r,new l.default({width:180,height:14})),s(this,i).appendChild(this.combineDataElement()),o(this,t,new h.default(s(this,e),{scope:s(this,i),style:{top:"10px",left:"10px"}}))}return p.prototype.show=function(){s(this,t).status=1,this.repaintGraph()},p.prototype.hide=function(){s(this,t).status=0},p.prototype.destroy=function(){for(var e in o(this,i,null),this.templateProxy)this.templateProxy[e]="";s(this,t).destroy(),s(this,r).destroy()},p.prototype.updateVideoTemplate=function(e){if(0!==s(this,t).status){var i=e.mediaInfo,n=e.realtimeInfo,p=Math.floor(n.videoNetworkActivity/1024),l=this.templateProxy;l.mimeType=i.mimeType,l.playerCore=i.corePlayerType,l.videoInfo=i.width+"x"+i.height+", "+i.fps+"FPS, "+this.computeBps(i.videoDataRate),l.audioInfo=i.audioSampleRate/1e3+"KHz, "+i.audioChannel+", "+this.computeBps(i.audioDataRate),l.encoder=i.encoder,l.streamHost=i.videoSrc.split("://")[1].split("/")[0],l.networkActivity=d.roundNumber(p/1024*8,2)+"Mbps",l.bufferLength=n.videoBufferLength+"s",l.droppedFrames=n.droppedFrames+"/"+n.decodedFrames+", "+(n.decodedFrames-s(this,a)<0?0:n.decodedFrames-s(this,a))+"FPS",o(this,a,n.decodedFrames),n.decodedFrames>0&&s(this,r).updateGraph(p),this.repaintGraph()}},p.prototype.createTemplateProxy=function(){return new Proxy(this.template,{get:function(e,t,i){if(t in e)return e[t];throw new ReferenceError('Prop name "'+t+'" does not exist.')},set:function(e,t,i,a){var r;if(e[t]!==i){e[t]=i;var n=null===(r=document.getElementById(""+u+t))||void 0===r?void 0:r.querySelector(".web-player-line-data");null!=n&&(n.textContent=i)}return!0}})},p.prototype.repaintGraph=function(){if(0!==s(this,t).status){var e=s(this,r).getGraph(),i=document.querySelector(".web-player-info-graph");null!=i&&(i.innerHTML=e)}},p.prototype.combineDataElement=function(){var e=this,t=document.createDocumentFragment();return Object.keys(this.videoTemplate).forEach(function(i){var a=document.createElement("div");a.id=""+u+i,a.style.cssText+="\n          min-width: 290px;\n          height: 18px;\n          line-height: 18px;\n          font-size: 12px;\n        ",a.innerHTML='\n          <div style="display: inline-block;\n          white-space: nowrap;\n          width: 100px;\n          text-align: right;\n          font-weight: 500;\n          margin-right: 10px;">'+e.videoTemplate[i].label+":</div>\n          "+("networkActivity"===i?'<div style="display: inline-block; margin-right: 10px;" class="web-player-info-graph">'+s(e,r).getGraph()+"</div>":"")+'\n          <div style="display: inline-block; min-width: 58px" class="web-player-line-data">'+e.videoTemplate[i].data+"</div>\n        ",t.appendChild(a)}),t},p.prototype.computeBps=function(e){return e<1e3?d.roundNumber(e,0)+"Kbps":d.roundNumber(e/1e3,1)+"Mbps"},p}();e=new WeakMap,t=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakMap,exports.default=c;
},{"@bilibili-live/web-player-common":"KGHo","./wave-graph":"RYhb","./panel":"E7iI"}],"qhQO":[function(require,module,exports) {

},{}],"ywxt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@bilibili-live/web-player-common");require("./modal.less");var e=function(){function e(t,i){this.container=t,this._snippet=['<div class="blp-plugin-modal-header"></div>','<div class="blp-plugin-modal-body"></div>','<div class="blp-plugin-modal-footer clearfix"></div>','<div class="blp-plugin-modal-close"><i class="live-icon-close"></i></div>'],this._opts=Object.assign({},e._DEFAULT_OPTIONS,i),this._initialize()}return e.prototype.show=function(){var t=this._opts,e=this._template;this._freshPos(),e._container.classList.add("active"),"function"==typeof t.onShow&&t.onShow()},e.prototype.hide=function(){var t=this._opts;this._template._container.classList.remove("active"),"function"==typeof t.onHide&&t.onHide(),t.autoRemove&&this.destroy()},e.prototype.destroy=function(){this._template._container.remove()},e.prototype._initialize=function(){this._create()._bindEvents(),this._opts.autoShow&&this.show()},e.prototype._create=function(){var e=t.createElement("div",{classname:"blp-plugin-modal"});e.innerHTML=this._snippet.join(""),this._template={_container:e,_header:e.querySelector(".blp-plugin-modal-header"),_body:e.querySelector(".blp-plugin-modal-body"),_footer:e.querySelector(".blp-plugin-modal-footer"),_close:e.querySelector(".blp-plugin-modal-close")};var i=this._template,n=this._opts;return i._header.innerText=n.title,i._body.innerHTML=""!==n.html?n.html:n.text,this._createBtn(i._footer,n.btns,n),n.hideBtn&&i._close.classList.add("active"),this.container.appendChild(e),null!=n.width&&0!==n.width&&(e.style.width=n.width+"px"),this},e.prototype._createBtn=function(e,i,n){var o=this;if(i instanceof Array)i.forEach(function(t){o._createBtn(e,t,n)});else{var l=null;switch(i.type){case"submit":(l=t.createElement("button",{classname:"blp-plugin-modal-btn submit-btn"})).innerHTML=i.text,"function"==typeof i.click&&l.addEventListener("click",function(t){i.click(t),o.hide()});break;case"cancel":(l=t.createElement("button",{classname:"blp-plugin-modal-btn cancel-btn"})).innerHTML=i.text,"flex-report"===n.btnPostion&&l.classList.add("live-bilibili-player-report-cancel"),l.addEventListener("click",function(){var t;null===(t=i.click)||void 0===t||t.call(i),o.hide()})}null!=l&&e.append(l)}},e.prototype._bindEvents=function(){var t=this;return this._opts.hideBtn&&this._template._close.addEventListener("click",function(){t.hide()}),this},e.prototype._freshPos=function(){var t=this._opts,e=this._template._container,i=this._template._footer,n="",o="",l=0,s=0,a=e.style;switch(t.btnPostion){case"flex-report":i.style.cssText="\n          display: flex;\n          justify-content: space-around;\n          margin-top: 69px;\n        ",a.height="190px",a.padding="20px"}switch(t.position){case"center-center":n="50%",o="50%",l=-1*parseInt(a.width)/2,s=-1*parseInt(a.height)/2}a.left=n,a.top=o,a.marginLeft=l+"px",a.marginTop=s+"px"},e._DEFAULT_OPTIONS={title:"Bilibili HTML5 Live Player Modal",theme:"white",text:"Are you confirm the operation?",html:"",btns:[{type:"submit",text:"Confirm",click:function(){}},{type:"cancel",text:"Cancel",click:function(){}}],mask:!0,position:"center-center",hideBtn:!0,autoShow:!1,autoRemove:!1},e}();exports.default=e;
},{"@bilibili-live/web-player-common":"KGHo","./modal.less":"qhQO"}],"wafJ":[function(require,module,exports) {
"use strict";var e,t,r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{a(n.next(e))}catch(t){o(t)}}function l(e){try{a(n.throw(e))}catch(t){o(t)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(l){o=[6,l],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},i=this&&this.__classPrivateFieldSet||function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var a=l(require("./modal")),u=require("@bilibili-live/web-player-common");require("./index.less");var c={reportReason:"/xlive/web-ucenter/v1/dMReport/ForReason",reportDanmaku:"/xlive/web-ucenter/v1/dMReport/Report"},d=function(){function l(r){e.set(this,null),t.set(this,void 0),i(this,t,r)}return l._createModalHtml=function(e,t){var r=t.reduce(function(e,t){return e+"<li>"+t.reason+"</li>"},'<li class="web-player-report-item-default" style="display: none">请选择举报理由喔~</li>');return'\n      <div class="web-player-report-wrap">\n        <div class="web-player-report-uname">'+e.uname+'</div>\n        <div class="web-player-report-msg">'+e.msg+'</div>\n        <div class="web-player-report-select-wrap">\n          <div class="web-player-report-select-input">\n            <div class="web-player-report-curt">请选择举报理由喔~</div>\n            <div class="web-player-report-icon"></div>\n          </div>\n          <ul class="web-player-report-ul">'+r+"</ul>\n        </div>\n      </div>\n    "},l.prototype.show=function(e){return r(this,void 0,Promise,function(){var t,r;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.ajax(c.reportReason)];case 1:return r=n.sent(),t=null!=r?r.data:[{id:1,reason:"违法违规"},{id:2,reason:"低俗色情"},{id:3,reason:"垃圾广告"},{id:4,reason:"辱骂引战"},{id:5,reason:"政治敏感"},{id:6,reason:"青少年不良信息"},{id:7,reason:"其他"}],[3,3];case 2:return n.sent(),t=[{id:1,reason:"违法违规"},{id:2,reason:"低俗色情"},{id:3,reason:"垃圾广告"},{id:4,reason:"辱骂引战"},{id:5,reason:"政治敏感"},{id:6,reason:"青少年不良信息"},{id:7,reason:"其他"}],[3,3];case 3:return this.handleReport(e,t),[2]}})})},l.prototype.resetReasonVisible=function(e){s([],e.children).forEach(function(e){e instanceof HTMLElement&&(e.style.display="block")})},l.prototype.checkReportState=function(){var e=document.querySelector(".live-bilibili-player-report-cancel");null==e||e.click()},l.prototype.handleReport=function(s,u){var c=this;this.checkReportState();var d=l._createModalHtml(s,u);null==o(this,e)&&i(this,e,new a.default(o(this,t),{title:"举报弹幕",html:d,btns:[{type:"submit",text:"警察叔叔就是他",click:function(){return r(c,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,this._submitFunction(s,u)];case 1:return e.sent(),x(),[2]}})})}},{type:"cancel",text:"饶他一命",click:function(){x()}}],width:360,btnPostion:"flex-report"}));var p=document.querySelector(".web-player-report-uname"),f=document.querySelector(".web-player-report-msg");p.innerText=s.uname,s.img_url?f.innerHTML="<img src="+s.img_url+">":f.innerText=s.msg,o(this,e).show();var h=document.querySelector(".web-player-report-ul"),y=document.querySelector(".web-player-report-curt"),v=document.querySelector(".web-player-report-select-wrap"),b=document.querySelector(".blp-plugin-modal-btn"),m=document.querySelector(".web-player-report-item-default"),w=function(e){c.resetReasonVisible(h);var t=e.target.innerText;b.disabled="请选择举报理由喔~"===t&&"获取不到举报理由，请尝试刷新后举报喔~"===t,y.innerText=t,h.style.display="none",m.style.display="block",e.target.style.display="none"}.bind(this),_=function(){h.style.display="none"}.bind(this),g=function(){h.style.display="block"}.bind(this),x=function(){var t;y.innerText="请选择举报理由喔~",m.style.display="none",c.resetReasonVisible(h),h.removeEventListener("click",w),null==v||v.removeEventListener("mouseover",g),null==v||v.removeEventListener("mouseout",_),null===(t=o(c,e))||void 0===t||t.destroy(),i(c,e,null)};b.disabled=!0,h.addEventListener("click",w),null==v||v.addEventListener("mouseover",g),null==v||v.addEventListener("mouseout",_)},l.prototype._submitFunction=function(i,s){var l;return r(this,void 0,Promise,function(){var r,a,d,p,f,h;return n(this,function(n){switch(n.label){case 0:if(r=o(this,t).querySelector(".web-player-report-curt"),a=r.innerText,d=i.checkInfo,p=0,null!=(f=s.filter(function(e){return e.reason===a}))&&0!==f.length&&(p=f[0].id),""===a)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,u.ajax(c.reportDanmaku,{method:"POST",data:{reason:a,roomid:i.roomid,msg:i.msg,tuid:i.uid,ts:d.ts,sign:d.ct,reason_id:p,dm_type:i.type,file_id:i.file_id,img_url:i.img_url}})];case 2:return n.sent(),null===(l=o(this,e))||void 0===l||l.hide(),[3,4];case 3:return h=n.sent(),console.log(h),[3,4];case 4:return[2]}})})},l}();e=new WeakMap,t=new WeakMap,exports.default=d;
},{"./modal":"ywxt","@bilibili-live/web-player-common":"KGHo","./index.less":"qhQO"}],"MY3w":[function(require,module,exports) {
"use strict";var e,t,n,i,o=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},r=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n};Object.defineProperty(exports,"__esModule",{value:!0});var a=require("@bilibili-live/web-player-common");require("./log-panel.less");var s="web-player-show-log",l=function(){function l(r){e.set(this,a.createElement("div",{classname:"web-player-log-panel"})),t.set(this,a.createElement("pre")),n.set(this,!1),i.set(this,null),this.initPanel(),r.appendChild(o(this,e)),"1"===localStorage.getItem(s)&&this.show()}return l.prototype.show=function(){o(this,e).style.display="block",o(this,n)||r(this,i,this.syncLogger()),localStorage.setItem(s,"1")},l.prototype.destroy=function(){var t;null===(t=o(this,i))||void 0===t||t.call(this),o(this,e).remove()},l.prototype.initPanel=function(){var t=this.createCloseBtn();o(this,e).appendChild(t)},l.prototype.createCloseBtn=function(){var t=this,n=a.createElement("div",{text:"[x]",classname:"close-btn"});return n.addEventListener("click",function(n){n.stopPropagation(),o(t,e).style.display="none",localStorage.setItem(s,"0")}),n},l.prototype.syncLogger=function(){var i=this;r(this,n,!0);var s=document.createDocumentFragment();return a.logger.history().forEach(function(e){s.appendChild(l(e))}),o(this,t).appendChild(s),o(this,e).appendChild(o(this,t)),a.logger.watch(function(e){o(i,t).appendChild(l(e))});function l(e){var t=document.createElement("code");return t.classList.add("log-"+e.level),t.textContent=a.logger.stringify(e,{tag:!1,time:!1})+"\n",t}},l}();e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,exports.default=l;
},{"@bilibili-live/web-player-common":"KGHo","./log-panel.less":"qhQO"}],"PTXm":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(l,u){function o(e){try{i(r.next(e))}catch(n){u(n)}}function c(e){try{i(r.throw(e))}catch(n){u(n)}}function i(e){var n;e.done?l(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,c)}i((r=r.apply(e,n||[])).next())})},n=this&&this.__generator||function(e,n){var t,r,l,u,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(l=2&u[0]?r.return:u[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,u[1])).done)return l;switch(r=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){o.label=u[1];break}if(6===u[0]&&o.label<l[1]){o.label=l[1],l=u;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(u);break}l[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(e,o)}catch(c){u=[6,c],r=0}finally{t=l=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function t(t){return e(this,void 0,Promise,function(){var e;return n(this,function(n){switch(n.label){case 0:return!0!==(null==(e=o())?void 0:e.contains(t))?[3,2]:[4,u()];case 1:return n.sent(),[3,4];case 2:return[4,l(t)];case 3:n.sent(),n.label=4;case 4:return[2]}})})}function r(e){for(var n=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],t=0,r=n;t<r.length;t++){var l=r[t];document.addEventListener(l,e)}return function(){for(var t=0,r=n;t<r.length;t++){var l=r[t];document.removeEventListener(l,e)}}}function l(t){return e(this,void 0,Promise,function(){var e,r,l;return n(this,function(n){for(e=0,r=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];e<r.length;e++)if("function"==typeof t[l=r[e]])return[2,t[l]()];throw new Error("browser unsupported fullscreen")})})}function u(){return e(this,void 0,Promise,function(){var e,t,r;return n(this,function(n){if(null==o())return[2];for(e=0,t=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"];e<t.length;e++)if("function"==typeof(r=document[t[e]]))return[2,r.call(document)];return[2]})})}function o(){for(var e=0,n=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"];e<n.length;e++){var t=document[n[e]];if(null!=t)return t}return null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={onChange:r,toggleFullScreen:t,getFullscreenElement:o,exitFullscreen:u};
},{}],"hY1T":[function(require,module,exports) {
"use strict";var e,t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function u(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,u)}s((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.reportManyLog=exports.getLogs=exports.logLevelColos=exports.logStorageConfig=exports.removeLog=exports.handleScoket=void 0;var a,i,u,s=require("@bilibili-live/web-player-common"),l=require("@bilibili-live/web-player-socket"),c=require("./biz-common"),d={uuid:x(),roomId:0,uvid:"",beforeInitLogfinished:!1,maxTime:432e6,maxCount:2e5},p="live-web-player",g=new s.IDB("livePlayerLog"),f=[],h={playerLog:"uuid",playerLogContent:"uuid, playerLogId"};function y(){return r(this,void 0,Promise,function(){var e,r,o,l;return n(this,function(n){switch(n.label){case 0:return void 0===a||void 0===u?[3,2]:(u.uuid=x(),u.createTime=Date.now(),u.updateTime=Date.now(),u.ref=window.location.href,[4,a.add(u)]);case 1:return n.sent(),[2];case 2:return[4,g.version(1).stores(h)];case 3:return n.sent(),a=g.getStore("playerLog"),i=g.getStore("playerLogContent"),u={uuid:d.uuid,roomId:d.roomId,uid:c.getUserId(),uvid:d.uvid,ref:window.location.href,createTime:Date.now(),updateTime:Date.now()},[4,a.add(u)];case 4:return e=n.sent(),f.forEach(function(r){i.add(t(t({},r),{playerLogId:e,uuid:s.uuid()})).catch(function(){})}),f.length=0,d.beforeInitLogfinished=!0,[4,a.getAll()];case 5:return r=n.sent(),Array.isArray(r)?(o=[],r.forEach(function(e){Date.now()-e.createTime>d.maxTime&&o.push(e.uuid)}),[4,b(o)]):[3,7];case 6:n.sent(),n.label=7;case 7:return[4,i.count()];case 8:return l=n.sent(),[4,a.getAll()];case 9:return r=(r=n.sent()).sort(function(e,t){return e.createTime-t.createTime}),l>d.maxCount&&Array.isArray(r)?r.length>1?[4,b([r[0].uuid])]:[3,11]:[3,13];case 10:return n.sent(),[3,13];case 11:return[4,i.clear()];case 12:n.sent(),n.label=13;case 13:return[2]}})})}function m(e){if(d.beforeInitLogfinished&&void 0!==u)return i.add(t(t({},e),{playerLogId:u.uuid,uuid:s.uuid()})).catch(function(){}),u.updateTime=Date.now(),void a.put(u).catch(function(){});f.push(t({uuid:s.uuid()},e))}function v(e){switch(e.cmd){case l.SocketMsgType.PlayerLogRecycle:e.data.user_id===c.getUserId()&&e.data.app_name===p&&I({timeRage:[e.data.start_timestamp,e.data.end_timestamp],sourceType:"socket-report",msgId:e.data.msg_id,appId:e.data.app_id}).catch(console.error)}}function b(e){return r(this,void 0,Promise,function(){var t,r,o,s,l,c,d;return n(this,function(n){switch(n.label){case 0:t=0,r=e,n.label=1;case 1:return t<r.length?(o=r[t])===(null==u?void 0:u.uuid)?[3,8]:[4,i.queryWithIndex("playerLogId",o)]:[3,9];case 2:s=n.sent(),l=0,c=s,n.label=3;case 3:return l<c.length?(d=c[l],[4,i.delete(d.uuid)]):[3,6];case 4:n.sent(),n.label=5;case 5:return l++,[3,3];case 6:return[4,a.delete(o)];case 7:n.sent(),n.label=8;case 8:return t++,[3,1];case 9:return[2]}})})}function w(e){d.roomId=e.roomId,d.uvid=e.uvid,y().catch(s.logger.error),null!=e.socket&&e.socket.on("message",v)}function L(e,a){var i,u;return void 0===a&&(a=-1),r(this,void 0,Promise,function(){var r,s,l,c,d,p,f,h,y,m,v;return n(this,function(n){switch(n.label){case 0:return r=[],s=null!==(i=e[0])&&void 0!==i?i:Date.now()-6e3,l=null!==(u=e[1])&&void 0!==u?u:Date.now(),c=g.getStore("playerLog"),d=g.getStore("playerLogContent"),[4,c.getAll()];case 1:p=n.sent(),f=p.filter(function(e){return e.updateTime>s&&e.updateTime<=l}).sort(function(e,t){return t.createTime-e.createTime}),a>0&&f.length>a&&(f=f.slice(0,a-1)),h=0,y=f,n.label=2;case 2:return h<y.length?(m=y[h],[4,d.queryWithIndex("playerLogId",m.uuid)]):[3,5];case 3:v=n.sent(),r.push(t(t({},m),{logList:v.map(function(e){e.playerLogId,e.uuid;var t=o(e,["playerLogId","uuid"]);return{content:t.content,ts:t.ts,color:exports.logLevelColos[t.level]}}).sort(function(e,t){return e.ts-t.ts})})),n.label=4;case 4:return h++,[3,2];case 5:return[2,r]}})})}function I(e){return r(this,void 0,Promise,function(){var r,a,i,u,s,l,d,p;return n(this,function(n){switch(n.label){case 0:return[4,L(e.timeRage,e.max)];case 1:if(r=n.sent(),a=[],""!==(i=void 0===e.msgId?"":"live-log-report-"+e.msgId)){if(null!==localStorage.getItem(i))return[2];localStorage.setItem(i,"1")}u=0,s=r,n.label=2;case 2:return u<s.length?(l=s[u],d=l.uuid,p=o(l,["uuid"]),[4,c.reportLog(t(t({},p),{reportType:e.reportType,reportDetails:e.reportDetails}),e.sourceType,e.msgId,e.appId)]):[3,5];case 3:n.sent()&&a.push(d),n.label=4;case 4:return u++,[3,2];case 5:return[4,b(a)];case 6:return n.sent(),""!==i&&localStorage.removeItem(i),[2]}})})}function x(){return s.uuid().substr(0,8)}g.on("error",function(e){s.logger.error(e)}),s.logger.watch(m),exports.handleScoket=v,exports.removeLog=b,exports.logStorageConfig=w,exports.logLevelColos=((e={})[s.LogLevel.Error]="red",e[s.LogLevel.Info]="blue",e[s.LogLevel.Warn]="orange",e[s.LogLevel.Debug]="gray",e),exports.getLogs=L,exports.reportManyLog=I;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player-socket":"MWvE","./biz-common":"YQ89"}],"nuNG":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&t(i,e,a);return n(i,e),i},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{u(i.next(e))}catch(t){o(t)}}function l(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,l)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(l){o=[6,l],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},r=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,a=e.length;n<i;n++,a++)e[a]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RoomPlayer=void 0;var c,d=require("@bilibili-live/web-player-common"),f=require("@bilibili-live/web-player"),v=i(require("@bilibili-live/web-player-socket")),p=require("./danmaku-biz"),h=require("./biz-common"),m=require("./biz-interface"),y=s(require("@bilibili-live/web-player-track")),g=require("./ui-components/end-recommend-panel"),E=s(require("./ui-components/video-logo")),k=s(require("./ui-components/feedback")),w=require("./ui-components/error-panel"),b=s(require("./ui-components/preround-conuter")),S=s(require("@bilibili-live/web-player-contextmenu")),T=s(require("@bilibili-live/web-player-video-info")),I=s(require("@bilibili-live/web-player-danmaku-report")),M=s(require("./ui-components/log-panel")),P=s(require("./browser-fullscreen")),C=require("./log-storage");d.logger.printToConsole=d.wpd.Log2Console,h.commonLogInfo("RoomPlayer"),function(e){e[e.Click=1]="Click",e[e.Esc=2]="Esc",e[e.DBClick=3]="DBClick",e[e.Other=4]="Other"}(c||(c={}));var x=function(){function t(t,ye){var ge,Ee,ke,we,be=this;this.container=t,this.opts=ye,n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),x.set(this,null),N.set(this,void 0),A.set(this,void 0),B.set(this,void 0),U.set(this,void 0),H.set(this,void 0),j.set(this,[]),z.set(this,null),Q.set(this,null),G.set(this,!1),J.set(this,new d.EventBus),K.set(this,null),Y.set(this,[]),X.set(this,0),Z.set(this,!1),$.set(this,void 0),ee.set(this,void 0),te.set(this,null),ne.set(this,function(){}),this.reload=function(){return a(be,void 0,Promise,function(){var e,t,i,a;return o(this,function(o){switch(o.label){case 0:if(r(this,Z))return[2];l(this,Z,!0),null===(i=r(this,te))||void 0===i||i.remove(),l(this,te,null),o.label=1;case 1:return o.trys.push([1,,4,5]),e=r(this,s),null!=(t=r(this,n))?[3,3]:[4,h.loadRoomInfo(e,this.container)];case 2:t=o.sent(),o.label=3;case 3:if(r(this,G))return[2];switch(r(this,se).call(this),null===(a=r(this,Q))||void 0===a||a.setRoomStatus(t.live_status),t.live_status){case m.RoomStatus.Preparing:r(this,ve).call(this,e),this.updateRoomStatus(m.RoomStatus.Preparing);break;case m.RoomStatus.Live:this.updateRoomStatus(m.RoomStatus.Live),l(this,x,r(this,oe).call(this,t,r(this,N)));break;case m.RoomStatus.Round:this.updateRoomStatus(m.RoomStatus.Round),l(this,x,r(this,ie).call(this))}return this.emit(d.ExternalEventType.WebPlayerCreated),null!=r(this,x)&&(r(this,he).call(this),r(this,j).push(O(r(this,x),this))),r(this,j).push(r(this,re).call(this,r(this,N))),l(this,n,void 0),[3,5];case 4:return l(this,Z,!1),d.logger.info("room player is reload"),[7];case 5:return[2]}})})},ie.set(this,function(){var e=r(be,s),t=new f.RoundPlayer(be.container,{roomId:e,userId:r(be,i)});return t.on("failed",function(t,n,i){void 0===i&&(i=y.default.ErrorCode.RoomRoundUnknow),t===f.NonRoundStatus.Preround?r(be,j).push(b.default(be.container,be.reload,n)):t===f.NonRoundStatus.Nonenabled?r(be,ve).call(be,e,"系统维护中,轮播暂时不可用"):(y.default.error(i,""+t),r(be,j).push(w.createErrorPanel(be.container,i)))}),d.EventBus.forwardEvent(t,be,[d.ExternalEventType.StartPlayRound,d.ExternalEventType.Reload,[f.VideoEventType.FirstFrame,d.ExternalEventType.FirstFrame],[f.VideoEventType.Play,d.ExternalEventType.Playing],[f.VideoEventType.Pause,d.ExternalEventType.Paused]]),r(be,j).push(R(r(be,A),t.ctrl,r(be,i)),_(t.ctrl,be)),t}),ae.set(this,function(){P.default.exitFullscreen().then(function(){be.emit(d.ExternalEventType.FeedBackClick)}).catch(function(e){console.warn(e)})}),oe.set(this,function(e,t){var n,a,o=be.opts.rnd,l=new f.LivePlayer(be.container,{roomId:r(be,s),roomInfo:e,userId:r(be,i),rnd:o},t);return!0===(null===(n=be.opts.UI)||void 0===n?void 0:n.showHEVCQuality)&&l.showHEVCQuality(!0),!0===(null===(a=be.opts.UI)||void 0===a?void 0:a.showMirror)&&(l.ctrl.getCtrlUI().ctrlItemVisibility.mirror=!0),null!=r(be,K)&&l.setAutoSyncCfg(r(be,K)),l.on(f.LivePlayerEvent.Failed,function(e,t){y.default.error(e,null!=t?t:""),r(be,j).push(w.createErrorPanel(be.container,e,t)),l.destroy()}),l.on(f.LivePlayerEvent.LiveStatusChange,function(e){be.updateRoomStatus(m.RoomStatus.Preparing),r(be,me).call(be),e===m.RoomStatus.Round?r(be,j).push(b.default(be.container,be.reload)):r(be,ve).call(be,r(be,s))}),d.EventBus.forwardEvent(l,be,[d.ExternalEventType.SwitchLine,d.ExternalEventType.SwitchQuality,d.ExternalEventType.SwitchQualityNotLogin,d.ExternalEventType.Reload,[f.VideoEventType.FirstFrame,d.ExternalEventType.FirstFrame],[f.VideoEventType.Play,d.ExternalEventType.Playing],[f.VideoEventType.Pause,d.ExternalEventType.Paused]]),r(be,j).push(R(r(be,A),l.ctrl,r(be,i)),_(l.ctrl,be),L(r(be,B),l)),l}),re.set(this,function(e){d.logger.info("room player listen socket message");var t=function(e){d.logger.warn("refresh by socket "+e),be.reload().catch(function(e){d.logger.error(e)})},n=r(be,s),i=e.on("message",function(e){if(!e.cmd.startsWith("DANMU_MSG")){switch(e.cmd){case v.SocketMsgType.Live:if(r(be,x)instanceof f.LivePlayer)break;r(be,j).push(d.disperseAction(1e4,function(){t(e.cmd)}));break;case v.SocketMsgType.Round:if(r(be,x)instanceof f.RoundPlayer)break;t(e.cmd);break;case v.SocketMsgType.Preparing:r(be,me).call(be),1===e.round?r(be,j).push(b.default(be.container,be.reload)):r(be,ve).call(be,n),be.updateRoomStatus(m.RoomStatus.Preparing);break;case v.SocketMsgType.End:case v.SocketMsgType.Close:case v.SocketMsgType.Block:r(be,ve).call(be,n),be.updateRoomStatus(m.RoomStatus.Preparing);break;case v.SocketMsgType.Refresh:t(e.cmd);break;case v.SocketMsgType.AreaBlock:break;case v.SocketMsgType.HotRoomNotify:if(!Array.isArray(e.data.random_delay_req_v2))break;i=performance.now()+1e3*Number(e.data.ttl),isNaN(i)?d.logger.error("HotRoomNotify ttl error: "+String(e.data.ttl)):(d.logger.debug("HotRoomNotify msg: "+JSON.stringify(e.data.random_delay_req_v2)),e.data.random_delay_req_v2.forEach(function(e){var t=e.path,n=e.delay;d.ajax.disperse(t,{scope:n,expiresTime:i})}))}var i;be.emit(d.ExternalEventType.ReceiveMessage,e)}}),a=e.on("heartbeat",function(e){be.emit(d.ExternalEventType.ReceiveOnlineCount,e.count)});return function(){i(),a()}}),le.set(this,function(e,t){var n;if(r(be,x)instanceof f.LivePlayer){var i=null===(n=r(be,x))||void 0===n?void 0:n.getVideoEl();"danmaku"===e&&r(be,A).changeMaskState(i,t.enableMask),"playStatus"===e&&!0!==t&&(clearTimeout(r(be,X)),r(be,A).changeMaskState(i,!1,!0))}}),ue.set(this,function(e,t){return a(be,void 0,Promise,function(){var n,i,a,l,u,c,f=this;return o(this,function(o){switch(o.label){case 0:switch(e){case"report":return[3,1];case"shield":return[3,3];case"addBlackList":return[3,4]}return[3,5];case 1:return[4,r(this,$).show({uid:t.uid,roomid:r(this,s),uname:t.uname,msg:t.text,checkInfo:t.checkInfo,type:t.dmType,file_id:null!==(l=null!==(i=null===(n=t.voiceConfig)||void 0===n?void 0:n.file_id)&&void 0!==i?i:null===(a=t.emoticonOptions)||void 0===a?void 0:a.emoticon_unique)&&void 0!==l?l:"",img_url:null!==(c=null===(u=t.emoticonOptions)||void 0===u?void 0:u.url)&&void 0!==c?c:""})];case 2:return o.sent(),[3,5];case 3:return p.roomBlockAdapter({component:"block",action:"addShieldUser",data:{uid:t.uid,uname:t.uname}},r(this,A),r(this,s),function(e,t){f.emit(d.ExternalEventType.Set,{component:"block",action:e,data:t})}),[3,5];case 4:return this.emit(d.ExternalEventType.Set,{component:"block",action:"addBlackList",data:t.uname}),[3,5];case 5:return[2]}})})}),se.set(this,function(){r(be,j).forEach(function(e){return e()}),l(be,j,[])}),ce.set(this,function(){var t=e(e({NAME:"BILIBILI HTML5 LIVE PLAYER",VERSION:h.ENV.VERSION},"development"===h.ENV.NODE_ENV?{socket:r(be,N)}:{}),{play:function(){var e;null===(e=r(be,x))||void 0===e||e.play()},pause:function(){var e;null===(e=r(be,x))||void 0===e||e.pause()},volume:function(e){var t;null===(t=r(be,x))||void 0===t||t.volume(e/100)},reload:be.reload,destroy:be.destroy,getOperableElements:be.getOperableElements,freeze:function(){var e;null===(e=r(be,x))||void 0===e||e.blockStream()},refresh:function(){be.reload().catch(function(e){d.logger.error(e)})},set:function(e){"block"===e.component&&p.roomBlockAdapter(e,r(be,A),r(be,s),function(e,t){be.emit(d.ExternalEventType.Set,{component:"block",action:e,data:t})})},setFullscreenDanmaku:function(e){null!=r(be,x)&&D(e,r(be,x))},sendDanmaku:function(e){return a(be,void 0,void 0,function(){var t=this;return o(this,function(n){switch(n.label){case 0:return[4,r(this,A).userSendDanmaku(e).then(function(n){var i={uniqueID:e.uniqueID,response:n};return t.emit(d.ExternalEventType.SendDanmaku,i),i})];case 1:return[2,n.sent()]}})})},toast:function(e){d.toast(e,be.container)},notifyInOperation:function(e){be.getOperableElements().mainElement.style.zIndex=""+(e?9:-1)},notifyAnnouncement:be.notifyAnnouncement,injectInitAPIData:be.injectInitAPIData,getVideoEl:function(){var e,t;return null!==(t=null===(e=r(be,x))||void 0===e?void 0:e.getVideoEl())&&void 0!==t?t:null},changeUIStatus:function(e){var t,n,i;!1===e.feedback?null===(t=r(be,z))||void 0===t||t.call(be):!0===e.feedback&&null==r(be,z)&&l(be,z,k.default(be.container,r(be,ae))),!1===e.logo?null===(n=r(be,Q))||void 0===n||n.destroy():!0===e.logo&&null==r(be,Q)&&l(be,Q,E.default(be.container)),!1===e.recommend&&null==r(be,x)&&r(be,ne).call(be),null!=e.showHEVCQuality&&r(be,x)instanceof f.LivePlayer&&r(be,x).showHEVCQuality(e.showHEVCQuality),be.opts.UI=Object.assign({},be.opts.UI,e),null!=e.specialDanmaku&&(r(be,A).set({specialType:e.specialDanmaku.dmTag,specialTypeExtra:e.specialDanmaku.extra}),null!=r(be,x)&&(r(be,x).ctrl.getCtrlUI().ctrlItemVisibility.danmakuPanel=null!==(i=e.specialDanmaku.isHideDanmakuPanel)&&void 0!==i&&i)),null!=r(be,x)&&null!=e.showMirror&&(r(be,x).ctrl.getCtrlUI().ctrlItemVisibility.mirror=e.showMirror)},changeCtrlVisible:function(e){var t,n;e?null===(t=r(be,x))||void 0===t||t.ctrl.show():null===(n=r(be,x))||void 0===n||n.ctrl.hide()},capturePic:function(e,t){var n,i;return null!==(i=null===(n=r(be,x))||void 0===n?void 0:n.capturePic(e,t))&&void 0!==i?i:null},wasmHEVCSupported:f.isBwpSupported,on:function(t,i){var a;if(t===d.ExternalEventType.Initialized)return i({type:"html5"}),void d.logger.info("room player emit external event: Initialized");if(t===d.ExternalEventType.InitDanmaku){var o=r(be,A).getDanmakuConfig();return d.logger.info("room player emit external event: InitDanmaku, data: "+JSON.stringify(o)),void i(e(e({},o),{room_shield:null===(a=r(be,n))||void 0===a?void 0:a.room_shield}))}return be.on(t,i)},once:function(e,t){return be.once(e,t)},addLoadingPicture:function(e){var t;null===(t=r(be,x))||void 0===t||t.setTitlePageImg(e)},stopPlayback:function(e){var t;null!=r(be,x)&&(r(be,x).destroy(),r(be,se).call(be),d.coverImg(null!==(t=null==e?void 0:e.url)&&void 0!==t?t:"//s1.hdslb.com/bfs/static/player/live/html5/images/error@1x.png",be.container),r(be,j).push(function(){d.coverImg(null,be.container)}))},getPlayerInfo:function(){var t,n,i=r(be,x),a={type:1,version:h.ENV.VERSION,playerType:"HTML5",liveStatus:m.RoomStatus.Preparing,playerStatus:0,playingStatus:!1,playurl:"",guid:"",quality:"0",qualityCandidates:[]};if(null==i)return a;var o=i.getPlayerInfo(),l=null!==(t=i.ctrl.getCtrlUI().webFullScreenStatus)&&void 0!==t&&t?1:null!==(n=i.ctrl.getCtrlUI().fullScreenStatus)&&void 0!==n&&n?2:0;return e(e({},a),{liveStatus:i instanceof f.LivePlayer?1:0,playerStatus:l,playingStatus:o.playingStatus,playurl:o.playSrc,guid:o.guid,quality:o.quality,qualityCandidates:o.qualityCandidates.map(function(e){var t=e.label;return{qn:e.value,desc:t}}),volume:i.ctrl.getCtrlUI().volume})},init:function(e,t){if("config"===e&&(null==t?void 0:t.isAdmin))r(be,B).setAdmin();else if("autoSync"===e){var n=t;for(var i in t)n[i]=Number(t[i]);l(be,K,n),r(be,x)instanceof f.LivePlayer&&r(be,x).setAutoSyncCfg(n)}},remainBufferLength:function(){return r(be,x)instanceof f.LivePlayer?r(be,x).remainBufferLength():0},discardFrame:function(e){r(be,x)instanceof f.LivePlayer&&r(be,x).discardFrame(e)},sendGift:function(){},resize:function(){var e;r(be,A).resize(),null===(e=r(be,x))||void 0===e||e.ctrl.setMiniMode(be.container.clientWidth<=500)},noticeGift:function(){},setChasingFrameThreshold:function(){},loadVideo:function(){},changeCtrlIconVisible:function(e){r(be,de).call(be,e)},userFeedback:d.debounce(function(t){return a(be,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return y.default.custom(y.default.CustomCode.UserFeedBack,t),[4,q(e(e({},t),{mid:r(this,i),buvid:r(this,ee)}))];case 1:return n.sent(),[2]}})})},400)}),u=function(e){var n=e;if("function"==typeof t[n]){if(["getPlayerInfo","notifyAnnouncement","notifyInOperation","on","set","getOperableElements","remainBufferLength","receiveOnlineCount"].includes(n))return"continue";var i=t[n];t[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.logger.debug("external call player api: "+n+", args: "+JSON.stringify(e)),i.apply(void 0,e)}}};for(var c in t)u(c);return t}),de.set(this,function(t){var n,i;if(null!=r(be,x)){var a=r(be,x).ctrl.getCtrlUI();a.ctrlItemVisibility=e(e({},a.ctrlItemVisibility),{playStatus:t.play,volume:t.volume,time:t.time,refresh:t.reload,quality:t.quality,rightSetting:t.setting,danmaku:t.danmaku,fullScreen:t.fullscreen,webFullScreen:t.webFullscreen}),t.danmaku?r(be,A).fetchBlockRules():r(be,A).destroy(),t.feedback||null===(n=r(be,z))||void 0===n||n.call(be),t.logo||null===(i=r(be,Q))||void 0===i||i.destroy(),null!=t.el&&a.appendCtrlItem(t.el)}}),fe.set(this,function(e){var t,n;if(r(be,x)instanceof f.LivePlayer){var i=r(be,x).ctrl.getCtrlUI().danmaku,a=null===(t=r(be,x))||void 0===t?void 0:t.getVideoEl();if(null!=i&&null!=a){var o=null===(n=r(be,x))||void 0===n?void 0:n.ctrl.getCtrlUI().playStatus;d.ua.isChrome()?(r(be,A).onSei(e),i.enableMask&&(clearTimeout(r(be,X)),l(be,X,window.setTimeout(function(){o||(i.showMaskOption=!1,r(be,A).changeMaskState(a,!1))},1e4))),i.showMaskOption=!0,!r(be,A).maskState&&o&&r(be,A).changeMaskState(a,i.enableMask)):(i.showMaskOption=!1,i.enableMask=!1,r(be,A).changeMaskState(a,!1))}}}),this.notifyAnnouncement=(ke=!1,function(e,t){void 0===e&&(e=!0),void 0===t&&(t=100),ke!==e&&(ke=e,r(be,A).set({offsetTop:ke?t:0}))}),this.updateRoomStatus=(we=m.RoomStatus.Preparing,function(e){var t;null===(t=r(be,x))||void 0===t||t.destroy(),l(be,x,null),we!==e&&(we=e,be.emit(d.ExternalEventType.LiveStateChange),r(be,pe).call(be).resetHeight())}),this.injectInitAPIData=function(e){r(be,A).initDanmakuConfig(e)},this.on=function(e,t){return r(be,J).on(e,t)},this.once=function(e,t){return r(be,J).once(e,t)},this.emit=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];[d.ExternalEventType.ReceiveMessage,d.ExternalEventType.ReceiveOnlineCount,d.ExternalEventType.SEIData].includes(e)||d.logger.info("room player emit external event: "+e+", data: "+JSON.stringify(n)),(t=r(be,J)).emit.apply(t,u([e],n))},ve.set(this,function(e,t){var n,i,a;void 0===t&&(t=""),null===(n=r(be,te))||void 0===n||n.remove(),l(be,te,document.createElement("div")),be.container.appendChild(r(be,te)),l(be,ne,g.endRecommendPanel(be.container,r(be,te),{roomId:e,rnd:be.opts.rnd,showRecommend:null===(a=null===(i=be.opts.UI)||void 0===i?void 0:i.recommend)||void 0===a||a},function(e){be.emit(d.ExternalEventType.Recommend,e)},t))}),this.destroy=function(){var e,t,n,i;r(be,G)||(l(be,G,!0),null===(e=r(be,te))||void 0===e||e.remove(),l(be,te,null),r(be,Y).forEach(function(e){return e()}),l(be,Y,[]),d.logger.info("room player destroyed"),null===(t=r(be,x))||void 0===t||t.destroy(),r(be,N).destroy(),r(be,A).destroy(),r(be,U).destroy(),r(be,H).destroy(),r(be,B).destroy(),r(be,se).call(be),r(be,J).destroy(),null===(n=r(be,z))||void 0===n||n.call(be),null===(i=r(be,Q))||void 0===i||i.destroy())},this.getOperableElements=function(){var e=r(be,pe).call(be),t=e.el;return(0,e.resetHeight)(),{mainElement:t}},pe.set(this,function(){var e="web-player-inject-wrap",t=be.container.querySelector("."+e);return null==t&&((t=document.createElement("div")).classList.add(e),t.style.cssText="\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        z-index: -1;\n      ",be.container.appendChild(t)),{el:t,resetHeight:function(){null!=t&&(t.style.height=null==r(be,x)?"100px":"auto")}}}),he.set(this,function(){var e=r(be,x);if(null!=e){var t=0,n=d.seiKeyComparator("BILIMASK__SVGBIN");r(be,j).push(e.on(f.VideoEventType.Destroyed,function(){if(e instanceof f.LivePlayer){var t=e.getVideoEl();r(be,A).changeMaskState(t,!1),r(be,A).clearMask()}}),e.ctrl.onChange(function(e,t){"volume"===e&&be.emit(d.ExternalEventType.VolumeChange,t),r(be,le).call(be,e,t),"show"===e&&be.emit(d.ExternalEventType.CtrlVisibleChange,t)}),e.on(f.VideoEventType.SEIData,function(e){be.emit(d.ExternalEventType.SEIData,e),n(e[2])&&r(be,fe).call(be,e)}),e.on(f.VideoEventType.VideoInfo,function(e){r(be,U).updateVideoTemplate(e),t=e.mediaInfo.videoDataRate}),e.on(f.VideoEventType.LoadStart,d.runOnlyOnce("VideoEventType.LoadStart",function(){be.emit(d.ExternalEventType.FirstLoadStart)})),e.on(f.VideoEventType.MetaData,d.runOnlyOnce("VideoEventType.MetaData",function(){be.emit(d.ExternalEventType.FirstLoadedMetaData)})),e.on(f.VideoEventType.Play,d.runOnlyOnce("VideoEventType.Play",function(){be.emit(d.ExternalEventType.FirstPlaying)})),e.on(f.VideoEventType.WaitStart,function(){var e,n,i=navigator.connection;d.logger.warn("connect downlink is: "+(null!==(e=null==i?void 0:i.downlink)&&void 0!==e?e:-1)+"Mbps,connect rtt is: "+(null!==(n=null==i?void 0:i.rtt)&&void 0!==n?n:-1)+"ms,video bitRate is: "+(t/1024).toFixed(2)+"Mbps")}))}}),me.set(this,function(){P.default.exitFullscreen().catch(function(){console.error("exit fullscreen error")}),be.emit(d.ExternalEventType.WebFullscreen,!1,c.Other)});var Se=this.opts,Te=Se.cid,Ie=Se.roomInitDataV2,Me=Se.rnd,Pe=!0===ye.isActivity?h.PlayerEnv.Activity:h.PlayerEnv.Room,Ce=h.initPlayer(Te,Pe),xe=Ce.userId,Re=Ce.uvid;return r(this,Y).push(d.ajax.watch(h.ajaxWatcher)),l(this,i,xe),l(this,ee,Re),y.default.event(y.default.EventCode.RoomPlayerInit,null,{sampleRate:.5}),null!=Ie&&Ie.code>=0&&l(this,n,Ie.data),l(this,s,Te),l(this,N,new v.default({roomId:Te,userId:xe})),l(this,A,new p.DanmakuBiz(this.container,{userId:xe,rnd:Me,roomId:Te})),r(this,A).connectSocket(r(this,N),function(e){be.emit(d.ExternalEventType.ReceiveMessage,e)}),C.logStorageConfig({uvid:Re,roomId:Te,socket:r(this,N)}),l(this,U,new T.default(this.container)),l(this,H,new M.default(this.container)),l(this,$,new I.default(t)),l(this,B,new S.default(this.container,{uid:xe,version:h.ENV.VERSION,click:e({handleDanmu:r(this,ue)},h.createContextmenuHandler(r(this,H),r(this,U)))})),r(this,Y).push(V(r(this,A),r(this,B))),!1!==(null===(ge=ye.UI)||void 0===ge?void 0:ge.feedback)&&l(this,z,k.default(t,r(this,ae))),!1!==(null===(Ee=ye.UI)||void 0===Ee?void 0:Ee.logo)&&l(this,Q,E.default(this.container)),this.reload().catch(function(e){d.logger.error(e)}),r(this,Y).push(W(),F()),r(this,ce).call(this)}var n,i,s,x,N,A,B,U,H,j,z,Q,G,J,K,Y,X,Z,$,ee,te,ne,ie,ae,oe,re,le,ue,se,ce,de,fe,ve,pe,he,me;return n=new WeakMap,i=new WeakMap,s=new WeakMap,x=new WeakMap,N=new WeakMap,A=new WeakMap,B=new WeakMap,U=new WeakMap,H=new WeakMap,j=new WeakMap,z=new WeakMap,Q=new WeakMap,G=new WeakMap,J=new WeakMap,K=new WeakMap,Y=new WeakMap,X=new WeakMap,Z=new WeakMap,$=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,ie=new WeakMap,ae=new WeakMap,oe=new WeakMap,re=new WeakMap,le=new WeakMap,ue=new WeakMap,se=new WeakMap,ce=new WeakMap,de=new WeakMap,fe=new WeakMap,ve=new WeakMap,pe=new WeakMap,he=new WeakMap,me=new WeakMap,t.isSupported=h.isSupported,t}();function R(t,n,i){var a=n.getCtrlUI();a.danmaku=d.userSetting.getDanmaku(),a.danmaku.showMaskOption=!1;var o=0,r=n.onChange(function(i,r){if("webFullScreenStatus"===i)return clearTimeout(o),o=window.setTimeout(function(){t.resize()},10),void n.hide();"danmaku"===i&&(d.userSetting.setDanmaku(e(e({},a.danmaku),r)),h.updateDanmakuSetting(r,t)),"volume"===i&&d.userSetting.setVolume(e(e({},a.volume),r))}),l=P.default.onChange(function(){clearTimeout(o),o=window.setTimeout(function(){t.resize()},300)});return function(){r(),l(),clearTimeout(o)}}function L(e,t){var n,i,a=t.ctrl.getCtrlUI().line,o=a.list;"number"==typeof a.value&&e.setLines(o,a.value,t.switchLine.bind(t));var r=null===(n=t.replay)||void 0===n?void 0:n.on("timeShiftChange",function(n){"number"==typeof a.value&&n>0&&e.setLines([],a.value,t.switchLine.bind(t))}),l=null===(i=t.replay)||void 0===i?void 0:i.on("backLive",function(){"number"==typeof a.value&&e.setLines(o,a.value,t.switchLine.bind(t))}),u=t.on(d.ExternalEventType.SwitchLine,function(t){e.changeLine(t)});return function(){null==r||r(),null==l||l(),u()}}function V(e,t){return e.onSelect(function(e){return t.updateDanmuInfo(e)}),function(){e.offSelect()}}function _(e,t){var n=this,i=!1,r=e.onChange(function(r,l){return a(n,void 0,void 0,function(){var n;return o(this,function(a){switch(a.label){case 0:return n=e.getCtrlUI(),"fullScreenStatus"!==r?[3,2]:(!1===l&&(i=!0),n.webFullScreenStatus=!1,t.emit(d.ExternalEventType.WebFullscreen,!1,c.Other),n.fullScreenStatus=l,[4,P.default.toggleFullScreen(t.container)]);case 1:return a.sent(),[3,4];case 2:return"webFullScreenStatus"!==r?[3,4]:[4,P.default.exitFullscreen()];case 3:a.sent(),n.fullScreenStatus=!1,t.emit(d.ExternalEventType.WebFullscreen,l,c.Click),a.label=4;case 4:return[2]}})})}),l=P.default.onChange(function(){var n=t.container===P.default.getFullscreenElement();n||i||(e.getCtrlUI().fullScreenStatus=!1),t.emit(d.ExternalEventType.FullscreenChange,n,i?c.Click:c.Esc),i=!1});return function(){l(),r()}}function O(e,t){var n=0,i=!1;d.mediaAction.on("play",function(){a()}),d.mediaAction.on("pause",function(){l()});var a=function(){var a,o;if(clearTimeout(n),i){i=!1;var r=e instanceof f.LivePlayer&&!0===(null===(a=e.replay)||void 0===a?void 0:a.isReplay);d.logger.info("reload when blocked stream, isReplay?: "+String(r)),r?null===(o=e.replay)||void 0===o||o.reload():(e.destroy(),t.reload().catch(function(e){d.logger.error(e)}))}},o=e.on(f.VideoEventType.Play,a),r=e.ctrl.onChange(function(e,t){"playStatus"===e&&(t?a():l())}),l=function(){n=window.setTimeout(function(){d.logger.info("block stream because paused 10 sec"),i=!0,e.blockStream()},1e4)};return function(){o(),r(),clearTimeout(n),i=!1,d.mediaAction.destroy()}}function D(e,t){e.on("danmuInputBlur",function(){t.ctrl.setDmSendIsFocus(!1)}),e.on("danmuInputFocus",function(){t.ctrl.setDmSendIsFocus(!0)})}function W(){var e=function e(){return window.setTimeout(function(){y.default.custom(y.default.CustomCode.HangUp,{time:Math.floor(performance.now()/1e3),visible:"visible"===document.visibilityState?1:0}),clearTimeout(t),t=e()},18e5)},t=e(),n=function(){clearTimeout(t),t=e()};return window.addEventListener("mousemove",n),function(){window.removeEventListener("mousemove",n),clearTimeout(t)}}function F(){var e=setInterval(function(){var e,t,n=navigator.connection;y.default.custom(y.default.CustomCode.NetSpeed,{downlink:null!==(e=null==n?void 0:n.downlink)&&void 0!==e?e:-1,rtt:null!==(t=null==n?void 0:n.rtt)&&void 0!==t?t:-1},{sampleRate:.1})},18e4);return function(){clearInterval(e)}}function q(e){return a(this,void 0,Promise,function(){var t,n;return o(this,function(i){switch(i.label){case 0:if(!["其他问题或建议","黑屏","播放卡顿"].includes(e.type))return[2];t=10,n=[Date.now()-36e5,Date.now()],i.label=1;case 1:return i.trys.push([1,3,,4]),[4,C.reportManyLog({timeRage:n,max:t,reportType:e.type,reportDetails:e.details})];case 2:return i.sent(),[3,4];case 3:return i.sent(),y.default.error(y.default.ErrorCode.ApiBiz,"LogReportFail"),[3,4];case 4:return[2]}})})}exports.RoomPlayer=x,window.Player=x;
},{"@bilibili-live/web-player-common":"KGHo","@bilibili-live/web-player":"DfF7","@bilibili-live/web-player-socket":"MWvE","./danmaku-biz":"ZWNU","./biz-common":"YQ89","./biz-interface":"Rr2x","@bilibili-live/web-player-track":"ESUf","./ui-components/end-recommend-panel":"vDPq","./ui-components/video-logo":"vS7T","./ui-components/feedback":"EORf","./ui-components/error-panel":"E90K","./ui-components/preround-conuter":"weyG","@bilibili-live/web-player-contextmenu":"YNoa","@bilibili-live/web-player-video-info":"SR9Z","@bilibili-live/web-player-danmaku-report":"wafJ","./ui-components/log-panel":"MY3w","./browser-fullscreen":"PTXm","./log-storage":"hY1T"}]},{},["nuNG"], null)
//# sourceMappingURL=/room-player.js.map