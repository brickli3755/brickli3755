"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}if(!window.ActiveXObject&&!("ActiveXObject"in window)){var __getClientLogo=function(){var e,t=JSON.parse(decodeURI(atob("JTVCJTVCJTIyJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLy8lMjIsJTIyJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1QyU1QyU1QyUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC8vJTIyLCUyMiUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlNUMlNUMlNUMlNUMlMjAlMjAlMjAlMjAlMjAlMjAlMjAvLyUyMiwlMjIlMjIlNUQsJTVCJTIyJTIwJTIwJTIwJTIwIyNEREREREREREREREREREREREREREREIyMlMjIsJTIyJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwREREREREREREREREREREREREREQlMjAjIyUyMiwlMjIlMjAlMjAlMjBfX19fX19fXyUyMCUyMCUyMF9fXyUyMCUyMCUyMF9fXyUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMF9fXyUyMCUyMCUyMF9fX19fX19fJTIwJTIwJTIwX19fJTIwJTIwJTIwX19fJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwX19fJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwaGglMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBoaCUyMCMjJTIyLCUyMiUyMCUyMCUyMCU3QyU1QyU1QyUyMCUyMCUyMF9fJTIwJTIwJTVDJTVDJTIwJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTIwJTIwJTIwJTIwJTIwJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTdDJTVDJTVDJTIwJTIwJTIwX18lMjAlMjAlNUMlNUMlMjAlN0MlNUMlNUMlMjAlMjAlNUMlNUMlMjAlN0MlNUMlNUMlMjAlMjAlNUMlNUMlMjAlMjAlMjAlMjAlMjAlMjAlN0MlNUMlNUMlMjAlMjAlNUMlNUMlMjIlNUQsJTVCJTIyJTIwJTIwJTIwJTIwIyMlMjBoaCUyMCUyMCUyMCUyMC8vJTIwJTIwJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTIwJTIwJTIwaGglMjAjIyUyMiwlMjIlMjAlMjAlMjAlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlN0MlNUMlNUMlMjAvXyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMCUyMCUyMCUyMCUyMCU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU3QyU1QyU1QyUyMC9fJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTIwJTIwJTIwJTIwJTIwJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwaGglMjAlMjAlMjAvLyUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1QyU1QyU1QyUyMCUyMCUyMGhoJTIwIyMlMjIsJTIyJTIwJTIwJTIwJTIwJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTIwX18lMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlMjAlMjAlMjAlMjAlMjAlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlMjBfXyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMCUyMCUyMCUyMCUyMCU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAjIyUyMGhoJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaGglMjAjIyUyMiwlMjIlMjAlMjAlMjAlMjAlMjAlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlN0MlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUMlNUMlNUMlMjAlNUMlNUMlMjAlMjAlNUMlNUNfX19fJTIwJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTdDJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDJTVDJTVDJTIwJTVDJTVDJTIwJTIwJTVDJTVDX19fXyUyMCU1QyU1QyUyMCU1QyU1QyUyMCUyMCU1QyU1QyUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAjIyUyMGhoJTIwJTIwJTIwJTIwJTIwJTIwd3d3dyUyMCUyMCUyMCUyMCUyMCUyMGhoJTIwIyMlMjIsJTIyJTIwJTIwJTIwJTIwJTIwJTIwJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTVDJTVDJTIwJTVDJTVDX19fX19fXyU1QyU1QyU1QyU1QyUyMCU1QyU1Q19fJTVDJTVDJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjJTIwaGglMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBoaCUyMCMjJTIyLCUyMiUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMCU1QyU1QyU3Q19fX19fX18lN0MlMjAlNUMlNUMlN0NfXyU3QyUyMiU1RCwlNUIlMjIlMjAlMjAlMjAlMjAjIyUyME1NTU1NTU1NTU1NTU1NTU1NTU1NJTIwIyMlMjIsJTIyJTIyJTVELCU1QiUyMiUyMCUyMCUyMCUyMCMjTU1NTU1NTU1NTU1NTU1NTU1NTU1NTSMjJTIyLCUyMiUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMFJlbGVhc2UlMjAxLjAuMC4lMjBQb3dlcmVkJTIwYnklMjBqaW5rZWxhLWNvcmUlMjAyLjQuOC4lMjIlNUQsJTVCJTIyJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTVDJTVDLyUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1QyU1Qy8lMjIsJTIyJTIyJTVEJTVE"))),i=["%c"],n=[];t.forEach((function(e){var t=e[0],n=e[1];i.push(t+n)})),n=n.concat(["color:#00a1d6"]),n=[i.join("\n")].concat(n),(e=console).log.apply(e,_toConsumableArray(n))};__getClientLogo()}!function(e){function t(t){for(var n,s,l=t[0],r=t[1],c=t[2],M=0,y=[];M<l.length;M++)s=l[M],o[s]&&y.push(o[s][0]),o[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(u&&u(t);y.length;)y.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,l=1;l<i.length;l++){var r=i[l];0!==o[r]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},o={0:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="//s1.hdslb.com/bfs/static/bangumi-timeline/";var l=window.webpackJsonp=window.webpackJsonp||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=r;a.push([33,1]),i()}([,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},,,,,,,,,,,,,,,,,function(e,t,i){e.exports=i(76)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n=i(8);i.n(n).a},function(e,t,i){var n=i(9);i.n(n).a},,function(e,t,i){var n=i(10);i.n(n).a},function(e,t,i){var n=i(11);i.n(n).a},function(e,t,i){var n=i(12);i.n(n).a},function(e,t,i){var n=i(13);i.n(n).a},function(e,t,i){var n=i(14);i.n(n).a},function(e,t,i){var n=i(15);i.n(n).a},function(e,t,i){var n=i(16);i.n(n).a},function(e,t,i){i.r(t);var n=i(5),o=i(19),a=i(2),s=i(6),l=i.n(s),r=i(3),c=i.n(r),u=i(0),M=i.n(u),y=i(17),d=i.n(y),T=function(){try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){return!1}}();function U(e){return e?e.replace(/^http(s)?:/,""):""}function w(e){if(e&&"object"===l()(e)){var t=[];for(var i in e)if(e.hasOwnProperty(i)&&void 0!==e[i]){var n="object"===l()(e[i])?JSON.stringify(e[i]):e[i];t.push("".concat(i,"=").concat(encodeURIComponent(n)))}return t.join("&")}return""}var f,m,p=function(e){var t,i,n=e.url||"",o=n.split("?")[0],a=(t=n.split("?")[1]||"",i={},t&&"string"==typeof t&&t.split("&").forEach((function(e){if(e){var t=e.split("="),n=decodeURIComponent(t[1]);n.indexOf("{")>-1&&(n=JSON.parse(n)),i[t[0]]=n}})),i);return o+"?"+w(Object.assign(a,e.params))},h=function(e){var t,i,n,o={url:(t=e.url,i="undefined"==typeof window,n=i?"http:":window.location.protocol||"https:",t.indexOf(".bilibili.co")>-1?(t.indexOf("-mng.bilibili.co")>-1||t.indexOf("manager.bilibili.co"),/^http(s)?:/.test(t)?t:0===t.indexOf("//")?"".concat(n).concat(t):"".concat(n,"//").concat(t)):"".concat(n,"//api.bilibili.com/").concat(t)),timeout:e.timeout||1e4},a=o.url.indexOf("-mng.bilibili.co")>-1||o.url.indexOf("manager.bilibili.co")>-1;return void 0===e.method&&(e.method="GET"),(e.method&&"GET"===e.method.toUpperCase()&&!1!==e.include||!0===e.include)&&(o.withCredentials=!0),e.params&&(o.params=e.params),e.headers&&e.headers["x1-bilispy-color"]&&(o.headers=Object.assign(o.headers||{},{"x1-bilispy-color":e.headers["x1-bilispy-color"]})),e.headers&&e.headers["x-backend-bili-real-ip"]&&(o.headers=Object.assign({},o.headers||{},{"X-BACKEND-BILI-REAL-IP":e.headers["x-backend-bili-real-ip"]})),e.headers&&e.headers["x-real-ip"]&&(o.headers=Object.assign({},o.headers||{},{"x-real-ip":e.headers["x-real-ip"]})),e.cookies&&(o.withCredentials=!0,o.headers=Object.assign(o.headers||{},{cookie:e.cookies})),e.method&&"GET"===e.method.toUpperCase()?(o.url=p(o),delete o.params,d.a.get(o.url,o).then((function(e){return e})).catch((function(e){return a&&"undefined"!=typeof window&&"Network Error"===e.message&&!window.errorRedirect&&(window.location.href="//".concat("","bangumi-mng.bilibili.co/html/403.html")),{status:404,msg:e.stack}}))):(e.method&&(o.method=e.method),o.method&&o.method.toUpperCase().indexOf("POST")>-1&&(o.headers||(o.headers={}),"MNG-POST"===o.method.toUpperCase()?(o.headers["content-type"]="application/json;charset=UTF-8",o.method="POST",o.data=o.params):(o.headers["content-type"]="application/x-www-form-urlencoded",o.data=o.params instanceof window.FormData?o.params:w(o.params||{})),delete o.params),d()(o).then((function(e){return e})).catch((function(e){return a&&"undefined"!=typeof window&&"Network Error"===e.message&&!window.errorRedirect&&(window.location.href="//".concat("","bangumi-mng.bilibili.co/html/403.html")),{status:404,msg:e.stack}})))},I=i(18),J=(f={},M()(f,"FETCH_LOGIN",(function(e,t){var i=e.commit,n=t.reload,o=void 0!==n&&n;return window.__BILI_USER_INFO__&&!o?i("SET_LOGIN_INFO",window.__BILI_USER_INFO__):h({method:"GET",url:"x/web-interface/nav",params:{ts:(new Date).getTime()},include:!0}).then((function(e){var t={};200===e.status&&e.data&&(t=e.data.data||{},window.__BILI_USER_INFO__||(window.__BILI_USER_INFO__=t)),i("SET_LOGIN_INFO",t)}))})),M()(f,"CHANGE_COUPON_SELECTED",(function(e,t){(0,e.commit)("SET_COUPON_SELECTED",t.couponSelected)})),M()(f,"CHANGE_PAY_GLOBAL",(function(e,t){(0,e.commit)("SET_PAY_GLOBAL",t.pay)})),M()(f,"FETCH_UP_RELATION",(function(e,t){var i=e.commit;return h({method:"GET",url:"x/relation",params:{fid:t.mid},include:!0}).then((function(e){if(200===e.status&&e.data&&0===e.data.code){var t=e.data.data||{};i("SET_UP_RELATION",t)}else i("SET_UP_RELATION",{})}))})),M()(f,"CHANGE_UP_RELATION",(function(e,t){(0,e.commit)("SET_UP_RELATION",{followed:t.followed,attribute:t.attr})})),M()(f,"TRIGGER_FOLLOW",(function(e,t){var i=e.commit,n=t.follow?"add":"del",o={season_id:t.ssId,csrf:I.cookie.get("bili_jct")||""};return h({method:"POST",url:"pgc/web/follow/".concat(n),params:o,include:!0}).then((function(e){200===e.status&&e.data&&0===e.data.code?i("SET_FOLLOW_STAT",{followed:t.follow,status:e.data.result?e.data.result.status:void 0}):(t.errCb&&t.errCb(),window.__Iris__&&window.__Iris__.report({command:"ogv.season.follow.fail",status_code:e.data?e.data.code:e.status,extended_fields:{request:o,response:e,cookie:document.cookie}}))})).catch((function(e){t.errCb&&t.errCb(),window.__Iris__&&window.__Iris__.report({command:"ogv.season.follow.error",extended_fields:{request:o,err:e?e.stack+e.message:"",cookie:document.cookie}})}))})),M()(f,"UPDATE_FOLLOW_STATUS",(function(e,t){(0,e.commit)("SET_FOLLOW_STATUS",t.status)})),function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),i=document.cookie.match(t);return i?unescape(i[2]):null});m={},M()(m,"SET_LOGIN_INFO",(function(e,t){e.loginInfo={isLogin:t.isLogin||!1,face:U(t.face||""),uname:t.uname||"",mid:t.mid||J("DedeUserID"),isVip:(1===t.vipType||2===t.vipType)&&1===t.vipStatus,levelInfo:t.level_info||{},level:t.level_info&&t.level_info.current_level,vipType:t.vipType,vipStatus:t.vipStatus,mobileVerified:t.mobile_verified,vip:t.vip,official:t.official},window&&window.Sentry&&window.Sentry.configureScope((function(t){t.setUser({mid:e.loginInfo.mid||"",uname:e.loginInfo.uname||""})})),e.isLogin=t.isLogin||!1})),M()(m,"SET_COUPON_SELECTED",(function(e,t){e.couponSelected=Object.assign({},e.couponSelected,t)})),M()(m,"SET_PAY_GLOBAL",(function(e,t){e.payGlobal=Object.assign({},e.payGlobal,t)})),M()(m,"SET_UP_RELATION",(function(e,t){void 0===t.followed?e.userState.upFollowed=1===t.attribute||2===t.attribute||6===t.attribute:e.userState.upFollowed=t.followed,e.userState.upAttr=t.attribute})),M()(m,"SET_FOLLOW_STAT",(function(e,t){var i=t.followed,n=t.status;e.userState.followed=i,void 0!==n&&(e.userState.followStatus=n)})),M()(m,"SET_FOLLOW_STATUS",(function(e,t){void 0!==t&&(e.userState.followStatus=t)}));n.a.use(a.a);var C;function _(e){var t={};if("object"!==l()(e)||e instanceof Array)return{};var i=function(i){if(e.hasOwnProperty(i)){var n=i.replace(/([A-Z])/g,"_$1").toUpperCase();t[n]=function(e){return e[i]}}};for(var n in e)i(n);return t}var b,j=(C={},M()(C,"SET_SEASON_TYPE",(function(e,t){e.type=t})),M()(C,"SET_CURRENT_TIME",(function(e,t){e.time=t})),M()(C,"AUTO_INCREASE",(function(e,t){e.time+=t})),M()(C,"SET_TIMELINE",(function(e,t){if(t instanceof Array){if(t.length<=0)return;var i=[],n=0;t.forEach((function(e){var t={date:e.date,date_ts:e.date_ts,day_of_week:e.day_of_week,is_today:e.is_today,seasonMap:{}};e.seasons.length>0?(n=0,e.seasons.forEach((function(e){t.seasonMap[e.pub_time]||(t.seasonMap[e.pub_time]=[]),t.seasonMap[e.pub_time].push(e)}))):t.empty=++n%2+1,i.push(t)})),e.loaded=!0,e.timeline=i}})),C),v=(b={},M()(b,"INITIAL_STATUS",(function(e,t){var i=e.commit,n=(new Date).getTimezoneOffset();i("SET_CURRENT_TIME",new Date((new Date).getTime()+60*n*1e3+288e5).getTime()),i("SET_SEASON_TYPE",t.season)})),M()(b,"AUTO_INCREASE",(function(e,t){(0,e.commit)("AUTO_INCREASE",t.increase)})),M()(b,"FETCH_TIMELINE",(function(e,t){var i=e.commit;return h({url:"//bangumi.bilibili.com/".concat(t.url),include:!0}).then((function(e){200===e.status&&e.data&&i("SET_TIMELINE",e.data.result||[])}))})),b),A={time:0,type:0,timeline:[]},E={state:A,getters:_(A),actions:v,mutations:j};function N(e,t,i){if(window.reportObserver){(t=t||{}).mid=I.cookie.get("DedeUserID");var n=window.reportConfig&&window.reportConfig.msgObjects?window.reportConfig.msgObjects:"";if(window[n])for(var o in e=e||{})if(e.hasOwnProperty(o)){window[n][o+"_"+e[o]]=t;try{window.reportObserver.forceCommit()}catch(e){}}}else setTimeout((function(){N(e,t)}),1e3)}function g(e){if(e)return 0===e.indexOf("//")?window.location.protocol+e:0===e.indexOf("/")?location.origin+e:0===e.indexOf("http")?e:location.href+e}var D={props:{list:Array},methods:{biliReport:function(e,t){t<5?N({click:"subarea"},{ord_id:t+1,url:g(e.link)}):6===t&&N({click:"index"})}}},O=(i(66),i(1)),V=Object(O.a)(D,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bread-crumb"},[i("ul",{staticClass:"clearfix"},e._l(e.list,(function(t,n){return i("li",{key:n,class:{on:"新番时间表"===t.name}},[i("a",{attrs:{href:t.link},domProps:{textContent:e._s(t.name)},on:{click:function(i){return e.biliReport(t,n)}}})])})),0)])}),[],!1,null,null,null).exports,Q={props:{config:Object,dayOfWeek:String}},L=(i(67),{data:function(){return{SCROLL_MAP:{LAST:0,NEXT:1},size:4,width:330,current:0}},computed:{tlBodyStyle:function(){return{width:"".concat(this.maxWidth,"px"),transform:"translateX(-".concat(this.current*this.width,"px)"),WebkitTransform:"translateX(-".concat(this.current*this.width,"px)")}},maxWidth:function(){return 0===this.TIMELINE.length?13*this.width:this.TIMELINE.length*this.width}},created:function(){var e=this;this.$root.$on("timeline-scroll",(function(t){t===e.SCROLL_MAP.LAST?e.slideToLast():t===e.SCROLL_MAP.NEXT&&e.slideToNext()}))},mounted:function(){var e=this,t=i(68)(100,(function(){window.$(window).width()>1400?(e.width=280,e.size=4):(e.width=330,e.size=3)}));"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.$(window).resize(t),t(),setTimeout((function(){e.current=5}),200)},methods:{slideToLast:function(){this.scrollToDom(),this.current=Math.max(0,this.current-this.size)},slideToNext:function(){this.scrollToDom(),this.current=Math.min(this.TIMELINE.length-this.size,this.current+this.size)},scrollToDom:function(){var e=window.$,t=e(".timeline-container").offset().top;e(window).scrollTop()>t&&e("body,html").animate({scrollTop:t},220)}}}),S={components:{SeasonHeader:Object(O.a)(Q,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tl-head"},[i("div",{staticClass:"tl-day",class:{today:e.config.is_today}},[i("span",{staticClass:"indicator"}),e._v(" "),i("div",{staticClass:"day-of-week",class:"week-"+e.config.day_of_week}),e._v(" "),i("span",{staticClass:"t-date",domProps:{textContent:e._s(e.config.date)}}),e._v(" "),i("span",{staticClass:"t-week",domProps:{textContent:e._s(e.dayOfWeek)}})])])}),[],!1,null,null,null).exports},mixins:[L],props:{fixed:Boolean},data:function(){return{weekText:["周一","周二","周三","周四","周五","周六","周日"]}},computed:c()({},Object(a.b)(["TIMELINE"]),{arrowLeft:function(){return 0!==this.current},arrowRight:function(){return this.current<this.TIMELINE.length-this.size}}),watch:{TIMELINE:function(){var e=this;this.TIMELINE.forEach((function(t,i){t.is_today&&(e.current=i-1)}))}},methods:{lastPage:function(){this.$root.$emit("timeline-scroll",this.SCROLL_MAP.LAST),N({click:"page"})},nextPage:function(){this.$root.$emit("timeline-scroll",this.SCROLL_MAP.NEXT),N({click:"page"})}}},x=(i(69),Object(O.a)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"timeline-header",class:{fixed:e.fixed}},[e.arrowLeft?i("div",{staticClass:"arrow-left",on:{click:e.lastPage}}):e._e(),e._v(" "),i("div",{staticClass:"tl-weeks"},[i("ul",{staticClass:"tl-head-list",style:e.tlBodyStyle},e._l(e.TIMELINE,(function(t,n){return i("season-header",{key:n,attrs:{config:t,"day-of-week":e.weekText[t.day_of_week-1]}})})),1)]),e._v(" "),e.arrowRight?i("div",{staticClass:"arrow-right",on:{click:e.nextPage}}):e._e()])}),[],!1,null,null,null).exports),k={props:{time:String,isToday:Boolean,empty:Number}},R=(i(70),Object(O.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"season-group season-empty",class:{today:this.isToday}},[t("div",{staticClass:"season-bg",class:"ball-"+this.empty})])}),[],!1,null,null,null).exports),P={props:{season:Object,delta:Number},computed:{ratio:function(){return function(){var e=1;return"undefined"==typeof window?e:(void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?e=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio),1===e?2:e)}()||2},seasonCover:function(){return function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)return e;var o=e.match(/(.*\.(jpg|jpeg|gif|png))(\?.*)?/),a=-1!==e.indexOf("/bfs/");if(!o||"gif"===o[2]||!a)return U(e);t=Math.ceil(t),i=Math.ceil(i);var s=t&&i?"@"+t+"w_"+i+"h":"@";n&&(s+="_1c");var l=o[3]?o[3]:"";return U(T?o[1]+s+".webp"+l:o[1]+s+"."+o[2]+l)}(this.season.square_cover||this.season.cover,Math.ceil(72*this.ratio),Math.ceil(72*this.ratio))},seasonSsLink:function(){return"//www.bilibili.com/bangumi/play/ss".concat(this.season.season_id)},seasonEpLink:function(){var e=this.season.ep_id?"ep".concat(this.season.ep_id):"ss".concat(this.season.season_id);return 1!==this.season.is_published?"//www.bilibili.com/bangumi/play/ss".concat(this.season.season_id):"//www.bilibili.com/bangumi/play/".concat(e)},seasonEpText:function(){return 1===this.season.delay?this.season.delay_reason:this.season.pub_index&&1===this.season.is_published?this.season.pub_index:this.season.pub_index&&0===this.season.is_published&&this.delta<14400?"即将更新 ".concat(this.season.pub_index):this.season.pub_index}},methods:{biliReport:function(){var e={seasonId:this.season.season_id,title:this.season.title};this.season.is_published&&(e.episodeId=this.season.ep_id),N({click:"works"},e)}}},X=(i(71),{components:{SeasonItem:Object(O.a)(P,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"season-item",class:{delay:1===e.season.delay}},[i("a",{attrs:{href:e.seasonSsLink,target:"_blank",title:e.season.title},on:{click:e.biliReport}},[i("img",{attrs:{src:e.seasonCover}})]),e._v(" "),i("div",{staticClass:"season-body"},[i("a",{attrs:{href:e.seasonSsLink,target:"_blank",title:e.season.title},on:{click:e.biliReport}},[i("div",{staticClass:"season-title",attrs:{title:e.season.title}},[e.season.follow?i("span",{staticClass:"follow"}):e._e(),e._v(e._s(e.season.title)+"\n            ")])]),e._v(" "),i("a",{attrs:{href:e.seasonEpLink,target:"_blank"},on:{click:e.biliReport}},[i("div",{staticClass:"season-desc",class:{published:1===e.season.is_published},domProps:{textContent:e._s(e.seasonEpText)}})])])])}),[],!1,null,null,null).exports},props:{seasonList:Array,time:String,isToday:Boolean,empty:Number},computed:c()({},Object(a.b)(["TIME"]),{delta:function(){return Math.max(0,this.seasonList[0].pub_ts-Math.floor(this.TIME/1e3))},isPublished:function(){return this.seasonList[0].pub_ts<=Math.floor(this.TIME/1e3)},style:function(){var e=this.isPublished?"solid":"dashed";return{"border-left":"1px ".concat(e," #ccc")}}})}),G=(i(72),Object(O.a)(X,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"season-group",class:{"is-published":e.isPublished,today:e.isToday}},[i("div",{staticClass:"group-time",domProps:{textContent:e._s(e.time)}}),e._v(" "),i("ul",{staticClass:"season-list"},e._l(e.seasonList,(function(t,n){return i("season-item",{key:n,attrs:{season:t,delta:e.delta}})})),1)])}),[],!1,null,null,null).exports),F={props:{time:String,isToday:Boolean,empty:Number},data:function(){return{label:"",labelMap:{CN:["你愿意陪我一起看吗？","看番，我不是一个人","是追番的friends呢！","超高校级的观众","会一直在你身边的"],JP:["你愿意陪我一起看吗？","看番，我不是一个人","是追番的friends呢！","超高校级的观众","会一直在你身边的"]}}},computed:c()({},Object(a.b)(["TIME","TYPE"]),{timer:function(){var e=(new Date).getTimezoneOffset(),t=new Date((new Date).getTime()+60*e*1e3+288e5),i=t.getHours(),n=t.getMinutes();return"".concat(this.format(i),":").concat(this.format(n))}}),mounted:function(){this.resetLabel()},methods:{format:function(e){return e<10?"0"+e:e},resetLabel:function(){var e=1===this.TYPE?this.labelMap.CN:this.labelMap.JP,t=e.length,i=Math.floor(Math.random()*t);this.label=e[i]}}},$=(i(73),Object(O.a)(F,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"season-group season-timer today"},[t("div",{staticClass:"current-timer",domProps:{textContent:this._s(this.timer)}}),this._v(" "),t("div",{staticClass:"season-label",domProps:{textContent:this._s(this.label)}})])}),[],!1,null,null,null).exports),B=0,W=1,H=2,z={components:{SeasonGroup:G},props:{timeline:Object},data:function(){return{seasonView:[G,$,R],timerIndex:-1,seasonList:[]}},computed:c()({},Object(a.b)(["TIME"]),{isToday:function(){return 1===this.timeline.is_today}}),watch:{TIME:"seasonListChanged"},mounted:function(){this.seasonListChanged()},methods:{seasonListChanged:function(){var e=this.timeline.seasonMap,t=0,i=[],n=Math.floor(this.TIME/1e3),o=0,a=!1;for(var s in e)if(e.hasOwnProperty(s)&&e[s]&&e[s][0]){if(this.isToday){var l=e[s][0];!a&&n>o&&n<=l.pub_ts&&(t=i.length,i.push({type:W}),a=!0),o=l.pub_ts}i.push({type:B,key:s})}return i.length>0?!a&&this.isToday&&(t=i.length,i.push({type:W})):i.push({type:H}),this.timerIndex!==t&&(this.seasonList=i,this.timerIndex=t),i}}},Y={components:{SeasonTimeline:Object(O.a)(z,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition-group",{staticClass:"season-timeline",attrs:{tag:"div"}},e._l(e.seasonList,(function(t,n){return i(e.seasonView[t.type],{key:e.timeline.date+"_"+n,tag:"component",attrs:{time:t.key,"is-today":e.isToday,empty:e.timeline.empty,"season-list":e.timeline.seasonMap[t.key]}})})),1)}),[],!1,null,null,null).exports},mixins:[L],computed:c()({},Object(a.b)(["TIMELINE"]))},q=(i(74),Object(O.a)(Y,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"timeline-wrapper clearfix"},[t("div",{staticClass:"tl-body-list clearfix",style:this.tlBodyStyle},this._l(this.TIMELINE,(function(e,i){return t("season-timeline",{key:i,attrs:{timeline:e}})})),1)])}),[],!1,null,null,null).exports),Z="web_api/timeline_global",K="web_api/timeline_cn",ee={components:{BreadCrumb:V,TimelineHeader:x,TimelineWrapper:q},asyncData:function(e){var t=e.store,i=(e.route,0===e.context.path.indexOf("/anime")?0:1);return Promise.all([t.dispatch({type:"INITIAL_STATUS",season:i})])},data:function(){return{fixed:!1,breadCrumbAnime:[{name:"全部",link:"//www.bilibili.com/anime/"},{name:"连载动画",link:"//www.bilibili.com/v/anime/serial/"},{name:"完结动画",link:"//www.bilibili.com/v/anime/finish/"},{name:"资讯",link:"//www.bilibili.com/v/anime/information/"},{name:"官方延伸",link:"//www.bilibili.com/v/anime/offical/"},{name:"新番时间表",link:"javascript:void(0)"},{name:"番剧索引",link:"//www.bilibili.com/anime/index/"}],breadCrumbGC:[{name:"全部",link:"//www.bilibili.com/guochuang/"},{name:"国产动画",link:"//www.bilibili.com/v/guochuang/chinese/"},{name:"国产原创相关",link:"//www.bilibili.com/v/guochuang/original/"},{name:"布袋戏",link:"//www.bilibili.com/v/guochuang/puppetry/"},{name:"动态漫·广播剧",link:"//www.bilibili.com/v/guochuang/motioncomic/"},{name:"资讯",link:"//www.bilibili.com/v/guochuang/information/"},{name:"新番时间表",link:"javascript:void(0)"},{name:"国产动画索引",link:"//www.bilibili.com/guochuang/index/"}]}},computed:c()({},Object(a.b)(["TYPE"]),{breadCrumbList:function(){return 0===this.TYPE?this.breadCrumbAnime:this.breadCrumbGC}}),mounted:function(){var e=this;this.$store.dispatch({type:"FETCH_TIMELINE",url:0===this.TYPE?Z:K}),this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.$store.dispatch({type:"AUTO_INCREASE",increase:1e3})}),1e3),this.addScrollEvents()},methods:{addScrollEvents:function(){var e=this,t=window.$,i=t(".timeline-container").offset().top;t(window).scroll((function(){var t=Math.max(document.body.scrollTop||document.documentElement.scrollTop);e.fixed=t>i}))}}},te=(i(75),Object(O.a)(ee,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("bread-crumb",{attrs:{list:this.breadCrumbList}}),this._v(" "),t("div",{staticClass:"timeline-container"},[t("timeline-header",{attrs:{fixed:this.fixed}}),this._v(" "),t("timeline-wrapper")],1)],1)}),[],!1,null,null,null).exports);n.a.use(o.a),n.a.use(a.a);window.iris&&window.iris({app_key:"web_ogv",group:"bangumi",autoPref:!0,exclude:[],sample:{net:.1,custom:1},rateLimit:500,env:"production"});var ie=window.Sentry;ie&&ie.init({dsn:"http://373cb7c94ed7411cbbc344ae210786aa@api.bilibili.com/x/traceback/93",debug:!1,release:"904cbf0f1454e6eb75fcc918bc30316a06817769",environment:"pre"===Object({NODE_ENV:"production",COMMIT_ID:"904cbf0f1454e6eb75fcc918bc30316a06817769",VUE_ENV:"client"}).PUSH_ENV?"pre":"production",sampleRate:.2,integrations:[new ie.Integrations.InboundFilters({ignoreErrors:[/Network Error/,/(SECURITY_ERR|SecurityError|Illegal invocation|The operation is)/,/\$ is not a function/,/Invalid or unexpected/,/UnhandledRejection/,/QuotaExceededError/,/WebViewJavascriptBridge/,/__tv_keydown/,/jinkela\/header\/header.js/,/jinkela\/header-v2\/header.js/,/.js.map/,/\/bfs\/static\/player\/main/,/\/bfs\/static\/pcdnjs/,/dash-player\/release\/dash-player/,/moz-extension/,/chrome-extension/,/comment.min.js/,/(WindVaneAvailableInteractedTime|moz-extension|chrome-extension)/,/Loading chunk \d+ failed/,/share_ipad/]}),new ie.Integrations.Vue({Vue:n.a,attachProps:!0})]});var ne,oe,ae,se=(oe=new a.a.Store(E),ae=new o.a({mode:"history",routes:[{name:"anime",path:"/anime/timeline",component:te},{name:"guochuang",path:"/guochuang/timeline",component:te}]}),{app:new n.a({store:oe,router:ae,ssrContext:ne,render:function(e){return e(te)}}),router:ae,store:oe}),le=se.app,re=se.router,ce=se.store;if(window.__INITIAL_STATE__)ce.replaceState(window.__INITIAL_STATE__);else{var ue=re.getMatchedComponents().map((function(e){return e.asyncData&&e.asyncData({store:ce,route:re.currentRoute,context:{params:{type:"anime"},path:window.location.pathname,ua:window.navigator.userAgent}})}));Promise.all(ue).then((function(){le.$mount("#client-app")})).catch()}re.onReady((function(){re.beforeResolve((function(e,t,i){var n=re.getMatchedComponents(e),o=re.getMatchedComponents(t),a=!1,s=n.filter((function(e,t){return a||(a=o[t]!==e)}));s.length?Promise.all(s.map((function(t){if(t.asyncData)return t.asyncData({store:ce,route:e,context:{ua:window.navigator.userAgent}})}))).then((function(){i()})).catch(i):i()})),window&&window.document.getElementById("app")&&le.$mount("#app")}))}]);
//# sourceMappingURL=bangumi-timeline.904cbf0f1454e6eb75fcc918bc30316a06817769.js.map